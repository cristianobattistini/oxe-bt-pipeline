{
  "dataset_id": "imperialcollege_sawyer_wrist_cam_0.1.0",
  "episode_id": "episode_006",
  "task_summary": "Pick up the cup and insert it into the dishwasher basket, finishing with a retreat.",
  "task_long_description": {
    "overview": "The robot is tasked with placing a cup inside the open rack of a dishwasher as seen from its wrist-mounted camera. The process starts by visually locating the cup and the dishwasher rack, then approaching, grasping, and finally placing the cup into the dishwasher’s basket. Actions are constrained by the physical geometry of the objects, the open gripper’s width, robot motion limits, and the need for robust perception.",
    "preconditions": [
      "Cup is present and visible in workspace",
      "Dishwasher rack is open and accessible",
      "Gripper is empty"
    ],
    "stepwise_plan": [
      "Locate cup in camera view; reacquire if lost",
      "Open gripper, approach above cup",
      "Compute grasp pose and align to cup",
      "Pick (grasp and lift) cup",
      "Locate dishwasher in camera view; reacquire if lost",
      "Move above dishwasher rack",
      "Place cup down into dishwasher, inside basket",
      "Release gripper",
      "Retreat from dishwasher basket area"
    ],
    "success_criteria": [
      "Cup is stably released inside dishwasher basket",
      "No collisions occur with dishwasher or environment",
      "Robot safely retreats"
    ],
    "failure_and_recovery": [
      "Cup not detected: Re-scan up to 3 times",
      "Grasp unsuccessful: Task aborts",
      "Dishwasher location not detected: Retry detection",
      "Blockage/contact: Task aborts"
    ],
    "termination": "After cup is released in the dishwasher and the robot has retreated"
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "put cup in dishwasher",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["cup", "dishwasher"],
  "objects_from_instruction": ["cup", "dishwasher"],
  "blackboard_keys": ["grasp_cup"],
  "node_specs": [
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"cup"},"description":"Checks if cup is visible."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"cup","pattern":"grid","max_attempts":3,"timeout_ms":1000},"description":"Performs grid pattern scan for cup."},
    {"id":"DetectObject","type":"Action","ports":{"target":"cup","timeout_ms":800},"description":"Detects cup location precisely."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.08,"timeout_ms":500},"description":"Opens gripper to 8cm."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"cup","offset_z":0.10,"timeout_ms":1500},"description":"Moves gripper above cup by 10cm."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"cup","strategy":"top","result_key":"grasp_cup"},"description":"Computes top grasp pose for cup."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"cup","tolerance":0.005,"timeout_ms":1500},"description":"Aligns gripper to cup with fine tolerance."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"std_top","timeout_ms":2000},"description":"Picks up cup from computed pose."},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"dishwasher"},"description":"Checks if dishwasher is visible."},
    {"id":"DetectObject","type":"Action","ports":{"target":"dishwasher","timeout_ms":800},"description":"Detects dishwasher location."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"dishwasher","offset_z":0.10,"timeout_ms":1500},"description":"Moves above dishwasher basket."},
    {"id":"PlaceDown","type":"Action","ports":{"target":"dishwasher","timeout_ms":1500},"description":"Places cup down in dishwasher."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.08,"timeout_ms":500},"description":"Opens gripper to release cup."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.10,"timeout_ms":1200},"description":"Retreats from dishwasher basket."}
  ],
  "tree_stats": {"nodes_total": 15, "actions": 12, "conditions": 2, "depth": 3},
  "failure_modes": [
    "Cup not detected after retries",
    "Cup grasp fails",
    "Dishwasher not detected",
    "Gripper jam/blockage",
    "Cup dropped outside dishwasher"
  ],
  "recovery_strategy": [
    "Scan for cup up to 3 times if not visible",
    "Retry dishwasher detection once if initial attempt fails",
    "Abort if grasp or place fails, or if obstacles block movement"
  ],
  "assumptions": [
    "Frames 0-2: Cup is not yet in dishwasher; interaction starts from approach.",
    "Frames 3-6: Cup is moved toward and into dishwasher rack.",
    "Dishwasher basket is open and interpreted as 'dishwasher' target.",
    "Cup is graspable from top for standard pick.",
    "No explicit open/close of dishwasher needed in this sequence."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Cup stably inside dishwasher basket after release and retreat"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"cup","pattern":"grid","max_attempts":3,"timeout_ms":1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"cup","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"cup","offset_z":0.10,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"std_top","timeout_ms":2000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"dishwasher","offset_z":0.10,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "place",
      "active_leaf": {"id":"PlaceDown","attrs":{"target":"dishwasher","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.08,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.10,"timeout_ms":1200}},
      "active_path_ids": []
    }
  ]
}