{
  "dataset_id": "imperialcollege_sawyer_wrist_cam_0.1.0",
  "episode_id": "episode_070",
  "task_summary": "This behavior tree performs the 'pick up mug' task by visually acquiring the mug, preparing the gripper, moving above the target, computing the grasp, executing the grasp, and confirming mug-in-gripper.",
  "task_long_description": {
    "overview": "A robot arm equipped with a gripper and wrist camera is tasked with picking up a single white mug from a blue surface. The mug's pose must first be visually located. The robot then prepares the gripper, moves in alignment above the mug, computes an appropriate grasp pose, executes the grasp, and confirms the mug is securely held. The process is staged and includes detection, approach, and grasp verification. The mug is the only object present. No other obstacles or distractors are visible. Robust perception and secure grasp are required.",
    "preconditions": [
      "Mug available and unobstructed on surface",
      "Robot arm and wrist camera operational",
      "Gripper initialized in open state"
    ],
    "stepwise_plan": [
      "Locate mug using visual feedback; retry scan if mug not visible",
      "Detect mug precisely",
      "Open gripper for grasping",
      "Move tool center point above mug to pregrasp position",
      "Compute optimal top-down grasp pose for mug",
      "Execute grasp motion and close gripper",
      "Verify that mug is held securely in the gripper"
    ],
    "success_criteria": [
      "Mug is detected and localized",
      "Gripper closes on mug with stable hold",
      "ObjectInGripper condition returns true"
    ],
    "failure_and_recovery": [
      "If mug is not initially visible, perform up to 3 scan attempts",
      "If grasp fails, task aborts (further recovery actions could be added)"
    ],
    "termination": "Behavior ends when mug is held in gripper and ObjectInGripper returns true."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "pick up mug",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["mug"],
  "objects_from_instruction": ["mug"],
  "blackboard_keys": ["grasp_mug"],
  "node_specs": [
    {
      "id": "IsObjectVisible",
      "type": "Condition",
      "ports": {"target":"mug"},
      "description":"Returns SUCCESS if mug is visible to camera"
    },
    {
      "id": "ScanForTarget",
      "type": "Action",
      "ports": {"target":"mug","pattern":"line","max_attempts":3,"timeout_ms":1000},
      "description":"Actively looks for mug using raster scan pattern"
    },
    {
      "id": "DetectObject",
      "type": "Action",
      "ports": {"target":"mug","timeout_ms":800},
      "description":"Detects mug using visual algorithms"
    },
    {
      "id": "OpenGripper",
      "type": "Action",
      "ports": {"width":0.06,"timeout_ms":500},
      "description":"Opens gripper to 0.06m for mug grasp preparation"
    },
    {
      "id": "MoveAbove",
      "type": "Action",
      "ports": {"target":"mug","offset_z":0.05,"timeout_ms":1500},
      "description":"Moves to a point above mug with 5cm clearance"
    },
    {
      "id": "ComputeGraspPose",
      "type": "Action",
      "ports": {"target":"mug","strategy":"top","result_key":"grasp_mug"},
      "description":"Computes ideal grasp pose for vertical grasp"
    },
    {
      "id": "GraspAtPose",
      "type": "Action",
      "ports": {"pose_key":"grasp_mug","strategy":"top","timeout_ms":1000},
      "description":"Executes grasp motion based on computed pose"
    },
    {
      "id": "ObjectInGripper",
      "type": "Condition",
      "ports": {"target":"mug"},
      "description":"Verifies mug is securely held by gripper"
    }
  ],
  "tree_stats": {"nodes_total":8,"actions":6,"conditions":2,"depth":2},
  "failure_modes": [
    "Mug occluded or not visible to wrist camera",
    "Detection fails (vision errors)",
    "Gripper does not open or close as commanded",
    "Grasp computation yields invalid pose",
    "Grasp execution fails (misalignment or collision)",
    "ObjectInGripper returns failure"
  ],
  "recovery_strategy": [
    "Retry visual scan up to 3 times",
    "Abort task if after retries mug not found or grasp fails"
  ],
  "assumptions": [
    "Frames show mug in isolated scene; no obstructions detected.",
    "Instruction and frames are consistentâ€”mug visible throughout, no other objects.",
    "No place/transfer actions observed (focus on pick-up only)."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Gripper closes on mug and ObjectInGripper returns true"
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"mug"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"mug","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "verify",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.06,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"mug","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "approach",
      "active_leaf": {"id":"ComputeGraspPose","attrs":{"target":"mug","strategy":"top","result_key":"grasp_mug"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"GraspAtPose","attrs":{"pose_key":"grasp_mug","strategy":"top","timeout_ms":1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "grasp",
      "active_leaf": {"id":"GraspAtPose","attrs":{"pose_key":"grasp_mug","strategy":"top","timeout_ms":1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "transfer",
      "active_leaf": {"id":"ObjectInGripper","attrs":{"target":"mug"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "transfer",
      "active_leaf": {"id":"ObjectInGripper","attrs":{"target":"mug"}},
      "active_path_ids": []
    }
  ]
}