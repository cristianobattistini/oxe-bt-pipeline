{
  "dataset_id": "imperialcollege_sawyer_wrist_cam_0.1.0",
  "episode_id": "episode_089",
  "task_summary": "Pick up the pan by perceiving its location, aligning, executing a top grasp, and verifying possession.",
  "task_long_description": {
    "overview": "A robot arm must locate and pick up a pan from a blue surface. The robot uses visual perception to detect the pan, computes a suitable top grasp, aligns the end-effector, and secures the pan using its gripper. The process involves verification at each step and is robust to initial failures in perceiving or grasping. The task is complete when the robot confirms the pan is securely held.",
    "preconditions": [
      "Pan is present and not occluded",
      "Gripper is empty and operational",
      "Visual system is functional"
    ],
    "stepwise_plan": [
      "Check if pan is visible; scan if not",
      "Detect precise pan pose",
      "Open gripper",
      "Move to position above pan",
      "Compute a top grasp for the pan",
      "Approach and align to the pan",
      "Execute grasp at computed pose with top strategy",
      "Verify pan is in gripper"
    ],
    "success_criteria": [
      "Pan is firmly grasped by the gripper",
      "No accidental displacement or dropped object",
      "No collision with environment"
    ],
    "failure_and_recovery": [
      "Failure to detect pan: retry scan for up to three attempts",
      "Failure on grasp: no recovery in this plan (see assumptions)"
    ],
    "termination": "Task terminates when the 'ObjectInGripper' condition for the pan passes."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "pick up pan",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["pan"],
  "objects_from_instruction": ["pan"],
  "blackboard_keys": ["std_top"],
  "node_specs": [
    {
      "id": "IsObjectVisible",
      "type": "Condition",
      "ports": {"target":"pan"},
      "description": "Checks if the pan is currently visible to the vision system"
    },
    {
      "id": "ScanForTarget",
      "type": "Action",
      "ports": {"target":"pan", "pattern":"raster", "max_attempts":3, "timeout_ms":1200},
      "description": "Scans for the pan in the environment using a raster search pattern"
    },
    {
      "id": "DetectObject",
      "type": "Action",
      "ports": {"target":"pan", "timeout_ms":800},
      "description": "Detects the pan and provides its pose estimate"
    },
    {
      "id": "OpenGripper",
      "type": "Action",
      "ports": {"width":0.06, "timeout_ms":500},
      "description": "Opens the gripper to a moderate width for pan grasp"
    },
    {
      "id": "MoveAbove",
      "type": "Action",
      "ports": {"target":"pan", "offset_z":0.10, "timeout_ms":1500},
      "description": "Moves the end-effector directly above the pan at 10cm offset in Z"
    },
    {
      "id": "ComputeGraspPose",
      "type": "Action",
      "ports": {"target":"pan", "strategy":"top", "result_key":"std_top"},
      "description": "Computes the top grasp pose for the pan and saves it to the blackboard"
    },
    {
      "id": "ApproachAndAlign",
      "type": "Action",
      "ports": {"target":"pan", "tolerance":0.005, "timeout_ms":1500},
      "description": "Carefully aligns and approaches the pan with 5mm tolerance"
    },
    {
      "id": "GraspAtPose",
      "type": "Action",
      "ports": {"pose_key":"std_top", "strategy":"top", "timeout_ms":800},
      "description": "Executes the top grasp at the computed grasp pose"
    },
    {
      "id": "ObjectInGripper",
      "type": "Condition",
      "ports": {"target":"pan"},
      "description": "Checks that the pan is held in the gripper"
    }
  ],
  "tree_stats": {
    "nodes_total": 13,
    "actions": 7,
    "conditions": 2,
    "depth": 4
  },
  "failure_modes": [
    "Pan not visible",
    "Vision-based detection fails or is inaccurate",
    "Grasp pose cannot be computed",
    "Approach blocked or not possible",
    "Grasp failed (pan not secured)"
  ],
  "recovery_strategy": [
    "Retry ScanForTarget up to three times if pan is not visible"
  ],
  "assumptions": [
    "Contact sheet shows the pan unoccluded on a blue background; no competing objects are present.",
    "Exact grasp verification beyond ObjectInGripper (e.g. force, stability) is not represented in the instruction or frames.",
    "No explicit force or quick/precision requirements inferred from task or imagery."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Pan is securely in the gripper after final action"
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": {
    "model_reported_tokens": null,
    "client_elapsed_ms": null
  },
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {
        "id": "IsObjectVisible",
        "attrs": {"target": "pan"}
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {
        "id": "ScanForTarget",
        "attrs": {"target":"pan", "pattern":"raster", "max_attempts":3, "timeout_ms":1200}
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "perceive",
      "active_leaf": {
        "id": "DetectObject",
        "attrs": {"target":"pan", "timeout_ms":800}
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {
        "id": "OpenGripper",
        "attrs": {"width":0.06, "timeout_ms":500}
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "approach",
      "active_leaf": {
        "id": "MoveAbove",
        "attrs": {"target":"pan", "offset_z":0.10, "timeout_ms":1500}
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "verify",
      "active_leaf": {
        "id": "ComputeGraspPose",
        "attrs": {"target":"pan", "strategy":"top", "result_key":"std_top"}
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "grasp",
      "active_leaf": {
        "id": "ApproachAndAlign",
        "attrs": {"target":"pan", "tolerance":0.005, "timeout_ms":1500}
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "grasp",
      "active_leaf": {
        "id": "GraspAtPose",
        "attrs": {"pose_key":"std_top", "strategy":"top", "timeout_ms":800}
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "verify",
      "active_leaf": {
        "id": "ObjectInGripper",
        "attrs": {"target":"pan"}
      },
      "active_path_ids": []
    }
  ]
}