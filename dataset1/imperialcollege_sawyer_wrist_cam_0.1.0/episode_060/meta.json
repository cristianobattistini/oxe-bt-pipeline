{
  "dataset_id": "imperialcollege_sawyer_wrist_cam_0.1.0",
  "episode_id": "episode_060",
  "task_summary": "Insert a slice of toast into the slot of a toaster using a robot arm, as observed in sequential wrist camera images.",
  "task_long_description": {
    "overview": "The task involves a robot arm identifying, grasping, and inserting a slice of toast into a vertical slot in a toaster. The environment consists of a toaster with clearly visible slots on a blue surface and a piece of toast that transitions from nearby to inside the slot. The robot must plan, perceive, and execute precise manipulations with adequate force and alignment, reacting to feedback (such as visual confirmation of insertion). Constraints include precise grasping and gentle insertion to avoid damaging the toast or toaster.",
    "preconditions": [
      "Toaster and toast are present in workspace",
      "Toaster slot is accessible and unobstructed",
      "Gripper is initially open"
    ],
    "stepwise_plan": [
      "Locate and perceive the toast",
      "Open gripper",
      "Compute grasp pose and approach toast",
      "Grasp toast securely",
      "Verify stable grasp",
      "Detect toaster slot",
      "Insert toast into slot with correct force and alignment",
      "Verify insertion",
      "Release toast and retreat"
    ],
    "success_criteria": [
      "Toast is securely placed within toaster slot",
      "Toast remains upright and undamaged",
      "Robot retreats safely after insertion"
    ],
    "failure_and_recovery": [
      "Fail to detect toast: scan with retries",
      "Grasp fails: recompute grasp pose and retry",
      "Insertion fails or resistance detected: retry insertion with lower force or gentle adjustment",
      "Toast misaligned: retreat and realign"
    ],
    "termination": "Task ends when toast is inserted and released, and arm retreats."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "insert toast",
  "instruction_to_ports": {
    "force": 5,
    "timeout_ms": 1200,
    "tolerance": 0.002,
    "retry_attempts": 3
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["toast", "toaster", "toaster_slot"],
  "objects_from_instruction": ["toast"],
  "blackboard_keys": ["grasp_toast"],
  "node_specs": [
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"toast"},"description":"Checks if toast is visible."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"toast","pattern":"raster","max_attempts":3,"timeout_ms":1200},"description":"Scans workspace to locate toast."},
    {"id":"DetectObject","type":"Action","ports":{"target":"toast","timeout_ms":800},"description":"Detects toast location."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.06,"timeout_ms":500},"description":"Opens gripper for grasping."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"toast","strategy":"top","result_key":"grasp_toast"},"description":"Computes optimal grasp pose for toast."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"toast","tolerance":0.002,"timeout_ms":1500},"description":"Approaches toast and aligns end-effector."},
    {"id":"GraspAtPose","type":"Action","ports":{"pose_key":"grasp_toast","strategy":"top","timeout_ms":1000},"description":"Executes grasp at pose."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Checks if current grasp is stable."},
    {"id":"DetectObject","type":"Action","ports":{"target":"toaster_slot","timeout_ms":800},"description":"Detects toaster slot location."},
    {"id":"InsertInto","type":"Action","ports":{"target":"toast","slot_id":"toaster_slot","axis":"z","distance":0.05,"tolerance":0.002,"force_limit":5,"timeout_ms":1200},"description":"Inserts toast into toaster slot along z axis."},
    {"id":"Inserted","type":"Condition","ports":{"target":"toast","slot_id":"toaster_slot"},"description":"Checks if toast is inserted in slot."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.08,"timeout_ms":500},"description":"Releases toast after insertion."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.10,"timeout_ms":1200},"description":"Retracts arm from toaster."}
  ],
  "tree_stats": {"nodes_total": 15, "actions": 10, "conditions": 3, "depth": 14},
  "failure_modes": [
    "Toast not detected",
    "Failed to grasp toast",
    "Toast slips or breaks during grasp",
    "Toaster slot detection fails",
    "Insertion misaligned or obstructed"
  ],
  "recovery_strategy": [
    "Retry detection with ScanForTarget",
    "Retry compute and grasp sequence",
    "Retreat and realign for insertion",
    "Lower force and reattempt insertion"
  ],
  "assumptions": [
    "Frames [0]-[8] show toast moved towards and then into slot of a real toaster (vertical orientation, red/black livery).",
    "Instruction implied but no explicit directionality; slot deemed 'toaster_slot' for InsertInto.",
    "Toast and slot both visually identifiable throughout.",
    "No evidence for mechanical failure or force sensor feedback in frames, lowest allowed force used for insertion.",
    "No evidence of need for rotational adjustment during insertion."
  ],
  "evaluation_notes": {
    "expected_success_criteria": ["Toast is fully inside slot after sequence", "Robot arm releases and retreats"],
    "test_scenarios": ["happy path", "object_missing", "grasp_fail", "perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id": "ScanForTarget", "attrs": {"target": "toast", "pattern": "raster", "max_attempts": 3, "timeout_ms": 1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id": "DetectObject", "attrs": {"target": "toast", "timeout_ms": 800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id": "OpenGripper", "attrs": {"width": 0.06, "timeout_ms": 500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id": "ComputeGraspPose", "attrs": {"target": "toast", "strategy": "top", "result_key": "grasp_toast"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "verify",
      "active_leaf": {"id": "ApproachAndAlign", "attrs": {"target": "toast", "tolerance": 0.002, "timeout_ms": 1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id": "GraspAtPose", "attrs": {"pose_key": "grasp_toast", "strategy": "top", "timeout_ms": 1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id": "InsertInto", "attrs": {"target": "toast", "slot_id": "toaster_slot", "axis": "z", "distance": 0.05, "tolerance": 0.002, "force_limit": 5, "timeout_ms": 1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id": "OpenGripper", "attrs": {"width": 0.08, "timeout_ms": 500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id": "Retreat", "attrs": {"distance": 0.10, "timeout_ms": 1200}},
      "active_path_ids": []
    }
  ]
}