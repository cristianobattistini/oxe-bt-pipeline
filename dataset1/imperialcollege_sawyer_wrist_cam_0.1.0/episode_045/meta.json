{
  "dataset_id": "imperialcollege_sawyer_wrist_cam_0.1.0",
  "episode_id": "episode_045",
  "task_summary": "Sequential visual-guided pick up of a kettle by a robot arm, starting from detection to verified grasp.",
  "task_long_description": {
    "overview": "This episode depicts a robot arm tasked to pick up a kettle from a flat surface (blue background). Across 9 frames, the robot positions its end-effector above the kettle, aligns, computes and executes a top grasp, then verifies that the kettle is in its gripper. The behavior tree ensures initial visual detection (with recovery scan attempts), precise approach from above, and grasp verification. The robot adapts its actions based on visibility, utilizing retries if the kettle is occluded or misdetected. Constraints include object visibility and stable grasp.",
    "preconditions": [
      "Kettle is placed upright and unobstructed on a blue surface",
      "Robot arm is initialized and gripper is open",
      "End-effector is in range"
    ],
    "stepwise_plan": [
      "Check for visibility of the kettle",
      "Scan for kettle if not immediately visible (up to 3 times)",
      "Detect precise object pose for the kettle",
      "Open gripper to prepare for grasp",
      "Move end-effector above kettle with sufficient vertical offset",
      "Compute top-down grasp pose",
      "Approach and align to target grasp pose with tight tolerance",
      "Execute grasp by moving to computed pose and closing gripper",
      "Verify kettle is held by checking object in gripper"
    ],
    "success_criteria": [
      "Kettle is firmly secured in the gripper",
      "Grasp pose matches planned top strategy",
      "No collision or dropped object during sequence"
    ],
    "failure_and_recovery": [
      "Failure to detect: retry scan up to 3 times",
      "Grasp slip: abort and return to initial pose",
      "Occlusion: fallback to scanning for visibility"
    ],
    "termination": "Sequence terminates once kettle detected in gripper after executed grasp."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "pick up kettle",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": 0.005,
    "retry_attempts": 3
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["kettle"],
  "objects_from_instruction": ["kettle"],
  "blackboard_keys": ["std_top"],
  "node_specs": [
    {
      "id": "IsObjectVisible",
      "type": "Condition",
      "ports": { "target": "kettle" },
      "description": "Checks if kettle is visible to sensors"
    },
    {
      "id": "ScanForTarget",
      "type": "Action",
      "ports": { "target": "kettle", "pattern": "grid", "max_attempts": 3, "timeout_ms": 1200 },
      "description": "Scans workspace for kettle using grid pattern, retries up to 3 times"
    },
    {
      "id": "DetectObject",
      "type": "Action",
      "ports": { "target": "kettle", "timeout_ms": 800 },
      "description": "Performs precise detection/localization of kettle"
    },
    {
      "id": "OpenGripper",
      "type": "Action",
      "ports": { "width": 0.06, "timeout_ms": 500 },
      "description": "Opens gripper to standard pre-grasp width"
    },
    {
      "id": "MoveAbove",
      "type": "Action",
      "ports": { "target": "kettle", "offset_z": 0.05, "timeout_ms": 1500 },
      "description": "Moves gripper above kettle with 5cm vertical offset"
    },
    {
      "id": "ComputeGraspPose",
      "type": "Action",
      "ports": { "target": "kettle", "strategy": "top", "result_key": "std_top" },
      "description": "Computes top-down grasp pose for kettle"
    },
    {
      "id": "ApproachAndAlign",
      "type": "Action",
      "ports": { "target": "kettle", "tolerance": 0.005, "timeout_ms": 1500 },
      "description": "Approaches kettle and aligns to planned top pose with tight tolerance"
    },
    {
      "id": "GraspAtPose",
      "type": "Action",
      "ports": { "pose_key": "std_top", "strategy": "top", "timeout_ms": 800 },
      "description": "Executes grasp at computed pose"
    },
    {
      "id": "ObjectInGripper",
      "type": "Condition",
      "ports": { "target": "kettle" },
      "description": "Verifies kettle is held after grasp"
    }
  ],
  "tree_stats": { "nodes_total": 9, "actions": 7, "conditions": 2, "depth": 2 },
  "failure_modes": [
    "Kettle not detected",
    "Gripper fails to open",
    "Approach misaligned",
    "Grasp missed or object not secured"
  ],
  "recovery_strategy": [
    "Retry scan up to 3 times",
    "Abort sequence if object not in gripper",
    "Fallback to open gripper if misalignment detected"
  ],
  "assumptions": [
    "All frames show the kettle in a central, unobstructed position",
    "No dynamic or occluding elements present across sequence",
    "Instruction matches visual evidenceâ€”only kettle present, no kettle base intervention required"
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Kettle detected and stably held by gripper",
      "Sequence proceeds without misdetection or failed grasp"
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": { "model_reported_tokens": null, "client_elapsed_ms": null },
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"kettle"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"kettle","pattern":"grid","max_attempts":3,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"kettle","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.06,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"kettle","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "verify",
      "active_leaf": {"id":"ComputeGraspPose","attrs":{"target":"kettle","strategy":"top","result_key":"std_top"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "grasp",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"kettle","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "grasp",
      "active_leaf": {"id":"GraspAtPose","attrs":{"pose_key":"std_top","strategy":"top","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "verify",
      "active_leaf": {"id":"ObjectInGripper","attrs":{"target":"kettle"}},
      "active_path_ids": []
    }
  ]
}