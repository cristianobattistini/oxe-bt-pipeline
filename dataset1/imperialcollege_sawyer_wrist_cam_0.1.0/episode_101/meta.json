{
  "dataset_id": "imperialcollege_sawyer_wrist_cam_0.1.0",
  "episode_id": "episode_101",
  "task_summary": "Robot perceives, approaches, and successfully grasps a mug using a top grasp, verifying secure hold and lifting the mug from its initial location.",
  "task_long_description": {
    "overview": "This episode shows a robotic arm tasked with picking up a single white mug lying upright on a blue surface. The robot uses wrist camera perception for localizing the mug, approaches it vertically, computes an appropriate grasp pose, aligns, and then executes a top grasp. The sequence prioritizes object visibility and reliable grasp verification before lifting the mug. There are no visible obstructions or secondary objects, and the action is single-step with recovery for perception failures.",
    "preconditions": [
      "Mug is present and visible in workspace",
      "Gripper is empty and functional",
      "Robot arm has free workspace above the mug",
      "No objects obstructing approach"
    ],
    "stepwise_plan": [
      "Check if mug is visible; if not, scan area up to 3 times",
      "Detect mug precisely via camera",
      "Move to a position directly above the mug with a slight offset",
      "Compute grasp pose using top grasp strategy",
      "Approach and align with the mug within tight tolerance",
      "Execute grasp at computed pose",
      "Verify mug is held securely in the gripper",
      "Lift mug vertically by a small distance"
    ],
    "success_criteria": [
      "Mug is grasped securely and lifted above initial surface",
      "No slippage or loss of mug during execution",
      "All steps complete without exceeding timeout thresholds"
    ],
    "failure_and_recovery": [
      "Perception or scan fails: retry up to 3 attempts",
      "Alignment fails: sequence halts and re-attempt may be needed manually",
      "Grasp fails: does not verify; tree terminates with failure"
    ],
    "termination": "Tree terminates when mug is confirmed in gripper and lifted; or upon unrecoverable failure."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "pick up mug",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": 0.005,
    "retry_attempts": 3
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["mug"],
  "objects_from_instruction": ["mug"],
  "blackboard_keys": ["std_top"],
  "node_specs": [
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"mug"},"description":"Checks if mug is visible in camera"},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"mug","pattern":"grid","max_attempts":3,"timeout_ms":1200},"description":"Scans workspace for mug (up to 3 tries)"},
    {"id":"DetectObject","type":"Action","ports":{"target":"mug","timeout_ms":800},"description":"Locates mug precisely"},
    {"id":"MoveAbove","type":"Action","ports":{"target":"mug","offset_z":0.05,"timeout_ms":1500},"description":"Moves above mug with vertical offset"},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"mug","strategy":"top","result_key":"std_top"},"description":"Computes a top grasp pose for mug"},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"mug","tolerance":0.005,"timeout_ms":1500},"description":"Aligns and approaches mug with tight tolerance"},
    {"id":"GraspAtPose","type":"Action","ports":{"pose_key":"std_top","strategy":"top","timeout_ms":1000},"description":"Executes grasp at computed pose"},
    {"id":"ObjectInGripper","type":"Condition","ports":{"target":"mug"},"description":"Verifies mug is held securely"},
    {"id":"RaiseHeld","type":"Action","ports":{"target":"mug","distance":0.05,"timeout_ms":1200},"description":"Lifts mug vertically"}
  ],
  "tree_stats": {
    "nodes_total": 9,
    "actions": 6,
    "conditions": 2,
    "depth": 4
  },
  "failure_modes": [
    "Mug not detected",
    "Scan fails or times out",
    "Alignment missed (tolerance or pose error)",
    "Grasp slips or mug not secured"
  ],
  "recovery_strategy": [
    "Scan retries for perception failures",
    "Manual intervention needed if grasp fails",
    "Replanning if approach blocked (not observed)"
  ],
  "assumptions": [
    "Instruction specifies 'pick up mug'; frames show only one upright mug and clear approach. No conflicting objects.",
    "Single mug fits with top grasp; no force/timing constraint inferred visually.",
    "Grasp phase and lift operation directly supported by visible end state at frame_8.",
    "No evidence of placement or transfer in frames; BT halts after lift."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Mug visibly lifted and held securely in gripper after full sequence"
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": {
    "model_reported_tokens": null,
    "client_elapsed_ms": null
  },
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"mug"}},
      "active_path_ids": ["Sequence","Fallback","IsObjectVisible"]
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"mug","timeout_ms":800}},
      "active_path_ids": ["Sequence","DetectObject"]
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"mug","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": ["Sequence","MoveAbove"]
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"ComputeGraspPose","attrs":{"target":"mug","strategy":"top","result_key":"std_top"}},
      "active_path_ids": ["Sequence","ComputeGraspPose"]
    },
    {
      "frame": "frame_4",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"mug","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": ["Sequence","ApproachAndAlign"]
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"GraspAtPose","attrs":{"pose_key":"std_top","strategy":"top","timeout_ms":1000}},
      "active_path_ids": ["Sequence","GraspAtPose"]
    },
    {
      "frame": "frame_6",
      "phase": "grasp",
      "active_leaf": {"id":"ObjectInGripper","attrs":{"target":"mug"}},
      "active_path_ids": ["Sequence","ObjectInGripper"]
    },
    {
      "frame": "frame_7",
      "phase": "transfer",
      "active_leaf": {"id":"RaiseHeld","attrs":{"target":"mug","distance":0.05,"timeout_ms":1200}},
      "active_path_ids": ["Sequence","RaiseHeld"]
    },
    {
      "frame": "frame_8",
      "phase": "transfer",
      "active_leaf": {"id":"RaiseHeld","attrs":{"target":"mug","distance":0.05,"timeout_ms":1200}},
      "active_path_ids": ["Sequence","RaiseHeld"]
    }
  ]
}