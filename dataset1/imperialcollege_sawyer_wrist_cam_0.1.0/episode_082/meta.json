{
  "dataset_id": "imperialcollege_sawyer_wrist_cam_0.1.0",
  "episode_id": "episode_082",
  "task_summary": "A robot arm must pick up a single green bottle resting on a blue surface, starting with perception and ending with a stable grasp.",
  "task_long_description": {
    "overview": "The episode displays a green bottle lying on a blue surface. The robot must locate the bottle, approach above it precisely, compute a suitable top grasp, align, open the gripper, grasp at the computed pose, close with moderate force, and confirm stable grasp. Visual feedback is available throughout; no other objects or occlusions are present.",
    "preconditions": [
      "Bottle is present and unobscured.",
      "Gripper is empty and operational.",
      "Perceptual system is calibrated."
    ],
    "stepwise_plan": [
      "Check if the bottle is visible. Retry scan up to 3 times if needed.",
      "Detect bottle to obtain precise pose.",
      "Move to a position above the bottle with appropriate z-offset.",
      "Compute top approach grasp pose.",
      "Approach and align with the grasp pose.",
      "Open the gripper to suitable width.",
      "Execute grasp at computed pose using top strategy.",
      "Close gripper with moderate force.",
      "Verify that the grasp is stable."
    ],
    "success_criteria": [
      "Robot is holding the bottle securely in the gripper.",
      "Bottle does not slip or drop following grasp."
    ],
    "failure_and_recovery": [
      "If bottle not visible, scan up to 3 times before failure.",
      "If failed to grasp, restart from perception or abort."
    ],
    "termination": "Terminate once a stable grasp on the bottle is detected."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "pick up bottle",
  "instruction_to_ports": {
    "force": 10,
    "timeout_ms": 800,
    "tolerance": 0.005,
    "retry_attempts": 3
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["bottle"],
  "objects_from_instruction": ["bottle"],
  "blackboard_keys": ["std_top"],
  "node_specs": [
    {
      "id":"IsObjectVisible",
      "type":"Condition",
      "ports":{"target":"bottle"},
      "description":"Checks if the bottle is visible."
    },
    {
      "id":"ScanForTarget",
      "type":"Action",
      "ports":{"target":"bottle","pattern":"raster","max_attempts":3,"timeout_ms":1200},
      "description":"Scans workspace to locate bottle if not visible."
    },
    {
      "id":"DetectObject",
      "type":"Action",
      "ports":{"target":"bottle","timeout_ms":800},
      "description":"Runs object detection for the bottle."
    },
    {
      "id":"MoveAbove",
      "type":"Action",
      "ports":{"target":"bottle","offset_z":0.05,"timeout_ms":1500},
      "description":"Moves end-effector above the detected bottle."
    },
    {
      "id":"ComputeGraspPose",
      "type":"Action",
      "ports":{"target":"bottle","strategy":"top","result_key":"std_top"},
      "description":"Computes a top grasp pose for the bottle."
    },
    {
      "id":"ApproachAndAlign",
      "type":"Action",
      "ports":{"target":"bottle","tolerance":0.005,"timeout_ms":1500},
      "description":"Approaches and aligns with precise tolerance for grasp."
    },
    {
      "id":"OpenGripper",
      "type":"Action",
      "ports":{"width":0.06,"timeout_ms":500},
      "description":"Opens the gripper to the minimum width for approach."
    },
    {
      "id":"GraspAtPose",
      "type":"Action",
      "ports":{"pose_key":"std_top","strategy":"top","timeout_ms":800},
      "description":"Positions gripper and prepares to grasp using top pose."
    },
    {
      "id":"CloseGripper",
      "type":"Action",
      "ports":{"force":10,"timeout_ms":800},
      "description":"Closes the gripper with moderate force."
    },
    {
      "id":"IsGraspStable",
      "type":"Condition",
      "ports":{},
      "description":"Checks if the grasp is stable."
    }
  ],
  "tree_stats": {"nodes_total": 13, "actions": 8, "conditions": 2, "depth": 4},
  "failure_modes": [
    "Bottle not visible after retries",
    "Failure to detect pose",
    "Grasp unsuccessful or unstable"
  ],
  "recovery_strategy": [
    "Retry scan for bottle up to 3 times",
    "Abort after persistent failure"
  ],
  "assumptions": [
    "Assumed bottle is the only object in the scene, as in all contact sheet frames.",
    "No regressions in phases are present; phase advances with proximity and grasp.",
    "No evidence of robot end-effector visible, so BT steps are mapped based on typical pick sequence."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Bottle securely grasped and lifted from surface"
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {
        "id": "IsObjectVisible",
        "attrs": {"target": "bottle"}
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {
        "id": "ScanForTarget",
        "attrs": {"target": "bottle", "pattern": "raster", "max_attempts": 3, "timeout_ms": 1200}
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "perceive",
      "active_leaf": {
        "id": "DetectObject",
        "attrs": {"target": "bottle", "timeout_ms": 800}
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {
        "id": "MoveAbove",
        "attrs": {"target": "bottle", "offset_z": 0.05, "timeout_ms": 1500}
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "approach",
      "active_leaf": {
        "id": "ComputeGraspPose",
        "attrs": {"target": "bottle", "strategy": "top", "result_key": "std_top"}
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "approach",
      "active_leaf": {
        "id": "ApproachAndAlign",
        "attrs": {"target": "bottle", "tolerance": 0.005, "timeout_ms": 1500}
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "grasp",
      "active_leaf": {
        "id": "OpenGripper",
        "attrs": {"width": 0.06, "timeout_ms": 500}
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "grasp",
      "active_leaf": {
        "id": "GraspAtPose",
        "attrs": {"pose_key": "std_top", "strategy": "top", "timeout_ms": 800}
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "verify",
      "active_leaf": {
        "id": "CloseGripper",
        "attrs": {"force": 10, "timeout_ms": 800}
      },
      "active_path_ids": []
    }
  ]
}