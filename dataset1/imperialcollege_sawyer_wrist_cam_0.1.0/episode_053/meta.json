{
  "dataset_id": "imperialcollege_sawyer_wrist_cam_0.1.0",
  "episode_id": "episode_053",
  "task_summary": "The robot is instructed to grasp a can located on a blue surface. The tree orchestrates perception, approach, top-grasp planning, and execution, confirming success in the final step.",
  "task_long_description": {
    "overview": "This task requires a robot equipped with a wrist camera to identify, approach, and securely grasp a single can placed on a blue tabletop. The robot first verifies visibility and locates the can, then approaches from above, computes a suitable grasp pose, open its gripper, aligns precisely, and performs the grasp using minimal force. Throughout, it reacts to perception outcomes and confirms the can is held before terminating. No placement is required post-grasp.",
    "preconditions": [
      "Can is present and accessible on a flat blue surface",
      "Robot's gripper is functional and empty",
      "Vision system operational"
    ],
    "stepwise_plan": [
      "Verify can is visible; scan if not",
      "Detect can precisely",
      "Move to an elevated pre-grasp pose",
      "Compute a top-down grasp",
      "Align and approach with low tolerance",
      "Open gripper to standard width",
      "Execute grasp with minimal force",
      "Confirm object is securely in gripper"
    ],
    "success_criteria": [
      "Can is grasped securely by gripper",
      "No significant displacement or slip",
      "No collision with surroundings"
    ],
    "failure_and_recovery": [
      "Can not visible: re-scan",
      "Grasp fails: repeat perception and alignment",
      "Slippage detected: retry from pose computation"
    ],
    "termination": "Task ends when the can is confirmed in the gripper or after repeated failed attempts."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "grasp can",
  "instruction_to_ports": {
    "force": 5,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["can"],
  "objects_from_instruction": ["can"],
  "blackboard_keys": ["std_top"],
  "node_specs": [
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"can"},"description":"Checks if can is currently visible"},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"can","pattern":"raster","max_attempts":3,"timeout_ms":1200},"description":"Scans for can with raster pattern"},
    {"id":"DetectObject","type":"Action","ports":{"target":"can","timeout_ms":800},"description":"Detect can precisely"},
    {"id":"MoveAbove","type":"Action","ports":{"target":"can","offset_z":0.05,"timeout_ms":1500},"description":"Place end-effector above can"},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"can","strategy":"top","result_key":"std_top"},"description":"Computes top grasp"},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"can","tolerance":0.005,"timeout_ms":1500},"description":"Aligns and approaches can with tight tolerance"},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.06,"timeout_ms":500},"description":"Opens gripper to standard width"},
    {"id":"Grasp","type":"Action","ports":{"target":"can","strategy":"top","force":5,"timeout_ms":800},"description":"Grasps can with minimal force from top"},
    {"id":"ObjectInGripper","type":"Condition","ports":{"target":"can"},"description":"Checks can is held by gripper"}
  ],
  "tree_stats": {"nodes_total": 11, "actions": 7, "conditions": 2, "depth": 3},
  "failure_modes": [
    "Can not detected due to occlusion or lighting",
    "Misalignment causing slip during grasp",
    "Gripper fails to close fully"
  ],
  "recovery_strategy": [
    "Repeat scanning and detection if can is missed",
    "Recompute grasp pose and retry if alignment fails",
    "Open gripper and reset if object not grasped"
  ],
  "assumptions": [
    "The instruction is generic but frames show only one object (can). No visible obstacles or containers present.",
    "No frames clearly showing post-grasp transfer or placement; thus, picking is the only observed task. Instruction did not specify force/tolerance; minimal force (5) chosen for safety.",
    "All plans are validated against visual cues in frames; sequence order follows canonical manipulation steps."
  ],
  "evaluation_notes": {
    "expected_success_criteria": ["Can is securely held in the gripper after sequence completes"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},

  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"can"}},
      "active_path_ids": ["Sequence","Fallback","IsObjectVisible"]
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"can","pattern":"raster","max_attempts":3,"timeout_ms":1200}},
      "active_path_ids": ["Sequence","Fallback","RetryUntilSuccessful","ScanForTarget"]
    },
    {
      "frame": "frame_2",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"can","timeout_ms":800}},
      "active_path_ids": ["Sequence","DetectObject"]
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"can","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": ["Sequence","MoveAbove"]
    },
    {
      "frame": "frame_4",
      "phase": "approach",
      "active_leaf": {"id":"ComputeGraspPose","attrs":{"target":"can","strategy":"top","result_key":"std_top"}},
      "active_path_ids": ["Sequence","ComputeGraspPose"]
    },
    {
      "frame": "frame_5",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"can","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": ["Sequence","ApproachAndAlign"]
    },
    {
      "frame": "frame_6",
      "phase": "grasp",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.06,"timeout_ms":500}},
      "active_path_ids": ["Sequence","OpenGripper"]
    },
    {
      "frame": "frame_7",
      "phase": "grasp",
      "active_leaf": {"id":"Grasp","attrs":{"target":"can","strategy":"top","force":5,"timeout_ms":800}},
      "active_path_ids": ["Sequence","Grasp"]
    },
    {
      "frame": "frame_8",
      "phase": "grasp",
      "active_leaf": {"id":"ObjectInGripper","attrs":{"target":"can"}},
      "active_path_ids": ["Sequence","ObjectInGripper"]
    }
  ]
}