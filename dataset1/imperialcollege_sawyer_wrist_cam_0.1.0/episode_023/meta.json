{
  "dataset_id": "imperialcollege_sawyer_wrist_cam_0.1.0",
  "episode_id": "episode_023",
  "task_summary": "The robot visually locates the kettle, approaches and aligns above it, opens its gripper, computes a top-down grasp, executes the grasp, verifies kettle pickup, and lifts the kettle.",
  "task_long_description": {
    "overview": "The scene centers on a white kettle with a black handle lying on a blue surface. The robot, equipped with a wrist camera, is instructed to pick up the kettle. The task involves perception, alignment, grasp planning, actuation, and verification. All steps require robust object detection and manipulation in potentially unstructured backgrounds, minimizing errors due to occlusion or ambiguous geometry. The scene appears static, without obstacles or human interaction.",
    "preconditions": [
      "Kettle present and visually unobstructed on blue surface",
      "Gripper functional and empty at start",
      "Robot arm in position to reach kettle"
    ],
    "stepwise_plan": [
      "Verify kettle is visible.",
      "Scan to reacquire kettle if not visible.",
      "Detect kettle pose.",
      "Move above kettle at safe offset.",
      "Align end-effector to kettle with tight tolerance.",
      "Open gripper to preset width.",
      "Compute top grasp pose for kettle.",
      "Grasp at computed pose.",
      "Confirm kettle is held.",
      "Lift kettle by 5cm."
    ],
    "success_criteria": [
      "Kettle securely held in gripper and lifted from surface."
    ],
    "failure_and_recovery": [
      "If kettle not detected, rescan; if grasp fails, retry up to 3 times; if kettle not in gripper after grasp, abort and log failure."
    ],
    "termination": "Tree terminates successfully when kettle has been detected, grasped, and lifted, or aborts if max retries exhausted or object is irrecoverably missing."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "pick up kettle",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": 0.005,
    "retry_attempts": 3
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["kettle"],
  "objects_from_instruction": ["kettle"],
  "blackboard_keys": ["std_top"],
  "node_specs": [
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"kettle"},"description":"Checks if kettle is in the field of view."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"kettle","pattern":"circle","max_attempts":3,"timeout_ms":1200},"description":"Scan for kettle in a circular pattern up to 3 times."},
    {"id":"DetectObject","type":"Action","ports":{"target":"kettle","timeout_ms":800},"description":"Detect kettle's pose and location."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"kettle","offset_z":0.05,"timeout_ms":1500},"description":"Move end-effector above kettle at 5cm offset."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"kettle","tolerance":0.005,"timeout_ms":1500},"description":"Approach kettle and align with 5mm tolerance."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.06,"timeout_ms":500},"description":"Open gripper to 6cm."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"kettle","strategy":"top","result_key":"std_top"},"description":"Compute top-down grasp pose for kettle."},
    {"id":"GraspAtPose","type":"Action","ports":{"pose_key":"std_top","strategy":"top","timeout_ms":800},"description":"Grasp kettle at computed pose using top strategy."},
    {"id":"ObjectInGripper","type":"Condition","ports":{"target":"kettle"},"description":"Verify kettle is held in gripper."},
    {"id":"RaiseHeld","type":"Action","ports":{"target":"kettle","distance":0.05,"timeout_ms":800},"description":"Lift kettle 5cm."}
  ],
  "tree_stats": {"nodes_total": 10, "actions": 7, "conditions": 2, "depth": 3},
  "failure_modes": [
    "Kettle not visible",
    "False positive object detection",
    "Gripper fails to open or close",
    "Misalignment causes grasp failure",
    "Object slips during lift"
  ],
  "recovery_strategy": [
    "Retriable scan for kettle",
    "Retry grasp up to 3 times",
    "Abort on persistent absence or misgrasp"
  ],
  "assumptions": [
    "No obstacles or other objects are present near the kettle per frames",
    "Kettle is always on horizontal blue surface as seen in all frames",
    "No explicit force parameter; gripper width set to median allowed (0.06), grasp strategy is 'top' as dictated by object shape and view"
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "kettle detected, grasped, and lifted off the table"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"kettle"}},
      "active_path_ids": ["Sequence","Fallback","IsObjectVisible"]
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"kettle","pattern":"circle","max_attempts":3,"timeout_ms":1200}},
      "active_path_ids": ["Sequence","Fallback","RetryUntilSuccessful","ScanForTarget"]
    },
    {
      "frame": "frame_2",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"kettle","timeout_ms":800}},
      "active_path_ids": ["Sequence","DetectObject"]
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"kettle","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": ["Sequence","MoveAbove"]
    },
    {
      "frame": "frame_4",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"kettle","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": ["Sequence","ApproachAndAlign"]
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.06,"timeout_ms":500}},
      "active_path_ids": ["Sequence","OpenGripper"]
    },
    {
      "frame": "frame_6",
      "phase": "grasp",
      "active_leaf": {"id":"ComputeGraspPose","attrs":{"target":"kettle","strategy":"top","result_key":"std_top"}},
      "active_path_ids": ["Sequence","ComputeGraspPose"]
    },
    {
      "frame": "frame_7",
      "phase": "grasp",
      "active_leaf": {"id":"GraspAtPose","attrs":{"pose_key":"std_top","strategy":"top","timeout_ms":800}},
      "active_path_ids": ["Sequence","GraspAtPose"]
    },
    {
      "frame": "frame_8",
      "phase": "transfer",
      "active_leaf": {"id":"RaiseHeld","attrs":{"target":"kettle","distance":0.05,"timeout_ms":800}},
      "active_path_ids": ["Sequence","RaiseHeld"]
    }
  ]
}