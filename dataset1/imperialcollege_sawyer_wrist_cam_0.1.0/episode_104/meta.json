{
  "dataset_id": "imperialcollege_sawyer_wrist_cam_0.1.0",
  "episode_id": "episode_104",
  "task_summary": "Hang a cup on a hook using a robot arm. The procedure includes detecting the cup, grasping it, transferring it to the hook, hanging it securely, releasing the grip, and retreating.",
  "task_long_description": {
    "overview": "The task involves a robotic manipulator executing the hanging of a cup onto a fixed hook within a blue workspace. A cup and a hook are the main objects; the arm detects the cup, grasps it from the side, transfers it to a precise position above the hook, and performs a hanging sequence. The gripper is opened for release and then the arm retreats. The workspace, object pose, and hook location constrain the approach.",
    "preconditions": [
      "Cup is present and accessible on the workspace.",
      "Hook is present and robustly mounted.",
      "Workspace is clear for manipulation.",
      "Robot arm has unobstructed kinematic access."
    ],
    "stepwise_plan": [
      "Detect the cup.",
      "Open gripper for approach.",
      "Move above the cup.",
      "Compute grasp pose (side strategy).",
      "Approach and align to the cup.",
      "Grasp at computed pose.",
      "Verify grasp stability.",
      "Move above the hook.",
      "Hang the cup on the hook.",
      "Open gripper to release the cup.",
      "Retreat the robot arm."
    ],
    "success_criteria": [
      "Cup is hanging on the hook.",
      "Gripper fully releases the cup.",
      "No collision or dropped objects.",
      "Robot arm safely retreats."
    ],
    "failure_and_recovery": [
      "Perception failures: retry DetectObject.",
      "Failed grasp: return to MoveAbove and retry grasp.",
      "Misalignment at hook: reposition and retry Hang."
    ],
    "termination": "Task concludes when the cup is correctly hanging on the hook and the robot has retreated."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "hang cup",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["cup", "hook"],
  "objects_from_instruction": ["cup"],
  "blackboard_keys": ["grasp_pose"],
  "node_specs": [
    {
      "id":"DetectObject",
      "type":"Action",
      "ports":{"target":"cup", "timeout_ms":800},
      "description":"Detect the cup."
    },
    {
      "id":"OpenGripper",
      "type":"Action",
      "ports":{"width":0.06, "timeout_ms":500},
      "description":"Open the gripper for approach."
    },
    {
      "id":"MoveAbove",
      "type":"Action",
      "ports":{"target":"cup", "offset_z":0.05, "timeout_ms":1500},
      "description":"Move above the cup."
    },
    {
      "id":"ComputeGraspPose",
      "type":"Action",
      "ports":{"target":"cup", "strategy":"side", "result_key":"grasp_pose"},
      "description":"Compute side grasp pose for cup and save as grasp_pose."
    },
    {
      "id":"ApproachAndAlign",
      "type":"Action",
      "ports":{"target":"cup", "tolerance":0.005, "timeout_ms":1500},
      "description":"Approach and align with the cup."
    },
    {
      "id":"GraspAtPose",
      "type":"Action",
      "ports":{"pose_key":"grasp_pose", "strategy":"side", "timeout_ms":1000},
      "description":"Grasp at side pose."
    },
    {
      "id":"IsGraspStable",
      "type":"Condition",
      "ports":{},
      "description":"Verify grasp stability."
    },
    {
      "id":"MoveAbove",
      "type":"Action",
      "ports":{"target":"hook", "offset_z":0.05, "timeout_ms":1500},
      "description":"Move above the hook."
    },
    {
      "id":"Hang",
      "type":"Action",
      "ports":{"target":"cup", "hook_id":"hook", "approach_angle":90, "timeout_ms":2000},
      "description":"Hang the cup on the hook."
    },
    {
      "id":"OpenGripper",
      "type":"Action",
      "ports":{"width":0.08, "timeout_ms":500},
      "description":"Open gripper to release cup."
    },
    {
      "id":"Retreat",
      "type":"Action",
      "ports":{"distance":0.1, "timeout_ms":1200},
      "description":"Retreat arm after hanging."
    }
  ],
  "tree_stats": {"nodes_total":11,"actions":9,"conditions":1,"depth":1},
  "failure_modes": [
    "Cup not detected (perceptual failure)",
    "Failed or missed grasp",
    "Misalignment with hook",
    "Release failure (cup not disengaged from gripper)"
  ],
  "recovery_strategy": [
    "Retry object detection if cup or hook lost",
    "Retry grasp or return to pre-grasp position",
    "Re-align above hook before retrying Hang",
    "Open gripper wider before release"
  ],
  "assumptions": [
    "Hook is present and identifiable as 'hook' in workspace.",
    "No precise pose information for hook or cup; mapped to symbolic 'cup' and 'hook'.",
    "Instruction matches the observed action sequence in the frames."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Cup hangs securely on hook without falling",
      "Gripper fully releases cup",
      "Robot arm disengages safely"
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject", "attrs":{"target":"cup", "timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"OpenGripper", "attrs":{"width":0.06,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove", "attrs":{"target":"cup","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"ComputeGraspPose", "attrs":{"target":"cup","strategy":"side","result_key":"grasp_pose"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"ApproachAndAlign", "attrs":{"target":"cup","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"GraspAtPose", "attrs":{"pose_key":"grasp_pose","strategy":"side","timeout_ms":1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove", "attrs":{"target":"hook","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"Hang", "attrs":{"target":"cup","hook_id":"hook","approach_angle":90,"timeout_ms":2000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat", "attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    }
  ]
}