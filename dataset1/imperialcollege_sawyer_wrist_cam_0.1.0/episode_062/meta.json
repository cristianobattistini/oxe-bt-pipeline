{
  "dataset_id": "imperialcollege_sawyer_wrist_cam_0.1.0",
  "episode_id": "episode_062",
  "task_summary": "Robot identifies and grasps a mug from the table using top grasp. The BT ensures perception, approach, grasp attempt, and validation before lifting.",
  "task_long_description": {
    "overview": "In this tabletop scene, a Sawyer robotic arm approaches and attempts to pick up a single white mug resting on a blue surface. The mug's position and orientation may slightly change across the frames, with the robot wrist occasionally visible. The task is executed in a stepwise fashion: locate the mug, approach above it, determine a stable grasp pose, align, grasp, validate success, and finally lift the mug to confirm acquisition. Constraints include reliable perception and grip stability checks before object transfer.",
    "preconditions": [
      "Robot arm and gripper initialized and empty",
      "Mug is present and visible on surface",
      "Sensors calibrated"
    ],
    "stepwise_plan": [
      "Check if mug is visible; retry perception if needed",
      "Detect and locate mug precisely",
      "Move above the mug at preset offset",
      "Compute grasp pose (top strategy)",
      "Approach and align to grasp pose",
      "Close gripper with moderate force",
      "Verify grasp stability",
      "Confirm mug is in gripper",
      "Lift the mug"
    ],
    "success_criteria": [
      "Mug is securely held in gripper and lifted from surface",
      "No collision or object slippage"
    ],
    "failure_and_recovery": [
      "If mug not detected: re-scan grid pattern, max 3 attempts",
      "If grasp unstable: retry perception and grasp sequence"
    ],
    "termination": "End when mug is held and lifted clear, or after max retries/fails."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "pick up mug",
  "instruction_to_ports": {
    "force": 10,
    "timeout_ms": 800,
    "tolerance": 0.005,
    "retry_attempts": 3
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["mug", "robot_gripper", "table"],
  "objects_from_instruction": ["mug"],
  "blackboard_keys": ["std_top"],
  "node_specs": [
    {
      "id": "IsObjectVisible",
      "type": "Condition",
      "ports": {"target": "mug"},
      "description": "Checks if the mug is visible to the perception system"
    },
    {
      "id": "ScanForTarget",
      "type": "Action",
      "ports": {"target": "mug", "pattern": "grid", "max_attempts": 3, "timeout_ms": 1200},
      "description": "Retries scanning for mug using a grid pattern"
    },
    {
      "id": "DetectObject",
      "type": "Action",
      "ports": {"target": "mug", "timeout_ms": 800},
      "description": "Locates the mug and determines its pose"
    },
    {
      "id": "MoveAbove",
      "type": "Action",
      "ports": {"target": "mug", "offset_z": 0.05, "timeout_ms": 1500},
      "description": "Moves the gripper above mug with offset"
    },
    {
      "id": "ComputeGraspPose",
      "type": "Action",
      "ports": {"target": "mug", "strategy": "top", "result_key": "std_top"},
      "description": "Computes a top grasp pose for mug"
    },
    {
      "id": "ApproachAndAlign",
      "type": "Action",
      "ports": {"target": "mug", "tolerance": 0.005, "timeout_ms": 1500},
      "description": "Aligns gripper to grasp pose with tight tolerance"
    },
    {
      "id": "CloseGripper",
      "type": "Action",
      "ports": {"force": 10, "timeout_ms": 800},
      "description": "Attempts to grasp mug with moderate force"
    },
    {
      "id": "IsGraspStable",
      "type": "Condition",
      "ports": {},
      "description": "Checks if grasp is stable"
    },
    {
      "id": "ObjectInGripper",
      "type": "Condition",
      "ports": {"target": "mug"},
      "description": "Verifies mug is held"
    },
    {
      "id": "RaiseHeld",
      "type": "Action",
      "ports": {"target": "mug", "distance": 0.05, "timeout_ms": 800},
      "description": "Lifts mug after grasp"
    }
  ],
  "tree_stats": {"nodes_total": 12, "actions": 7, "conditions": 3, "depth": 4},
  "failure_modes": [
    "Mug not detected due to occlusion or lighting",
    "Gripper fails to close or slips",
    "Perception errors cause misalignment"
  ],
  "recovery_strategy": [
    "Retry perception up to 3 times using grid scan",
    "Recompute and retry grasp upon unstable grip"
  ],
  "assumptions": [
    "Frames confirm mug is present and unobstructed at all times.",
    "No evidence in frames of complex placement or multiple mugs.",
    "Contact-sheet ordering used strictly; possible gripper/mug motion inferred from mug proximity changes (esp. frame_6-8).",
    "Instruction matches the scene; top grasp appears plausible from mug orientation."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Mug is detected, grasped, and held securely after lift."
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},

  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"IsObjectVisible", "attrs":{"target":"mug"}},
      "active_path_ids": ["Sequence","Fallback","IsObjectVisible"]
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject", "attrs":{"target":"mug","timeout_ms":800}},
      "active_path_ids": ["Sequence","DetectObject"]
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove", "attrs":{"target":"mug","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": ["Sequence","MoveAbove"]
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"ComputeGraspPose", "attrs":{"target":"mug","strategy":"top","result_key":"std_top"}},
      "active_path_ids": ["Sequence","ComputeGraspPose"]
    },
    {
      "frame": "frame_4",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign", "attrs":{"target":"mug","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": ["Sequence","ApproachAndAlign"]
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper", "attrs":{"force":10,"timeout_ms":800}},
      "active_path_ids": ["Sequence","CloseGripper"]
    },
    {
      "frame": "frame_6",
      "phase": "grasp",
      "active_leaf": {"id":"IsGraspStable", "attrs":{}},
      "active_path_ids": ["Sequence","IsGraspStable"]
    },
    {
      "frame": "frame_7",
      "phase": "transfer",
      "active_leaf": {"id":"ObjectInGripper", "attrs":{"target":"mug"}},
      "active_path_ids": ["Sequence","ObjectInGripper"]
    },
    {
      "frame": "frame_8",
      "phase": "transfer",
      "active_leaf": {"id":"RaiseHeld", "attrs":{"target":"mug","distance":0.05,"timeout_ms":800}},
      "active_path_ids": ["Sequence","RaiseHeld"]
    }
  ]
}