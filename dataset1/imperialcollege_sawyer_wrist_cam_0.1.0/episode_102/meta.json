{
  "dataset_id": "imperialcollege_sawyer_wrist_cam_0.1.0",
  "episode_id": "episode_102",
  "task_summary": "Locate and pick up a single shoe using visual feedback and a top grasp approach.",
  "task_long_description": {
    "overview": "This task involves a robot arm using visual perception to detect a shoe on a blue background, then planning and executing a top-down grasp to pick it up. The sequence starts with detection, followed by approaching from above, computing an appropriate grasp pose, aligning the gripper, and executing grasp closure. The progression of the shoe's position and increasing scale in the frames confirms the approach and grasp sequence. Reliability of perception and grasp stability are key constraints.",
    "preconditions": [
      "Shoe is present and placed on a visible, uncluttered blue surface.",
      "Robot camera and gripper are operational.",
      "No obstructions between robot and shoe."
    ],
    "stepwise_plan": [
      "Check if shoe is visible; if not, scan area.",
      "Detect precise location of the shoe.",
      "Move the end-effector above the shoe.",
      "Compute a top grasp pose.",
      "Open gripper to standard width.",
      "Approach and align gripper with grasp pose.",
      "Grasp the shoe at computed pose.",
      "Close gripper with moderate force.",
      "Verify shoe is held in gripper."
    ],
    "success_criteria": [
      "Shoe is securely held in gripper after grasp attempt.",
      "No shoe displacement or slip during lift.",
      "No collision with environment or shoe."
    ],
    "failure_and_recovery": [
      "If shoe is not visible, retry scanning area up to 3 times.",
      "If grasp fails, abort operation or retry from detection step.",
      "If gripper closure fails, abort task and log error."
    ],
    "termination": "Task terminates once the robot verifies the shoe is in the gripper or after recovery attempts are exhausted."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "pick up shoe",
  "instruction_to_ports": {
    "force": 10,
    "timeout_ms": 800,
    "tolerance": 0.005,
    "retry_attempts": 3
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["shoe"],
  "objects_from_instruction": ["shoe"],
  "blackboard_keys": ["std_top"],
  "node_specs": [
    {
      "id":"IsObjectVisible",
      "type":"Condition",
      "ports":{"target":"shoe"},
      "description":"Checks if shoe is in the robot's field of view."
    },
    {
      "id":"ScanForTarget",
      "type":"Action",
      "ports":{"target":"shoe","pattern":"raster","max_attempts":3,"timeout_ms":1200},
      "description":"Scans with the camera to find the shoe if not immediately visible."
    },
    {
      "id":"DetectObject",
      "type":"Action",
      "ports":{"target":"shoe","timeout_ms":800},
      "description":"Performs precise vision-based shoe detection."
    },
    {
      "id":"MoveAbove",
      "type":"Action",
      "ports":{"target":"shoe","offset_z":0.05,"timeout_ms":1500},
      "description":"Moves the robot end-effector above the shoe with 5cm vertical offset."
    },
    {
      "id":"ComputeGraspPose",
      "type":"Action",
      "ports":{"target":"shoe","strategy":"top","result_key":"std_top"},
      "description":"Computes a top grasp pose for the shoe and stores it in 'std_top'."
    },
    {
      "id":"OpenGripper",
      "type":"Action",
      "ports":{"width":0.06,"timeout_ms":500},
      "description":"Opens gripper to 6cm in preparation for grasping."
    },
    {
      "id":"ApproachAndAlign",
      "type":"Action",
      "ports":{"target":"shoe","tolerance":0.005,"timeout_ms":1500},
      "description":"Approaches and aligns gripper to grasp pose within 5mm tolerance."
    },
    {
      "id":"GraspAtPose",
      "type":"Action",
      "ports":{"pose_key":"std_top","strategy":"top","timeout_ms":1000},
      "description":"Performs the grasp at the computed top-down pose."
    },
    {
      "id":"CloseGripper",
      "type":"Action",
      "ports":{"force":10,"timeout_ms":800},
      "description":"Closes gripper with moderate (10N) force to grip shoe."
    },
    {
      "id":"ObjectInGripper",
      "type":"Condition",
      "ports":{"target":"shoe"},
      "description":"Checks that shoe is securely held after grasp."
    }
  ],
  "tree_stats": {"nodes_total": 12, "actions": 8, "conditions": 2, "depth": 2},
  "failure_modes": [
    "Shoe not detected in camera view.",
    "Grasp computation fails due to occlusion.",
    "Shoes slips during or after closing gripper.",
    "Approach obstructed by environmental constraints."
  ],
  "recovery_strategy": [
    "Rescan up to three times if shoe not seen.",
    "Abort if grasp or closure fails after retries.",
    "Manual intervention if shoe cannot be grasped."
  ],
  "assumptions": [
    "Instruction refers to a single visible shoe, and frames 0-8 confirm a solitary shoe with clear approach and grasp progress.",
    "Frame sequence is consistent with approach and pick; no placing or transfer is observed.",
    "No evidence of multi-object or placement actions in the current episode."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Shoe is in gripper at the end.",
      "Sequence is interrupted on persistent failures."
    ],
    "test_scenarios": ["happy path", "object_missing", "grasp_fail", "perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"shoe"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"shoe","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"shoe","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"ComputeGraspPose","attrs":{"target":"shoe","strategy":"top","result_key":"std_top"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "approach",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.06,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"shoe","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "grasp",
      "active_leaf": {"id":"GraspAtPose","attrs":{"pose_key":"std_top","strategy":"top","timeout_ms":1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":10,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "verify",
      "active_leaf": {"id":"ObjectInGripper","attrs":{"target":"shoe"}},
      "active_path_ids": []
    }
  ]
}