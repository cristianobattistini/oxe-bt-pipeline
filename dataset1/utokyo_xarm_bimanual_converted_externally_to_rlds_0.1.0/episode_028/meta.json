{
  "dataset_id": "utokyo_xarm_bimanual_converted_externally_to_rlds_0.1.0",
  "episode_id": "episode_028",
  "task_summary": "Unfold a wrinkled towel using a dual-arm robot by perceiving, approaching, aligning, and executing an unfolding action with suitable parameters.",
  "task_long_description": {
    "overview": "This episode demonstrates a bimanual robot unfolding a towel placed on an artificial grass surface. The wrinkled towel is perceived and located, the arms are positioned above its wrinkled region, then an unfolding action is performed by pulling the detected folds until the towel is flat. Robust object detection and action timing are essential for successful completion.",
    "preconditions": [
      "Towel is present on the workspace, initially wrinkled.",
      "Workspace is clear of obstacles.",
      "Robot is at home or ready position."
    ],
    "stepwise_plan": [
      "Check if the towel is visible; scan if not.",
      "Detect and confirm the towel's pose.",
      "Move both arms above the towel.",
      "Execute Unfold action using a pull strategy with bimanual coordination, addressing two main folds.",
      "Wait to stabilize the towel post-action."
    ],
    "success_criteria": [
      "Towel is visible and mostly or entirely unfolded with minimal major wrinkles.",
      "No damage or undesired displacement occurs."
    ],
    "failure_and_recovery": [
      "If the towel is not detected, retry scanning up to three times.",
      "If unfolding is incomplete, the system halts for operator input."
    ],
    "termination": "The behavior tree terminates when the towel is visibly unfolded and motion ceases following the unfolding attempt."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "Unfold a wrinkled towel.",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["towel"],
  "objects_from_instruction": ["towel"],
  "blackboard_keys": [],
  "node_specs": [
    {
      "id": "IsObjectVisible",
      "type": "Condition",
      "ports": { "target": "towel" },
      "description": "Checks if the towel is present and visible to the robot."
    },
    {
      "id": "ScanForTarget",
      "type": "Action",
      "ports": { "target": "towel", "pattern": "raster", "max_attempts": 3, "timeout_ms": 1200 },
      "description": "Performs a raster scan to search for the towel if it is not immediately visible."
    },
    {
      "id": "DetectObject",
      "type": "Action",
      "ports": { "target": "towel", "timeout_ms": 800 },
      "description": "Attempts perception and pose estimation of the towel."
    },
    {
      "id": "MoveAbove",
      "type": "Action",
      "ports": { "target": "towel", "offset_z": 0.10, "timeout_ms": 1500 },
      "description": "Positions the arms above the towel ready for grasping or adjustment."
    },
    {
      "id": "Unfold",
      "type": "Action",
      "ports": { "target": "towel", "strategy": "pull", "num_folds": 2, "timeout_ms": 2000 },
      "description": "Executes the main unfolding primitive on the towel, targeting two distinct folds."
    },
    {
      "id": "Wait",
      "type": "Action",
      "ports": { "timeout_ms": 500 },
      "description": "Lets the system settle to ensure completion of physical interactions."
    }
  ],
  "tree_stats": {
    "nodes_total": 10,
    "actions": 5,
    "conditions": 1,
    "depth": 4
  },
  "failure_modes": [
    "Towel not initially visible",
    "Perception errors on towel location",
    "Unfold action incomplete due to insufficient force or slippage"
  ],
  "recovery_strategy": [
    "Retry scanning for the towel if not visible",
    "Operator intervention if unfolds fail"
  ],
  "assumptions": [
    "Number of folds estimated as 2 from contact sheet; if not matching instruction, preference given to visual cue.",
    "Unfold is mapped using 'pull' strategy based on visual inspection of robotic arm movement direction.",
    "Timeouts and max_attempts assigned default moderate/robust values (no explicit instruction)."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "The towel is predominantly unfolded and flat at the end position with no significant folds."
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": {
    "model_reported_tokens": null,
    "client_elapsed_ms": null
  },
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {
        "id": "IsObjectVisible",
        "attrs": { "target": "towel" }
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {
        "id": "ScanForTarget",
        "attrs": { "target": "towel", "pattern": "raster", "max_attempts": 3, "timeout_ms": 1200 }
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "perceive",
      "active_leaf": {
        "id": "DetectObject",
        "attrs": { "target": "towel", "timeout_ms": 800 }
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {
        "id": "MoveAbove",
        "attrs": { "target": "towel", "offset_z": 0.10, "timeout_ms": 1500 }
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "verify",
      "active_leaf": {
        "id": "MoveAbove",
        "attrs": { "target": "towel", "offset_z": 0.10, "timeout_ms": 1500 }
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {
        "id": "Unfold",
        "attrs": { "target": "towel", "strategy": "pull", "num_folds": 2, "timeout_ms": 2000 }
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {
        "id": "Unfold",
        "attrs": { "target": "towel", "strategy": "pull", "num_folds": 2, "timeout_ms": 2000 }
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {
        "id": "Wait",
        "attrs": { "timeout_ms": 500 }
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {
        "id": "Wait",
        "attrs": { "timeout_ms": 500 }
      },
      "active_path_ids": []
    }
  ]
}