{
  "dataset_id": "dlr_edan_shared_control_converted_externally_to_rlds_0.1.0",
  "episode_id": "episode_038",
  "task_summary": "The robot locates, approaches, and grasps a small tube lying on a shelf, following a pick task from perception to grasp verification.",
  "task_long_description": {
    "overview": "This episode involves a robot (blue arm) tasked with picking up a small tube object placed on a shelf within a structured indoor environment. The tube, white and cylindrical, sits on a cube-shelf, requiring the robot to visually detect, approach, align, and grasp the object with precision. The behavior tree orchestrates visual perception, approach, grasp computation, and verification actions, ensuring robust interaction with the environment. Constraints include shelf position, limited workspace, and required alignment for successful grasp.",
    "preconditions": [
      "The tube is present on the shelf and unobstructed.",
      "The robot is initialized and positioned within arm's reach.",
      "The gripper is initially open."
    ],
    "stepwise_plan": [
      "Check if the tube is visible; if not, scan for it.",
      "Detect the tube's position.",
      "Open the gripper to a safe width.",
      "Move above the tube with a safe height offset.",
      "Compute a top grasp pose for the tube.",
      "Approach and align with the tube at tight tolerance.",
      "Execute the grasp at the computed pose.",
      "Verify that the tube is held in the gripper."
    ],
    "success_criteria": [
      "The robot securely holds the tube after executing the grasp action."
    ],
    "failure_and_recovery": [
      "Tube is not detected (retry scan up to 3 times).",
      "Collision or misalignment on approach (abort and log).",
      "Grasp fails (object not in gripper; abort)."
    ],
    "termination": "Terminated when the tube is confirmed to be in the gripper (ObjectInGripper passes) or on critical failure."
  },
  "frame_ranking": {
    "order": [
      "frame_3",
      "frame_5",
      "frame_2",
      "frame_6",
      "frame_1",
      "frame_4",
      "frame_7",
      "frame_0",
      "frame_8"
    ],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "pick the tube",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": [
    "frame_0",
    "frame_1",
    "frame_2",
    "frame_3",
    "frame_4",
    "frame_5",
    "frame_6",
    "frame_7",
    "frame_8"
  ],
  "objects": ["tube", "shelf", "robot_arm"],
  "objects_from_instruction": ["tube"],
  "blackboard_keys": ["grasp_tube"],
  "node_specs": [
    {
      "id": "IsObjectVisible",
      "type": "Condition",
      "ports": { "target": "tube" },
      "description": "Checks if the tube is visible to the robot's sensors."
    },
    {
      "id": "ScanForTarget",
      "type": "Action",
      "ports": { "target": "tube", "pattern": "raster", "max_attempts": 3, "timeout_ms": 1200 },
      "description": "Scans for the tube using a raster pattern if not immediately visible."
    },
    {
      "id": "DetectObject",
      "type": "Action",
      "ports": { "target": "tube", "timeout_ms": 800 },
      "description": "Performs object detection to localize the tube."
    },
    {
      "id": "OpenGripper",
      "type": "Action",
      "ports": { "width": 0.06, "timeout_ms": 500 },
      "description": "Opens the gripper to an appropriate width to grasp the tube."
    },
    {
      "id": "MoveAbove",
      "type": "Action",
      "ports": { "target": "tube", "offset_z": 0.05, "timeout_ms": 1200 },
      "description": "Moves the robot's end effector above the tube at a 5cm offset."
    },
    {
      "id": "ComputeGraspPose",
      "type": "Action",
      "ports": { "target": "tube", "strategy": "top", "result_key": "grasp_tube" },
      "description": "Computes a top-down grasp pose for the tube."
    },
    {
      "id": "ApproachAndAlign",
      "type": "Action",
      "ports": { "target": "tube", "tolerance": 0.005, "timeout_ms": 1200 },
      "description": "Approaches and aligns the gripper over the tube with tight tolerance."
    },
    {
      "id": "GraspAtPose",
      "type": "Action",
      "ports": { "pose_key": "grasp_tube", "strategy": "top", "timeout_ms": 800 },
      "description": "Executes the grasp using the computed pose and top strategy."
    },
    {
      "id": "ObjectInGripper",
      "type": "Condition",
      "ports": { "target": "tube" },
      "description": "Checks whether the tube is now securely grasped by the gripper."
    }
  ],
  "tree_stats": { "nodes_total": 11, "actions": 7, "conditions": 2, "depth": 3 },
  "failure_modes": [
    "Tube not detected by sensors (perception failure)",
    "Misgrasp due to misalignment or wrong pose",
    "Collision with shelf or workspace objects",
    "Gripper fails to close or hold object"
  ],
  "recovery_strategy": [
    "Retry scan for tube up to 3 attempts",
    "Abort on failed grasp, report error"
  ],
  "assumptions": [
    "Contact sheet visually confirms the target is a tube; task instruction matches.",
    "Exact tube dimensions/pose are inferred from the scene as top graspable.",
    "Instruction does not specify force or time constraints; used nominal port_values.",
    "Frame progression supports single-object pick (no place/transfer)."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "The tube is stably held in the gripper as confirmed by final frame."
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": { "model_reported_tokens": null, "client_elapsed_ms": null },
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": { "id": "IsObjectVisible", "attrs": { "target": "tube" } },
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": { "id": "DetectObject", "attrs": { "target": "tube", "timeout_ms": 800 } },
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": { "id": "OpenGripper", "attrs": { "width": 0.06, "timeout_ms": 500 } },
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": { "id": "MoveAbove", "attrs": { "target": "tube", "offset_z": 0.05, "timeout_ms": 1200 } },
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "approach",
      "active_leaf": { "id": "ComputeGraspPose", "attrs": { "target": "tube", "strategy": "top", "result_key": "grasp_tube" } },
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "verify",
      "active_leaf": { "id": "ApproachAndAlign", "attrs": { "target": "tube", "tolerance": 0.005, "timeout_ms": 1200 } },
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "grasp",
      "active_leaf": { "id": "GraspAtPose", "attrs": { "pose_key": "grasp_tube", "strategy": "top", "timeout_ms": 800 } },
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "grasp",
      "active_leaf": { "id": "ObjectInGripper", "attrs": { "target": "tube" } },
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "grasp",
      "active_leaf": { "id": "ObjectInGripper", "attrs": { "target": "tube" } },
      "active_path_ids": []
    }
  ]
}