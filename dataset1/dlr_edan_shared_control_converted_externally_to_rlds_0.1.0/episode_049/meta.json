{
  "dataset_id": "dlr_edan_shared_control_converted_externally_to_rlds_0.1.0",
  "episode_id": "episode_049",
  "task_summary": "Pick the green apple by perceiving, approaching, and grasping it with the gripper using a top strategy.",
  "task_long_description": {
    "overview": "A blue Kinova robot arm is tasked with picking up a green apple placed on a transparent table in a modern room. The robot must first locate the apple, approach it from above, compute the appropriate grasp pose, and use its gripper to grasp the apple securely. Visual and contact verification steps ensure a stable extraction. Objects include the green apple, table, and distractors (two white blocks, plate, vase). The main constraint is avoiding collisions and successful object grasp.",
    "preconditions": [
      "Green apple is on the table and visible",
      "Robot gripper is unobstructed and open",
      "Workspace is clear of hazards"
    ],
    "stepwise_plan": [
      "Check if the green apple is visible; if not, scan for it up to 3 times",
      "Detect and localize precise apple pose",
      "Open gripper",
      "Move to above the apple",
      "Compute top grasp pose",
      "Approach and align with the apple with tight tolerance",
      "Grasp using computed pose and top strategy",
      "Verify apple is in gripper"
    ],
    "success_criteria": [
      "Green apple is securely held by gripper",
      "No collisions or dropped apple during grasp"
    ],
    "failure_and_recovery": [
      "If apple not visible: rescan for up to 3 attempts",
      "If grasp fails: repeat approach and alignment after grip check"
    ],
    "termination": "End when the green apple is held in the gripper and verified by sensors"
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "pick the green apple",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": 0.005,
    "retry_attempts": 3
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["green_apple", "table", "plate", "block_1", "block_2", "vase"],
  "objects_from_instruction": ["green_apple"],
  "blackboard_keys": ["grasp_green_apple"],
  "node_specs": [
    {
      "id": "IsObjectVisible",
      "type": "Condition",
      "ports": {"target":"green_apple"},
      "description": "Checks if green apple is in view"
    },
    {
      "id": "ScanForTarget",
      "type": "Action",
      "ports": {"target":"green_apple", "pattern":"raster", "max_attempts":3, "timeout_ms":1200},
      "description": "Performs visual scan for green apple"
    },
    {
      "id": "DetectObject",
      "type": "Action",
      "ports": {"target":"green_apple", "timeout_ms":800},
      "description": "Runs object detection to refine apple location"
    },
    {
      "id": "OpenGripper",
      "type": "Action",
      "ports": {"width":0.06, "timeout_ms":500},
      "description": "Opens gripper to specified width"
    },
    {
      "id": "MoveAbove",
      "type": "Action",
      "ports": {"target":"green_apple", "offset_z":0.05, "timeout_ms":1500},
      "description": "Moves manipulator above apple"
    },
    {
      "id": "ComputeGraspPose",
      "type": "Action",
      "ports": {"target":"green_apple", "strategy":"top", "result_key":"grasp_green_apple"},
      "description": "Computes best top grasp pose for the apple"
    },
    {
      "id": "ApproachAndAlign",
      "type": "Action",
      "ports": {"target":"green_apple", "tolerance":0.005, "timeout_ms":1500},
      "description": "Aligns end-effector closely with apple"
    },
    {
      "id": "GraspAtPose",
      "type": "Action",
      "ports": {"pose_key":"grasp_green_apple", "strategy":"top", "timeout_ms":1000},
      "description": "Executes grasp at precomputed pose"
    },
    {
      "id": "ObjectInGripper",
      "type": "Condition",
      "ports": {"target":"green_apple"},
      "description": "Confirms apple is now held"
    }
  ],
  "tree_stats": {
    "nodes_total": 11,
    "actions": 7,
    "conditions": 2,
    "depth": 3
  },
  "failure_modes": [
    "Green apple not visible due to occlusion or lighting",
    "Wrong object detected or grasped",
    "Misalignment causes failed grasp",
    "Apple slips from gripper"
  ],
  "recovery_strategy": [
    "Perform ScanForTarget up to 3 times if apple not visible",
    "Retry approach and alignment if ObjectInGripper condition not met"
  ],
  "assumptions": [
    "No semantic mismatch between 'green apple' in instruction and visual appearance in frames.",
    "Symbolic target 'green_apple' used for ports.",
    "Grasp pose computation and top strategy appropriate based on scene geometry."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Apple securely held at end of episode, evident by robot holding apple away from table."
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"green_apple"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"green_apple","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"green_apple","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"green_apple","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"GraspAtPose","attrs":{"pose_key":"grasp_green_apple","strategy":"top","timeout_ms":1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"GraspAtPose","attrs":{"pose_key":"grasp_green_apple","strategy":"top","timeout_ms":1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "verify",
      "active_leaf": {"id":"ObjectInGripper","attrs":{"target":"green_apple"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "transfer",
      "active_leaf": {"id":"ObjectInGripper","attrs":{"target":"green_apple"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "transfer",
      "active_leaf": {"id":"ObjectInGripper","attrs":{"target":"green_apple"}},
      "active_path_ids": []
    }
  ]
}