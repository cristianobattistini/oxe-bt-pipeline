{
  "dataset_id": "ucsd_kitchen_dataset_converted_externally_to_rlds_0.1.0",
  "episode_id": "episode_098",
  "task_summary": "The robot locates, approaches, grasps, and turns the faucet handle to open and activate water flow.",
  "task_long_description": {
    "overview": "This episode demonstrates a robot positioned in front of a toy kitchen setup. The main task involves turning on the faucet by manipulating the faucet handle. The robot's arm executes sequential perception, approach, grasp, and rotation actions to open the faucet. Visual evidence in the frames highlights the robot's stages: initial assessment, approach, alignment, grasp, actuation (turning), and retreat, with the target being the faucet handle above the sink area.",
    "preconditions": [
      "Robot is at the kitchen front.",
      "Faucet handle is reachable and visible.",
      "No obstruction near the sink."
    ],
    "stepwise_plan": [
      "Check visibility of faucet handle.",
      "Scan for faucet handle if not detected.",
      "Detect faucet handle position.",
      "Approach and align with handle.",
      "Grasp handle with twist strategy and minimal force.",
      "Turn faucet handle in 'open' direction by 45 degrees.",
      "Verify water activation (simulated with ButtonPressed).",
      "Retreat to a safe position."
    ],
    "success_criteria": [
      "Faucet handle rotated successfully.",
      "ButtonPressed condition is met for the faucet.",
      "Robot arm has retreated from the workspace."
    ],
    "failure_and_recovery": [
      "Faucet handle not detected: retry scan.",
      "Grasp unsuccessful: retry approach and alignment.",
      "Turn action incomplete: reattempt.",
      "Arm collision risk: abort and retreat."
    ],
    "termination": "Tree ends when faucet is confirmed open and robot has retreated."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "Turn on the faucet",
  "instruction_to_ports": {
    "force": 5,
    "timeout_ms": 800,
    "tolerance": 0.005,
    "retry_attempts": 3
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["robot_arm", "faucet_handle", "faucet", "sink", "knob"],
  "objects_from_instruction": ["faucet", "faucet_handle"],
  "blackboard_keys": [],
  "node_specs": [
    {
      "id": "IsObjectVisible",
      "type": "Condition",
      "ports": {"target": "faucet_handle"},
      "description": "Check if faucet handle is visible"
    },
    {
      "id": "ScanForTarget",
      "type": "Action",
      "ports": {"target": "faucet_handle", "pattern": "raster", "max_attempts": 3, "timeout_ms": 1200},
      "description": "Scan workspace for faucet handle using raster pattern"
    },
    {
      "id": "DetectObject",
      "type": "Action",
      "ports": {"target": "faucet_handle", "timeout_ms": 800},
      "description": "Visually detect faucet handle position"
    },
    {
      "id": "ApproachAndAlign",
      "type": "Action",
      "ports": {"target": "faucet_handle", "tolerance": 0.005, "timeout_ms": 1500},
      "description": "Approach faucet handle and align with minimal tolerance"
    },
    {
      "id": "Grasp",
      "type": "Action",
      "ports": {"target": "faucet_handle", "strategy": "twist", "force": 5, "timeout_ms": 800},
      "description": "Grasp faucet handle using twist strategy with minimal force"
    },
    {
      "id": "TurnKnob",
      "type": "Action",
      "ports": {"target": "faucet_handle", "knob_type": "knob", "angle_deg": 45, "direction": "open", "force_limit": 5, "timeout_ms": 800},
      "description": "Rotate faucet handle 45Â° to open with min force"
    },
    {
      "id": "ButtonPressed",
      "type": "Condition",
      "ports": {"target": "faucet"},
      "description": "Check if faucet is activated"
    },
    {
      "id": "Retreat",
      "type": "Action",
      "ports": {"distance": 0.10, "timeout_ms": 800},
      "description": "Retreat robotic arm by 10 cm"
    }
  ],
  "tree_stats": {"nodes_total": 11, "actions": 7, "conditions": 2, "depth": 2},
  "failure_modes": [
    "Handle not detected",
    "Scan unsuccessful",
    "Alignment failed",
    "Grasp slippage",
    "Rotation incomplete",
    "Activation not verified"
  ],
  "recovery_strategy": [
    "Retry scan and detection",
    "Re-attempt approach/alignment",
    "Repeat grasp with adjusted strategy",
    "Retry turning knob"
  ],
  "assumptions": [
    "Instruction requests water flow; frames show interaction with handle, not actual water.",
    "Frames indicate toy kitchen with faucet handle as rotary (knob type) device.",
    "Water flow is simulated by ButtonPressed condition as explicit flow is not visually confirmed.",
    "Robot interaction only turns handle to 'open' as per instruction and episode context."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Faucet handle rotation to open state",
      "Simulated confirmation of water activation",
      "Robot withdraws from sink area"
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id": "IsObjectVisible", "attrs": {"target": "faucet_handle"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id": "ScanForTarget", "attrs": {"target": "faucet_handle", "pattern": "raster", "max_attempts": 3, "timeout_ms": 1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "verify",
      "active_leaf": {"id": "DetectObject", "attrs": {"target": "faucet_handle", "timeout_ms": 800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id": "ApproachAndAlign", "attrs": {"target": "faucet_handle", "tolerance": 0.005, "timeout_ms": 1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id": "Grasp", "attrs": {"target": "faucet_handle", "strategy": "twist", "force": 5, "timeout_ms": 800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id": "TurnKnob", "attrs": {"target": "faucet_handle", "knob_type": "knob", "angle_deg": 45, "direction": "open", "force_limit": 5, "timeout_ms": 800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "verify",
      "active_leaf": {"id": "ButtonPressed", "attrs": {"target": "faucet"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id": "Retreat", "attrs": {"distance": 0.10, "timeout_ms": 800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id": "Retreat", "attrs": {"distance": 0.10, "timeout_ms": 800}},
      "active_path_ids": []
    }
  ]
}