{
  "dataset_id": "ucsd_kitchen_dataset_converted_externally_to_rlds_0.1.0",
  "episode_id": "episode_032",
  "task_summary": "A robot arm locates and turns on a faucet by gripping and rotating its handle.",
  "task_long_description": {
    "overview": "This task involves a robot arm identifying the faucet handle, aligning its gripper, executing an appropriate grasp, and rotating the handle to turn on the faucet in a toy kitchen environment. The faucet handle is assumed to be of the 'knob' type and must be turned 90 degrees in the 'open' direction. The behavior includes perception and recovery, aligning, grasping, actuation, and retreat to avoid collision. No objects are moved aside; the robot avoids unnecessary force.",
    "preconditions": [
      "Robot starts at a safe distance from the faucet.",
      "Faucet handle is visible or can be found by scanning.",
      "Workspace is free of obstructions above the sink area."
    ],
    "stepwise_plan": [
      "Check if the faucet handle is visible; if not, scan for it up to three times.",
      "Detect and localize the faucet handle accurately.",
      "Move and align the end-effector to the handle with precise tolerance.",
      "Compute a top grasp on the handle and execute the grasp.",
      "Turn the faucet handle 90 degrees in the opening direction.",
      "Retreat the arm to avoid collisions after actuation."
    ],
    "success_criteria": [
      "Faucet handle turned open.",
      "No collisions in the workspace.",
      "Arm retreats to a safe pose post-actuation."
    ],
    "failure_and_recovery": [
      "If handle is not visible, rescan up to three times.",
      "If grasp fails, the sequence aborts.",
      "If actuation fails, manual intervention may be required."
    ],
    "termination": "Behavior terminates when the handle is turned and the robot has retreated."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "Turn on the faucet",
  "instruction_to_ports": {
    "force": 10,
    "timeout_ms": 1200,
    "tolerance": 0.005,
    "retry_attempts": 3
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["faucet_handle", "faucet", "sink", "stove"],
  "objects_from_instruction": ["faucet"],
  "blackboard_keys": ["grasp_faucet"],
  "node_specs": [
    {
      "id":"IsObjectVisible",
      "type":"Condition",
      "ports":{"target":"faucet_handle"},
      "description":"Checks if the faucet handle is visible."
    },
    {
      "id":"ScanForTarget",
      "type":"Action",
      "ports":{"target":"faucet_handle","pattern":"raster","max_attempts":3,"timeout_ms":1200},
      "description":"Scans workspace to find the faucet handle."
    },
    {
      "id":"DetectObject",
      "type":"Action",
      "ports":{"target":"faucet_handle","timeout_ms":1000},
      "description":"Detects and localizes the faucet handle."
    },
    {
      "id":"ApproachAndAlign",
      "type":"Action",
      "ports":{"target":"faucet_handle","tolerance":0.005,"timeout_ms":1500},
      "description":"Aligns end-effector to faucet handle with tight tolerance."
    },
    {
      "id":"ComputeGraspPose",
      "type":"Action",
      "ports":{"target":"faucet_handle","strategy":"top","result_key":"grasp_faucet"},
      "description":"Computes the top-grasp pose for the faucet handle."
    },
    {
      "id":"GraspAtPose",
      "type":"Action",
      "ports":{"pose_key":"grasp_faucet","strategy":"top","timeout_ms":1200},
      "description":"Executes the grasp at the computed pose."
    },
    {
      "id":"TurnKnob",
      "type":"Action",
      "ports":{"target":"faucet_handle","knob_type":"knob","angle_deg":90,"direction":"open","force_limit":10,"timeout_ms":1500},
      "description":"Turns the faucet handle to the open position."
    },
    {
      "id":"Retreat",
      "type":"Action",
      "ports":{"distance":0.10,"timeout_ms":1200},
      "description":"Retreats arm away from the faucet after actuation."
    }
  ],
  "tree_stats": {"nodes_total": 11, "actions": 7, "conditions": 1, "depth": 3},
  "failure_modes": [
    "Faucet handle not detected",
    "Scan fails to locate faucet handle",
    "Alignment failure",
    "Grasp fails",
    "Handle fails to turn"
  ],
  "recovery_strategy": [
    "Retry up to 3 scans for visibility",
    "Abort sequence if grasp or actuation fails"
  ],
  "assumptions": [
    "Instruction requests 'turn on' but frames show operation performed by turning handle (knob) by 90 degrees in open direction.",
    "Target identified visually as 'faucet_handle'.",
    "No water flow verification; only mechanical actuation.",
    "Handle requires a 'top' grasp."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Faucet handle rotated 90 degrees in open direction.",
      "Robot arm avoids collisions.",
      "Arm retreats after actuation."
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"faucet_handle"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"faucet_handle","pattern":"raster","max_attempts":3,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"faucet_handle","timeout_ms":1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"faucet_handle","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "verify",
      "active_leaf": {"id":"ComputeGraspPose","attrs":{"target":"faucet_handle","strategy":"top","result_key":"grasp_faucet"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"GraspAtPose","attrs":{"pose_key":"grasp_faucet","strategy":"top","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"TurnKnob","attrs":{"target":"faucet_handle","knob_type":"knob","angle_deg":90,"direction":"open","force_limit":10,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.10,"timeout_ms":1200}},
      "active_path_ids": []
    }
  ]
}