{
  "dataset_id": "dlr_sara_pour_converted_externally_to_rlds_0.1.0",
  "episode_id": "episode_067",
  "task_summary": "The robot must pour the contents of a cup into a mug, which is placed on a flat workspace. The sequence includes mug localization, approaching, aligning, and pouring, followed by a safe retreat after pouring.",
  "task_long_description": {
    "overview": "This episode features a robot arm equipped with a gripper holding a cup. The goal is to pour the liquid from the cup into a mug positioned on the workspace. The BT navigates through perception (locating the mug), precise approach and alignment, executing the pour with maximal tilt, waiting briefly to ensure transfer, and then safely retreating. The process is robust to mug visibility issues by incorporating retries. Constraints include accurate mug localization, collision avoidance, and completion of full pour volume.",
    "preconditions": [
      "Cup is pre-grasped and filled.",
      "Mug is present on the workspace.",
      "Workspace is clear of obstacles."
    ],
    "stepwise_plan": [
      "Ensure mug is visible; retry perception if needed.",
      "Detect precise mug position.",
      "Move the cup above the mug at controlled height.",
      "Align with mug opening to avoid spillage.",
      "Pour with full volume, maximum tilt angle (90 deg), normal rate.",
      "Pause briefly to complete pour.",
      "Retreat to safe distance."
    ],
    "success_criteria": [
      "Mug receives poured contents from cup.",
      "No liquid spillage on the workspace.",
      "Cup is empty after pouring.",
      "Robot retreats without collision."
    ],
    "failure_and_recovery": [
      "Mug not visible: re-scan and retry.",
      "Imprecise alignment: re-attempt approach.",
      "Pour incomplete: repeat pour action.",
      "Spillage: alert operator or retry with corrected alignment."
    ],
    "termination": "Terminate upon successful pour and retreat or after exceeding recovery attempts."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "Pour into the mug",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": [
    "frame_0",
    "frame_1",
    "frame_2",
    "frame_3",
    "frame_4",
    "frame_5",
    "frame_6",
    "frame_7",
    "frame_8"
  ],
  "objects": ["cup", "mug", "table"],
  "objects_from_instruction": ["mug"],
  "blackboard_keys": [],
  "node_specs": [
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"mug"},"description":"Checks if mug is visible."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"mug","pattern":"grid","max_attempts":3,"timeout_ms":1200},"description":"Scans the work area to find the mug using grid pattern (3 attempts)."},
    {"id":"DetectObject","type":"Action","ports":{"target":"mug","timeout_ms":800},"description":"Detects mug position with timeout."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"mug","offset_z":0.05,"timeout_ms":1500},"description":"Moves cup above mug by 5 cm."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"mug","tolerance":0.005,"timeout_ms":1500},"description":"Approaches and aligns cup to center of mug opening."},
    {"id":"Pour","type":"Action","ports":{"source":"cup","target":"mug","amount":"full","tilt_angle":90,"pour_rate":"normal","timeout_ms":1500},"description":"Pours cup contents into mug with full volume and maximal tilt."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":500},"description":"Waits briefly to ensure complete pouring."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.10,"timeout_ms":1200},"description":"Moves gripper away from mug by 10 cm after pour."}
  ],
  "tree_stats": {"nodes_total": 11, "actions": 7, "conditions": 1, "depth": 3},
  "failure_modes": [
    "Mug not visible",
    "Incorrect mug localization",
    "Misaligned pour causing spillage",
    "Insufficient pour volume",
    "Collision during retreat"
  ],
  "recovery_strategy": [
    "Rescan for mug and repeat perception sequence",
    "Retry approach or align step on failure",
    "Repeat pour action if incomplete",
    "Pause and alert if collision or spillage detected"
  ],
  "assumptions": [
    "Cup is pre-grasped before episode starts; not shown in frames",
    "Instruction is 'pour into the mug', but pouring is from a cup visibly held by the robot",
    "The frames do not show grasp or pickupâ€”the BT begins with mug perception",
    "Full pour is assumed based on visible cup orientation at maximal tilt (frame_4~frame_6)"
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Cup emptied and mug filled, no visible spillage",
      "Retreat clears workspace after pouring"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"mug","pattern":"grid","max_attempts":3,"timeout_ms":1200}},
      "active_path_ids": ["Sequence","Fallback","RetryUntilSuccessful","ScanForTarget"]
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"mug","timeout_ms":800}},
      "active_path_ids": ["Sequence","DetectObject"]
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"mug","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": ["Sequence","MoveAbove"]
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"mug","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": ["Sequence","ApproachAndAlign"]
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"Pour","attrs":{"source":"cup","target":"mug","amount":"full","tilt_angle":90,"pour_rate":"normal","timeout_ms":1500}},
      "active_path_ids": ["Sequence","Pour"]
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"Pour","attrs":{"source":"cup","target":"mug","amount":"full","tilt_angle":90,"pour_rate":"normal","timeout_ms":1500}},
      "active_path_ids": ["Sequence","Pour"]
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"Wait","attrs":{"timeout_ms":500}},
      "active_path_ids": ["Sequence","Wait"]
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.10,"timeout_ms":1200}},
      "active_path_ids": ["Sequence","Retreat"]
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.10,"timeout_ms":1200}},
      "active_path_ids": ["Sequence","Retreat"]
    }
  ]
}