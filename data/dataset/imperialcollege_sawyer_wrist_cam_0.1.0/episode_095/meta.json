{
  "dataset_id": "imperialcollege_sawyer_wrist_cam_0.1.0",
  "episode_id": "episode_095",
  "task_summary": "The robot detects a mug, moves above it, aligns, pours liquid from a red object into the mug, and then retreats. All behaviors are derived directly from the contact-sheet frames.",
  "task_long_description": {
    "overview": "In this episode, a robot arm is tasked to pour liquid into a mug placed on a blue surface. The pouring is performed using a red vessel/tool. The robot first locates and approaches the mug, aligns itself above, performs the pouring motion with controlled tilt, and then retreats. The process is structured to ensure the mug is visible and accessible, and the pouring action is smooth with moderate rate and tilt, matching visual cues of the pouring sequence.",
    "preconditions": [
      "Mug is present and visible in workspace",
      "Red pouring vessel is available and contains liquid",
      "No obstacle between robot and mug"
    ],
    "stepwise_plan": [
      "Verify mug is visible; scan if not",
      "Detect mug and move above with safe offset",
      "Align above mug with moderate precision",
      "Pour from red vessel into mug at 45-degree tilt and normal rate",
      "Retreat arm after pouring"
    ],
    "success_criteria": [
      "Liquid is poured into the mug",
      "No spill outside mug",
      "Robot retreats without collision"
    ],
    "failure_and_recovery": [
      "If mug not detected, perform grid scan",
      "If align fails, retry approach",
      "If pour interrupted, abort and retreat"
    ],
    "termination": "Robot halts after successful pouring and retreat, or upon abort due to error."
  },
  "frame_ranking": {
    "order": [
      "frame_3",
      "frame_5",
      "frame_2",
      "frame_6",
      "frame_1",
      "frame_4",
      "frame_7",
      "frame_0",
      "frame_8"
    ],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "pour in mug",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": [
    "frame_0",
    "frame_1",
    "frame_2",
    "frame_3",
    "frame_4",
    "frame_5",
    "frame_6",
    "frame_7",
    "frame_8"
  ],
  "objects": ["mug", "red_object"],
  "objects_from_instruction": ["mug"],
  "blackboard_keys": [],
  "node_specs": [
    {
      "id": "IsObjectVisible",
      "type": "Condition",
      "ports": {"target": "mug"},
      "description": "Checks if mug is visible before approaching."
    },
    {
      "id": "ScanForTarget",
      "type": "Action",
      "ports": {
        "target": "mug",
        "pattern": "grid",
        "max_attempts": 3,
        "timeout_ms": 1200
      },
      "description": "Scans area for mug if visibility fails."
    },
    {
      "id": "DetectObject",
      "type": "Action",
      "ports": {"target": "mug", "timeout_ms": 800},
      "description": "Locates mug for approach."
    },
    {
      "id": "MoveAbove",
      "type": "Action",
      "ports": {"target": "mug", "offset_z": 0.05, "timeout_ms": 1500},
      "description": "Moves arm above the mug for pouring."
    },
    {
      "id": "ApproachAndAlign",
      "type": "Action",
      "ports": {"target": "mug", "tolerance": 0.005, "timeout_ms": 1500},
      "description": "Align above mug with moderate precision."
    },
    {
      "id": "Pour",
      "type": "Action",
      "ports": {
        "source": "red_object",
        "target": "mug",
        "amount": "full",
        "tilt_angle": 45,
        "pour_rate": "normal",
        "timeout_ms": 2000
      },
      "description": "Pours liquid from red object into mug at controlled tilt."
    },
    {
      "id": "Retreat",
      "type": "Action",
      "ports": {
        "distance": 0.10,
        "timeout_ms": 1200
      },
      "description": "Retreats arm from mug after pouring."
    }
  ],
  "tree_stats": {
    "nodes_total": 10,
    "actions": 6,
    "conditions": 1,
    "depth": 3
  },
  "failure_modes": [
    "Mug not visible",
    "Approach misaligned",
    "Pour blocked or interrupted",
    "Liquid spilled"
  ],
  "recovery_strategy": [
    "Scan for mug if not detected",
    "Retry alignment step",
    "Abort pour and retreat if error detected"
  ],
  "assumptions": [
    "The instruction does not specify pour source; visual evidence shows a red object (interpreted as source).",
    "Amount, tilt_angle, and pour_rate set to 'full', 45, and 'normal' from visual cues in frames.",
    "No explicit force or gentle/quick modifiers in instruction or visual; defaults to null.",
    "If red object is not a vessel, some ambiguity exists, but pouring action in frames supports this mapping."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Liquid observed inside mug after pour",
      "No liquid on blue surface",
      "Robot arm clear of mug area at terminal frame"
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": {
    "model_reported_tokens": null,
    "client_elapsed_ms": null
  },
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {
        "id": "IsObjectVisible",
        "attrs": {"target": "mug"}
      },
      "active_path_ids": ["MainTree","Sequence","Fallback","IsObjectVisible"]
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {
        "id": "DetectObject",
        "attrs": {"target": "mug", "timeout_ms": 800}
      },
      "active_path_ids": ["MainTree","Sequence","DetectObject"]
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {
        "id": "MoveAbove",
        "attrs": {"target": "mug", "offset_z": 0.05, "timeout_ms": 1500}
      },
      "active_path_ids": ["MainTree","Sequence","MoveAbove"]
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {
        "id": "ApproachAndAlign",
        "attrs": {"target": "mug", "tolerance": 0.005, "timeout_ms": 1500}
      },
      "active_path_ids": ["MainTree","Sequence","ApproachAndAlign"]
    },
    {
      "frame": "frame_4",
      "phase": "verify",
      "active_leaf": {
        "id": "ApproachAndAlign",
        "attrs": {"target": "mug", "tolerance": 0.005, "timeout_ms": 1500}
      },
      "active_path_ids": ["MainTree","Sequence","ApproachAndAlign"]
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {
        "id": "Pour",
        "attrs": {
          "source": "red_object",
          "target": "mug",
          "amount": "full",
          "tilt_angle": 45,
          "pour_rate": "normal",
          "timeout_ms": 2000
        }
      },
      "active_path_ids": ["MainTree","Sequence","Pour"]
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {
        "id": "Pour",
        "attrs": {
          "source": "red_object",
          "target": "mug",
          "amount": "full",
          "tilt_angle": 45,
          "pour_rate": "normal",
          "timeout_ms": 2000
        }
      },
      "active_path_ids": ["MainTree","Sequence","Pour"]
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {
        "id": "Retreat",
        "attrs": {"distance": 0.10, "timeout_ms": 1200}
      },
      "active_path_ids": ["MainTree","Sequence","Retreat"]
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {
        "id": "Retreat",
        "attrs": {"distance": 0.10, "timeout_ms": 1200}
      },
      "active_path_ids": ["MainTree","Sequence","Retreat"]
    }
  ]
}