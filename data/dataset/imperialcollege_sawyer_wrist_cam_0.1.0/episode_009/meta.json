{
  "dataset_id": "imperialcollege_sawyer_wrist_cam_0.1.0",
  "episode_id": "episode_009",
  "task_summary": "The robot is tasked with picking up a shoe by detecting, approaching, and grasping it from above. The episode comprises a sequence of frames featuring the shoe on a blue surface and the robot's progression towards the grasp.",
  "task_long_description": {
    "overview": "This episode involves a manipulator equipped with a wrist camera, tasked with picking up a shoe placed on a blue cloth. The robot must localize the shoe visually, approach above it, and execute a top grasp with a gripper, completing the pickup. The frames show clear stepwise approach and shoe alignment, with no obstacles visible. Constraints include precise object detection, alignment, and stable grasping. The robot must avoid missing the target or misaligning its gripper.",
    "preconditions": [
      "Shoe present and visible on workspace",
      "Gripper functional and open",
      "Robot system properly initialized",
      "No obstructions between arm and shoe"
    ],
    "stepwise_plan": [
      "Check shoe visibility; scan if not visible",
      "Detect precise shoe location",
      "Open gripper to initial width",
      "Move above shoe at offset height",
      "Compute grasp pose using top strategy",
      "Approach and align to grasp location",
      "Lower until gentle contact with shoe",
      "Close gripper with moderate force",
      "Verify shoe is held in gripper"
    ],
    "success_criteria": [
      "Shoe is securely held in gripper",
      "No collision or drops during grasp",
      "Grasp pose matches shoe orientation"
    ],
    "failure_and_recovery": [
      "Shoe missed or not detected: retry scan",
      "Grasp unstable: repeat approach and closure",
      "Contact not detected: re-align or lower again"
    ],
    "termination": "Terminate when the shoe is securely gripped (ObjectInGripper condition satisfied)."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "pick up shoe",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["shoe"],
  "objects_from_instruction": ["shoe"],
  "blackboard_keys": ["grasp_shoe"],
  "node_specs": [
    {
      "id": "IsObjectVisible",
      "type": "Condition",
      "ports": {"target": "shoe"},
      "description": "Checks if the shoe is directly visible to the wrist camera."
    },
    {
      "id": "ScanForTarget",
      "type": "Action",
      "ports": {"target": "shoe", "pattern": "raster", "max_attempts": 3, "timeout_ms": 1200},
      "description": "Scans workspace in a raster pattern to locate the shoe up to 3 times."
    },
    {
      "id": "DetectObject",
      "type": "Action",
      "ports": {"target": "shoe", "timeout_ms": 800},
      "description": "Detects precise location of the shoe in the workspace."
    },
    {
      "id": "OpenGripper",
      "type": "Action",
      "ports": {"width": 0.06, "timeout_ms": 500},
      "description": "Opens the gripper to an appropriate width for grasping the shoe."
    },
    {
      "id": "MoveAbove",
      "type": "Action",
      "ports": {"target": "shoe", "offset_z": 0.05, "timeout_ms": 1500},
      "description": "Moves the gripper to an approach position directly above the shoe."
    },
    {
      "id": "ComputeGraspPose",
      "type": "Action",
      "ports": {"target": "shoe", "strategy": "top", "result_key": "grasp_shoe"},
      "description": "Computes a top grasp pose for securely grasping the shoe."
    },
    {
      "id": "ApproachAndAlign",
      "type": "Action",
      "ports": {"target": "shoe", "tolerance": 0.005, "timeout_ms": 1500},
      "description": "Approaches the shoe and aligns gripper within tight tolerance."
    },
    {
      "id": "LowerUntilContact",
      "type": "Action",
      "ports": {"speed": "slow", "max_depth": 0.05, "force_threshold": 5, "timeout_ms": 1200},
      "description": "Lowers gripper until gentle contact with shoe is detected."
    },
    {
      "id": "CloseGripper",
      "type": "Action",
      "ports": {"force": 10, "timeout_ms": 800},
      "description": "Closes gripper with moderate force to grasp the shoe."
    },
    {
      "id": "ObjectInGripper",
      "type": "Condition",
      "ports": {"target": "shoe"},
      "description": "Verifies successful grasp; shoe now secured."
    }
  ],
  "tree_stats": {"nodes_total": 10, "actions": 8, "conditions": 2, "depth": 3},
  "failure_modes": [
    "Shoe not detected due to occlusion or camera failure",
    "Gripper misalignment leads to failed grasp",
    "Contact not made with shoe surface",
    "Gripper closure not strong enough to grasp"
  ],
  "recovery_strategy": [
    "Retry visual scan and detection (Fallback branch)",
    "Re-align and lower for additional contact attempts",
    "Reopen gripper and repeat grasp steps"
  ],
  "assumptions": [
    "Only one shoe present and clearly visible in all frames",
    "No explicit place or transfer requiredâ€”pickup is the episode endpoint",
    "Frame evidence matches the sequential approach and grasp in the BT",
    "Instruction omits force/tolerance values; defaults chosen per node library bin"
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Shoe clearly held in gripper post-execution; visible in contact frames"
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {
        "id": "IsObjectVisible",
        "attrs": {"target": "shoe"}
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {
        "id": "ScanForTarget",
        "attrs": {"target": "shoe", "pattern": "raster", "max_attempts": 3, "timeout_ms": 1200}
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "perceive",
      "active_leaf": {
        "id": "DetectObject",
        "attrs": {"target": "shoe", "timeout_ms": 800}
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {
        "id": "OpenGripper",
        "attrs": {"width": 0.06, "timeout_ms": 500}
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "approach",
      "active_leaf": {
        "id": "MoveAbove",
        "attrs": {"target": "shoe", "offset_z": 0.05, "timeout_ms": 1500}
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "verify",
      "active_leaf": {
        "id": "ComputeGraspPose",
        "attrs": {"target": "shoe", "strategy": "top", "result_key": "grasp_shoe"}
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "grasp",
      "active_leaf": {
        "id": "ApproachAndAlign",
        "attrs": {"target": "shoe", "tolerance": 0.005, "timeout_ms": 1500}
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "grasp",
      "active_leaf": {
        "id": "LowerUntilContact",
        "attrs": {"speed": "slow", "max_depth": 0.05, "force_threshold": 5, "timeout_ms": 1200}
      },
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "grasp",
      "active_leaf": {
        "id": "CloseGripper",
        "attrs": {"force": 10, "timeout_ms": 800}
      },
      "active_path_ids": []
    }
  ]
}