{
  "dataset_id": "imperialcollege_sawyer_wrist_cam_0.1.0",
  "episode_id": "episode_086",
  "task_summary": "Hang a cup on a hook using the Sawyer robot. The robot locates the cup, grasps it, moves to the hook, and hangs the cup.",
  "task_long_description": {
    "overview": "The Sawyer robot must hang a cup onto a hook positioned on a blue mat. The task involves first locating the cup, then approaching it precisely, grasping it securely, and lifting it. After verifying a stable grasp, the robot locates the hook, approaches from above, aligns, and hangs the cup by inserting its handle onto the hook, then releases and retreats. The main objects are the cup (black/white, likely plastic or ceramic) and the hook (metallic). The scene is static with a blue background. Constraints include limited workspace and need for secure but gentle motion.",
    "preconditions": [
      "Cup and hook are present and visible on workspace",
      "Robot gripper is empty and operational",
      "Workspace is clear of obstructions"
    ],
    "stepwise_plan": [
      "1. Search for and identify the cup.",
      "2. Open gripper, move above, and compute grasp pose on cup.",
      "3. Approach, align, and grasp the cup from the side.",
      "4. Verify grasp stability.",
      "5. Search for and identify the hook.",
      "6. Move above, approach, and align to hook.",
      "7. Hang cup on hook and open gripper to release.",
      "8. Retreat and end the task."
    ],
    "success_criteria": [
      "Cup is securely hanging on hook",
      "Robot gripper is empty",
      "Task completes without collision or dropping the cup"
    ],
    "failure_and_recovery": [
      "Cup not visible: scan up to 3 times",
      "Grasp fails: retry grasp sequence",
      "Hook not visible: scan up to 3 times",
      "Contact or pose misalignment: abort and log failure"
    ],
    "termination": "Task terminates when cup is released on hook and robot is safely retracted."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "hang cup",
  "instruction_to_ports": {
    "force": 5,
    "timeout_ms": 1200,
    "tolerance": 0.005,
    "retry_attempts": 3
  },
  "frame_source": "contact_sheet",
  "frame_order": [
    "frame_0","frame_1","frame_2","frame_3",
    "frame_4","frame_5","frame_6","frame_7","frame_8"
  ],
  "objects": ["cup", "hook"],
  "objects_from_instruction": ["cup"],
  "blackboard_keys": ["grasp_cup"],
  "node_specs": [
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"cup"},"description":"Checks if cup is visible for perception."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"cup", "pattern":"spiral", "max_attempts":3, "timeout_ms":1200},"description":"Scan to find the cup if not visible."},
    {"id":"DetectObject","type":"Action","ports":{"target":"cup","timeout_ms":800},"description":"Detects and localizes the cup."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.08,"timeout_ms":500},"description":"Opens gripper before approaching."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"cup","offset_z":0.05,"timeout_ms":1500},"description":"Positions above the cup."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"cup","strategy":"side","result_key":"grasp_cup"},"description":"Computes the best side grasp."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"cup","tolerance":0.005,"timeout_ms":1500},"description":"Approaches and aligns to cup."},
    {"id":"GraspAtPose","type":"Action","ports":{"pose_key":"grasp_cup","strategy":"side","timeout_ms":1000},"description":"Performs grasping action at computed pose."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Checks grasp stability."},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"hook"},"description":"Checks if hook is visible."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"hook","pattern":"spiral","max_attempts":3,"timeout_ms":1200},"description":"Scan to find the hook if not visible."},
    {"id":"DetectObject","type":"Action","ports":{"target":"hook","timeout_ms":800},"description":"Detects and localizes the hook."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"hook","offset_z":0.08,"timeout_ms":1500},"description":"Positions above the hook."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"hook","tolerance":0.005,"timeout_ms":1500},"description":"Approaches and aligns to hook."},
    {"id":"Hang","type":"Action","ports":{"target":"cup","hook_id":"hook","approach_angle":0,"timeout_ms":1200},"description":"Hangs the cup on the hook."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.12,"timeout_ms":500},"description":"Releases the cup by opening the gripper."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.10,"timeout_ms":1200},"description":"Moves arm away from the hook after hanging."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":500},"description":"Waits briefly to confirm task completion."}
  ],
  "tree_stats": {"nodes_total": 20, "actions": 14, "conditions": 4, "depth": 1},
  "failure_modes": [
    "Cup not detected",
    "Cup grasp failed",
    "Hook not detected",
    "Misaligned insert",
    "Dropped cup",
    "Collision"
  ],
  "recovery_strategy": [
    "Retry up to 3 scans for perception failures",
    "Retry grasp if unstable",
    "Abort task after repeated failures and retract"
  ],
  "assumptions": [
    "Frames confirm that the cup and hook are both present and reachable.",
    "Hook identity inferred from scene geometry (top right relative to cup).",
    "Instruction does not specify force, defaulting to minimal allowed (5).",
    "Timeouts/tolerances correspond to careful precise motion as seen.",
    "If hook not recognized, attribute based on its metallic appearence."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Cup is visibly suspended from the hook at the end.",
      "No object remains in gripper post-place.",
      "No visible disturbance or drop event."
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": {
    "model_reported_tokens": null,
    "client_elapsed_ms": null
  },
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"cup","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"cup","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "verify",
      "active_leaf": {"id":"ComputeGraspPose","attrs":{"target":"cup","strategy":"side","result_key":"grasp_cup"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"GraspAtPose","attrs":{"pose_key":"grasp_cup","strategy":"side","timeout_ms":1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"hook","offset_z":0.08,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"hook","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"Hang","attrs":{"target":"cup","hook_id":"hook","approach_angle":0,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.12,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.10,"timeout_ms":1200}},
      "active_path_ids": []
    }
  ]
}