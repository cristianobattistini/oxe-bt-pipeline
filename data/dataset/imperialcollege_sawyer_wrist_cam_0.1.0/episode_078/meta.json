{
  "dataset_id": "imperialcollege_sawyer_wrist_cam_0.1.0",
  "episode_id": "episode_078",
  "task_summary": "The BT sequences perception, approach, and grasp of a single visible bottle, reflecting a basic 'pick up bottle' task.",
  "task_long_description": {
    "overview": "This task instance involves a manipulation robot (Sawyer with a wrist camera) in a scenario with a single green bottle on a blue background. The whole task is to pick up the bottle, requiring it be robustly detected (even if not immediately centered), approached from above, and grasped securely. The episode focuses solely on the pickup; there are no containers, additional clutter, or complex placements. The major constraint is reliable visual detection as the robot moves progressively closer.",
    "preconditions": [
      "Robot gripper empty and open.",
      "Bottle present within the camera's workspace.",
      "Robot initialized at a nominal home or start position."
    ],
    "stepwise_plan": [
      "Verify visibility of bottle or scan workspace to locate it.",
      "Detect precise pose of the bottle.",
      "Open gripper in preparation for grasp.",
      "Move above the bottle with minimal offset.",
      "Compute a top grasp on the bottle.",
      "Approach and align over the bottle within minimal tolerance.",
      "Execute a top-down grasp at computed pose.",
      "Verify bottle is held in gripper."
    ],
    "success_criteria": [
      "Bottle is securely held in the robot gripper at the end of the episode.",
      "No object slippage is observed after grasp confirmation."
    ],
    "failure_and_recovery": [
      "If the bottle is not immediately visible, perform up to three scan attempts.",
      "If scan and detect fail, abort task.",
      "If grasp is unsuccessful (bottle not in gripper), reattempt not modeled in this episode."
    ],
    "termination": "Terminated after bottle is confirmed to be picked up (i.e., detected in the gripper) or if perception repeatedly fails."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "pick up bottle",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["bottle"],
  "objects_from_instruction": ["bottle"],
  "blackboard_keys": ["std_top"],
  "node_specs": [
    {
      "id": "IsObjectVisible",
      "type": "Condition",
      "ports": {"target": "bottle"},
      "description": "Checks if the bottle is visible in the camera's current view."
    },
    {
      "id": "ScanForTarget",
      "type": "Action",
      "ports": {"target": "bottle", "pattern": "grid", "max_attempts": 3, "timeout_ms": 1000},
      "description": "Performs a grid pattern scan up to 3 times to find the bottle."
    },
    {
      "id": "DetectObject",
      "type": "Action",
      "ports": {"target": "bottle", "timeout_ms": 800},
      "description": "Detects and localizes the bottle."
    },
    {
      "id": "OpenGripper",
      "type": "Action",
      "ports": {"width": 0.06, "timeout_ms": 500},
      "description": "Opens the robot's gripper to 6cm in preparation for grasp."
    },
    {
      "id": "MoveAbove",
      "type": "Action",
      "ports": {"target": "bottle", "offset_z": 0.05, "timeout_ms": 1500},
      "description": "Moves the gripper 5cm above the bottle."
    },
    {
      "id": "ComputeGraspPose",
      "type": "Action",
      "ports": {"target": "bottle", "strategy": "top", "result_key": "std_top"},
      "description": "Computes the grasp pose for a top-down grasp of the bottle and stores as std_top."
    },
    {
      "id": "ApproachAndAlign",
      "type": "Action",
      "ports": {"target": "bottle", "tolerance": 0.005, "timeout_ms": 1500},
      "description": "Approaches and aligns the gripper above the bottle with 5mm tolerance."
    },
    {
      "id": "GraspAtPose",
      "type": "Action",
      "ports": {"pose_key": "std_top", "strategy": "top", "timeout_ms": 1000},
      "description": "Executes the grasp at the computed top pose."
    },
    {
      "id": "ObjectInGripper",
      "type": "Condition",
      "ports": {"target": "bottle"},
      "description": "Confirms the bottle is now held in the gripper."
    }
  ],
  "tree_stats": {"nodes_total": 11, "actions": 7, "conditions": 2, "depth": 3},
  "failure_modes": [
    "Bottle not detected within scan attempts",
    "Grasp failed: bottle not found in gripper",
    "Perception error/false positive"
  ],
  "recovery_strategy": [
    "Retry scan up to 3 times if bottle is not visible.",
    "Abort if bottle is still not detected.",
    "Future: enable grasp retry loop (not shown here)."
  ],
  "assumptions": [
    "All frames indicate the same bottle, confirming the singular target.",
    "No conflicting clutter or occlusal ambiguity present in visual evidence.",
    "Frames show approach only and do not depict actual grasp or lift; BT includes grasp and confirmation for completion semantics.",
    "No explicit force or speed constraints in instruction/frames; default values chosen."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Bottle held in gripper at end of episode",
      "Visual confirmation and gripper status match"
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": {
    "model_reported_tokens": null,
    "client_elapsed_ms": null
  },
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"bottle"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"bottle","pattern":"grid","max_attempts":3,"timeout_ms":1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"bottle","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.06,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"bottle","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "approach",
      "active_leaf": {"id":"ComputeGraspPose","attrs":{"target":"bottle","strategy":"top","result_key":"std_top"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"bottle","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "grasp",
      "active_leaf": {"id":"GraspAtPose","attrs":{"pose_key":"std_top","strategy":"top","timeout_ms":1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "grasp",
      "active_leaf": {"id":"ObjectInGripper","attrs":{"target":"bottle"}},
      "active_path_ids": []
    }
  ]
}