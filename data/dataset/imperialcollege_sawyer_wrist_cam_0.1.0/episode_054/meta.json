{
  "dataset_id": "imperialcollege_sawyer_wrist_cam_0.1.0",
  "episode_id": "episode_054",
  "task_summary": "The robot perceives, grasps a jug, aligns it above a mug, and pours contents into the mug, then retreats.",
  "task_long_description": {
    "overview": "This episode shows a robot arm tasked to pour the contents of a jug into a mug on a blue surface. The jug is initially above and to the side of the mug. The robot must reliably detect both objects, grasp the jug, position above the mug, perform a stable pour (with high tilt), and retreat safely at the end. Task success depends on visual sensing, stable grasp, accurate alignment, and controlled pouring action.",
    "preconditions": [
      "Jug and mug are present and visible on the surface",
      "Jug contains liquid or simulated contents",
      "Mug is empty and upright",
      "Robot arm starts out of view"
    ],
    "stepwise_plan": [
      "Locate the jug using vision; retry if not initially visible",
      "Detect the mug position for pouring target",
      "Move above the jug and align for a top grasp",
      "Grasp the jug securely with minimum required force",
      "Move above mug and align for pouring",
      "Pour into the mug with sufficient tilt for flow",
      "Retreat to clear the workspace"
    ],
    "success_criteria": [
      "Jug is successfully grasped with no slip",
      "Jug positioned and aligned above the mug",
      "Contents poured into the mug with minimal spill",
      "Retreat leaves workspace clear"
    ],
    "failure_and_recovery": [
      "If jug not detected, vision retry loop attempts reacquisition",
      "If grasp fails, process would need to revert and retry (not shown in BT)",
      "Failures in pouring or alignment could result in spills, requiring re-alignment and pour restart"
    ],
    "termination": "Episode ends after the retreat action post pouring is complete."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "pour in mug",
  "instruction_to_ports": {
    "force": 5,
    "timeout_ms": 1500,
    "tolerance": 0.005,
    "retry_attempts": 3
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["jug", "mug"],
  "objects_from_instruction": ["mug"],
  "blackboard_keys": [],
  "node_specs": [
    {
      "id": "IsObjectVisible",
      "type": "Condition",
      "ports": {"target": "jug"},
      "description": "Checks if the jug is visible to the perception system."
    },
    {
      "id": "ScanForTarget",
      "type": "Action",
      "ports": {"target": "jug", "pattern": "raster", "max_attempts": 3, "timeout_ms": 1200},
      "description": "Scans for the jug using a raster pattern if jug is not detected."
    },
    {
      "id": "DetectObject",
      "type": "Action",
      "ports": {"target": "mug", "timeout_ms": 800},
      "description": "Detects and localizes the mug before pouring."
    },
    {
      "id": "MoveAbove",
      "type": "Action",
      "ports": {"target": "jug", "offset_z": 0.10, "timeout_ms": 1500},
      "description": "Moves end effector above the jug, prepping for grasp."
    },
    {
      "id": "ApproachAndAlign",
      "type": "Action",
      "ports": {"target": "jug", "tolerance": 0.005, "timeout_ms": 1500},
      "description": "Aligns for a top grasp with precise tolerance above the jug."
    },
    {
      "id": "Grasp",
      "type": "Action",
      "ports": {"target": "jug", "strategy": "top", "force": 5, "timeout_ms": 800},
      "description": "Grasps the jug from the top with minimum force."
    },
    {
      "id": "MoveAbove",
      "type": "Action",
      "ports": {"target": "mug", "offset_z": 0.10, "timeout_ms": 1500},
      "description": "Positions jug above the mug for pouring."
    },
    {
      "id": "Pour",
      "type": "Action",
      "ports": {"source": "jug", "target": "mug", "amount": "full", "tilt_angle": 90, "pour_rate": "normal", "timeout_ms": 1500},
      "description": "Pours the contents of jug into mug, with full tilt and normal rate."
    },
    {
      "id": "Retreat",
      "type": "Action",
      "ports": {"distance": 0.10, "timeout_ms": 1200},
      "description": "Retreats arm from pour area after completion."
    }
  ],
  "tree_stats": {"nodes_total": 11, "actions": 8, "conditions": 1, "depth": 3},
  "failure_modes": [
    "Jug not visible initially",
    "Mug not detected",
    "Grasp failure (jug slip/drop)",
    "Misalignment above mug",
    "Pour incomplete or spillage"
  ],
  "recovery_strategy": [
    "Retry object detection via ScanForTarget if jug not visible",
    "Abort and reset if grasp fails",
    "Attempt realignment above mug if necessary"
  ],
  "assumptions": [
    "Visual evidence supports jug as the pouring source and mug as the target.",
    "Frames do not show clear actuation of gripper; grasp and object identity inferred by geometry.",
    "Jug and mug are unambiguously differentiated in context."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Jug grasped securely and tilted above mug",
      "Pouring action successfully fills mug"
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id": "IsObjectVisible", "attrs": {"target": "jug"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id": "ScanForTarget", "attrs": {"target": "jug", "pattern": "raster", "max_attempts": 3, "timeout_ms": 1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "perceive",
      "active_leaf": {"id": "DetectObject", "attrs": {"target": "mug", "timeout_ms": 800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id": "MoveAbove", "attrs": {"target": "jug", "offset_z": 0.10, "timeout_ms": 1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "verify",
      "active_leaf": {"id": "ApproachAndAlign", "attrs": {"target": "jug", "tolerance": 0.005, "timeout_ms": 1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id": "Grasp", "attrs": {"target": "jug", "strategy": "top", "force": 5, "timeout_ms": 800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id": "MoveAbove", "attrs": {"target": "mug", "offset_z": 0.10, "timeout_ms": 1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id": "Pour", "attrs": {"source": "jug", "target": "mug", "amount": "full", "tilt_angle": 90, "pour_rate": "normal", "timeout_ms": 1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id": "Retreat", "attrs": {"distance": 0.10, "timeout_ms": 1200}},
      "active_path_ids": []
    }
  ]
}