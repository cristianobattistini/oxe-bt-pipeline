{
  "dataset_id": "imperialcollege_sawyer_wrist_cam_0.1.0",
  "episode_id": "episode_059",
  "task_summary": "Place a cup into the dishwasher rack using a robot manipulator, following a robust perception and manipulation sequence.",
  "task_long_description": {
    "overview": "This episode demonstrates a robotic arm equipped with a wrist camera tasked to put a single visible cup into the dishwasher rack. The sequence involves localizing the cup, approaching it from above, grasping it securely, navigating above the dishwasher, and placing the cup in the dish rack. Frames show the cup and rack in consistent proximity and view. Robust perception is ensured by retries if the cup is not initially detected. The workflow models common household cleanup automation constraints, emphasizing reliable object handling and correct placement.",
    "preconditions": [
      "Cup is present and visually accessible in the workspace.",
      "Dishwasher dish rack is open and reachable.",
      "Robot's gripper is empty and functional.",
      "No obstructions in the workspace."
    ],
    "stepwise_plan": [
      "Check cup visibility and reacquire if necessary.",
      "Detect cup for precise localization.",
      "Open gripper to correct width.",
      "Move above cup, compute suitable grasp pose.",
      "Grasp cup from the top and verify.",
      "Check visibility of dishwasher and dish rack.",
      "Move above dishwasher rack.",
      "Place the cup on the rack surface and release.",
      "Retreat to finish the task."
    ],
    "success_criteria": [
      "Cup securely placed in dish rack.",
      "Gripper open and robot arm retracted.",
      "No objects dropped outside the rack."
    ],
    "failure_and_recovery": [
      "Cup not detected: rescan and retry.",
      "Failed grasp: reattempt or abort.",
      "Placement misaligned: retry move and placement.",
      "Obstacle encountered: terminate or retreat."
    ],
    "termination": "Task ends when the cup is released in the rack and arm is retracted, or upon repeated failure."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "put cup in dishwasher",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["cup", "dishwasher", "dish_rack"],
  "objects_from_instruction": ["cup", "dishwasher"],
  "blackboard_keys": ["grasp_cup"],
  "node_specs": [
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"cup"},"description":"Checks if the cup is currently visible to sensors."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"cup","pattern":"grid","max_attempts":3,"timeout_ms":1200},"description":"Scan workspace to locate cup if not initially visible."},
    {"id":"DetectObject","type":"Action","ports":{"target":"cup","timeout_ms":800},"description":"Detect cup position and orientation for manipulation."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.06,"timeout_ms":500},"description":"Open the gripper to a width suitable for cup grasp."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"cup","offset_z":0.05,"timeout_ms":1500},"description":"Move to a position above the cup, preparing for grasp."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"cup","strategy":"top","result_key":"grasp_cup"},"description":"Compute appropriate grasp pose for the cup."},
    {"id":"GraspAtPose","type":"Action","ports":{"pose_key":"grasp_cup","strategy":"top","timeout_ms":1200},"description":"Perform the grasp at computed pose."},
    {"id":"ObjectInGripper","type":"Condition","ports":{"target":"cup"},"description":"Verify that the cup is successfully held after grasp."},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"dishwasher"},"description":"Check if the dishwasher is visible to sensors."},
    {"id":"DetectObject","type":"Action","ports":{"target":"dishwasher","timeout_ms":800},"description":"Detect the dishwasher's location and orientation."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"dishwasher","offset_z":0.10,"timeout_ms":1500},"description":"Move above the dishwasher rack in preparation to place cup."},
    {"id":"PlaceOnSurface","type":"Action","ports":{"target":"cup","area_id":"dish_rack","yaw_deg":0,"press_force":10,"timeout_ms":1200},"description":"Place the cup on the dishwasher rack with gentle force."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.08,"timeout_ms":500},"description":"Open gripper to release the cup."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.10,"timeout_ms":1200},"description":"Retract arm after placement to clear workspace."}
  ],
  "tree_stats": {"nodes_total": 14, "actions": 10, "conditions": 4, "depth": 3},
  "failure_modes": [
    "Cup not detected or occluded.",
    "Grasping failure due to poor alignment.",
    "Cup drop during transfer.",
    "Dishwasher rack not detectable.",
    "Placement misses the rack area."
  ],
  "recovery_strategy": [
    "Retry scanning for cup.",
    "Repeat grasp at pose.",
    "Abort if repeated failure (after retries)."
  ],
  "assumptions": [
    "Frames confirm presence and accessibility of cup and rack throughout episode.",
    "No explicit mention of force or speed in instruction; ports left null.",
    "Frame [8] partially occluded but does not affect BT construction.",
    "Dishwasher rack assumed as placement target per visual evidence."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Cup is placed stably in rack, not dropped.",
      "Robot completes retreat.",
      "Visual confirmation of cup location in rack."
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"cup"}},
      "active_path_ids": ["Sequence","Fallback","IsObjectVisible"]
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"cup","pattern":"grid","max_attempts":3,"timeout_ms":1200}},
      "active_path_ids": ["Sequence","Fallback","RetryUntilSuccessful","ScanForTarget"]
    },
    {
      "frame": "frame_2",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"cup","timeout_ms":800}},
      "active_path_ids": ["Sequence","DetectObject"]
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.06,"timeout_ms":500}},
      "active_path_ids": ["Sequence","OpenGripper"]
    },
    {
      "frame": "frame_4",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"cup","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": ["Sequence","MoveAbove"]
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"ComputeGraspPose","attrs":{"target":"cup","strategy":"top","result_key":"grasp_cup"}},
      "active_path_ids": ["Sequence","ComputeGraspPose"]
    },
    {
      "frame": "frame_6",
      "phase": "grasp",
      "active_leaf": {"id":"GraspAtPose","attrs":{"pose_key":"grasp_cup","strategy":"top","timeout_ms":1200}},
      "active_path_ids": ["Sequence","GraspAtPose"]
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"PlaceOnSurface","attrs":{"target":"cup","area_id":"dish_rack","yaw_deg":0,"press_force":10,"timeout_ms":1200}},
      "active_path_ids": ["Sequence","PlaceOnSurface"]
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.10,"timeout_ms":1200}},
      "active_path_ids": ["Sequence","Retreat"]
    }
  ]
}