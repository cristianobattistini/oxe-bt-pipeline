{
  "dataset_id": "imperialcollege_sawyer_wrist_cam_0.1.0",
  "episode_id": "episode_041",
  "task_summary": "The robot picks up a slice of toast and inserts it into the slot of a toaster using a wrist-mounted camera for visual feedback.",
  "task_long_description": {
    "overview": "This episode demonstrates a tabletop manipulation task where a robot arm picks up a piece of toast and inserts it into a toaster slot. The scene consistently shows a red toaster and a slice of toast on a blue mat, with the robot approaching, grasping, lifting, transferring, and inserting the toast into the toaster. The sequence emphasizes precise visual alignment and minimal insertion force to avoid damaging the toast.",
    "preconditions": [
      "Toast and toaster present and visible on workspace",
      "Gripper is open and ready",
      "Camera provides adequate view of objects"
    ],
    "stepwise_plan": [
      "Detect the toast and toaster in the workspace",
      "Open the gripper",
      "Move above the toast",
      "Compute grasp pose on the toast",
      "Grasp the toast",
      "Verify stable grasp",
      "Move above the toaster slot",
      "Insert toast into slot",
      "Release toast",
      "Retreat from toaster"
    ],
    "success_criteria": [
      "Toast is placed inside the correct toaster slot without excessive force",
      "Toast remains intact",
      "Gripper releases toast fully",
      "Robot arm retreats without collision"
    ],
    "failure_and_recovery": [
      "If toast is not detected: retry visual detection",
      "If grasp is unstable: retry grasp or alert operator",
      "If insertion fails: retreat and reattempt alignment"
    ],
    "termination": "Task is complete once toast is inserted and gripper has safely released and retreated."
  },
  "frame_ranking": {
    "order": [
      "frame_3",
      "frame_5",
      "frame_2",
      "frame_6",
      "frame_1",
      "frame_4",
      "frame_7",
      "frame_0",
      "frame_8"
    ],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "insert toast",
  "instruction_to_ports": {
    "force": 5,
    "timeout_ms": 1000,
    "tolerance": 0.005,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": [
    "frame_0",
    "frame_1",
    "frame_2",
    "frame_3",
    "frame_4",
    "frame_5",
    "frame_6",
    "frame_7",
    "frame_8"
  ],
  "objects": ["toast", "toaster"],
  "objects_from_instruction": ["toast"],
  "blackboard_keys": ["grasp_toast"],
  "node_specs": [
    {
      "id": "IsObjectVisible",
      "type": "Condition",
      "ports": {"target": "toast"},
      "description": "Verifies toast object is visible in the workspace"
    },
    {
      "id": "DetectObject",
      "type": "Action",
      "ports": {"target": "toast", "timeout_ms": 800},
      "description": "Attempts to detect the toast using onboard camera"
    },
    {
      "id": "IsObjectVisible",
      "type": "Condition",
      "ports": {"target": "toaster"},
      "description": "Verifies toaster is visible"
    },
    {
      "id": "DetectObject",
      "type": "Action",
      "ports": {"target": "toaster", "timeout_ms": 800},
      "description": "Attempts to detect the toaster"
    },
    {
      "id": "OpenGripper",
      "type": "Action",
      "ports": {"width": 0.08, "timeout_ms": 500},
      "description": "Opens the gripper to grasp toast"
    },
    {
      "id": "MoveAbove",
      "type": "Action",
      "ports": {"target": "toast", "offset_z": 0.05, "timeout_ms": 1500},
      "description": "Moves above toast for grasp approach"
    },
    {
      "id": "ComputeGraspPose",
      "type": "Action",
      "ports": {"target": "toast", "strategy": "top", "result_key": "grasp_toast"},
      "description": "Computes top-down grasp pose for toast"
    },
    {
      "id": "GraspAtPose",
      "type": "Action",
      "ports": {"pose_key": "grasp_toast", "strategy": "top", "timeout_ms": 800},
      "description": "Executes grasp on toast"
    },
    {
      "id": "IsGraspStable",
      "type": "Condition",
      "ports": {},
      "description": "Checks that toast is stably held"
    },
    {
      "id": "MoveAbove",
      "type": "Action",
      "ports": {"target": "toaster", "offset_z": 0.05, "timeout_ms": 1500},
      "description": "Moves above toaster slot"
    },
    {
      "id": "InsertInto",
      "type": "Action",
      "ports": {
        "target": "toast",
        "slot_id": "slot_1",
        "axis": "z",
        "distance": 0.05,
        "tolerance": 0.005,
        "force_limit": 5,
        "timeout_ms": 1000
      },
      "description": "Inserts toast into slot by moving along z-axis"
    },
    {
      "id": "OpenGripper",
      "type": "Action",
      "ports": {"width": 0.08, "timeout_ms": 500},
      "description": "Releases toast after insertion"
    },
    {
      "id": "Retreat",
      "type": "Action",
      "ports": {"distance": 0.05, "timeout_ms": 800},
      "description": "Retreats gripper from toaster"
    }
  ],
  "tree_stats": {
    "nodes_total": 13,
    "actions": 9,
    "conditions": 4,
    "depth": 2
  },
  "failure_modes": [
    "Object detection fails for toast or toaster",
    "Grasp not successful or unstable",
    "Insertion misaligned or blocked",
    "Toast drops during transfer"
  ],
  "recovery_strategy": [
    "Retry detection if object missing",
    "Abort or reattempt grasp",
    "Retreat and retry insertion if blocked"
  ],
  "assumptions": [
    "The object to be manipulated is a slice of toast, and the slot 'slot_1' corresponds to the visible toaster slot in frames.",
    "There are no visible indicators for force or detailed slot geometry, so smallest force/tolerance bins are used for safety.",
    "No indication of retry cycles in the frames or instruction; single attempt used.",
    "If the instruction implied other objects, preference given to frames showing only one toast and one toaster."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Toast inserted securely into toaster slot without crushing",
      "Gripper releases toast and retreats without contact"
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": {
    "model_reported_tokens": null,
    "client_elapsed_ms": null
  },
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id": "DetectObject", "attrs": {"target": "toast", "timeout_ms": 800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id": "DetectObject", "attrs": {"target": "toaster", "timeout_ms": 800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id": "OpenGripper", "attrs": {"width": 0.08, "timeout_ms": 500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id": "MoveAbove", "attrs": {"target": "toast", "offset_z": 0.05, "timeout_ms": 1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id": "ComputeGraspPose", "attrs": {"target": "toast", "strategy": "top", "result_key": "grasp_toast"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id": "GraspAtPose", "attrs": {"pose_key": "grasp_toast", "strategy": "top", "timeout_ms": 800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id": "MoveAbove", "attrs": {"target": "toaster", "offset_z": 0.05, "timeout_ms": 1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id": "InsertInto", "attrs": {"target": "toast", "slot_id": "slot_1", "axis": "z", "distance": 0.05, "tolerance": 0.005, "force_limit": 5, "timeout_ms": 1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id": "Retreat", "attrs": {"distance": 0.05, "timeout_ms": 800}},
      "active_path_ids": []
    }
  ]
}