{
  "dataset_id": "imperialcollege_sawyer_wrist_cam_0.1.0",
  "episode_id": "episode_094",
  "task_summary": "Stack two bowls by grasping the top bowl and placing it onto the bottom bowl in precise alignment, as evidenced by sequential object approach, grasp, transfer, and release within the scene.",
  "task_long_description": {
    "overview": "The episode demonstrates a robot stacking two bowls on a blue surface. The robot must identify both bowls, approach the top bowl, compute a grasp, lift and transfer it, then precisely stack it on the bottom bowl. The behavior emphasizes careful perception, secure grasping, and centered alignment under visual feedback. Success is confirmed by the top bowl stably resting on the bottom bowl without visible misalignment or slippage.",
    "preconditions": ["Both bowls are initially visible and accessible", "Gripper is initially open", "Surface is clear and unobstructed", "Robot initialization complete"],
    "stepwise_plan": [
      "Detect and confirm visibility of both bowls",
      "Approach top bowl and compute grasp pose",
      "Grasp top bowl with minimum force",
      "Lift and transport bowl above bottom bowl",
      "Stack top bowl onto bottom bowl with gentle press force and alignment",
      "Release grip and retreat",
      "Confirm stacked configuration visually"
    ],
    "success_criteria": [
      "Both bowls visible and stacked in final frame",
      "No bowl displacement or fall",
      "Stable contact between bowls",
      "Robot has released top bowl"
    ],
    "failure_and_recovery": [
      "Top bowl slips from gripper: retry grasp after fresh alignment",
      "Misalignment during stack: repeat approach and alignment steps",
      "Perception error: trigger re-detection and scan for target up to 3 times"
    ],
    "termination": "Robot idle after placing top bowl onto bottom bowl and retreating; visual confirmation of task completion in final frame."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "stack bowls",
  "instruction_to_ports": {
    "force": 5,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["bowl_top", "bowl_bottom"],
  "objects_from_instruction": ["bowl"],
  "blackboard_keys": ["grasp_top"],
  "node_specs": [
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"bowl_top"},"description":"Checks if the top bowl is currently visible to the robot"},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"bowl_top","pattern":"raster","max_attempts":3,"timeout_ms":1200},"description":"Scans the scene for the top bowl using a raster pattern"},
    {"id":"DetectObject","type":"Action","ports":{"target":"bowl_top","timeout_ms":800},"description":"Runs object detection for the top bowl"},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"bowl_bottom"},"description":"Checks if the bottom bowl is currently visible to the robot"},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"bowl_bottom","pattern":"raster","max_attempts":3,"timeout_ms":1200},"description":"Scans the scene for the bottom bowl using a raster pattern"},
    {"id":"DetectObject","type":"Action","ports":{"target":"bowl_bottom","timeout_ms":800},"description":"Runs object detection for the bottom bowl"},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.06,"timeout_ms":500},"description":"Opens gripper to allow grasping bowl"},
    {"id":"MoveAbove","type":"Action","ports":{"target":"bowl_top","offset_z":0.05,"timeout_ms":1500},"description":"Positions gripper above top bowl"},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"bowl_top","strategy":"top","result_key":"grasp_top"},"description":"Computes grasp pose using top strategy for top bowl"},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"bowl_top","tolerance":0.005,"timeout_ms":1500},"description":"Carefully aligns gripper with bowl for grasping"},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.05,"force_threshold":5,"timeout_ms":1200},"description":"Slowly lowers until contact detected with bowl"},
    {"id":"CloseGripper","type":"Action","ports":{"force":5,"timeout_ms":800},"description":"Closes gripper to grasp the bowl"},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Verifies the grasp on the bowl is secure"},
    {"id":"MoveAbove","type":"Action","ports":{"target":"bowl_bottom","offset_z":0.10,"timeout_ms":1500},"description":"Moves grasped bowl above bottom bowl"},
    {"id":"Stack","type":"Action","ports":{"target":"bowl_top","on_top_of":"bowl_bottom","alignment":"center","press_force":5,"timeout_ms":1200},"description":"Stacks top bowl onto bottom bowl with centered alignment"},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.08,"timeout_ms":500},"description":"Releases the top bowl after stacking"},
    {"id":"Retreat","type":"Action","ports":{"distance":0.10,"timeout_ms":1200},"description":"Retreats arm after stacking operation"},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":500},"description":"Waits briefly to allow stack to settle"}
  ],
  "tree_stats": {"nodes_total":18,"actions":13,"conditions":3,"depth":2},
  "failure_modes": [
    "Top bowl not detected",
    "Bottom bowl not detected",
    "Grasp not stable",
    "Misalignment during stacking",
    "Collision or bowl slippage"
  ],
  "recovery_strategy": [
    "Re-scan for bowl if not detected (up to 3 attempts)",
    "Retry grasp if unstable",
    "Repeat alignment and stacking step in case of misplacement"
  ],
  "assumptions": [
    "The two visible objects are both bowls; their labels inferred as 'bowl_top' (being manipulated/stacked) and 'bowl_bottom'",
    "No grasp or stacking strategy explicitly specified in instruction, so top grasp and center alignment inferred from frames",
    "Press force set to minimum bin due to absence of 'gentle' or 'precise' language but stacking inferred from contact cues",
    "No explicit error recovery in instruction, but visual sequence advocates retries if perception fails"
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Top bowl fully stacked over bottom bowl and stable at end",
      "No objects dropped or misplaced"
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"bowl_top","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"bowl_bottom","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"bowl_top","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"ComputeGraspPose","attrs":{"target":"bowl_top","strategy":"top","result_key":"grasp_top"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":5,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"bowl_bottom","offset_z":0.10,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"Stack","attrs":{"target":"bowl_top","on_top_of":"bowl_bottom","alignment":"center","press_force":5,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Wait","attrs":{"timeout_ms":500}},
      "active_path_ids": []
    }
  ]
}