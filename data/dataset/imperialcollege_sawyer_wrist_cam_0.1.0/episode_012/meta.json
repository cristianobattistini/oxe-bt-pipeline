{
  "dataset_id": "imperialcollege_sawyer_wrist_cam_0.1.0",
  "episode_id": "episode_012",
  "task_summary": "The robot perceives, approaches, and securely grasps a kettle, based on stepwise visual evidence from the episode.",
  "task_long_description": {
    "overview": "This behavior tree represents a robotic arm tasked to pick up a kettle located on a blue surface. The robot must locate the kettle visually, approach and align above it, compute an appropriate top grasp, actuate its gripper, and verify successful grasp by ensuring the kettle is held. Visual evidence from the 9 frames supports a top-down, continuous approach, with increasing scale indicating proximity to the kettle. All actions and parameters are mapped strictly from the allowed node library.",
    "preconditions": [
      "Robot arm and gripper are operational.",
      "Kettle is on a visible planar surface in reach.",
      "No obstructions around the kettle."
    ],
    "stepwise_plan": [
      "Verify kettle is visible, retry scanning if needed.",
      "Detect precise kettle pose.",
      "Move the gripper above the kettle with a safe offset.",
      "Open the gripper to the required width.",
      "Compute a top-down grasp pose.",
      "Approach and align to target with specified tolerance.",
      "Grasp kettle at computed pose.",
      "Verify kettle is held in gripper."
    ],
    "success_criteria": [
      "Kettle detected and localized.",
      "Robot end effector approaches without collision.",
      "Gripper closes securely on kettle handle.",
      "Object is confirmed in gripper post-grasp."
    ],
    "failure_and_recovery": [
      "If kettle is not visible, ScanForTarget retries up to 3 times.",
      "If grasp fails, tree would terminate without verification.",
      "Recovery relies on retry in ScanForTarget branch only."
    ],
    "termination Sopndition": "Task terminates if kettle is held in gripper or any sequence action fails permanently."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "pick up kettle",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": 0.005,
    "retry_attempts": 3
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["kettle"],
  "objects_from_instruction": ["kettle"],
  "blackboard_keys": ["std_top"],
  "node_specs": [
    {
      "id": "IsObjectVisible",
      "type": "Condition",
      "ports": {"target":"kettle"},
      "description": "Checks if kettle is visible in current sensor view."
    },
    {
      "id": "ScanForTarget",
      "type": "Action",
      "ports": {"target":"kettle","pattern":"grid","max_attempts":3,"timeout_ms":1200},
      "description": "Actively scans scene for kettle using grid pattern."
    },
    {
      "id": "DetectObject",
      "type": "Action",
      "ports": {"target":"kettle","timeout_ms":1000},
      "description": "Detect kettle's pose for manipulation."
    },
    {
      "id": "MoveAbove",
      "type": "Action",
      "ports": {"target":"kettle","offset_z":0.05,"timeout_ms":1500},
      "description": "Move the end effector above the kettle, maintaining safety offset."
    },
    {
      "id": "OpenGripper",
      "type": "Action",
      "ports": {"width":0.06,"timeout_ms":500},
      "description": "Open gripper to specified width (6cm)."
    },
    {
      "id": "ComputeGraspPose",
      "type": "Action",
      "ports": {"target":"kettle","strategy":"top","result_key":"std_top"},
      "description": "Calculate top-down grasp pose for kettle."
    },
    {
      "id": "ApproachAndAlign",
      "type": "Action",
      "ports": {"target":"kettle","tolerance":0.005,"timeout_ms":1500},
      "description": "Approach and align precisely with target grasp pose."
    },
    {
      "id": "GraspAtPose",
      "type": "Action",
      "ports": {"pose_key":"std_top","strategy":"top","timeout_ms":1000},
      "description": "Perform grasp using computed pose and top strategy."
    },
    {
      "id": "ObjectInGripper",
      "type": "Condition",
      "ports": {"target":"kettle"},
      "description": "Verify kettle is being held in gripper."
    }
  ],
  "tree_stats": {"nodes_total":9, "actions":6, "conditions":2, "depth":9},
  "failure_modes": [
    "Kettle not visible in sensor view",
    "Kettle pose not detected",
    "Collision or obstruction while approaching",
    "Gripper fails to close correctly",
    "Object slips before grasp verification"
  ],
  "recovery_strategy": [
    "Retry scan for kettle up to 3 times if not found",
    "Terminate action sequence on other failures"
  ],
  "assumptions": [
    "Frames indicate a top-down, continuous approach and grasp; no handoff or placement after grasp is visible.",
    "No explicit force/timeout value in instruction; selected defaults and used legal bins.",
    "Kettle is the only object present and to be manipulated."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Kettle detected and localized",
      "End effector moves to correct position",
      "Kettle successfully grasped and verified"
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": {
    "model_reported_tokens": null,
    "client_elapsed_ms": null
  },
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"kettle"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"kettle","pattern":"grid","max_attempts":3,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"kettle","timeout_ms":1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"kettle","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "verify",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.06,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "verify",
      "active_leaf": {"id":"ComputeGraspPose","attrs":{"target":"kettle","strategy":"top","result_key":"std_top"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "grasp",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"kettle","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "grasp",
      "active_leaf": {"id":"GraspAtPose","attrs":{"pose_key":"std_top","strategy":"top","timeout_ms":1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "grasp",
      "active_leaf": {"id":"ObjectInGripper","attrs":{"target":"kettle"}},
      "active_path_ids": []
    }
  ]
}