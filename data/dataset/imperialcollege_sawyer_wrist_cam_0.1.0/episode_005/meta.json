{
  "dataset_id": "imperialcollege_sawyer_wrist_cam_0.1.0",
  "episode_id": "episode_005",
  "task_summary": "Robot opens a lid placed on a blue surface using a sequence of approach, align, and open actions, verified by visual feedback.",
  "task_long_description": {
    "overview": "In this episode, the robot is tasked with opening a circular white lid resting on a blue background. The lid is initially closed; the objective is to detect, approach, and manipulate the lid, verifying completion visually. Primary operations involve perception to localize the lid, moving the end effector above and aligning with the target for accurate opening, then actuating the open mechanism. The process is constrained by visual feedback and verification to minimize errors. The contact sheet frames, showing top-down wrist camera views, illustrate the phases from perception, approach, alignment, opening actuation, to post-verification.",
    "preconditions": [
      "Lid is present and visible in workspace",
      "Robot gripper/end effector is free",
      "No obstructing objects near lid"
    ],
    "stepwise_plan": [
      "Check visibility or detect lid",
      "Move above the lid for pregrasp",
      "Align with the lid for accurate opening",
      "Execute open container action on the lid",
      "Verify lid is open",
      "Retreat to safe position"
    ],
    "success_criteria": [
      "Lid is opened (confirmed visually or via status)",
      "No collision or drop events",
      "Robot safely retreats"
    ],
    "failure_and_recovery": [
      "Lid not detected: retry perception",
      "Misalignment: reacquire position",
      "Open failed: attempt again or alert",
      "ContainerOpen condition fails: feedback for manual recovery"
    ],
    "termination": "Tree finishes after verifying the lid is open and retreating"
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "open lid",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["lid"],
  "objects_from_instruction": ["lid"],
  "blackboard_keys": [],
  "node_specs": [
    {
      "id":"IsObjectVisible",
      "type":"Condition",
      "ports":{"target":"lid"},
      "description":"Checks if the lid is visible in the workspace."
    },
    {
      "id":"DetectObject",
      "type":"Action",
      "ports":{"target":"lid","timeout_ms":800},
      "description":"Detects the lid using the wrist camera within designated timeout."
    },
    {
      "id":"MoveAbove",
      "type":"Action",
      "ports":{"target":"lid","offset_z":0.05,"timeout_ms":1000},
      "description":"Moves the robot above the lid with a 5cm offset."
    },
    {
      "id":"ApproachAndAlign",
      "type":"Action",
      "ports":{"target":"lid","tolerance":0.005,"timeout_ms":1000},
      "description":"Approaches and aligns with the lid for accurate manipulation."
    },
    {
      "id":"OpenContainer",
      "type":"Action",
      "ports":{"target":"lid","container_type":"lid","timeout_ms":1500},
      "description":"Performs the open action on the lid object."
    },
    {
      "id":"ContainerOpen",
      "type":"Condition",
      "ports":{"target":"lid"},
      "description":"Verifies if the lid is open."
    },
    {
      "id":"Retreat",
      "type":"Action",
      "ports":{"distance":0.1,"timeout_ms":1200},
      "description":"Moves the robot away from the lid after task completion."
    }
  ],
  "tree_stats": {"nodes_total": 7, "actions": 4, "conditions": 2, "depth": 2},
  "failure_modes": [
    "Lid undetectable due to occlusion or lighting",
    "Misalignment leads to failed open attempt",
    "OpenContainer fails if lid stuck or grip misapplied",
    "Post-opening verification fails if state ambiguous"
  ],
  "recovery_strategy": [
    "Reattempt perception or detection",
    "Realign and retry open operation",
    "Alert operator or escalate to manual recovery"
  ],
  "assumptions": [
    "Instruction 'open lid' matches observed episode; frames confirm presence and manipulation of a lid.",
    "No force or tolerance explicitly specified in instruction or discernible from images.",
    "Object is a lid per appearance and instructionâ€”no evidence of conflicting object types."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Lid opens and remains open post-retreat",
      "Robot does not cause unintended displacements or damage"
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"lid","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"lid","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"lid","offset_z":0.05,"timeout_ms":1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"lid","tolerance":0.005,"timeout_ms":1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"lid","tolerance":0.005,"timeout_ms":1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"lid","container_type":"lid","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "verify",
      "active_leaf": {"id":"ContainerOpen","attrs":{"target":"lid"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    }
  ]
}