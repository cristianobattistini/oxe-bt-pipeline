{
  "dataset_id": "imperialcollege_sawyer_wrist_cam_0.1.0",
  "episode_id": "episode_118",
  "task_summary": "The robot is tasked to pick up an apple and place it inside a pot. The behavior tree orchestrates object detection, grasp, transfer, and placement actions in sequence.",
  "task_long_description": {
    "overview": "This episode involves a robotic manipulator interacting with a workspace containing a pot and a red apple. The robot must locate the apple, grasp it using a top approach, verify grasp stability, then transfer and place the apple inside the pot. Visual feedback guides the location, orientation, and placement, and gripper actions are executed with standardized force and opening widths. The scene is uncluttered, and the required motions are simple transfers with minimal interference.",
    "preconditions": [
      "Apple and pot are present in the workspace.",
      "Apple is visually accessible.",
      "Pot is open and reachable by the robot."
    ],
    "stepwise_plan": [
      "Scan and detect apple.",
      "Open gripper and move above apple.",
      "Compute grasp pose and grasp apple.",
      "Verify grasp stability.",
      "Scan and detect pot.",
      "Move above pot.",
      "Place apple into pot.",
      "Open gripper and retreat."
    ],
    "success_criteria": [
      "Apple placed inside pot.",
      "No collision with pot rim.",
      "Gripper releases apple cleanly."
    ],
    "failure_and_recovery": [
      "Apple not detected: rescan and retry.",
      "Grasp instability: retry grasp.",
      "Pot not detected: rescan and retry.",
      "Placement miss: repeat placement if not in pot."
    ],
    "termination": "Task completes when apple is verified released inside pot and robot has retreated."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "put apple in pot",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["apple","pot"],
  "objects_from_instruction": ["apple","pot"],
  "blackboard_keys": ["grasp_apple"],
  "node_specs": [
    {"id":"IsObjectVisible", "type":"Condition", "ports":{"target":"apple"}, "description":"Checks apple visibility."},
    {"id":"ScanForTarget", "type":"Action", "ports":{"target":"apple", "pattern":"raster", "max_attempts":3, "timeout_ms":1200}, "description":"Scans workspace to find the apple."},
    {"id":"DetectObject", "type":"Action", "ports":{"target":"apple", "timeout_ms":800}, "description":"Detects apple location/pose."},
    {"id":"OpenGripper", "type":"Action", "ports":{"width":0.06,"timeout_ms":500}, "description":"Opens gripper for grasping."},
    {"id":"MoveAbove", "type":"Action", "ports":{"target":"apple","offset_z":0.05,"timeout_ms":1500}, "description":"Moves gripper above apple."},
    {"id":"ComputeGraspPose", "type":"Action", "ports":{"target":"apple","strategy":"top","result_key":"grasp_apple"}, "description":"Computes grasp pose for apple."},
    {"id":"GraspAtPose", "type":"Action", "ports":{"pose_key":"grasp_apple","strategy":"top","timeout_ms":800}, "description":"Executes grasp on apple."},
    {"id":"IsGraspStable", "type":"Condition", "ports":{}, "description":"Checks grasp stability."},
    {"id":"IsObjectVisible", "type":"Condition", "ports":{"target":"pot"}, "description":"Checks pot visibility."},
    {"id":"DetectObject", "type":"Action", "ports":{"target":"pot","timeout_ms":800}, "description":"Detects pot location/pose."},
    {"id":"MoveAbove", "type":"Action", "ports":{"target":"pot","offset_z":0.10,"timeout_ms":1500}, "description":"Moves gripper above pot."},
    {"id":"PlaceDown", "type":"Action", "ports":{"target":"pot","timeout_ms":1200}, "description":"Places apple inside pot."},
    {"id":"OpenGripper", "type":"Action", "ports":{"width":0.08,"timeout_ms":500}, "description":"Opens gripper to release apple."},
    {"id":"Retreat", "type":"Action", "ports":{"distance":0.05,"timeout_ms":800}, "description":"Retracts gripper after placement."}
  ],
  "tree_stats": {"nodes_total": 15, "actions": 10, "conditions": 3, "depth": 3},
  "failure_modes": [
    "Object not detected (apple or pot)",
    "Failed grasp on apple",
    "Pot occluded or unreachable",
    "Apple dropped outside pot",
    "Apple stuck in gripper"
  ],
  "recovery_strategy": [
    "Rescan for missing object, retry up to 3 times",
    "If grasp unstable, reattempt grasp sequence",
    "Retry placement and gripper open if apple not released"
  ],
  "assumptions": [
    "Frames indicate apple already inside pot by frame_6; action sequence inferred accordingly.",
    "Instruction matches observed progression, no major conflicts."
  ],
  "evaluation_notes": {
    "expected_success_criteria": ["Apple stably inside pot and released."],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},

  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"apple","pattern":"raster","max_attempts":3,"timeout_ms":1200}},
      "active_path_ids":["Sequence","Fallback","RetryUntilSuccessful","ScanForTarget"]
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"apple","timeout_ms":800}},
      "active_path_ids":["Sequence","DetectObject"]
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"apple","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids":["Sequence","MoveAbove"]
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"GraspAtPose","attrs":{"pose_key":"grasp_apple","strategy":"top","timeout_ms":800}},
      "active_path_ids":["Sequence","GraspAtPose"]
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"pot","offset_z":0.10,"timeout_ms":1500}},
      "active_path_ids":["Sequence","MoveAbove"]
    },
    {
      "frame": "frame_5",
      "phase": "place",
      "active_leaf": {"id":"PlaceDown","attrs":{"target":"pot","timeout_ms":1200}},
      "active_path_ids":["Sequence","PlaceDown"]
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.08,"timeout_ms":500}},
      "active_path_ids":["Sequence","OpenGripper"]
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.05,"timeout_ms":800}},
      "active_path_ids":["Sequence","Retreat"]
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.05,"timeout_ms":800}},
      "active_path_ids":["Sequence","Retreat"]
    }
  ]
}