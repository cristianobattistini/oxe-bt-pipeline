{
  "dataset_id": "imperialcollege_sawyer_wrist_cam_0.1.0",
  "episode_id": "episode_043",
  "task_summary": "Pour a substance from a container into a mug, following perception, approach, and careful execution as shown in sequential wrist camera frames.",
  "task_long_description": {
    "overview": "This task involves a robot arm equipped with a wrist camera, tasked with pouring a liquid or small granular substance into a visible mug placed on a flat blue surface. The robot must perceive the mug, approach above it, execute a controlled pour, and then retreat. Constraints include visibility of the mug, pouring accuracy, and avoidance of spillage outside the mug.",
    "preconditions": [
      "The mug is present and visible within the workspace.",
      "The pourable substance/container is securely held by the robot gripper.",
      "No obstructions between the robot and the mug."
    ],
    "stepwise_plan": [
      "Check if the mug is visible; scan if required.",
      "Detect and localize the mug.",
      "Move above the mug, aligning for pouring.",
      "Pour the substance into the mug with controlled tilt and rate.",
      "Wait briefly to settle the contents.",
      "Retreat the arm from above the mug."
    ],
    "success_criteria": [
      "Substance is deposited entirely inside the mug.",
      "Mug remains upright and undamaged.",
      "No significant spillage detected on surrounding area.",
      "Robot returns to a safe post-pour position."
    ],
    "failure_and_recovery": [
      "Mug not detected: Retry scanning up to 3 times.",
      "Pour occluded or blocked: Abort pour, reattempt approach.",
      "Minor spillage: Log, continue if mug filling is successful.",
      "Large spillage or mug knocked over: Abort and alert operator."
    ],
    "termination": "Terminate sequence when mug is filled and robot is safely retreated."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92, "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "pour in mug",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": 1200,
    "tolerance": null,
    "retry_attempts": 3
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["mug", "pourable"],
  "objects_from_instruction": ["mug"],
  "blackboard_keys": [],
  "node_specs": [
    {
      "id": "IsObjectVisible",
      "type": "Condition",
      "ports": {"target": "mug"},
      "description": "Checks whether the mug is visible to the robot."
    },
    {
      "id": "ScanForTarget",
      "type": "Action",
      "ports": {"target": "mug", "pattern": "raster", "max_attempts": 3, "timeout_ms": 1200},
      "description": "Scans the workspace in a raster pattern to find the mug."
    },
    {
      "id": "DetectObject",
      "type": "Action",
      "ports": {"target": "mug", "timeout_ms": 800},
      "description": "Performs detection/localization on the mug."
    },
    {
      "id": "MoveAbove",
      "type": "Action",
      "ports": {"target": "mug", "offset_z": 0.05, "timeout_ms": 1000},
      "description": "Moves the robot end-effector above the mug for pouring alignment."
    },
    {
      "id": "Pour",
      "type": "Action",
      "ports": {"source": "pourable", "target": "mug", "amount": "full", "tilt_angle": 45, "pour_rate": "normal", "timeout_ms": 1200},
      "description": "Pours the substance/container contents into the mug."
    },
    {
      "id": "Wait",
      "type": "Action",
      "ports": {"timeout_ms": 500},
      "description": "Waits briefly after pouring to allow contents to settle."
    },
    {
      "id": "Retreat",
      "type": "Action",
      "ports": {"distance": 0.10, "timeout_ms": 1200},
      "description": "Retreats the robot to a safe position after pouring."
    }
  ],
  "tree_stats": {"nodes_total": 11, "actions": 6, "conditions": 1, "depth": 3},
  "failure_modes": [
    "Mug not detected",
    "Approach misalignment",
    "Pour blocked or incomplete",
    "Spillage beyond mug",
    "Robot arm collision"
  ],
  "recovery_strategy": [
    "Rerun ScanForTarget up to 3 attempts if mug not visible",
    "Retry approach if pour fails",
    "Abort if large spillage/mug displaced"
  ],
  "assumptions": [
    "Pourable object/container is already grasped by the robot and ready to pour",
    "No explicit force port required for Pour action, which matches the instruction",
    "Visual evidence supports a mug as the sole target, with no container or other vessels visible",
    "Liquid or small object is being poured, consistent with the dark substance appearing in frame_5 and frame_6"
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Substance poured entirely into mug",
      "No mug displacement or spillage",
      "Robot returns to safe location"
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id": "IsObjectVisible", "attrs": {"target": "mug"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id": "DetectObject", "attrs": {"target": "mug", "timeout_ms": 800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id": "MoveAbove", "attrs": {"target": "mug", "offset_z": 0.05, "timeout_ms": 1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id": "MoveAbove", "attrs": {"target": "mug", "offset_z": 0.05, "timeout_ms": 1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "verify",
      "active_leaf": {"id": "MoveAbove", "attrs": {"target": "mug", "offset_z": 0.05, "timeout_ms": 1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "place",
      "active_leaf": {"id": "Pour", "attrs": {"source": "pourable", "target": "mug", "amount": "full", "tilt_angle": 45, "pour_rate": "normal", "timeout_ms": 1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id": "Pour", "attrs": {"source": "pourable", "target": "mug", "amount": "full", "tilt_angle": 45, "pour_rate": "normal", "timeout_ms": 1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id": "Retreat", "attrs": {"distance": 0.10, "timeout_ms": 1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id": "Retreat", "attrs": {"distance": 0.10, "timeout_ms": 1200}},
      "active_path_ids": []
    }
  ]
}