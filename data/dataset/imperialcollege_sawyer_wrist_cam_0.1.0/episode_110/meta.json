{
  "dataset_id": "imperialcollege_sawyer_wrist_cam_0.1.0",
  "episode_id": "episode_110",
  "task_summary": "Locate, approach, and grasp a kettle, using perception actions if needed.",
  "task_long_description": {
    "overview": "This episode depicts a robotic manipulator executing the task of picking up a kettle. The sequence initiates with perception to confirm and localize the kettle in a scene with a blue background. The robot then opens its gripper, moves above the object, computes a top grasp pose, aligns, and attempts a grasp. Sequence is structured for robustness: if the kettle is not immediately seen, it re-scans. Recovery and perception emphasis reflect real-world uncertainty.",
    "preconditions": [
      "Kettle is present within camera field of view",
      "Kettle is not obstructed",
      "Robot begins with gripper open and at safe starting position"
    ],
    "stepwise_plan": [
      "Check if kettle is visible; if not, scan area",
      "Detect kettle and localize",
      "Open gripper to minimal width",
      "Move above kettle with small Z offset",
      "Compute a top-down grasp pose",
      "Approach and align with tolerance",
      "Execute grasp at planned pose",
      "Verify kettle is in gripper"
    ],
    "success_criteria": [
      "Kettle firmly in gripper after execution",
      "No collision with environment or kettle during approach",
      "Kettle lifted and secure"
    ],
    "failure_and_recovery": [
      "Failure: kettle not initially visible; Recovery: rescan",
      "Failure: misalignment. Recovery: retry or fine alignment (not implemented here)",
      "Failure: grasp not stable; possible reattempt or abort"
    ],
    "termination": "Tree terminates when kettle is detected to be in gripper, reflecting a completed pick."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "pick up kettle",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": 0.005,
    "retry_attempts": 2
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["kettle"],
  "objects_from_instruction": ["kettle"],
  "blackboard_keys": ["std_top"],
  "node_specs": [
    {
      "id": "IsObjectVisible",
      "type": "Condition",
      "ports": {"target": "kettle"},
      "description": "Checks if the kettle is currently visible to the perception system."
    },
    {
      "id": "ScanForTarget",
      "type": "Action",
      "ports": {"target": "kettle", "pattern": "grid", "max_attempts": 2, "timeout_ms": 800},
      "description": "Scans the workspace for the kettle using a grid pattern, with up to 2 attempts."
    },
    {
      "id": "DetectObject",
      "type": "Action",
      "ports": {"target": "kettle", "timeout_ms": 800},
      "description": "Detects and localizes the kettle."
    },
    {
      "id": "OpenGripper",
      "type": "Action",
      "ports": {"width": 0.06, "timeout_ms": 500},
      "description": "Opens gripper to a width suitable for grasping the kettle."
    },
    {
      "id": "MoveAbove",
      "type": "Action",
      "ports": {"target": "kettle", "offset_z": 0.05, "timeout_ms": 1000},
      "description": "Moves above the kettle to a small Z offset, ready for grasp pose computation."
    },
    {
      "id": "ComputeGraspPose",
      "type": "Action",
      "ports": {"target": "kettle", "strategy": "top", "result_key": "std_top"},
      "description": "Computes a top-down grasp pose for the kettle, storing the result as std_top."
    },
    {
      "id": "ApproachAndAlign",
      "type": "Action",
      "ports": {"target": "kettle", "tolerance": 0.005, "timeout_ms": 1000},
      "description": "Approaches and aligns to the computed grasp pose for the kettle, with tight tolerance."
    },
    {
      "id": "GraspAtPose",
      "type": "Action",
      "ports": {"pose_key": "std_top", "strategy": "top", "timeout_ms": 1000},
      "description": "Executes the grasp action at the computed pose."
    },
    {
      "id": "ObjectInGripper",
      "type": "Condition",
      "ports": {"target": "kettle"},
      "description": "Verifies that the kettle has been grasped and is in the gripper."
    }
  ],
  "tree_stats": {"nodes_total": 10, "actions": 7, "conditions": 2, "depth": 4},
  "failure_modes": [
    "Kettle not detected during scan",
    "Misalignment during approach causing failed grasp",
    "Gripper fails to close or slips, not gripping kettle"
  ],
  "recovery_strategy": [
    "If kettle not visible, triggers rescan (up to 2 attempts)",
    "If grasp fails, recommended: retry whole sequence (not included in current BT)"
  ],
  "assumptions": [
    "The object in frames 0-8 is interpreted as the kettle by context and visual shape.",
    "No evidence of displacement, transfer, or retreat; task ends after grasp confirmation.",
    "Scene is static; only perception and grasping occur, transfer is implicit in test set.",
    "If further transport is required, not included in current frames or BT."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Robot gripper holds kettle at task completion with no slippage or collision."
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},

  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id": "IsObjectVisible", "attrs": {"target": "kettle"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id": "ScanForTarget", "attrs": {"target": "kettle", "pattern": "grid", "max_attempts": 2, "timeout_ms": 800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "perceive",
      "active_leaf": {"id": "DetectObject", "attrs": {"target": "kettle", "timeout_ms": 800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id": "OpenGripper", "attrs": {"width": 0.06, "timeout_ms": 500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "approach",
      "active_leaf": {"id": "MoveAbove", "attrs": {"target": "kettle", "offset_z": 0.05, "timeout_ms": 1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "verify",
      "active_leaf": {"id": "ComputeGraspPose", "attrs": {"target": "kettle", "strategy": "top", "result_key": "std_top"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "verify",
      "active_leaf": {"id": "ApproachAndAlign", "attrs": {"target": "kettle", "tolerance": 0.005, "timeout_ms": 1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "grasp",
      "active_leaf": {"id": "GraspAtPose", "attrs": {"pose_key": "std_top", "strategy": "top", "timeout_ms": 1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "grasp",
      "active_leaf": {"id": "ObjectInGripper", "attrs": {"target": "kettle"}},
      "active_path_ids": []
    }
  ]
}