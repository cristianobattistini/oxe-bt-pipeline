{
  "dataset_id": "utokyo_xarm_bimanual_converted_externally_to_rlds_0.1.0",
  "episode_id": "episode_048",
  "task_summary": "The robot perceives, grasps, pulls, and unfolds a towel using two arms cooperatively, leaving it flat on the table.",
  "task_long_description": {
    "overview": "This episode shows a dual-arm manipulator in a tabletop environment with a wrinkled towel. The robot first perceives the towel and approaches from above. Using a side grasp, one arm grips a towel edge, while the other may stabilize or assist. The robot unfolds the towel by pulling in a coordinated motion, ensuring the towel lies flat. The sequence emphasizes careful perception, robust grasping, and continuous feedback for the unfolding manipulation.",
    "preconditions": [
      "The towel is visibly wrinkled and present on the table.",
      "Both robot arms are unoccupied and at rest.",
      "Tabletop area is clear except for the towel."
    ],
    "stepwise_plan": [
      "Check towel visibility and scan if needed.",
      "Detect towel and open gripper.",
      "Move above towel, compute grasp pose, and grasp.",
      "Verify grasp security.",
      "Execute an unfolding (pull) action.",
      "Place the towel flat on the table.",
      "Open gripper and retreat."
    ],
    "success_criteria": [
      "Towel is fully unfolded and lying flat on the table.",
      "No significant wrinkles remain after manipulation.",
      "All robot actions complete without errors."
    ],
    "failure_and_recovery": [
      "If towel not visible, scan grid and retry.",
      "If grasp is unstable, recompute and retry grasp.",
      "If unfolding incomplete, repeat unfold action."
    ],
    "termination": "Episode terminates when the towel is observed to be unfolded and the robot has retreated."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "Unfold a wrinkled towel.",
  "instruction_to_ports": {
    "force": 5,
    "timeout_ms": 1200,
    "tolerance": 0.0,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["towel", "table"],
  "objects_from_instruction": ["towel"],
  "blackboard_keys": ["grasp_1"],
  "node_specs": [
    {
      "id": "IsObjectVisible",
      "type": "Condition",
      "ports": {"target": "towel"},
      "description": "Check if towel is visible to sensors."
    },
    {
      "id": "ScanForTarget",
      "type": "Action",
      "ports": {"target": "towel", "pattern": "grid", "max_attempts": 3, "timeout_ms": 1200},
      "description": "Scan for towel in the grid pattern up to 3 attempts."
    },
    {
      "id": "DetectObject",
      "type": "Action",
      "ports": {"target": "towel", "timeout_ms": 800},
      "description": "Detect towel and refine location."
    },
    {
      "id": "OpenGripper",
      "type": "Action",
      "ports": {"width": 0.08, "timeout_ms": 500},
      "description": "Open gripper to prepare for grasp."
    },
    {
      "id": "MoveAbove",
      "type": "Action",
      "ports": {"target": "towel", "offset_z": 0.05, "timeout_ms": 1500},
      "description": "Position gripper above towel for approach."
    },
    {
      "id": "ComputeGraspPose",
      "type": "Action",
      "ports": {"target": "towel", "strategy": "side", "result_key": "grasp_1"},
      "description": "Compute side-oriented grasp pose for towel."
    },
    {
      "id": "GraspAtPose",
      "type": "Action",
      "ports": {"pose_key": "grasp_1", "strategy": "side", "timeout_ms": 1000},
      "description": "Execute grasp at computed pose."
    },
    {
      "id": "IsGraspStable",
      "type": "Condition",
      "ports": {},
      "description": "Check if towel grasp is stable."
    },
    {
      "id": "Unfold",
      "type": "Action",
      "ports": {"target": "towel", "strategy": "pull", "num_folds": 1, "timeout_ms": 3000},
      "description": "Perform unfolding of one fold using pulling motion."
    },
    {
      "id": "PlaceAt",
      "type": "Action",
      "ports": {"pose_key": "place_on_table", "yaw_deg": 0, "press_force": 5, "timeout_ms": 1200},
      "description": "Lay towel flat at designated table area."
    },
    {
      "id": "OpenGripper",
      "type": "Action",
      "ports": {"width": 0.10, "timeout_ms": 500},
      "description": "Release towel."
    },
    {
      "id": "Retreat",
      "type": "Action",
      "ports": {"distance": 0.10, "timeout_ms": 1000},
      "description": "Move gripper(s) away from towel."
    }
  ],
  "tree_stats": {"nodes_total": 12, "actions": 10, "conditions": 2, "depth": 3},
  "failure_modes": [
    "Towel not detected or out of sensor view",
    "Failed or unstable grasp on towel",
    "Unfold action only partially extends towel",
    "Towel not laid flat after place"
  ],
  "recovery_strategy": [
    "Retry scan up to 3 times if towel not visible",
    "Recompute grasp and retry if grasp fails",
    "Perform additional unfold attempts as needed"
  ],
  "assumptions": [
    "Action sequence inferred from both frames and high-level task instruction",
    "Single grasp and unfold step is sufficient for the towel size and wrinkles observed",
    "No fine force/torque modulation is mandated by instruction or scene",
    "Some sub-phases (e.g., secondary stabilization by second arm) cannot be modeled due to single end-effector node constraints"
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Towel visibly unfolded, low remaining wrinkles",
      "No objects left in gripper, robot arms safely retreated"
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},

  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"IsObjectVisible", "attrs":{"target":"towel"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject", "attrs":{"target":"towel", "timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"OpenGripper", "attrs":{"width":0.08, "timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove", "attrs":{"target":"towel", "offset_z":0.05, "timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "verify",
      "active_leaf": {"id":"ComputeGraspPose", "attrs":{"target":"towel", "strategy":"side", "result_key":"grasp_1"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"GraspAtPose", "attrs":{"pose_key":"grasp_1", "strategy":"side", "timeout_ms":1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "verify",
      "active_leaf": {"id":"IsGraspStable", "attrs":{}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "transfer",
      "active_leaf": {"id":"Unfold", "attrs":{"target":"towel", "strategy":"pull", "num_folds":1, "timeout_ms":3000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "place",
      "active_leaf": {"id":"PlaceAt", "attrs":{"pose_key":"place_on_table", "yaw_deg":0, "press_force":5, "timeout_ms":1200}},
      "active_path_ids": []
    }
  ]
}