{
  "dataset_id": "tokyo_u_lsmo_converted_externally_to_rlds_0.1.0",
  "episode_id": "episode_005",
  "task_summary": "The robot must avoid a visible obstacle (books) and reach the blue pen placed beyond it on a table. The BT integrates object detection, obstacle awareness, path planning, and goal confirmation.",
  "task_long_description": {
    "overview": "A mobile manipulator must perceive and avoid a set of books (the obstacle) on a tabletop to approach and reach the blue pen located behind them. The arm utilizes visual detection, obstacle scanning, path planning, and final position confirmation. Key constraints include avoiding unnecessary contact and confirming arrival at the pen.",
    "preconditions": [
      "Robot and sensors are operational",
      "Blue pen and books present on tabletop",
      "Table surface is clear except for described objects"
    ],
    "stepwise_plan": [
      "Check if blue pen is visible; if not, scan",
      "Detect exact position of blue pen",
      "Check if obstacle is visible; if not, scan",
      "Plan and move to a safe waypoint avoiding the obstacle",
      "Move to the blue pen location",
      "Confirm arrival at target"
    ],
    "success_criteria": [
      "Robot reaches the blue pen without contacting obstacle",
      "Arrival confirmed by pose"
    ],
    "failure_and_recovery": [
      "Obstacle not detected: re-scan",
      "Blue pen not detected: re-scan/retry",
      "Movement blocked: retry new path"
    ],
    "termination": "Terminate when robot confirms it is at the blue pen location or after maximum retries."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "avoid obstacle and reach the blue pen",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": 1000,
    "tolerance": null,
    "retry_attempts": 3
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["blue_pen","books","obstacle","table"],
  "objects_from_instruction": ["blue_pen","obstacle"],
  "blackboard_keys": [],
  "node_specs": [
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"blue_pen"},"description":"Checks if blue pen is visible"},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"blue_pen","pattern":"grid","max_attempts":3,"timeout_ms":1000},"description":"Scans for blue pen if not visible"},
    {"id":"DetectObject","type":"Action","ports":{"target":"blue_pen","timeout_ms":800},"description":"Detects and localizes blue pen"},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"obstacle"},"description":"Checks if obstacle is visible"},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"obstacle","pattern":"grid","max_attempts":2,"timeout_ms":800},"description":"Scans for obstacle if not visible"},
    {"id":"MoveTo","type":"Action","ports":{"target":"safe_path_around_obstacle","timeout_ms":1000},"description":"Moves on planned safe path around obstacle"},
    {"id":"MoveTo","type":"Action","ports":{"target":"blue_pen","timeout_ms":1000},"description":"Moves to blue pen location"},
    {"id":"IsAt","type":"Condition","ports":{"target":"blue_pen"},"description":"Checks if robot is at blue pen location"}
  ],
  "tree_stats": {"nodes_total": 10, "actions": 5, "conditions": 3, "depth": 3},
  "failure_modes": [
    "Blue pen or obstacle not detected",
    "Obstacle blocks path to pen",
    "Robot position estimate unavailable"
  ],
  "recovery_strategy": [
    "Re-scan for target or obstacle",
    "Retry motion around obstacle",
    "Abort if maximum retries exceeded"
  ],
  "assumptions": [
    "The instruction did not specify how to avoid obstacle, so a symbolic target 'safe_path_around_obstacle' was used.",
    "Frames consistently show books as the obstacle and blue pen as the goal; mapping is visual.",
    "No grasp or manipulation occurs; only approach and confirmation are evident."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Robot does not touch or collide with obstacle",
      "Arrives within close proximity to blue pen"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},

  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"blue_pen"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"blue_pen","pattern":"grid","max_attempts":3,"timeout_ms":1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"blue_pen","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"obstacle"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "approach",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"obstacle","pattern":"grid","max_attempts":2,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "approach",
      "active_leaf": {"id":"MoveTo","attrs":{"target":"safe_path_around_obstacle","timeout_ms":1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "approach",
      "active_leaf": {"id":"MoveTo","attrs":{"target":"blue_pen","timeout_ms":1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "verify",
      "active_leaf": {"id":"IsAt","attrs":{"target":"blue_pen"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "verify",
      "active_leaf": {"id":"IsAt","attrs":{"target":"blue_pen"}},
      "active_path_ids": []
    }
  ]
}