{
  "dataset_id": "tokyo_u_lsmo_converted_externally_to_rlds_0.1.0",
  "episode_id": "episode_041",
  "task_summary": "Navigate around the obstacle (books) and reach the blue pen using visual detection and sequential waypoint approach.",
  "task_long_description": {
    "overview": "The purpose of this episode is to demonstrate a mobile manipulator navigating a cluttered tabletop scene in an office-like environment. The robot must visually locate and approach the blue pen placed behind obstacles (books) on a table. The primary constraint is to avoid collision with the obstacle (the stack of books) while reaching the target pen, using intermediate waypoints and continual object detection checks to inform safe navigation.",
    "preconditions": [
      "Robot operational and placed at start position.",
      "Blue pen present and visually detectable.",
      "Obstacle (books) positioned between robot and pen."
    ],
    "stepwise_plan": [
      "Visually scan and confirm detection of the blue pen.",
      "Detect object with higher certainty.",
      "Plan and execute motion to a waypoint that avoids books (obstacles).",
      "Visually confirm pen is still available.",
      "Approach and move directly to the blue pen.",
      "Check arrival at the blue pen."
    ],
    "success_criteria": [
      "Robot is at the target pen location without touching or disturbing obstacles.",
      "Pen remains upright and undisturbed."
    ],
    "failure_and_recovery": [
      "Failure: blue pen not detected — Retry visual scan up to 3 times.",
      "Failure: robot collides with obstacle — abort current move and redo detection.",
      "Failure: waypoint blocked — sequence replans or episode halts."
    ],
    "termination": "Episode ends when robot is at 'blue_pen' (IsAt condition true), or recovery attempts are exhausted."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "avoid obstacle and reach the blue pen",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": 1200,
    "tolerance": null,
    "retry_attempts": 3
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["blue_pen","books","table"],
  "objects_from_instruction": ["blue_pen"],
  "blackboard_keys": [],
  "node_specs": [
    {
      "id": "IsObjectVisible",
      "type": "Condition",
      "ports": {"target":"blue_pen"},
      "description": "Checks if blue pen is visible to sensors."
    },
    {
      "id": "ScanForTarget",
      "type": "Action",
      "ports": {"target":"blue_pen","pattern":"grid","max_attempts":3,"timeout_ms":1200},
      "description": "Scans for blue pen in a grid pattern, up to 3 times if not visible."
    },
    {
      "id": "DetectObject",
      "type": "Action",
      "ports": {"target":"blue_pen","timeout_ms":800},
      "description": "Attempts to more precisely localize the blue pen."
    },
    {
      "id": "MoveTo",
      "type": "Action",
      "ports": {"target":"waypoint_clear","timeout_ms":2000},
      "description": "Moves to a clear waypoint avoiding obstacles (manual selection)."
    },
    {
      "id": "MoveTo",
      "type": "Action",
      "ports": {"target":"blue_pen","timeout_ms":1200},
      "description": "Moves directly to the blue pen after confirmation."
    },
    {
      "id": "IsAt",
      "type": "Condition",
      "ports": {"target":"blue_pen"},
      "description": "Checks whether robot is at the pen location."
    }
  ],
  "tree_stats": {
    "nodes_total": 8,
    "actions": 4,
    "conditions": 3,
    "depth": 6
  },
  "failure_modes": [
    "Blue pen not detected due to occlusion or sensor error.",
    "Collision with books during MoveTo.",
    "Cannot reach pen due to blocked path."
  ],
  "recovery_strategy": [
    "Visual scan retries for visibility (max 3 times).",
    "Intermediate waypoint used to avoid collision; replanning via fallback."
  ],
  "assumptions": [
    "Instruction is consistent with frames: obstacle (books) visible in all, pen in clear region.",
    "Obstacle avoidance is handled via waypoint selection, not explicit collision sensors.",
    "No grasp or manipulation—only navigation.",
    "If actual robot motion does not show path deviation, 'waypoint_clear' is interpreted as nearest clear region next to pen."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Robot reaches blue pen without disturbing books."
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": {
    "model_reported_tokens": null,
    "client_elapsed_ms": null
  },
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"blue_pen"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"blue_pen","pattern":"grid","max_attempts":3,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"blue_pen","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"MoveTo","attrs":{"target":"waypoint_clear","timeout_ms":2000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "approach",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"blue_pen"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "approach",
      "active_leaf": {"id":"MoveTo","attrs":{"target":"blue_pen","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "verify",
      "active_leaf": {"id":"IsAt","attrs":{"target":"blue_pen"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "verify",
      "active_leaf": {"id":"IsAt","attrs":{"target":"blue_pen"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "verify",
      "active_leaf": {"id":"IsAt","attrs":{"target":"blue_pen"}},
      "active_path_ids": []
    }
  ]
}