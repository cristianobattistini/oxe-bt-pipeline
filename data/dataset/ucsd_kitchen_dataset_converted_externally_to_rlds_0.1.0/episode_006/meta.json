{
  "dataset_id": "ucsd_kitchen_dataset_converted_externally_to_rlds_0.1.0",
  "episode_id": "episode_006",
  "task_summary": "Turn on the faucet by locating the handle, grasping it, and actuating it to enable water flow.",
  "task_long_description": {
    "overview": "This task requires a robot arm to visually locate a kitchen faucet handle, approach and align the end effector, form a stable grasp on the handle, and rotate it such that it turns on the water. The robot uses visual perception to confirm handle visibility, then moves above and precisely aligns, grasps with low force, and rotates the handle open. The sequence finishes with a retreat of the arm. Constraints include low force for safety, robust perception, and precise manipulation of the handle.",
    "preconditions": [
      "Faucet handle is visually accessible",
      "No obstructions near sink or handle",
      "Gripper is empty and operable"
    ],
    "stepwise_plan": [
      "Check if faucet handle is visible; scan if not",
      "Detect the faucet handle for precise pose estimation",
      "Move end effector above handle",
      "Approach and align to handle (precisely)",
      "Grasp handle from the side with minimal force",
      "Turn handle lever by 45 degrees in open direction",
      "Confirm water flow button (proxy for success)",
      "Retreat from faucet"
    ],
    "success_criteria": [
      "Water flows from faucet after task completion",
      "No damage/deformation to handle or arm",
      "Robot arm is clear of sink area"
    ],
    "failure_and_recovery": [
      "Handle not detected: re-scan up to 3 times",
      "Grasp unstable: abort and reposition",
      "Rotation fails: retry, adjust force/direction, abort if excessive resistance"
    ],
    "termination": "Task ends when faucet is confirmed open and robot has retreated"
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "Turn on the faucet",
  "instruction_to_ports": {
    "force": 5,
    "timeout_ms": null,
    "tolerance": 0.005,
    "retry_attempts": 3
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["faucet_handle", "sink", "robot_arm"],
  "objects_from_instruction": ["faucet"],
  "blackboard_keys": [],
  "node_specs": [
    {
      "id":"IsObjectVisible",
      "type":"Condition",
      "ports":{"target":"faucet_handle"},
      "description":"Check if faucet handle is visible to sensors"
    },
    {
      "id":"ScanForTarget",
      "type":"Action",
      "ports":{"target":"faucet_handle", "pattern":"arc", "max_attempts":3, "timeout_ms":1200},
      "description":"Scan in an arc pattern to locate faucet handle"
    },
    {
      "id":"DetectObject",
      "type":"Action",
      "ports":{"target":"faucet_handle", "timeout_ms":800},
      "description":"Detect and localize faucet handle"
    },
    {
      "id":"MoveAbove",
      "type":"Action",
      "ports":{"target":"faucet_handle", "offset_z":0.05, "timeout_ms":1500},
      "description":"Move above the faucet handle with 5cm offset"
    },
    {
      "id":"ApproachAndAlign",
      "type":"Action",
      "ports":{"target":"faucet_handle", "tolerance":0.005, "timeout_ms":1500},
      "description":"Precisely approach and align end effector with handle"
    },
    {
      "id":"Grasp",
      "type":"Action",
      "ports":{"target":"faucet_handle", "strategy":"side", "force":5, "timeout_ms":800},
      "description":"Grasp handle from side with minimum (low) force"
    },
    {
      "id":"TurnKnob",
      "type":"Action",
      "ports":{"target":"faucet_handle", "knob_type":"lever", "angle_deg":45, "direction":"open", "force_limit":5, "timeout_ms":1000},
      "description":"Turn lever by 45 degrees in open direction with low force"
    },
    {
      "id":"ButtonPressed",
      "type":"Condition",
      "ports":{"target":"faucet_water_flow"},
      "description":"Check if faucet water flow is activated (proxy button)"
    },
    {
      "id":"Retreat",
      "type":"Action",
      "ports":{"distance":0.10, "timeout_ms":1200},
      "description":"Retract robot arm by 10cm from faucet"
    }
  ],
  "tree_stats": {"nodes_total": 11, "actions": 7, "conditions": 2, "depth": 5},
  "failure_modes": [
    "Faucet handle occluded or not detected",
    "Grasp cannot be formed (handle out of reach, gripper misaligned)",
    "Lever rotation blocked, excessive force required",
    "Water flow not triggered after actuation"
  ],
  "recovery_strategy": [
    "Retry scan/search for handle",
    "Abort and reposition gripper",
    "Adjust rotation angle/force parameters and retry"
  ],
  "assumptions": [
    "Frames clearly show a lever-type faucet handle; instruction is generic 'turn on faucet'",
    "Actual water flow confirmation via ButtonPressed proxy (visual evidence of flow not directly in frames, so proxy condition used)",
    "No direct evidence of force measurement; low force assumed for safety",
    "Single handle for turning faucet on (not two separate knobs); aligned with visual scene"
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Robot causes faucet handle to rotate open",
      "Apparent water flow is confirmed",
      "No collisions or handling failures"
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},

  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"IsObjectVisible", "attrs":{"target":"faucet_handle"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget", "attrs":{"target":"faucet_handle","pattern":"arc","max_attempts":3,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "verify",
      "active_leaf": {"id":"DetectObject", "attrs":{"target":"faucet_handle","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove", "attrs":{"target":"faucet_handle","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign", "attrs":{"target":"faucet_handle","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"Grasp", "attrs":{"target":"faucet_handle","strategy":"side","force":5,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"TurnKnob", "attrs":{"target":"faucet_handle","knob_type":"lever","angle_deg":45,"direction":"open","force_limit":5,"timeout_ms":1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "verify",
      "active_leaf": {"id":"ButtonPressed", "attrs":{"target":"faucet_water_flow"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat", "attrs":{"distance":0.10,"timeout_ms":1200}},
      "active_path_ids": []
    }
  ]
}