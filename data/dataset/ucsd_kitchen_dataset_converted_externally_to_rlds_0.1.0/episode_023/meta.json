{
  "dataset_id": "ucsd_kitchen_dataset_converted_externally_to_rlds_0.1.0",
  "episode_id": "episode_023",
  "task_summary": "The robot is tasked to turn on the kitchen faucet by locating, grasping, and rotating the faucet knob to the open position.",
  "task_long_description": {
    "overview": "A robot manipulator performs the 'turn on the faucet' task in a kitchen environment. The sequence involves perceiving the faucet knob, approaching and aligning to it, planning a twist grasp, actuating the knob by turning it toward the open direction, and confirming water activation before retreating. Key roles involve object detection, precise grasp planning, rotational actuation, and verification of the expected outcome.",
    "preconditions": [
      "Robot is powered and gripper enabled",
      "Faucet knob is reachable and visible or detectable",
      "Workspace is free from obstacles interfering with arm motion",
      "Water source functional"
    ],
    "stepwise_plan": [
      "Check if faucet knob is visible; scan if not",
      "Detect precise location of faucet knob",
      "Approach and align to the faucet knob",
      "Compute suitable grasp pose for twisting the knob",
      "Perform twist grasp at computed pose",
      "Turn the faucet knob counterclockwise (open direction) by 90 degrees",
      "Verify water is flowing (button/press event triggers)",
      "Retreat robotic arm"
    ],
    "success_criteria": [
      "Faucet knob turned to open position",
      "Water flow is activated",
      "No collision or damage to surroundings",
      "Robotic arm safely retreats"
    ],
    "failure_and_recovery": [
      "Faucet knob not found: trigger scan and retry",
      "Grasp or alignment fails: recompute and retry up to 3 times",
      "Knob fails to turn: reduce force or adjust approach and retry",
      "Water fails to flow: abort and log for maintenance"
    ],
    "termination": "Task ends when water flow confirmed and arm in safe retreat position"
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "Turn on the faucet",
  "instruction_to_ports": {
    "force": 5,
    "timeout_ms": 1500,
    "tolerance": 0.005,
    "retry_attempts": 3
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["faucet_knob","water_out","sink","counter"],
  "objects_from_instruction": ["faucet","faucet_knob"],
  "blackboard_keys": ["grasp_faucet_knob"],
  "node_specs": [
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"faucet_knob"},"description":"Checks if faucet knob is visible"},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"faucet_knob","pattern":"raster","max_attempts":3,"timeout_ms":1200},"description":"Scans scene for faucet knob"},
    {"id":"DetectObject","type":"Action","ports":{"target":"faucet_knob","timeout_ms":800},"description":"Detect faucet knob precisely"},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"faucet_knob","tolerance":0.005,"timeout_ms":1500},"description":"Approach and align to faucet knob"},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"faucet_knob","strategy":"twist","result_key":"grasp_faucet_knob"},"description":"Compute grasp pose for knob twist"},
    {"id":"GraspAtPose","type":"Action","ports":{"pose_key":"grasp_faucet_knob","strategy":"twist","timeout_ms":1500},"description":"Grasp faucet knob at computed pose"},
    {"id":"TurnKnob","type":"Action","ports":{"target":"faucet_knob","knob_type":"knob","angle_deg":90,"direction":"open","force_limit":5,"timeout_ms":1500},"description":"Turn faucet knob toward open"},
    {"id":"ButtonPressed","type":"Condition","ports":{"target":"water_out"},"description":"Detect water flow by button press event"},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":1200},"description":"Retreat arm after task"}
  ],
  "tree_stats": {"nodes_total": 11, "actions": 8, "conditions": 3, "depth": 2},
  "failure_modes": [
    "Faucet knob not detected",
    "Alignment or grasp fails",
    "Insufficient force to turn knob",
    "Water fails to flow after turning"
  ],
  "recovery_strategy": [
    "Retry scanning and detection up to 3 times",
    "Recompute and retry grasp if unstable",
    "Lower force or adapt approach if knob resists",
    "Abort and alert if water-out confirmation fails"
  ],
  "assumptions": [
    "Frames confirm presence of faucet knob; visual evidence used to derive sequential actions",
    "Instruction refers to knob actuation; frames suggest a twist (rotation), not button press nor lever",
    "Water flow verification inferred as 'ButtonPressed' for water_out due to absence of explicit water stream in frames",
    "Action direction and angle chosen as open and 90 degrees based on typical faucet mechanics"
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Knob is turned and water flows in final frames"
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},

  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"faucet_knob"}},
      "active_path_ids": ["Sequence","Fallback","IsObjectVisible"]
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"faucet_knob","pattern":"raster","max_attempts":3,"timeout_ms":1200}},
      "active_path_ids": ["Sequence","Fallback","RetryUntilSuccessful","ScanForTarget"]
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"faucet_knob","timeout_ms":800}},
      "active_path_ids": ["Sequence","DetectObject"]
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"faucet_knob","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": ["Sequence","ApproachAndAlign"]
    },
    {
      "frame": "frame_4",
      "phase": "verify",
      "active_leaf": {"id":"ComputeGraspPose","attrs":{"target":"faucet_knob","strategy":"twist","result_key":"grasp_faucet_knob"}},
      "active_path_ids": ["Sequence","ComputeGraspPose"]
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"GraspAtPose","attrs":{"pose_key":"grasp_faucet_knob","strategy":"twist","timeout_ms":1500}},
      "active_path_ids": ["Sequence","GraspAtPose"]
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"TurnKnob","attrs":{"target":"faucet_knob","knob_type":"knob","angle_deg":90,"direction":"open","force_limit":5,"timeout_ms":1500}},
      "active_path_ids": ["Sequence","TurnKnob"]
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"ButtonPressed","attrs":{"target":"water_out"}},
      "active_path_ids": ["Sequence","ButtonPressed"]
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": ["Sequence","Retreat"]
    }
  ]
}