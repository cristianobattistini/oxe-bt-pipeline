{
  "dataset_id": "ucsd_kitchen_dataset_converted_externally_to_rlds_0.1.0",
  "episode_id": "episode_115",
  "task_summary": "The robot must turn on the faucet by locating, approaching, grasping, and then rotating the faucet handle to the open position.",
  "task_long_description": {
    "overview": "In this kitchen scenario, a robotic arm is tasked to turn on the faucet by manipulating the faucet handle above the sink. The mission involves visually detecting the handle, moving to a pre-grasp pose, aligning precisely with the handle, grasping it securely from the side, turning the handle to open the faucet (90° rotation), and finally retreating. Reliable perception, precise manipulation, and safe interaction with the faucet hardware are required.",
    "preconditions": [
      "Robot and workspace are initialized and free of obstructions.",
      "Faucet handle is in off (closed) position and within workspace.",
      "Gripper is empty and ready."
    ],
    "stepwise_plan": [
      "Check for visual of faucet handle; scan if not immediately visible.",
      "Detect and localize faucet handle.",
      "Move above the faucet handle.",
      "Precisely approach and align with the handle.",
      "Compute a grasp pose for the side of the handle.",
      "Grasp handle at computed pose.",
      "Turn faucet handle 90 degrees toward open direction.",
      "Retreat from the handle.",
      "Wait briefly to confirm action completion."
    ],
    "success_criteria": [
      "Faucet handle visually detected and manipulated.",
      "Gripper rotates handle to open position (90°).",
      "Robot retreats cleanly without collisions."
    ],
    "failure_and_recovery": [
      "Perception failure: Retry scan for faucet handle up to 3 times.",
      "Grasp slip: Detect and re-attempt approach and grasp.",
      "Faucet handle stuck: Abort and log failure."
    ],
    "termination": "Task ends upon successful handle rotation and retreat, or after unrecoverable error (e.g., object not found after retries)."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "Turn on the faucet",
  "instruction_to_ports": {
    "force": 10,
    "timeout_ms": 1500,
    "tolerance": 0.005,
    "retry_attempts": 3
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["faucet_handle","sink","counter","robot_arm"],
  "objects_from_instruction": ["faucet"],
  "blackboard_keys": ["grasp_faucet"],
  "node_specs": [
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"faucet_handle"},"description":"Is the faucet handle visible to sensors?"},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"faucet_handle","pattern":"raster","max_attempts":3,"timeout_ms":1200},"description":"Scan scene for faucet handle in raster pattern, up to 3 attempts."},
    {"id":"DetectObject","type":"Action","ports":{"target":"faucet_handle","timeout_ms":800},"description":"Detect and localize faucet handle."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"faucet_handle","offset_z":0.05,"timeout_ms":1500},"description":"Move robot end-effector to a safe pose above faucet handle."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"faucet_handle","tolerance":0.005,"timeout_ms":1500},"description":"Approach and align with handle precisely."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"faucet_handle","strategy":"side","result_key":"grasp_faucet"},"description":"Compute a grasp pose for the handle (side strategy)."},
    {"id":"GraspAtPose","type":"Action","ports":{"pose_key":"grasp_faucet","strategy":"side","timeout_ms":1000},"description":"Execute grasp at computed pose."},
    {"id":"TurnKnob","type":"Action","ports":{"target":"faucet_handle","knob_type":"knob","angle_deg":90,"direction":"open","force_limit":10,"timeout_ms":1500},"description":"Turn the faucet handle 90° toward open direction."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.10,"timeout_ms":1200},"description":"Move away from handle after rotation."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":500},"description":"Pause briefly to confirm completion."}
  ],
  "tree_stats": {"nodes_total": 12, "actions": 9, "conditions": 1, "depth": 3},
  "failure_modes": [
    "Faucet handle detection failure",
    "Approach misalignment",
    "Grasp failure or slip",
    "TurnKnob action stalls or handle stuck"
  ],
  "recovery_strategy": [
    "Retry perception up to 3 times via ScanForTarget",
    "Abort on persistent grasp or turn failure"
  ],
  "assumptions": [
    "Frames confirm the manipulated object is a faucet handle; task design assumes handle is a rotary knob.",
    "If handle is not a knob but lever, action semantics may differ; here 'knob' is chosen due to visual evidence.",
    "Objects in the visual frames take precedence over generic instruction."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Faucet handle is rotated/opened and water flow starts.",
      "Robot end-effector retreats safely after action."
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"faucet_handle"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"faucet_handle","pattern":"raster","max_attempts":3,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"faucet_handle","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"faucet_handle","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"faucet_handle","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"ComputeGraspPose","attrs":{"target":"faucet_handle","strategy":"side","result_key":"grasp_faucet"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "grasp",
      "active_leaf": {"id":"GraspAtPose","attrs":{"pose_key":"grasp_faucet","strategy":"side","timeout_ms":1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"TurnKnob","attrs":{"target":"faucet_handle","knob_type":"knob","angle_deg":90,"direction":"open","force_limit":10,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.10,"timeout_ms":1200}},
      "active_path_ids": []
    }
  ]
}