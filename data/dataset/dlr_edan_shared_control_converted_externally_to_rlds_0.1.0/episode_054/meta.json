{
  "dataset_id": "dlr_edan_shared_control_converted_externally_to_rlds_0.1.0",
  "episode_id": "episode_054",
  "task_summary": "The robot is instructed to pick the red apple. The behavior tree sequentially guides the robot through perception, approach, grasp, and retreat phases, using visual and contact cues to locate, grasp, and securely hold the apple.",
  "task_long_description": {
    "overview": "This episode features a robotic manipulator tasked with picking a red apple from a small table. The scene includes two apples (red, green), geometric objects, and a flower pot. The robot must first visually locate the apple, approach it from above with an open gripper, compute a grasp pose, align, lower to contact, close the gripper to grasp, verify the object is held, and retreat from the table. All phases are grounded in frame evidence, executed sequentially.",
    "preconditions": [
      "Robot is powered on and initialized",
      "Manipulation workspace is clear of obstacles",
      "Red apple is present and accessible on table",
      "Gripper is empty and functional"
    ],
    "stepwise_plan": [
      "Check if red apple is visible; retry scan if needed (up to 3 times)",
      "Detect and roughly localize the red apple",
      "Open the gripper to suitable width",
      "Move to a position above the apple",
      "Compute a top grasp pose",
      "Approach and align with the apple within tolerance",
      "Lower until contact is detected",
      "Close gripper to grasp with minimally sufficient force",
      "Verify that apple is held",
      "Retreat from picking position"
    ],
    "success_criteria": [
      "Apple is securely grasped by the gripper",
      "Robot successfully retreats with apple in gripper",
      "No collision with surrounding objects",
      "All actions terminate within allowed timeouts"
    ],
    "failure_and_recovery": [
      "Apple not visible: retry ScanForTarget up to 3 times",
      "Grasp fails: abort and log error",
      "Contact not detected: lower until max_depth, then abort",
      "Apple not in gripper after grasp: abort and log failure"
    ],
    "termination": "Tree terminates when the robot retreats successfully with the apple grasped"
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "pick the red apple",
  "instruction_to_ports": {
    "force": 10,
    "timeout_ms": 800,
    "tolerance": 0.005,
    "retry_attempts": 3
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["red_apple", "green_apple", "table", "cube_1", "cube_2", "flower_pot"],
  "objects_from_instruction": ["red_apple"],
  "blackboard_keys": ["std_top"],
  "node_specs": [
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"red_apple"},"description":"Checks if red apple is visible"},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"red_apple","pattern":"raster","max_attempts":3,"timeout_ms":1200},"description":"Scans workspace to find red apple up to 3 times"},
    {"id":"DetectObject","type":"Action","ports":{"target":"red_apple","timeout_ms":800},"description":"Detects and localizes red apple"},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.06,"timeout_ms":500},"description":"Opens gripper to 0.06m"},
    {"id":"MoveAbove","type":"Action","ports":{"target":"red_apple","offset_z":0.05,"timeout_ms":1500},"description":"Moves gripper above apple with vertical offset"},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"red_apple","strategy":"top","result_key":"std_top"},"description":"Computes top-down grasp pose for apple"},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"red_apple","tolerance":0.005,"timeout_ms":1500},"description":"Approaches and aligns to apple within tolerance"},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.05,"force_threshold":5,"timeout_ms":1200},"description":"Lowers until contact detected or max depth reached"},
    {"id":"CloseGripper","type":"Action","ports":{"force":10,"timeout_ms":800},"description":"Closes gripper with 10N force"},
    {"id":"ObjectInGripper","type":"Condition","ports":{"target":"red_apple"},"description":"Checks apple is gripped"},
    {"id":"Retreat","type":"Action","ports":{"distance":0.10,"timeout_ms":1200},"description":"Retreats with the apple"}
  ],
  "tree_stats": {"nodes_total": 12, "actions": 9, "conditions": 3, "depth": 4},
  "failure_modes": [
    "Red apple occluded/not detected",
    "Gripper fails to close",
    "Contact not detected during lowering",
    "Apple slips during retreat"
  ],
  "recovery_strategy": [
    "Retry scanning up to 3 attempts",
    "Abort if gripper or contact fails, log for operator"
  ],
  "assumptions": [
    "Visual inspection confirms the red apple is present and accessible in all key frames",
    "'Pick' mapped to sequential grasp using available node set",
    "No explicit 'pick' leaf: decomposed into actions per node library",
    "Object-in-gripper verified post-grasp; no transfer/placement requested by instruction",
    "Apple selection (red vs green) visually grounded in frame colors despite generic instruction"
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Red apple is in gripper at final retreat",
      "No collisions occur",
      "Completion within set timeouts"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"red_apple"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"red_apple","pattern":"raster","max_attempts":3,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "verify",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"red_apple","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.06,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"red_apple","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "verify",
      "active_leaf": {"id":"ComputeGraspPose","attrs":{"target":"red_apple","strategy":"top","result_key":"std_top"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "grasp",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"red_apple","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "grasp",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.05,"force_threshold":5,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.10,"timeout_ms":1200}},
      "active_path_ids": []
    }
  ]
}