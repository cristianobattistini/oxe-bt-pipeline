{
  "dataset_id": "dlr_edan_shared_control_converted_externally_to_rlds_0.1.0",
  "episode_id": "episode_078",
  "task_summary": "Robot arm perceives, approaches, grasps, and picks a die from a shelving unit.",
  "task_long_description": {
    "overview": "This episode involves a robot arm tasked with picking a die from a shelving unit. The scene consists of the robot arm executing a sequence of perception and manipulation actions to locate and grasp the die, which is situated in a cubby among several objects. The robot is responsible for visually acquiring the die, approaching from above, computing and aligning its grasp, lowering until contact is detected, and closing its gripper to secure the object. The procedure is robust to minor perception failures, retrying up to 3 times. Success is determined by a successful grasp indicated by the die being in the gripper.",
    "preconditions": [
      "Robot arm powered and operational",
      "Gripper empty",
      "Die visible or detectable in shelving unit",
      "Workspace unobstructed"
    ],
    "stepwise_plan": [
      "Check if the die is visible; retry scan up to 3 times if not.",
      "Detect and localize the die.",
      "Open the gripper to target width.",
      "Move above the die.",
      "Compute top grasp pose.",
      "Approach and align to grasp position.",
      "Lower until contact with die detected.",
      "Close gripper with moderate force.",
      "Verify die has been grasped and is in gripper."
    ],
    "success_criteria": [
      "Die securely held within gripper following grasp sequence.",
      "ObjectInGripper condition returns true for die.",
      "No collision or spillage observed during manipulation."
    ],
    "failure_and_recovery": [
      "Failure to detect die: Retry scan up to 3 times.",
      "Failure in grasping: Reattempt alignment and approach.",
      "Contact not detected: abort lowering or reset procedure.",
      "Perception noise: fallback to scan routine."
    ],
    "termination": "Tree terminates after ObjectInGripper condition returns success for die."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "pick the die",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": [
    "frame_0",
    "frame_1",
    "frame_2",
    "frame_3",
    "frame_4",
    "frame_5",
    "frame_6",
    "frame_7",
    "frame_8"
  ],
  "objects": ["die","shelving_unit"],
  "objects_from_instruction": ["die"],
  "blackboard_keys": ["std_top"],
  "node_specs": [
    {
      "id": "IsObjectVisible",
      "type": "Condition",
      "ports": {"target":"die"},
      "description": "Checks if the die is currently visible to sensors"
    },
    {
      "id": "ScanForTarget",
      "type": "Action",
      "ports": {"target":"die", "pattern":"grid", "max_attempts":3, "timeout_ms":1200},
      "description": "Scans for the die (object) using grid pattern"
    },
    {
      "id": "DetectObject",
      "type": "Action",
      "ports": {"target":"die", "timeout_ms":800},
      "description": "Performs detailed detection of the die"
    },
    {
      "id": "OpenGripper",
      "type": "Action",
      "ports": {"width":0.06, "timeout_ms":500},
      "description": "Opens the gripper to specified width"
    },
    {
      "id": "MoveAbove",
      "type": "Action",
      "ports": {"target":"die", "offset_z":0.05, "timeout_ms":1500},
      "description": "Moves the end-effector above the die"
    },
    {
      "id": "ComputeGraspPose",
      "type": "Action",
      "ports": {"target":"die", "strategy":"top", "result_key":"std_top"},
      "description": "Computes grasp pose for die using top strategy"
    },
    {
      "id": "ApproachAndAlign",
      "type": "Action",
      "ports": {"target":"die", "tolerance":0.005, "timeout_ms":1500},
      "description": "Approaches and aligns gripper to grasp pose"
    },
    {
      "id": "LowerUntilContact",
      "type": "Action",
      "ports": {"speed":"slow", "max_depth":0.05, "force_threshold":5, "timeout_ms":1200},
      "description": "Lowers gripper until contact with die detected"
    },
    {
      "id": "CloseGripper",
      "type": "Action",
      "ports": {"force":10, "timeout_ms":800},
      "description": "Closes gripper with moderate force"
    },
    {
      "id": "ObjectInGripper",
      "type": "Condition",
      "ports": {"target":"die"},
      "description": "Checks if die is now in gripper"
    }
  ],
  "tree_stats": {"nodes_total": 10, "actions": 8, "conditions": 2, "depth": 10},
  "failure_modes": [
    "Die not visible",
    "Scan fails to locate die",
    "Approach or alignment error",
    "Contact not detected during lowering",
    "Gripper fails to close or to hold die"
  ],
  "recovery_strategy": [
    "Use ScanForTarget up to 3 times if die not visible",
    "Retry approach and alignment",
    "Abort and restart from perception"
  ],
  "assumptions": [
    "The die is assumed to be the white cubic object in the bottom left shelf, based on visual evidence from frames.",
    "Object name 'die' inferred visually, as not specified in instruction.",
    "No explicit force, tolerance, or retry count in instruction; binned defaults from library used.",
    "The shelving unit acts only as a workspace, not a target or obstacle."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Die is securely held within gripper at end of sequence"
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": {
    "model_reported_tokens": null,
    "client_elapsed_ms": null
  },

  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"die","pattern":"grid","max_attempts":3,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"die","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.06,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"die","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "verify",
      "active_leaf": {"id":"ComputeGraspPose","attrs":{"target":"die","strategy":"top","result_key":"std_top"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"die","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "grasp",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.05,"force_threshold":5,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":10,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "grasp",
      "active_leaf": {"id":"ObjectInGripper","attrs":{"target":"die"}},
      "active_path_ids": []
    }
  ]
}