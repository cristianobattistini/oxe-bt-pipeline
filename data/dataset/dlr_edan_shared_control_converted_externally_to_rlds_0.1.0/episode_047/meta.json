{
  "dataset_id": "dlr_edan_shared_control_converted_externally_to_rlds_0.1.0",
  "episode_id": "episode_047",
  "task_summary": "Robot locates, approaches, and grasps the red apple from a tabletop, then retreats with it.",
  "task_long_description": {
    "overview": "A blue robotic arm is tasked with picking up a red apple from a table. The workspace contains other objects (green apple, cubes, plate, flower vase) but the target is the red apple. The robot must use vision to perceive the apple, align the gripper from above, grasp firmly and retreat. No placement or handover is involved. Steps must succeedâ€”no obstacles may be struck. The contact sheet gives evidence for each subtask: perception, approach, grasp, and retreat.",
    "preconditions": [
      "Red apple is present and visible on the table",
      "Robot arm is operational and gripper is open",
      "Workspace is clear of immediate obstacles"
    ],
    "stepwise_plan": [
      "Check if red apple is visible; scan as required",
      "Detect and locate red apple",
      "Open gripper to preset width",
      "Move above the red apple at a safe height",
      "Align and approach the apple from above",
      "Compute top grasp pose",
      "Grasp the red apple with gentle force",
      "Verify apple is held",
      "Retreat with the gripped apple"
    ],
    "success_criteria": [
      "Red apple is held securely in gripper at end of episode",
      "No unintended collisions or dropped object"
    ],
    "failure_and_recovery": [
      "If red apple not visible, scan up to 3 times",
      "If grasp fails, process ends on failure at grasp check"
    ],
    "termination": "Tree terminates when retreat is complete with apple in gripper."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "pick the red apple",
  "instruction_to_ports": {
    "force": 5,
    "timeout_ms": 800,
    "tolerance": 0.005,
    "retry_attempts": 3
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["red_apple", "green_apple", "white_cube_1", "white_cube_2", "plate", "flower_vase", "table"],
  "objects_from_instruction": ["red_apple"],
  "blackboard_keys": ["std_top"],
  "node_specs": [
    {
      "id": "IsObjectVisible",
      "type": "Condition",
      "ports": {"target":"red_apple"},
      "description": "Checks if the red apple is visible to sensors"
    },
    {
      "id": "ScanForTarget",
      "type": "Action",
      "ports": {"target":"red_apple","pattern":"raster","max_attempts":3,"timeout_ms":1200},
      "description": "Active visual search for red apple, 3 attempts"
    },
    {
      "id": "DetectObject",
      "type": "Action",
      "ports": {"target":"red_apple","timeout_ms":800},
      "description": "Runs object detection for red apple"
    },
    {
      "id": "OpenGripper",
      "type": "Action",
      "ports": {"width":0.06,"timeout_ms":500},
      "description": "Opens the gripper to 6cm"
    },
    {
      "id": "MoveAbove",
      "type": "Action",
      "ports": {"target":"red_apple","offset_z":0.10,"timeout_ms":1500},
      "description": "Moves gripper 10cm above red apple"
    },
    {
      "id": "ApproachAndAlign",
      "type": "Action",
      "ports": {"target":"red_apple","tolerance":0.005,"timeout_ms":1500},
      "description": "Approaches and aligns above the red apple"
    },
    {
      "id": "ComputeGraspPose",
      "type": "Action",
      "ports": {"target":"red_apple","strategy":"top","result_key":"std_top"},
      "description": "Computes top-down grasp pose for the apple"
    },
    {
      "id": "Grasp",
      "type": "Action",
      "ports": {"target":"red_apple","strategy":"top","force":5,"timeout_ms":800},
      "description": "Closes gripper gently on red apple"
    },
    {
      "id": "ObjectInGripper",
      "type": "Condition",
      "ports": {"target":"red_apple"},
      "description": "Verifies apple is being held"
    },
    {
      "id": "Retreat",
      "type": "Action",
      "ports": {"distance":0.15,"timeout_ms":1200},
      "description": "Moves gripper upwards and back with apple"
    }
  ],
  "tree_stats": {"nodes_total": 12, "actions": 8, "conditions": 2, "depth": 3},
  "failure_modes": [
    "Red apple not found (perception failure)",
    "Failed to align above red apple",
    "Apple not grasped successfully",
    "Collision with nearby objects"
  ],
  "recovery_strategy": [
    "Up to 3 scanning attempts if apple not visible",
    "Abort if grasp or retreat verify fails"
  ],
  "assumptions": [
    "The contact sheet phases support a simple pick and retreat (no place/handover step).",
    "Object is called 'red_apple' for BT mapping. Instruction and frames align.",
    "No discrepancies between instruction semantics and observed episode."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Red apple is grasped and lifted free of the surface"
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": {
    "model_reported_tokens": null,
    "client_elapsed_ms": null
  },
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"red_apple"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"red_apple","pattern":"raster","max_attempts":3,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"red_apple","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.06,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"red_apple","offset_z":0.10,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"red_apple","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "grasp",
      "active_leaf": {"id":"ComputeGraspPose","attrs":{"target":"red_apple","strategy":"top","result_key":"std_top"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "grasp",
      "active_leaf": {"id":"Grasp","attrs":{"target":"red_apple","strategy":"top","force":5,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.15,"timeout_ms":1200}},
      "active_path_ids": []
    }
  ]
}