{
  "dataset_id": "dlr_edan_shared_control_converted_externally_to_rlds_0.1.0",
  "episode_id": "episode_050",
  "task_summary": "The robot arm must detect, approach, and pick up the green apple from the tabletop scene, using a top grasp strategy and confirming the object is securely in the gripper.",
  "task_long_description": {
    "overview": "This episode features a blue robot arm in a kitchen or lab setting, tasked with picking up a green apple placed on a small stand. The arm moves from perceiving and approaching the apple, to grasping it securely from above, with visual confirmation and pre-grasp alignment steps. The behavior tree uses robust perception, approach, grasp planning (top strategy), and post-grasp verification—all actions visible in sequential frames. Key constraints include reliable object detection, controlled grasping force, and safe maneuvering to avoid collisions.",
    "preconditions": [
      "Green apple present and visible on the table",
      "Robot arm initialized and gripper functioning",
      "Workspace clear of obstructions"
    ],
    "stepwise_plan": [
      "Ensure the green apple is visible",
      "Detect the apple and confirm location",
      "Open the gripper to suitable width",
      "Move above the apple",
      "Compute and plan the top grasp pose",
      "Approach and align for accurate grasp",
      "Execute grasp using computed pose",
      "Verify the apple is held in the gripper"
    ],
    "success_criteria": [
      "Green apple is stably held in the gripper",
      "No collisions occurred",
      "Grasp executed from top as planned"
    ],
    "failure_and_recovery": [
      "Object not visible—retry scan for apple up to 3 times",
      "Grasp fails—re-planning and approach can be triggered",
      "Detection errors—fallback to re-detection"
    ],
    "termination": "Terminated when the apple is stably held in the gripper, confirmed by condition node."
  },
  "frame_ranking": {
    "order": ["frame_3", "frame_5", "frame_2", "frame_6", "frame_1", "frame_4", "frame_7", "frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "pick the green apple",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": [
    "frame_0",
    "frame_1",
    "frame_2",
    "frame_3",
    "frame_4",
    "frame_5",
    "frame_6",
    "frame_7",
    "frame_8"
  ],
  "objects": ["green_apple", "robot_arm", "table", "gripper", "cube", "plate", "flower_vase"],
  "objects_from_instruction": ["green_apple"],
  "blackboard_keys": ["grasp_green_apple"],
  "node_specs": [
    {
      "id": "IsObjectVisible",
      "type": "Condition",
      "ports": {"target": "green_apple"},
      "description": "Checks if the green apple is visible in the scene."
    },
    {
      "id": "ScanForTarget",
      "type": "Action",
      "ports": {"target": "green_apple", "pattern": "raster", "max_attempts": 3, "timeout_ms": 1200},
      "description": "Scans for the green apple using a raster pattern, up to 3 attempts."
    },
    {
      "id": "DetectObject",
      "type": "Action",
      "ports": {"target": "green_apple", "timeout_ms": 800},
      "description": "Detects and localizes the green apple."
    },
    {
      "id": "OpenGripper",
      "type": "Action",
      "ports": {"width": 0.06, "timeout_ms": 500},
      "description": "Opens the gripper to allow space for the apple."
    },
    {
      "id": "MoveAbove",
      "type": "Action",
      "ports": {"target": "green_apple", "offset_z": 0.05, "timeout_ms": 1500},
      "description": "Moves the gripper above the apple, offset in z."
    },
    {
      "id": "ComputeGraspPose",
      "type": "Action",
      "ports": {"target": "green_apple", "strategy": "top", "result_key": "grasp_green_apple"},
      "description": "Computes the grasp pose for a top grasp of the apple."
    },
    {
      "id": "ApproachAndAlign",
      "type": "Action",
      "ports": {"target": "green_apple", "tolerance": 0.005, "timeout_ms": 1500},
      "description": "Approaches and aligns the gripper for precise grasp."
    },
    {
      "id": "GraspAtPose",
      "type": "Action",
      "ports": {"pose_key": "grasp_green_apple", "strategy": "top", "timeout_ms": 800},
      "description": "Executes grasp at the computed pose using top strategy."
    },
    {
      "id": "ObjectInGripper",
      "type": "Condition",
      "ports": {"target": "green_apple"},
      "description": "Verifies the green apple is held within the gripper."
    }
  ],
  "tree_stats": {
    "nodes_total": 11,
    "actions": 7,
    "conditions": 2,
    "depth": 3
  },
  "failure_modes": [
    "Apple not visible or occluded",
    "Apple misdetected",
    "Grasp pose failure",
    "Gripper does not close successfully",
    "Apple slips or is not secured after grasp"
  ],
  "recovery_strategy": [
    "Retry scan for apple if not visible (up to 3 times)",
    "Fallback to redetect apple after failed attempt",
    "Recompute grasp pose if approach unsuccessful",
    "Abort if object cannot be secured after retries"
  ],
  "assumptions": [
    "Frames show only picking and holding of the green apple, not complete pick-and-place.",
    "No explicit force/tolerance given in instruction, mapped to defaults; strategy inferred from images.",
    "Phase assignment strictly follows visible progression in frames.",
    "Object ID 'green_apple' inferred visually; instruction matched to visual evidence."
  ],
  "evaluation_notes": {
    "expected_success_criteria": ["Green apple is detected and firmly held in the gripper; gripper closure and post-grasp verification succeed."],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {
    "model_reported_tokens": null,
    "client_elapsed_ms": null
  },
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {
        "id": "IsObjectVisible",
        "attrs": { "target": "green_apple" }
      },
      "active_path_ids": ["Sequence", "Fallback", "IsObjectVisible"]
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {
        "id": "DetectObject",
        "attrs": { "target": "green_apple", "timeout_ms": 800 }
      },
      "active_path_ids": ["Sequence", "DetectObject"]
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {
        "id": "OpenGripper",
        "attrs": { "width": 0.06, "timeout_ms": 500 }
      },
      "active_path_ids": ["Sequence", "OpenGripper"]
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {
        "id": "MoveAbove",
        "attrs": { "target": "green_apple", "offset_z": 0.05, "timeout_ms": 1500 }
      },
      "active_path_ids": ["Sequence", "MoveAbove"]
    },
    {
      "frame": "frame_4",
      "phase": "verify",
      "active_leaf": {
        "id": "ComputeGraspPose",
        "attrs": { "target": "green_apple", "strategy": "top", "result_key": "grasp_green_apple" }
      },
      "active_path_ids": ["Sequence", "ComputeGraspPose"]
    },
    {
      "frame": "frame_5",
      "phase": "verify",
      "active_leaf": {
        "id": "ApproachAndAlign",
        "attrs": { "target": "green_apple", "tolerance": 0.005, "timeout_ms": 1500 }
      },
      "active_path_ids": ["Sequence", "ApproachAndAlign"]
    },
    {
      "frame": "frame_6",
      "phase": "grasp",
      "active_leaf": {
        "id": "GraspAtPose",
        "attrs": { "pose_key": "grasp_green_apple", "strategy": "top", "timeout_ms": 800 }
      },
      "active_path_ids": ["Sequence", "GraspAtPose"]
    },
    {
      "frame": "frame_7",
      "phase": "grasp",
      "active_leaf": {
        "id": "ObjectInGripper",
        "attrs": { "target": "green_apple" }
      },
      "active_path_ids": ["Sequence", "ObjectInGripper"]
    },
    {
      "frame": "frame_8",
      "phase": "grasp",
      "active_leaf": {
        "id": "ObjectInGripper",
        "attrs": { "target": "green_apple" }
      },
      "active_path_ids": ["Sequence", "ObjectInGripper"]
    }
  ]
}