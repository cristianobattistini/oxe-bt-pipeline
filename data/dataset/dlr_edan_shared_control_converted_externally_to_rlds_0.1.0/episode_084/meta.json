{
  "dataset_id": "dlr_edan_shared_control_converted_externally_to_rlds_0.1.0",
  "episode_id": "episode_084",
  "task_summary": "Pick the tube from the shelf using a top grasp while assuring perception, alignment, and confirmation of grasp.",
  "task_long_description": {
    "overview": "This episode involves a robotic arm tasked with picking up a white tube from the top right compartment of a black shelving unit in a typical lab environment. The arm initiates by locating the tube visually, opening the gripper in preparation, positioning above the tube, aligning carefully, executing a top-down grasp, and confirming successful pickup. The robot's actions are tightly sequenced and visualize perception, approach, grasp, and verification. The main object is the tube; no obstructions are present.",
    "preconditions": [
      "The robot is positioned such that it has a clear line of sight to the tube.",
      "The tube is not occluded and is reachable on the shelf.",
      "The gripper is empty and operational."
    ],
    "stepwise_plan": [
      "Check if the tube is visible; scan with raster pattern if needed.",
      "Detect and localize the tube.",
      "Open gripper to 0.06m width.",
      "Move arm above the tube with 0.10m vertical offset.",
      "Compute a top-down grasp pose for the tube.",
      "Approach and align to minimize pose error (0.005m tolerance).",
      "Execute grasp at computed pose using top strategy.",
      "Check grasp success by confirming the tube is in the gripper."
    ],
    "success_criteria": [
      "Tube is grasped firmly by the gripper.",
      "Tube is no longer resting on the shelf.",
      "No drops or collisions occur."
    ],
    "failure_and_recovery": [
      "If the tube is not visible, retry scan up to three times.",
      "If grasp fails, the episode would terminate; recovery beyond three scan attempts not covered here."
    ],
    "termination": "Tree ends once the object is confirmed to be in the gripper or scan attempts are exhausted."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "pick the tube",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": 3
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["tube", "shelf"],
  "objects_from_instruction": ["tube"],
  "blackboard_keys": ["std_top"],
  "node_specs": [
    {
      "id":"IsObjectVisible",
      "type":"Condition",
      "ports":{"target":"tube"},
      "description":"Checks if the tube is visible to the robot's perception."
    },
    {
      "id":"ScanForTarget",
      "type":"Action",
      "ports":{"target":"tube","pattern":"raster","max_attempts":3,"timeout_ms":1200},
      "description":"Actively scans for the tube using a raster pattern, up to three attempts."
    },
    {
      "id":"DetectObject",
      "type":"Action",
      "ports":{"target":"tube","timeout_ms":800},
      "description":"Performs object detection for the tube with an 800ms timeout."
    },
    {
      "id":"OpenGripper",
      "type":"Action",
      "ports":{"width":0.06,"timeout_ms":500},
      "description":"Opens the gripper to 0.06m with a fast 500ms timeout preparing for grasp."
    },
    {
      "id":"MoveAbove",
      "type":"Action",
      "ports":{"target":"tube","offset_z":0.10,"timeout_ms":1500},
      "description":"Moves the arm above the tube with a 10cm vertical offset for approach."
    },
    {
      "id":"ComputeGraspPose",
      "type":"Action",
      "ports":{"target":"tube","strategy":"top","result_key":"std_top"},
      "description":"Computes a top grasp pose for the tube; saves pose under std_top."
    },
    {
      "id":"ApproachAndAlign",
      "type":"Action",
      "ports":{"target":"tube","tolerance":0.005,"timeout_ms":1500},
      "description":"Approaches and aligns to tube within 5mm tolerance."
    },
    {
      "id":"GraspAtPose",
      "type":"Action",
      "ports":{"pose_key":"std_top","strategy":"top","timeout_ms":1000},
      "description":"Executes grasp at computed pose with top strategy, timeout 1s."
    },
    {
      "id":"ObjectInGripper",
      "type":"Condition",
      "ports":{"target":"tube"},
      "description":"Verifies that the tube is held in the gripper."
    }
  ],
  "tree_stats": {
    "nodes_total": 11,
    "actions": 7,
    "conditions": 2,
    "depth": 5
  },
  "failure_modes": [
    "Tube not visible after 3 scan attempts.",
    "Tube detection fails.",
    "Unstable or missed grasp.",
    "Tube slips from gripper after pickup."
  ],
  "recovery_strategy": [
    "Retry scanning for tube up to 3 times if invisible.",
    "Abort pick action if all perception and grasp attempts fail."
  ],
  "assumptions": [
    "Instruction is consistent with frames; tube is clearly present and graspable. Top grasp is selected based on tube geometry and approach path visible in frames. No need to place; only pick. No force/tolerance constraints specified in the instruction."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Tube is lifted from the shelf by the gripper."
    ],
    "test_scenarios": [
      "happy path",
      "object_missing",
      "grasp_fail",
      "perception_noise"
    ]
  },
  "timing": {
    "model_reported_tokens": null,
    "client_elapsed_ms": null
  },
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"tube"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"tube","pattern":"raster","max_attempts":3,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"tube","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.06,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"tube","offset_z":0.10,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "verify",
      "active_leaf": {"id":"ComputeGraspPose","attrs":{"target":"tube","strategy":"top","result_key":"std_top"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "grasp",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"tube","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "grasp",
      "active_leaf": {"id":"GraspAtPose","attrs":{"pose_key":"std_top","strategy":"top","timeout_ms":1000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "grasp",
      "active_leaf": {"id":"ObjectInGripper","attrs":{"target":"tube"}},
      "active_path_ids": []
    }
  ]
}