{
  "dataset_id": "dlr_edan_shared_control_converted_externally_to_rlds_0.1.0",
  "episode_id": "episode_018",
  "task_summary": "Robot arm picks up a small white cube from a shelf compartment using visual detection, pregrasp approach, top grasp, and post-grasp retreat.",
  "task_long_description": {
    "overview": "This task involves a robotic arm in an indoor environment tasked to pick up a small white cube placed inside the lower right compartment of a black shelving unit. The robot first visually detects the cube, approaches and aligns above it, computes a suitable grasp, picks it up, and then retreats from the shelf. The cube is the main object of interest. The behavior tree uses robust perception and recovery for visual cues, minimizes force to avoid damage, and ensures observable grasp success. Constraints include shelf geometry and environmental occlusion.",
    "preconditions": [
      "Robot arm is powered and operational.",
      "Cube is present and accessible inside the shelf compartment.",
      "No objects obstruct gripper or cube.",
      "Camera and sensors are unobstructed."
    ],
    "stepwise_plan": [
      "Check if cube is visible; scan shelf if not.",
      "Detect cube position.",
      "Open gripper and prepare for grasp.",
      "Move gripper above cube, offset to avoid collisions.",
      "Align precisely with cube.",
      "Compute grasp pose (top grasp).",
      "Grasp the cube using computed pose.",
      "Verify cube is in gripper.",
      "Retreat from shelf."
    ],
    "success_criteria": [
      "Cube securely held by gripper.",
      "No collision with shelf or surrounding objects.",
      "Robot has retreated from initial picking position."
    ],
    "failure_and_recovery": [
      "Cube not detected: rescan and retry up to 3 times.",
      "Grasp failed: retry approach and grasp sequence.",
      "Unexpected collision: stop and alert user.",
      "Object not in gripper: abort and reset."
    ],
    "termination": "Tree finishes after successful retreat with cube firmly grasped; abort on unrecoverable failure."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "pick the cube",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["cube", "shelf", "robot_arm", "flowerpot"],
  "objects_from_instruction": ["cube"],
  "blackboard_keys": ["std_top"],
  "node_specs": [
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"cube"},"description":"Returns SUCCESS if cube is visually detected"},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"cube","pattern":"grid","max_attempts":3,"timeout_ms":1200},"description":"Scans area to locate cube; grid pattern and 3 attempts"},
    {"id":"DetectObject","type":"Action","ports":{"target":"cube","timeout_ms":800},"description":"Detects cube; returns pose information"},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.06,"timeout_ms":500},"description":"Opens gripper to 0.06m ready for grasp"},
    {"id":"MoveAbove","type":"Action","ports":{"target":"cube","offset_z":0.05,"timeout_ms":1500},"description":"Moves robot above cube with 5cm vertical offset"},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"cube","tolerance":0.005,"timeout_ms":1500},"description":"Aligns gripper to cube; 5mm tolerance"},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"cube","strategy":"top","result_key":"std_top"},"description":"Computes top grasp pose for cube; stores in std_top"},
    {"id":"GraspAtPose","type":"Action","ports":{"pose_key":"std_top","strategy":"top","timeout_ms":1000},"description":"Grasps cube at computed std_top pose using top strategy"},
    {"id":"ObjectInGripper","type":"Condition","ports":{"target":"cube"},"description":"Checks if cube is currently gripped"},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":1200},"description":"Retreats gripper by 10cm after pick"}
  ],
  "tree_stats": {"nodes_total": 10, "actions": 7, "conditions": 3, "depth": 3},
  "failure_modes": [
    "Cube is not detected due to occlusion or sensor error",
    "Scan fails to locate cube within retry threshold",
    "Gripper fails to open or grasp pose is unreachable",
    "Object slips during grasp or is not held after attempt",
    "Collision with shelf or other objects during pick"
  ],
  "recovery_strategy": [
    "Visual rescan and retry for detection",
    "Reattempt approach and grasp up to retry threshold",
    "Abort and safe stop if collision detected",
    "Alert operator if unrecoverable or repeated failure"
  ],
  "assumptions": [
    "Instruction 'pick the cube' matches visual task in all frames",
    "Cube is always present in the lowest right shelf as shown; no move or placement in episode",
    "No contradictions found between instruction and frames"
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Cube detected and grasped",
      "Cube held by gripper after retreat"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"cube","pattern":"grid","max_attempts":3,"timeout_ms":1200}},
      "active_path_ids": ["Sequence","Fallback","RetryUntilSuccessful","ScanForTarget"]
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"cube","timeout_ms":800}},
      "active_path_ids": ["Sequence","DetectObject"]
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.06,"timeout_ms":500}},
      "active_path_ids": ["Sequence","OpenGripper"]
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"cube","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": ["Sequence","MoveAbove"]
    },
    {
      "frame": "frame_4",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"cube","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": ["Sequence","ApproachAndAlign"]
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"ComputeGraspPose","attrs":{"target":"cube","strategy":"top","result_key":"std_top"}},
      "active_path_ids": ["Sequence","ComputeGraspPose"]
    },
    {
      "frame": "frame_6",
      "phase": "grasp",
      "active_leaf": {"id":"GraspAtPose","attrs":{"pose_key":"std_top","strategy":"top","timeout_ms":1000}},
      "active_path_ids": ["Sequence","GraspAtPose"]
    },
    {
      "frame": "frame_7",
      "phase": "verify",
      "active_leaf": {"id":"ObjectInGripper","attrs":{"target":"cube"}},
      "active_path_ids": ["Sequence","ObjectInGripper"]
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": ["Sequence","Retreat"]
    }
  ]
}