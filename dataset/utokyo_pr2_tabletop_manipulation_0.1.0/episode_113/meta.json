{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_113",
  "task_summary": "Perceive a pink cloth, align to an edge, make gentle contact, and push the edge to fold it over, then retreat.",
  "task_long_description": {
    "overview": "A fixed camera views a tabletop with a single pink cloth. A robot arm approaches from the right. The goal is to fold the cloth by pushing one edge inward. The robot first detects the cloth, moves above an edge, aligns its tool orientation, lowers until contact is sensed, and performs a straight push along the table to create a fold. The maneuver emphasizes controlled contact and alignment rather than grasping. After the fold motion completes, the arm retreats to a safe height/offset.",
    "preconditions": [
      "Cloth is on the table within workspace",
      "Camera provides view of cloth",
      "No obstacles near the push path",
      "End-effector can safely contact fabric"
    ],
    "stepwise_plan": [
      "Detect the cloth in the scene.",
      "Move above the selected cloth edge at a safe height.",
      "Precisely align end-effector yaw parallel to the intended push direction.",
      "Lower until contact with the cloth/table is detected.",
      "Push the edge inward to produce a fold.",
      "Retreat to a safe offset."
    ],
    "success_criteria": [
      "Edge visibly displaced inward forming a fold/overlap",
      "No object slippage or unintended dragging of entire cloth",
      "End-effector clears after motion"
    ],
    "failure_and_recovery": [
      "Perception fails: rescan scene and reattempt detection",
      "Insufficient contact: lower again until contact, then recheck",
      "Push stalls: shorten distance and try a second push",
      "Pose drift: realign yaw and reapproach edge"
    ],
    "termination": "After the push completes and the arm retreats to a safe offset."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_4","frame_2","frame_6","frame_1","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.20,
      "frame_1": 0.42,
      "frame_2": 0.68,
      "frame_3": 0.95,
      "frame_4": 0.85,
      "frame_5": 0.88,
      "frame_6": 0.60,
      "frame_7": 0.35,
      "frame_8": 0.12
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "Tool is in firm contact at the cloth edge with orientation aligned, start of decisive push.",
        "predicts_next": "Continuation of push motion resulting in edge displacement and fold formation.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "folding a cloth",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["cloth", "table", "robot_arm", "end_effector"],
  "objects_from_instruction": ["cloth"],
  "blackboard_keys": [],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"cloth","timeout_ms":800},"description":"Detect the cloth in view."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"cloth_edge","offset_z":0.05,"timeout_ms":1500},"description":"Move above the chosen cloth edge at safe height."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"cloth_edge","tolerance":0.005,"timeout_ms":1500},"description":"Laterally approach and refine alignment to the edge."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":90},"description":"Orient tool parallel to push direction."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.02,"force_threshold":10,"timeout_ms":1200},"description":"Lower to make gentle contact with cloth/table."},
    {"id":"ContactDetected","type":"Condition","ports":{"force_threshold":10},"description":"Verify contact achieved before pushing."},
    {"id":"Push","type":"Action","ports":{"target":"cloth_edge","distance":0.1,"direction_deg":180,"timeout_ms":1500},"description":"Push the edge inward to fold the cloth."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.05,"timeout_ms":800},"description":"Back off to a safe offset after folding."}
  ],
  "tree_stats": {"nodes_total": 9, "actions": 7, "conditions": 1, "depth": 2},
  "failure_modes": [
    "Perception mislocalizes cloth edge",
    "Insufficient contact leading to sliding without folding",
    "Overpush causing cloth bunching",
    "Yaw misalignment causing diagonal wrinkle instead of fold"
  ],
  "recovery_strategy": [
    "Rescan or adjust viewpoint and redetect",
    "Lower again and recheck contact",
    "Reduce push distance and make multiple passes",
    "Re-align yaw and repeat approach"
  ],
  "assumptions": [
    "Frames show push-based folding without grasping; tree omits grasp actions accordingly.",
    "Push direction assumed leftward (180Â°) based on tool entering from right side.",
    "No obstacles near cloth edge during push."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Edge displacement and visible overlap of cloth area",
      "No unintended movement of whole cloth",
      "Arm retreats cleanly"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"cloth","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"cloth_edge","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "verify",
      "active_leaf": {"id":"ContactDetected","attrs":{"force_threshold":10}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "transfer",
      "active_leaf": {"id":"Push","attrs":{"target":"cloth_edge","distance":0.1,"direction_deg":180,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"Push","attrs":{"target":"cloth_edge","distance":0.1,"direction_deg":180,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"Push","attrs":{"target":"cloth_edge","distance":0.1,"direction_deg":180,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.05,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.05,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.05,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
