{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_167",
  "task_summary": "Detect the bread, grasp it gently with a side pinch, move to the plate, release on the plate, and retreat.",
  "task_long_description": {
    "overview": "A PR2-style gripper operates over a tabletop with a plate and a small bread piece. The goal is to pick the bread and place it onto the plate. The robot must first perceive the bread, align its end-effector, execute a gentle grasp suitable for soft items, and transport the bread above the plate before releasing it onto the center. The contact sheet shows approach, grasp, transfer to the plate, release, and retreat. Constraints: low grasp force, precise alignment near the plate rim, and collision avoidance.",
    "preconditions": ["Workspace clear except plate and bread", "Camera view of bread available", "Gripper operational and initially open"],
    "stepwise_plan": ["Open gripper", "Detect or scan for bread", "Compute side-pinch grasp", "Align and set yaw", "Pick using computed grasp", "Verify grasp stability", "Move above plate, then to plate center", "Open gripper to release", "Retreat and wait briefly"],
    "success_criteria": ["Bread ends up resting on the plate", "No collisions with plate edge", "Bread remains in gripper during transfer", "Robot returns to safe pose"],
    "failure_and_recovery": ["If detection fails, scan raster pattern", "If grasp unstable, reattempt detection/grasp (operator-level fallback)", "If placement obstructed, retreat and re-approach"],
    "termination": "Task terminates after release on plate followed by retreat and brief wait."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "Gripper aligned near bread with stable orientation visible.",
        "predicts_next": "Initiation of grasp and lift is expected next.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "picking a bread",
  "instruction_to_ports": {
    "force": 10,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["bread", "plate", "robot_gripper", "table_mat"],
  "objects_from_instruction": ["bread"],
  "blackboard_keys": ["bread_grasp"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":800},"description":"Open gripper to maximum allowed width before and during placement."},
    {"id":"DetectObject","type":"Action","ports":{"target":"bread","timeout_ms":1200},"description":"Detect bread location."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"bread","pattern":"raster","max_attempts":3,"timeout_ms":1500},"description":"Fallback scanning if initial detection fails."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"bread","strategy":"side","result_key":"bread_grasp"},"description":"Compute side-pinch grasp for soft bread."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":90},"description":"Rotate end-effector yaw to align with bread."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"bread","tolerance":0.005,"timeout_ms":1500},"description":"Refine approach with tight alignment."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"bread_grasp","timeout_ms":1500},"description":"Execute grasp using computed pose."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Confirm bread is secured."},
    {"id":"MoveTo","type":"Action","ports":{"target":"plate_above","timeout_ms":1500},"description":"Lift and move above the plate."},
    {"id":"MoveTo","type":"Action","ports":{"target":"plate_center","timeout_ms":1200},"description":"Move to plate center for release."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":800},"description":"Release bread onto plate."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":1200},"description":"Back off to a safe distance."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":400},"description":"Stabilization pause."}
  ],
  "tree_stats": {"nodes_total": 15, "actions": 12, "conditions": 1, "depth": 3},
  "failure_modes": ["Bread not detected", "Slippage during lift", "Collision with plate rim", "Release occurs off-center"],
  "recovery_strategy": ["Fallback scan for detection", "Re-align and re-grasp if stability fails", "Retreat then re-approach placement pose"],
  "assumptions": ["Frames indicate final placement on plate though instruction only states 'picking'; tree includes placement to match visual evidence."],
  "evaluation_notes": {
    "expected_success_criteria": ["Bread placed on plate without dropping or deforming", "No collisions with plate", "Robot retreats to safe pose"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"bread","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"bread","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"SetTCPYaw","attrs":{"yaw_deg":90}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"bread","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"bread_grasp","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"IsGraspStable","attrs":{}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"MoveTo","attrs":{"target":"plate_above","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    }
  ]
}
