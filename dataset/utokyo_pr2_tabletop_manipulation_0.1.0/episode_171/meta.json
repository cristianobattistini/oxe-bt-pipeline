{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_171",
  "task_summary": "Detect, grasp, and lift a bread piece, then place it onto a plate and retreat.",
  "task_long_description": {
    "overview": "A PR2 end-effector operates above a green cloth on a table with a bread-like food item near a white plate. The robot must visually locate the bread, approach precisely, make gentle contact, close the gripper to pick it, lift, move above the plate, lower, release, and retreat. Timeouts, low closing force, and visual checks are used to ensure a stable grasp and safe placement. The scene suggests a short tabletop manipulation with clear visual targets.",
    "preconditions": ["Workspace clear and reachable", "Bread and plate on table", "Gripper functional and unobstructed", "Camera provides view of workspace"],
    "stepwise_plan": ["Detect or scan for bread", "Open gripper and approach above bread", "Align and descend until contact", "Close gripper gently and verify grasp", "Retreat upward", "Locate plate", "Move above plate, align and descend", "Open gripper to release onto plate", "Retreat to safe pose"],
    "success_criteria": ["Bread securely grasped", "Bread placed centered on plate", "No collisions with plate or table", "Robot ends in a safe pose"],
    "failure_and_recovery": ["Bread not detected → scan raster pattern", "Poor alignment → re-approach and align", "Grasp unstable → reopen and retry pick", "Placement contact early → adjust height and retry"],
    "termination": "Terminate after successful release on plate followed by retreat."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "picking a bread",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["bread","plate","table","gripper"],
  "objects_from_instruction": ["bread"],
  "blackboard_keys": [],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"string","timeout_ms":"int"},"description":"Vision detection of a named target."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"string","pattern":"string","max_attempts":"int","timeout_ms":"int"},"description":"Active scan when initial detection fails."},
    {"id":"OpenGripper","type":"Action","ports":{"width":"float","timeout_ms":"int"},"description":"Open gripper to specified width."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"string","offset_z":"float","timeout_ms":"int"},"description":"Position tool above a target at offset."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"string","tolerance":"float","timeout_ms":"int"},"description":"Approach and align to target within tolerance."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"string","max_depth":"float","force_threshold":"float","timeout_ms":"int"},"description":"Descend until contact force or depth reached."},
    {"id":"CloseGripper","type":"Action","ports":{"force":"float","timeout_ms":"int"},"description":"Close gripper with specified force."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Checks if current grasp is stable."},
    {"id":"Retreat","type":"Action","ports":{"distance":"float","timeout_ms":"int"},"description":"Retreat by a specified distance."},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"string"},"description":"Checks if object is currently visible."}
  ],
  "tree_stats": {"nodes_total": 19, "actions": 14, "conditions": 2, "depth": 3},
  "failure_modes": ["Object not detected", "Misalignment causing failed grasp", "Object slips after closing", "Collision with plate during placement"],
  "recovery_strategy": ["Fallback to raster scan for detection", "Re-approach with tighter tolerance", "Reopen and retry grasp with different height", "Retreat and retry placement sequence"],
  "assumptions": ["Although the instruction says 'picking a bread', frames [6-8] show placement onto a plate; the BT includes a place step to match frames."],
  "evaluation_notes": {
    "expected_success_criteria": ["Bread ends on plate; gripper releases; no collision"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"bread","timeout_ms":"1200"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"bread","offset_z":"0.03","timeout_ms":"1500"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"bread","tolerance":"0.01","timeout_ms":"1500"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":"0.02","force_threshold":"5.0","timeout_ms":"1200"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":"10","timeout_ms":"800"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"Retreat","attrs":{"distance":"0.1","timeout_ms":"1200"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"plate","offset_z":"0.05","timeout_ms":"1500"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":"0.09","timeout_ms":"800"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":"0.1","timeout_ms":"1200"}},
      "active_path_ids": []
    }
  ]
}
