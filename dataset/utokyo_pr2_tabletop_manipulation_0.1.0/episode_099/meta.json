{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_099",
  "task_summary": "Detect the bread, approach and align, compute a grasp, pick it up, verify hold, and retreat from the plate.",
  "task_long_description": {
    "overview": "A PR2 gripper must pick a small piece of bread from a white plate placed on a green mat. The robot first ensures the bread is visible, then approaches from above with a precise alignment. It computes a pinch-style grasp pose, executes the grasp, checks grasp stability, and then retreats, lifting the bread clear of the plate. Visual evidence across the 9 frames shows approach, contact, lift, and withdrawal. Timing and forces are conservative to avoid sliding the bread across the plate.",
    "preconditions": ["Robot is operational and homed", "Workspace clear except plate and bread", "Camera provides view of bread", "Gripper calibrated and able to open to 0.09 m"],
    "stepwise_plan": ["Open gripper", "Detect or confirm visibility of bread", "Move to a pregrasp above bread", "Approach and align with tight tolerance", "Compute pinch grasp for bread", "Verify pose availability", "Execute pick using computed grasp", "Confirm stable grasp and object in gripper", "Retreat away from plate"],
    "success_criteria": ["Bread is securely held by gripper", "No collision with plate", "End effector retreats to a safe distance", "Object remains visible in gripper during retreat"],
    "failure_and_recovery": ["If bread not detected: retry detection up to 3 times", "If alignment fails: re-approach and recompute grasp", "If grasp slips: reopen, re-detect, recompute grasp, and retry", "If contact with plate is excessive: increase offset and reattempt"],
    "termination": "Terminate when the bread is detected in the gripper and the arm has retreated to a safe distance."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "picking a bread",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["bread", "plate", "green_mat", "pr2_gripper"],
  "objects_from_instruction": ["bread"],
  "blackboard_keys": ["bread_grasp"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":500},"description":"Ensure jaws are fully open before approach."},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"bread"},"description":"Quick check that the bread is already visible."},
    {"id":"DetectObject","type":"Action","ports":{"target":"bread","timeout_ms":800},"description":"Run perception to localize bread if not yet visible."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"bread","offset_z":0.02,"timeout_ms":1200},"description":"Move to a pregrasp above the bread."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"bread","tolerance":0.005,"timeout_ms":1200},"description":"Approach and align precisely over the target."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"bread","strategy":"pinch","result_key":"bread_grasp"},"description":"Generate a pinch grasp pose and store it."},
    {"id":"PoseAvailable","type":"Condition","ports":{"key":"bread_grasp"},"description":"Verify computed grasp pose exists on the blackboard."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"bread_grasp","timeout_ms":1500},"description":"Execute the grasp and lift."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Check that grasp forces/pose are stable."},
    {"id":"ObjectInGripper","type":"Condition","ports":{"target":"bread"},"description":"Confirm the bread is held."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Back off to a safe height/distance after grasp."}
  ],
  "tree_stats": {"nodes_total": 14, "actions": 7, "conditions": 4, "depth": 4},
  "failure_modes": ["Bread not detected due to occlusion or lighting", "Approach misalignment causing contact with plate", "Grasp slip due to low friction", "Insufficient opening width", "Planning timeout"],
  "recovery_strategy": ["Retry detection up to 3x", "Recompute grasp pose and re-approach", "Open gripper and reattempt with adjusted offset", "Abort and wait if repeated failures occur"],
  "assumptions": ["Object on a plate is edible bread as seen in frames; grasp strategy set to 'pinch' based on small object geometry; Pick action encapsulates closing and initial lift rather than explicit CloseGripper."],
  "evaluation_notes": {
    "expected_success_criteria": ["ObjectInGripper returns success", "Retreat completes without collision", "Bread remains elevated and visible during retreat"],
    "test_scenarios": ["happy path", "object_missing", "grasp_fail", "perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"bread","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"bread","offset_z":0.02,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"bread","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"PoseAvailable","attrs":{"key":"bread_grasp"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"bread_grasp","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"bread_grasp","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "transfer",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
