{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_173",
  "task_summary": "Detect, grasp, and lift a bread, then move above the plate, lower to contact, release, and retreat.",
  "task_long_description": {
    "overview": "A PR2-style gripper operates on a tabletop with a small white plate and a bread roll. The robot must locate the bread, approach from the side, compute a pinch grasp, and pick it up. Visual evidence indicates the object is transferred to the plate and released. Motions are executed with short timeouts and modest retreats to avoid collisions with the plate rim and tablecloth. Perception may be noisy; thus detection is retried. The sequence ends after releasing the bread and backing away.",
    "preconditions": ["Workspace clear except plate and bread", "Gripper operational and initially open", "Camera viewpoint covers bread and plate"],
    "stepwise_plan": ["Open gripper", "Detect bread (retry)", "Move above bread", "Align and approach", "Compute grasp pose", "Pick bread", "Verify grasp stability", "Retreat up", "Move above plate", "Lower until contact with plate", "Open gripper to release", "Retreat"],
    "success_criteria": ["Bread securely grasped before transfer", "Bread released and resting on plate center region", "No collisions with plate edge beyond light contact", "Robot ends in a safe pose above workspace"],
    "failure_and_recovery": ["Detection fails → retry detection", "Misalignment during approach → repeat alignment/motion on next tick", "Unstable grasp → reopen, re-detect, and attempt again", "Contact too early with plate → retreat slightly and re-lower"],
    "termination": "Terminate when bread is released on the plate and the arm has retreated to a safe distance."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "picking a bread",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["bread", "plate"],
  "objects_from_instruction": ["bread"],
  "blackboard_keys": ["grasp_bread"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":"float","timeout_ms":"int"},"description":"Open gripper to specified width before interaction or to release."},
    {"id":"DetectObject","type":"Action","ports":{"target":"string","timeout_ms":"int"},"description":"Run perception to locate the target object."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"string","offset_z":"float","timeout_ms":"int"},"description":"Move to a pose above the symbolic target by offset_z."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"string","tolerance":"float","timeout_ms":"int"},"description":"Close the approach and align within tolerance."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"string","strategy":"string","result_key":"string"},"description":"Compute grasp pose and store to blackboard."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"string","timeout_ms":"int"},"description":"Execute pick using a grasp pose stored on the blackboard."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Check whether the grasp is stable."},
    {"id":"Retreat","type":"Action","ports":{"distance":"float","timeout_ms":"int"},"description":"Back off safely by a short distance."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"string","max_depth":"float","force_threshold":"float","timeout_ms":"int"},"description":"Lower towards support until contact is detected."},
    {"id":"RetryUntilSuccessful","type":"Decorator","ports":{"num_attempts":"int"},"description":"Retry its child up to a fixed number of attempts."}
  ],
  "tree_stats": {"nodes_total": 14, "actions": 11, "conditions": 1, "depth": 3},
  "failure_modes": ["Object not detected", "Collision with plate rim", "Grasp slip during lift", "Premature release above plate"],
  "recovery_strategy": ["Retry detection", "Re-approach with alignment", "Re-open and re-pick if unstable", "Reattempt place with smaller lowering depth"],
  "assumptions": ["Frames indicate a full pick-and-place to plate, while instruction mentions only picking; BT follows frames and includes placing and release."],
  "evaluation_notes": {
    "expected_success_criteria": ["Bread ends on plate; robot retreats safely"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"bread","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"bread","offset_z":0.05,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"bread","tolerance":0.01,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"grasp_bread","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"plate","offset_z":0.08,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"plate","offset_z":0.08,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.04,"force_threshold":10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.08,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
