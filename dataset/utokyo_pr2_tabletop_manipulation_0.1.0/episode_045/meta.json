{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_045",
  "task_summary": "Detect and pick a bread piece, lift it, move above the plate, place it, and retreat.",
  "task_long_description": {
    "overview": "A PR2 arm interacts with a small bread-like item and a white saucer on a green table mat. The robot must perceive the bread, approach from above, compute a pinch grasp, pick it, lift to avoid collisions, transit above the saucer, gently lower until contact is detected, release the bread, and retreat. Visual frames show the full pick-and-place sequence ending with the bread centered on the saucer. Timing and forces are modest; precise alignment is required near the plate to avoid knocking it.",
    "preconditions": ["Robot initialized and homed", "Workspace clear except bread and plate", "Camera provides view of table", "Gripper empty and operational"],
    "stepwise_plan": ["Open gripper", "Detect bread; if not found, scan", "Move above bread and align", "Compute pinch grasp and execute pick", "Verify grasp stability and lift", "Move above plate center", "Lower until contact with plate area", "Open gripper to release bread", "Retreat to a safe height"],
    "success_criteria": ["Bread is released and remains on the plate", "No collisions with plate or table", "Gripper ends open above workspace", "Perception and grasp complete without timeouts"],
    "failure_and_recovery": ["If detection fails, perform raster scan retry", "If grasp fails or object slips, re-detect and regrasp from above", "If contact not detected while lowering, limit depth then re-approach", "On timeout, back off and reattempt sequence"],
    "termination": "Terminate after successful release on plate and retreat, or after recovery attempts are exhausted."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "picking a bread",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["bread", "plate", "table_mat", "pr2_gripper"],
  "objects_from_instruction": ["bread"],
  "blackboard_keys": ["bread_grasp", "place_pose"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":800},"description":"Prepare gripper for approach and later release."},
    {"id":"DetectObject","type":"Action","ports":{"target":"bread","timeout_ms":1200},"description":"Primary bread detection."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"bread","pattern":"raster","max_attempts":3,"timeout_ms":1500},"description":"Fallback scan if detection fails."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"bread","offset_z":0.05,"timeout_ms":1500},"description":"Pregrasp approach from above the bread."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"bread","tolerance":0.005,"timeout_ms":1500},"description":"Fine alignment for precise grasp."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"bread","strategy":"pinch","result_key":"bread_grasp"},"description":"Compute pinch grasp."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"bread_grasp","timeout_ms":1500},"description":"Execute grasp using computed pose."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Confirm grasp stability before moving."},
    {"id":"MoveDelta","type":"Action","ports":{"axis":"z","dist":0.1,"timeout_ms":1200},"description":"Lift object to safe height."},
    {"id":"SetBlackboard","type":"Action","ports":{"key":"place_pose","value":"plate_center"},"description":"Set placement target symbolically."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"plate","offset_z":0.08,"timeout_ms":1500},"description":"Transit above plate."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.05,"force_threshold":10,"timeout_ms":1500},"description":"Lower gently to plate surface."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":800},"description":"Release bread onto plate."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":1200},"description":"Back away to safe pose."}
  ],
  "tree_stats": {"nodes_total": 17, "actions": 13, "conditions": 1, "depth": 4},
  "failure_modes": ["Bread not detected", "Collision with plate edge during approach", "Insufficient grasp leading to slip", "No contact detected while lowering", "Timeouts during motion"],
  "recovery_strategy": ["Fallback scan for detection", "Re-align and recompute grasp", "Re-open, re-approach, and retry pick up to three times", "Abort lowering if contact not sensed and retry from above"],
  "assumptions": ["Frames clearly depict a pick-and-place onto the plate, while the instruction only states 'picking a bread'; tree follows the frames. Plate center is treated as symbolic 'place_pose'."],
  "evaluation_notes": {
    "expected_success_criteria": ["Bread ends on plate center", "Gripper opens and retreats safely", "No jostling of plate"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"bread","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"bread","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"bread_grasp","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "transfer",
      "active_leaf": {"id":"MoveDelta","attrs":{"axis":"z","dist":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"plate","offset_z":0.08,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"plate","offset_z":0.08,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.05,"force_threshold":10,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    }
  ]
}
