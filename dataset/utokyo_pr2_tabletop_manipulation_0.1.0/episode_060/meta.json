{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_060",
  "task_summary": "Detect and grasp a bread piece, then move and place it onto a white saucer before retreating.",
  "task_long_description": {
    "overview": "A PR2-like manipulator operates over a green table mat with a small bread piece and a white saucer. The robot must perceive the bread, approach precisely, compute a pinch grasp, and pick it up. After confirming the grasp, it transfers above the saucer, places the bread gently onto it, opens the gripper to release, and retreats to a safe height. Visual evidence shows the item being moved from the mat to the saucer, so the plan includes both pick and place phases, executed with conservative timeouts and precise alignment.",
    "preconditions": [
      "Robot reachable workspace includes bread and saucer",
      "Gripper functional and empty",
      "Camera provides view of table area",
      "Blackboard can store grasp/place keys"
    ],
    "stepwise_plan": [
      "Open gripper and ensure bread is visible (scan if needed).",
      "Move above bread, compute pinch grasp, and align precisely.",
      "Execute pick using computed grasp; verify object held.",
      "Detect saucer and set target place pose.",
      "Move above saucer, place bread, open gripper, and retreat."
    ],
    "success_criteria": [
      "Bread securely grasped without excessive force",
      "Bread placed inside the saucer",
      "Gripper released and robot retreated safely"
    ],
    "failure_and_recovery": [
      "If bread not visible, raster scan then detect",
      "If pick fails, recompute grasp and retry sequence",
      "If placement misaligned, re-approach above saucer and re-place"
    ],
    "termination": "End when bread is released on saucer and the arm retreats to a safe distance."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "picking a bread",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["bread","saucer","table_mat","robot_arm","gripper"],
  "objects_from_instruction": ["bread"],
  "blackboard_keys": ["bread_grasp","place_pose"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":"0.09","timeout_ms":"500"},"description":"Prepare gripper for approach."},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"bread"},"description":"Checks if bread is already visible."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"bread","pattern":"raster","max_attempts":"3","timeout_ms":"1200"},"description":"Raster scan if target not visible."},
    {"id":"DetectObject","type":"Action","ports":{"target":"bread","timeout_ms":"800"},"description":"Detect bread pose."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"bread","offset_z":"0.05","timeout_ms":"1200"},"description":"Move above bread at safe height."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"bread","strategy":"pinch","result_key":"bread_grasp"},"description":"Compute a pinch grasp for bread."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"bread","tolerance":"0.005","timeout_ms":"1200"},"description":"Refine approach with precise alignment."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"bread_grasp","timeout_ms":"1200"},"description":"Execute grasp and lift."},
    {"id":"ObjectInGripper","type":"Condition","ports":{"target":"bread"},"description":"Verify bread is held."},
    {"id":"DetectObject","type":"Action","ports":{"target":"saucer","timeout_ms":"800"},"description":"Detect saucer for placement."},
    {"id":"SetBlackboard","type":"Action","ports":{"key":"place_pose","value":"saucer_center"},"description":"Set placement pose key."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"saucer","offset_z":"0.06","timeout_ms":"1200"},"description":"Move above saucer before placing."},
    {"id":"PlaceAt","type":"Action","ports":{"pose_key":"place_pose","yaw_deg":"0","press_force":"10","timeout_ms":"1200"},"description":"Place bread onto saucer."},
    {"id":"OpenGripper","type":"Action","ports":{"width":"0.08","timeout_ms":"500"},"description":"Release bread."},
    {"id":"Retreat","type":"Action","ports":{"distance":"0.1","timeout_ms":"800"},"description":"Retreat to a safe distance."}
  ],
  "tree_stats": {"nodes_total": 18, "actions": 13, "conditions": 2, "depth": 4},
  "failure_modes": [
    "Bread not detected due to occlusion",
    "Grasp slips because of low friction",
    "Collision with saucer rim during placement",
    "Placement off-center causing bread to tip"
  ],
  "recovery_strategy": [
    "Trigger scan and re-detect target",
    "Recompute grasp pose and retry pick",
    "Re-approach above saucer with larger offset_z and re-place",
    "Open gripper and back off if excessive contact detected"
  ],
  "assumptions": [
    "Frames show both picking and placing onto a saucer; instruction mentions only picking. Tree includes placement to match visual evidence.",
    "Symbolic targets 'bread' and 'saucer' refer to the visible objects in the frames."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Bread firmly in gripper after Pick",
      "Bread observed inside saucer after PlaceAt",
      "Robot ends in a safe, non-contact state"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"bread","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"bread","offset_z":0.05,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"bread","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"bread_grasp","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"saucer","offset_z":0.06,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "place",
      "active_leaf": {"id":"PlaceAt","attrs":{"pose_key":"place_pose","yaw_deg":0,"press_force":10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.08,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
