{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_131",
  "task_summary": "Verify bread is already grasped or pick it if needed, then align over the plate and place the bread, releasing and retreating.",
  "task_long_description": {
    "overview": "A PR2 gripper interacts with a small piece of bread and a white plate on a tabletop. Frames show the gripper already holding the bread while approaching the plate, lowering, releasing onto the plate, and retreating. The BT first confirms visibility of the plate. If the bread is not already in the gripper, it performs a conservative side/top pinch pick. Afterwards, it moves above the plate, aligns precisely, lowers until contact, opens the gripper to release the bread, and retreats to a safe height.",
    "preconditions": ["Workspace clear around plate", "Robot reachable workspace includes bread and plate", "Gripper operational and calibrated", "Camera provides plate detection"],
    "stepwise_plan": ["Detect the plate", "If bread already in gripper, skip pick; otherwise detect bread, pregrasp, align, lower, and close gripper", "Move above plate", "Align over plate center", "Lower until contact with plate surface", "Open gripper to release bread", "Retreat to a safe distance"],
    "success_criteria": ["Bread resting on plate surface", "Gripper empty after release", "Robot safely clear of plate after retreat"],
    "failure_and_recovery": ["If detection fails, retry up to three times", "If grasp fails, reopen and repeat pick sequence", "If no contact detected when lowering, re-align and attempt lowering again", "If object slips during release, re-detect and reattempt place"],
    "termination": "Terminate when bread is on the plate and the robot has retreated to a safe position."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "Tool is aligned above plate edge, indicating imminent placement phase.",
        "predicts_next": "Lowering and release expected next.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "picking a bread",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["bread", "plate", "table", "gripper"],
  "objects_from_instruction": ["bread"],
  "blackboard_keys": [],
  "node_specs": [
    {"id":"DetectObject(plate)","type":"Action","ports":{"target":"plate","timeout_ms":800},"description":"Detect the plate before manipulation; retried up to 3 times."},
    {"id":"ObjectInGripper(bread)","type":"Condition","ports":{"target":"bread"},"description":"Checks whether the bread is already grasped."},
    {"id":"DetectObject(bread)","type":"Action","ports":{"target":"bread","timeout_ms":800},"description":"Locate bread for the optional pick sequence."},
    {"id":"OpenGripper(wide)","type":"Action","ports":{"width":0.09,"timeout_ms":400},"description":"Open gripper wide before attempting a grasp."},
    {"id":"MoveAbove(bread)","type":"Action","ports":{"target":"bread","offset_z":0.05,"timeout_ms":1200},"description":"Position above bread at pregrasp height."},
    {"id":"ApproachAndAlign(bread)","type":"Action","ports":{"target":"bread","tolerance":0.005,"timeout_ms":1200},"description":"Fine align to bread before lowering."},
    {"id":"LowerUntilContact(pick)","type":"Action","ports":{"speed":"slow","max_depth":0.03,"force_threshold":10.0,"timeout_ms":1200},"description":"Lower until contact to establish grasp depth."},
    {"id":"CloseGripper","type":"Action","ports":{"force":10,"timeout_ms":800},"description":"Close gripper gently to grasp bread."},
    {"id":"MoveAbove(plate)","type":"Action","ports":{"target":"plate","offset_z":0.06,"timeout_ms":1200},"description":"Move to a safe height above plate."},
    {"id":"ApproachAndAlign(plate)","type":"Action","ports":{"target":"plate","tolerance":0.01,"timeout_ms":1200},"description":"Center over the plate for placement."},
    {"id":"LowerUntilContact(place)","type":"Action","ports":{"speed":"slow","max_depth":0.04,"force_threshold":10.0,"timeout_ms":1200},"description":"Lower bread until contact with plate."},
    {"id":"OpenGripper(release)","type":"Action","ports":{"width":0.08,"timeout_ms":500},"description":"Release bread onto plate."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Retreat to a safe distance after placing."}
  ],
  "tree_stats": {"nodes_total": 19, "actions": 12, "conditions": 2, "depth": 5},
  "failure_modes": ["Plate or bread not detected", "Grasp unstable or missed", "Misalignment over plate", "No contact sensed when lowering", "Bread sticks to gripper after opening"],
  "recovery_strategy": ["Retry detections (up to 3)", "Reopen and repeat pick alignment", "Re-align and lower again", "Slightly increase max_depth then retry", "Micro-shake and reopen gripper again"],
  "assumptions": ["Frames indicate the bread is already in the gripper and the action is primarily placement, while the instruction says 'picking a bread'. The BT includes a fallback to pick only if needed."],
  "evaluation_notes": {
    "expected_success_criteria": ["Bread ends up centered on plate", "Gripper empty after release", "Robot clear of plate with no collisions"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"plate","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "verify",
      "active_leaf": {"id":"ObjectInGripper","attrs":{"target":"bread"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"plate","offset_z":0.06,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"plate","tolerance":0.01,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "place",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.04,"force_threshold":10.0,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "place",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.04,"force_threshold":10.0,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.08,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
