{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_034",
  "task_summary": "Fold the pink cloth on the tabletop by approaching its edge, making gentle contact, and pushing the fabric to create a fold before retreating.",
  "task_long_description": {
    "overview": "A PR2-style manipulator folds a pink square cloth placed on a wooden tabletop. The end-effector approaches from the right, aligns above the cloth, lowers to establish gentle contact, then executes one or more linear pushes to fold the cloth over itself. The sequence emphasizes accurate approach, low-contact force, and stable motion along a single direction. No grasp is required; folding is achieved by controlled pushing while the cloth remains on the table. The robot finishes by retreating to a safe height.",
    "preconditions": [
      "Cloth is on a flat, unobstructed tabletop",
      "Robot workspace is clear and calibrated",
      "Camera view of the cloth is available",
      "Gripper is operational and can lightly contact the surface"
    ],
    "stepwise_plan": [
      "Verify or actively scan that the cloth is visible.",
      "Detect the cloth pose and move above it with clearance.",
      "Open gripper and precisely approach and align to a target edge.",
      "Lower until gentle contact with the cloth is detected.",
      "Orient tool and push along a straight line to induce the fold (repeat for completeness).",
      "Retreat to a safe distance and release contact."
    ],
    "success_criteria": [
      "Cloth shows a clear fold line and reduced footprint consistent with a half-fold",
      "No excessive displacement out of workspace",
      "Robot ends in a safe, retracted pose"
    ],
    "failure_and_recovery": [
      "Perception failure: re-scan the surface to reacquire the cloth",
      "Insufficient fold: repeat push pass",
      "Slip or bunching: re-align and reduce approach tolerance, retry push",
      "Unexpected contact: retreat and re-approach"
    ],
    "termination": "Terminate when at least one fold pass is completed and the arm has safely retreated."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "Tool makes first clear contact near the cloth edge; alignment looks correct.",
        "predicts_next": "A push motion is expected to start to create the fold.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "folding a cloth",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["cloth", "cloth_edge", "table", "robot_gripper"],
  "objects_from_instruction": ["cloth"],
  "blackboard_keys": [],
  "node_specs": [
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"cloth"},"description":"Check if the cloth is currently visible."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"cloth","pattern":"raster","max_attempts":3,"timeout_ms":1500},"description":"Perform a raster scan to locate the cloth."},
    {"id":"DetectObject","type":"Action","ports":{"target":"cloth","timeout_ms":800},"description":"Detect and localize the cloth."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"cloth","offset_z":0.05,"timeout_ms":1200},"description":"Move to a pre-contact pose above the cloth."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":400},"description":"Ensure fingers are open for surface contact (pre-push)."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"cloth","tolerance":0.005,"timeout_ms":1200},"description":"Precisely approach and align to the cloth edge."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.02,"force_threshold":5.0,"timeout_ms":1200},"description":"Lower gently until surface contact with the cloth."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":90},"description":"Orient end-effector for a leftward push."},
    {"id":"Push","type":"Action","ports":{"target":"cloth_edge","distance":0.1,"direction_deg":180,"timeout_ms":1200},"description":"Push along a straight line to initiate/complete the fold."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Back off to a safe distance."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":400},"description":"Release any lingering contact after the push."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":400},"description":"Brief pause to stabilize after retreat."}
  ],
  "tree_stats": {"nodes_total": 15, "actions": 11, "conditions": 1, "depth": 3},
  "failure_modes": [
    "Cloth not detected or partially out of view",
    "Contact not achieved or too strong causing bunching",
    "Push direction incorrect leading to translation instead of fold",
    "Insufficient push length causing incomplete fold"
  ],
  "recovery_strategy": [
    "Re-scan with raster pattern",
    "Re-approach with tight tolerance and slower contact",
    "Adjust yaw and repeat push",
    "Perform additional push cycle"
  ],
  "assumptions": [
    "Folding is executed via surface push rather than a two-point grasp.",
    "Push direction is leftward from the right edge based on approach shown in frames.",
    "Single fold pass (with repetition) is sufficient to count as a fold."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Visible crease and halved cloth footprint",
      "Cloth remains on table within workspace bounds",
      "Arm ends retracted without collision"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"cloth","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"cloth","offset_z":0.05,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"cloth","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.02,"force_threshold":5.0,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"Push","attrs":{"target":"cloth_edge","distance":0.1,"direction_deg":180,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"Push","attrs":{"target":"cloth_edge","distance":0.1,"direction_deg":180,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"Push","attrs":{"target":"cloth_edge","distance":0.1,"direction_deg":180,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Wait","attrs":{"timeout_ms":400}},
      "active_path_ids": []
    }
  ]
}
