{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_061",
  "task_summary": "Detect, grasp, and place a piece of bread onto the nearby plate, then retreat.",
  "task_long_description": {
    "overview": "A PR2-like gripper approaches a bread piece on a green cloth with a white plate nearby. The goal is to pick the bread reliably and place it on the plate as seen across the frames. The robot first perceives bread and plate, opens the gripper, computes a side–pinch grasp, aligns precisely, makes gentle contact, and executes the pick. It then lifts, moves above the plate, lowers to near contact, releases the bread onto the plate, and retreats. Constraints include precise alignment (tight tolerance) and low contact force to avoid deforming or pushing the bread.",
    "preconditions": [
      "Robot arm is homed and reachable workspace includes bread and plate",
      "Perception available for 'bread' and 'plate'",
      "Gripper operational and empty"
    ],
    "stepwise_plan": [
      "Detect bread and plate",
      "Open gripper and compute pinch grasp for bread",
      "Move above bread, align precisely, and lower until contact",
      "Execute pick and verify object in gripper",
      "Lift and move above plate",
      "Lower near plate surface, release bread, and retreat"
    ],
    "success_criteria": [
      "Bread grasped securely (no slip) and later resting on plate",
      "No significant displacement of plate",
      "Gripper ends clear of objects"
    ],
    "failure_and_recovery": [
      "If detection fails, re-run perception or scan",
      "If alignment/contact fails, retry approach with tighter tolerance",
      "If grasp unstable, reopen and recompute grasp pose, then retry",
      "If bread drops during transfer, re-detect and restart from approach"
    ],
    "termination": "Terminate when bread is placed on plate and the arm has retreated to a safe distance."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "picking a bread",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["bread", "plate", "table", "robot_gripper"],
  "objects_from_instruction": ["bread"],
  "blackboard_keys": ["bread_grasp"],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"bread","timeout_ms":800},"description":"Perceive bread location."},
    {"id":"DetectObject","type":"Action","ports":{"target":"plate","timeout_ms":800},"description":"Perceive plate location."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":500},"description":"Prepare gripper aperture."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"bread","strategy":"pinch","result_key":"bread_grasp"},"description":"Plan side–pinch grasp."},
    {"id":"PoseAvailable","type":"Condition","ports":{"key":"bread_grasp"},"description":"Ensure grasp pose computed."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"bread","offset_z":0.03,"timeout_ms":1200},"description":"Pre-grasp approach above bread."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"bread","tolerance":0.005,"timeout_ms":1500},"description":"Tight alignment before contact."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.03,"force_threshold":10.0,"timeout_ms":1200},"description":"Gentle descent to touch bread."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"bread_grasp","timeout_ms":1200},"description":"Execute grasp closure and lift-off."},
    {"id":"ObjectInGripper","type":"Condition","ports":{"target":"bread"},"description":"Verify grasped object."},
    {"id":"MoveDelta","type":"Action","ports":{"axis":"z","dist":0.1,"timeout_ms":1200},"description":"Lift bread upward."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"plate","offset_z":0.05,"timeout_ms":1500},"description":"Move over plate to prepare placement."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.04,"force_threshold":10.0,"timeout_ms":1200},"description":"Lower near plate surface."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":500},"description":"Release bread onto plate."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":1200},"description":"Back off safely after placement."}
  ],
  "tree_stats": {"nodes_total": 16, "actions": 13, "conditions": 2, "depth": 2},
  "failure_modes": ["Bread not detected", "Plate not detected", "Misalignment causes push instead of grasp", "Grasp slips during lift", "Bread dropped during placement"],
  "recovery_strategy": ["Re-run detection or perform a scan pattern", "Recompute grasp pose and repeat approach", "Lower with smaller depth and retry", "If slip detected, reopen and regrasp", "If drop occurs, re-detect and restart from approach"],
  "assumptions": ["Although the instruction says 'picking a bread', the frames clearly show placement onto a plate; tree includes place+retreat to match visual evidence.", "Assumed side–pinch grasp is appropriate based on gripper orientation."],
  "evaluation_notes": {
    "expected_success_criteria": ["Bread ends centered on plate; gripper retreats clear", "No significant plate displacement", "Stable grasp verified before transfer"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"bread","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"bread","offset_z":0.03,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"bread","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.03,"force_threshold":10.0,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"bread_grasp","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"MoveDelta","attrs":{"axis":"z","dist":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"plate","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    }
  ]
}
