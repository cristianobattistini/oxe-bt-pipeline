{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_166",
  "task_summary": "Perceive and pick a bread roll from the table and lift/transfer it above a plate.",
  "task_long_description": {
    "overview": "A PR2-style gripper operates over a table mat with a white plate and a bread roll. The robot must detect the bread, approach with a precise alignment, compute a pinch grasp, and pick it. After confirming grasp stability, it retreats and moves above the plate, consistent with the frames that show the item being transported over the plate. The sequence emphasizes reliable perception, precise alignment, and safe retreat after grasp, with short timeouts to keep the motion responsive.",
    "preconditions": [
      "Workspace clear except plate and bread",
      "Gripper operational and initially opened",
      "Bread visible to camera"
    ],
    "stepwise_plan": [
      "Open gripper and detect bread",
      "Move above bread and align precisely",
      "Compute grasp pose and verify key availability",
      "Execute pick and verify grasp stability",
      "Retreat and transfer above plate; briefly hold position"
    ],
    "success_criteria": [
      "Bread secured in gripper without slipping",
      "No collision with plate or table",
      "Robot ends hovering above plate with bread held"
    ],
    "failure_and_recovery": [
      "If detection fails, re-run detection",
      "If grasp unstable, reopen and recompute grasp",
      "If contact forces spike, retreat and re-approach"
    ],
    "termination": "Bread is stably held and the end pose is above the plate after a short wait."
  },
  "frame_ranking": {
    "order": ["frame_4","frame_5","frame_7","frame_3","frame_2","frame_6","frame_1","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.18,
      "frame_1": 0.42,
      "frame_2": 0.65,
      "frame_3": 0.78,
      "frame_4": 0.95,
      "frame_5": 0.85,
      "frame_6": 0.58,
      "frame_7": 0.80,
      "frame_8": 0.12
    },
    "rationale_per_frame": {
      "frame_4": {
        "now_evidence": "Moment of grasp execution on the bread.",
        "predicts_next": "Expect grasp-stability check and upward retreat.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "picking a bread",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["bread","plate","table_mat","robot_gripper"],
  "objects_from_instruction": ["bread"],
  "blackboard_keys": ["bread_grasp"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":800},"description":"Ensure fingers are open to accept the bread."},
    {"id":"DetectObject","type":"Action","ports":{"target":"bread","timeout_ms":1500},"description":"Detect bread location/pose."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"bread","offset_z":0.02,"timeout_ms":1200},"description":"Move to a safe pre-grasp height above bread."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"bread","tolerance":0.005,"timeout_ms":1500},"description":"Refine alignment for precise grasp."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"bread","strategy":"pinch","result_key":"bread_grasp"},"description":"Plan a pinch grasp and store in blackboard."},
    {"id":"PoseAvailable","type":"Condition","ports":{"key":"bread_grasp"},"description":"Verify the grasp pose key exists."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"bread_grasp","timeout_ms":1200},"description":"Execute grasp using planned pose."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Check that the grasp is stable."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Lift away from the table to clear obstacles."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"plate","offset_z":0.02,"timeout_ms":1200},"description":"Transfer above the plate as seen in frames."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":400},"description":"Brief hold to stabilize end state."}
  ],
  "tree_stats": {"nodes_total": 12, "actions": 9, "conditions": 2, "depth": 2},
  "failure_modes": [
    "Bread not detected due to lighting or occlusion",
    "Grasp slip because of shape/texture",
    "Collision with plate during transfer",
    "Timeout while approaching due to blocked path"
  ],
  "recovery_strategy": [
    "Re-detect and slightly vary viewpoint",
    "Re-open gripper, recompute grasp with same strategy",
    "Increase retreat then re-approach from higher offset",
    "Abort and signal operator if repeated failures"
  ],
  "assumptions": [
    "Frames indicate transport above a plate; instruction only says 'picking'. We prioritized frames and included transfer above the plate but not a place action.",
    "Pinch grasp selected based on bread size; suction not assumed available."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Bread detected and grasped with tolerance 0.005",
      "IsGraspStable returns success",
      "End pose maintained above plate with bread secured"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"bread","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"bread","offset_z":0.02,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"bread","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"PoseAvailable","attrs":{"key":"bread_grasp"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"bread_grasp","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"IsGraspStable","attrs":{}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"plate","offset_z":0.02,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "transfer",
      "active_leaf": {"id":"Wait","attrs":{"timeout_ms":400}},
      "active_path_ids": []
    }
  ]
}
