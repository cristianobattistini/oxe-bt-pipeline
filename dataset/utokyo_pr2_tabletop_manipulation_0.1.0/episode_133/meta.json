{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_133",
  "task_summary": "Push the bread into the plate area and finish with a short confirmation pause and retreat.",
  "task_long_description": {
    "overview": "The scene shows a PR2 gripper, a small orange bread piece, and a white round plate on a green cloth. Across frames the gripper approaches the bread from the right and appears to push it onto the plate rather than grasping it. The behavior tree detects both bread and plate, approaches and aligns near the bread, sets a yaw suitable for lateral pushing, establishes gentle contact, then executes a push motion toward the plate. After the bread is on the plate, the robot briefly waits to stabilize and then retreats.",
    "preconditions": ["Robot workspace clear and reachable", "Camera provides view of bread and plate", "Table height calibrated", "Gripper operational and open"],
    "stepwise_plan": ["Open gripper and ensure perception of bread and plate", "Move above and align to bread", "Orient end-effector yaw for side push", "Lower to make contact", "Push bread a short distance toward plate", "Wait to confirm placement", "Retreat to a safe height"],
    "success_criteria": ["Bread ends resting inside/on the plate", "No toppling of plate", "Robot ends in a clear, safe pose"],
    "failure_and_recovery": ["Bread/plate not detected → re-detect", "Contact not found → lower again", "Push overshoots or misses plate → retry push with adjusted yaw/distance", "Collision risk → abort and retreat"],
    "termination": "Task ends when wait completes after bread is on the plate and the arm retreats."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "picking a bread",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["bread","plate","pr2_gripper"],
  "objects_from_instruction": ["bread"],
  "blackboard_keys": [],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":800},"description":"Ensure gripper open for safe approach/push."},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"bread"},"description":"Check if bread is visible."},
    {"id":"DetectObject","type":"Action","ports":{"target":"bread","timeout_ms":1200},"description":"Detect bread location if not already visible."},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"plate"},"description":"Check if plate is visible."},
    {"id":"DetectObject","type":"Action","ports":{"target":"plate","timeout_ms":1200},"description":"Detect plate location if not already visible."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"bread","offset_z":0.02,"timeout_ms":1200},"description":"Move above bread at safe height."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"bread","tolerance":0.01,"timeout_ms":1200},"description":"Refine pose for controlled push."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":90},"description":"Rotate tool to a lateral pushing orientation."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.02,"force_threshold":10,"timeout_ms":800},"description":"Make gentle contact with bread."},
    {"id":"Push","type":"Action","ports":{"target":"bread","distance":0.1,"direction_deg":90,"timeout_ms":1200},"description":"Push bread toward the plate."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":400},"description":"Brief stabilization/confirmation pause."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Move away to a safe pose."}
  ],
  "tree_stats": {"nodes_total": 15, "actions": 10, "conditions": 2, "depth": 3},
  "failure_modes": ["Bread not detected", "Plate not detected", "Contact not reached", "Push direction misaligned causing miss or plate motion", "Friction too low and bread slips unpredictably"],
  "recovery_strategy": ["Re-run DetectObject", "Repeat LowerUntilContact with same limits", "Adjust yaw to 45 or 135 degrees and retry push", "Use shorter distance (0.05) and multi-pass pushes"],
  "assumptions": ["Although instruction says 'picking', frames depict lateral pushing of bread onto a plate; plan follows visual evidence.", "World frame for direction_deg is unknown; 90° assumed to point toward the plate based on frames."],
  "evaluation_notes": {
    "expected_success_criteria": ["Bread ends centered on plate with no further motion", "Robot retreats safely"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"bread","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"bread","offset_z":0.02,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"bread","tolerance":0.01,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.02,"force_threshold":10,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"Push","attrs":{"target":"bread","distance":0.1,"direction_deg":90,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"Push","attrs":{"target":"bread","distance":0.1,"direction_deg":90,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"Wait","attrs":{"timeout_ms":400}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"Wait","attrs":{"timeout_ms":400}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
