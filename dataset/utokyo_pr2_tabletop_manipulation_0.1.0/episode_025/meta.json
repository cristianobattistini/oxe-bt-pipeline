{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_025",
  "task_summary": "Detect, grasp, and lift the bread, then move above the plate and place it before retreating.",
  "task_long_description": {
    "overview": "A PR2-style gripper operates over a green mat with a small white plate and a bread-like item. The robot must localize the bread, approach with a side pinch orientation, compute a grasp, and pick it up. After confirming grasp stability, it moves above the plate and gently lowers until contact to place the bread, opens the gripper to release, and retreats to a safe height. Fallbacks provide recovery for perception by scanning when direct detection fails.",
    "preconditions": [
      "Workspace clear with reachable bread and plate",
      "Gripper operational and initially open",
      "Camera providing view of tabletop"
    ],
    "stepwise_plan": [
      "Open gripper and detect bread (scan if needed).",
      "Move above bread, set yaw to 90Â°, align precisely, compute grasp.",
      "Execute pick and verify grasp stability.",
      "Detect plate (scan if needed) and move above it.",
      "Lower until contact with plate, open gripper to release bread.",
      "Retreat and briefly wait."
    ],
    "success_criteria": [
      "Bread securely grasped after pick",
      "Bread released and resting on the plate surface",
      "Robot ends in a safe, non-contact pose"
    ],
    "failure_and_recovery": [
      "If detection fails, scan using raster/line patterns.",
      "If grasp is unstable, reattempt alignment and pick.",
      "If contact not detected during lowering, abort and re-localize plate."
    ],
    "termination": "Tree completes after retreat and wait once bread is placed."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "picking a bread",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["bread","plate","table_mat","robot_arm","gripper"],
  "objects_from_instruction": ["bread"],
  "blackboard_keys": ["bread_grasp"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":"0.09","timeout_ms":800},"description":"Prepare gripper for grasping."},
    {"id":"DetectObject","type":"Action","ports":{"target":"bread","timeout_ms":1200},"description":"Perceive bread pose."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"bread","pattern":"raster","max_attempts":3,"timeout_ms":1500},"description":"Recovery scan to localize bread."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"bread","offset_z":"0.06","timeout_ms":1500},"description":"Pregrasp approach above bread."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":90},"description":"Orient gripper for side pinch."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"bread","tolerance":0.005,"timeout_ms":1500},"description":"Tight alignment before grasp."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"bread","strategy":"pinch","result_key":"bread_grasp"},"description":"Plan a grasp and store it."},
    {"id":"PoseAvailable","type":"Condition","ports":{"key":"bread_grasp"},"description":"Ensure grasp pose computed."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"bread_grasp","timeout_ms":1200},"description":"Execute grasp."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Confirm object held."},
    {"id":"DetectObject","type":"Action","ports":{"target":"plate","timeout_ms":1200},"description":"Perceive plate pose."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"plate","pattern":"line","max_attempts":3,"timeout_ms":1500},"description":"Recovery scan to localize plate."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"plate","offset_z":"0.06","timeout_ms":1500},"description":"Move above plate for placement."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":"0.05","force_threshold":"10.0","timeout_ms":1200},"description":"Gently descend to plate surface."},
    {"id":"OpenGripper","type":"Action","ports":{"width":"0.08","timeout_ms":800},"description":"Release bread onto plate."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Back away safely."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":500},"description":"Short stabilization wait."}
  ],
  "tree_stats": {"nodes_total": 22, "actions": 15, "conditions": 2, "depth": 4},
  "failure_modes": [
    "Bread not detected due to occlusion",
    "Misalignment causing failed pinch",
    "Object slip after lift",
    "Premature release before plate contact"
  ],
  "recovery_strategy": [
    "Fallback to scanning patterns for detection",
    "Repeat alignment and re-pick after instability",
    "Abort place and re-seek plate if no contact sensed"
  ],
  "assumptions": [
    "Frames indicate pick-and-place onto plate, while instruction mentions only picking; tree follows frames and notes this mismatch.",
    "Plate center is not explicitly computed; placement uses contact-based lowering instead of a stored pose."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Bread securely lifted and later seen on plate",
      "No collisions with plate rim during placement",
      "Final retreat with empty gripper"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"bread","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"bread","offset_z":0.06,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"SetTCPYaw","attrs":{"yaw_deg":90}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"bread","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"bread_grasp","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"plate","offset_z":0.06,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.05,"force_threshold":10.0,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.08,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
