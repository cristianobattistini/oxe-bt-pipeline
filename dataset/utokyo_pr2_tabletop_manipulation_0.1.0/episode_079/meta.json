{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_079",
  "task_summary": "Fold the visible pink cloth by pushing its edge to create a crease, without grasping.",
  "task_long_description": {
    "overview": "A robotic arm folds a pink cloth lying on a wooden tabletop. The plan favors non-prehensile manipulation: approach above the cloth, orient the tool, align, make gentle contact with the surface, and execute one or more pushes along a fold line so the edge flips over itself. Vision is verified first, with a raster scan fallback if the cloth is not confidently detected. After pushing, the arm retreats and pauses briefly to stabilize the cloth.",
    "preconditions": ["Cloth is on table within reachable workspace", "Camera view unobstructed", "Tool free of prior contact", "Tabletop free of obstacles around the cloth"],
    "stepwise_plan": ["Check/scan for cloth", "Move above cloth and set yaw", "Align laterally with precise tolerance", "Lower until contact is detected at slow speed", "Push along fold line (repeat to complete fold)", "Retreat and wait briefly"],
    "success_criteria": ["A visible crease with part of the cloth edge flipped over", "No tool entanglement with the fabric", "End effector safely clear after operation"],
    "failure_and_recovery": ["Perception fails → scan raster and retry detection", "Contact not achieved → lower again within safe depth", "Insufficient fold after first push → execute second push via Repeat", "Unexpected resistance → retreat and re-approach"],
    "termination": "After retreat and short wait following the final push."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "Tool is aligned near the cloth edge—first precise setup before contact.",
        "predicts_next": "Lowering to contact followed by a push is expected.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "folding a cloth",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["cloth", "cloth_edge", "table", "robot_arm"],
  "objects_from_instruction": ["cloth"],
  "blackboard_keys": [],
  "node_specs": [
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"cloth"},"description":"Checks whether the cloth is currently visible."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"cloth","pattern":"raster","max_attempts":3,"timeout_ms":1500},"description":"Raster scan to localize the cloth if not immediately visible."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"cloth","offset_z":0.05,"timeout_ms":1500},"description":"Move to a pre-contact height above the cloth."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":90},"description":"Orient tool yaw to align with intended fold direction."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"cloth","tolerance":0.005,"timeout_ms":1200},"description":"Fine lateral approach and alignment with tight tolerance."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.03,"force_threshold":5.0,"timeout_ms":800},"description":"Descend slowly until surface contact is detected."},
    {"id":"Push","type":"Action","ports":{"target":"cloth_edge","distance":0.1,"direction_deg":180,"timeout_ms":1200},"description":"Push along the fold line to flip the edge."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Back off from the workspace after pushing."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":400},"description":"Brief stabilization pause after manipulation."}
  ],
  "tree_stats": {"nodes_total": 12, "actions": 8, "conditions": 1, "depth": 3},
  "failure_modes": ["Cloth not detected", "Contact not reached due to height error", "Push direction misaligned causing slide instead of fold", "Cloth snags on tool"],
  "recovery_strategy": ["Fallback scan for target", "Re-approach and lower again", "Adjust yaw and repeat push", "Retreat then re-align to reduce snagging"],
  "assumptions": ["Frames show push-based folding without grasp; no gripper closure required.", "Fold axis assumed horizontal relative to camera; tool yaw set to 90° accordingly."],
  "evaluation_notes": {
    "expected_success_criteria": ["Edge of cloth visibly overlapped with a crease", "Tool exits safely"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"cloth"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"cloth","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"SetTCPYaw","attrs":{"yaw_deg":90}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"cloth","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "verify",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.03,"force_threshold":5.0,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"Push","attrs":{"target":"cloth_edge","distance":0.1,"direction_deg":180,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"Push","attrs":{"target":"cloth_edge","distance":0.1,"direction_deg":180,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Wait","attrs":{"timeout_ms":400}},
      "active_path_ids": []
    }
  ]
}
