{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_011",
  "task_summary": "Perceive grapes on a plate, approach with an open gripper, align, make gentle contact, close gripper to pick, verify stability, then lift and hold.",
  "task_long_description": {
    "overview": "A PR2 end-effector performs a delicate pick of grapes resting on a white plate on a tabletop. The robot first confirms visibility of the target; if not visible, it executes a spiral scan. With the gripper opened wide, it moves to a pregrasp height and precisely aligns over the grapes. It lowers until light contact, closes with low force to avoid squeezing, checks grasp stability, and retreats vertically to clear the plate. A brief wait stabilizes the system. The scene includes a plate, grapes, and the PR2 gripper under top-down camera coverage.",
    "preconditions": ["Workspace clear of obstacles", "Grapes on plate within reachable area", "Camera calibrated and providing target visibility", "Gripper operational and able to open to 0.09 m"],
    "stepwise_plan": ["Check visibility or scan for grapes", "Open gripper to 0.09 m", "Move above target at safe offset", "Approach and align with 0.01 tolerance", "Lower until gentle contact", "Close gripper with low force", "Verify grasp stability", "Retreat by 0.1 m", "Wait briefly"],
    "success_criteria": ["Grapes lifted off plate without slipping", "No noticeable plate displacement", "Gripper holds grapes after retreat", "No collisions with table or plate rim"],
    "failure_and_recovery": ["If target not visible, perform ScanForTarget", "If contact not detected, re-approach and lower again", "If grasp unstable, reopen, re-align, and retry", "On timeout, retreat to safe height and rescan"],
    "termination": "Terminate after a stable grasp is verified and the end-effector retreats and holds position."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "picking a grape",
  "instruction_to_ports": {
    "force": 10,
    "timeout_ms": 1200,
    "tolerance": 0.01,
    "retry_attempts": 3
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["grape", "white_plate", "table", "pr2_gripper"],
  "objects_from_instruction": ["grape"],
  "blackboard_keys": [],
  "node_specs": [
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"grape"},"description":"Checks if the grapes are currently visible to the perception system."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"grape","pattern":"spiral","max_attempts":3,"timeout_ms":1200},"description":"Spiral scan to relocate grapes when not visible."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":400},"description":"Open gripper wide for pregrasp."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"grape","offset_z":0.06,"timeout_ms":1200},"description":"Move to a safe pregrasp pose above the grapes."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"grape","tolerance":0.01,"timeout_ms":1200},"description":"Refine alignment before contact with tight tolerance."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.02,"force_threshold":10,"timeout_ms":800},"description":"Lower slowly until gentle contact is detected."},
    {"id":"CloseGripper","type":"Action","ports":{"force":10,"timeout_ms":800},"description":"Close gripper with low force to avoid crushing grapes."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Confirm the grasp is secure before lifting."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":1200},"description":"Lift the grasped grapes away from the plate."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":400},"description":"Brief hold to damp residual motion."}
  ],
  "tree_stats": {"nodes_total": 13, "actions": 8, "conditions": 2, "depth": 4},
  "failure_modes": ["Target not detected due to glare or occlusion", "Plate collision during approach", "Grapes slip after closing", "Timeout while aligning or lowering"],
  "recovery_strategy": ["Use ScanForTarget when visibility fails", "Retreat and re-approach with lower offset", "Reopen, realign, and regrasp with adjusted contact depth", "On timeout, retreat then restart from perception"],
  "assumptions": ["Frames show a bunch of grapes on a plate; the instruction says 'a grape'â€”we treat the target as the visible grapes bunch.", "Plate assumed stationary and non-deformable.", "Top-down approach is feasible without hitting the rim."],
  "evaluation_notes": {
    "expected_success_criteria": ["Grapes lifted and held after retreat", "No displacement of the plate", "No collisions during approach/retreat"],
    "test_scenarios": ["happy path", "object_missing", "grasp_fail", "perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"grape"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"grape","offset_z":0.06,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"grape","tolerance":0.01,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.02,"force_threshold":10,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":10,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"IsGraspStable","attrs":{}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "transfer",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Wait","attrs":{"timeout_ms":400}},
      "active_path_ids": []
    }
  ]
}
