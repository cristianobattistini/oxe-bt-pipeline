{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_122",
  "task_summary": "Pick the bread and place it onto the small plate, then retreat.",
  "task_long_description": {
    "overview": "A PR2 gripper operates on a tabletop with a small white plate and a bread-like item. The robot must detect both objects, approach the bread, compute a pinch grasp, align precisely, grasp, and then move above the plate. It lowers gently until contact with the plate area is detected, releases the bread, and retreats. Visual cues show the approach from the right, a successful grasp, transfer over the plate, release, and exit.",
    "preconditions": ["Workspace is clear and reachable", "Bread and plate are within the camera view", "Gripper is functional and initially open"],
    "stepwise_plan": ["Detect bread and plate", "Move above bread and compute pinch grasp", "Align and pick bread", "Move above plate", "Lower until contact, then open gripper to release", "Retreat to a safe pose"],
    "success_criteria": ["Bread securely grasped", "Bread placed on plate center area", "No collision with plate rim or table", "Robot retreats cleanly"],
    "failure_and_recovery": ["If detection fails: rescan scene", "If grasp slips: reopen, recompute grasp, retry", "If contact not detected over plate: re-approach and lower again"],
    "termination": "End when bread is released on plate and the end-effector has retreated."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "Tool-tip aligned near bread with imminent grasp.",
        "predicts_next": "Grasp closure expected next.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "picking a bread",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["bread", "plate", "table", "pr2_gripper"],
  "objects_from_instruction": ["bread"],
  "blackboard_keys": ["bread_grasp"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":500},"description":"Ensure gripper is open before approach."},
    {"id":"DetectObject(bread)","type":"Action","ports":{"target":"bread","timeout_ms":800},"description":"Detect the bread."},
    {"id":"DetectObject(plate)","type":"Action","ports":{"target":"plate","timeout_ms":800},"description":"Detect the plate for later placement."},
    {"id":"MoveAbove(bread)","type":"Action","ports":{"target":"bread","offset_z":0.05,"timeout_ms":800},"description":"Move to pregrasp height above bread."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"bread","strategy":"pinch","result_key":"bread_grasp"},"description":"Compute pinch grasp for bread."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"bread","tolerance":0.005,"timeout_ms":1200},"description":"Align precisely to grasp pose."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"bread_grasp","timeout_ms":1200},"description":"Close and lift to pick bread."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Check grasp stability."},
    {"id":"MoveAbove(plate)","type":"Action","ports":{"target":"plate","offset_z":0.06,"timeout_ms":1200},"description":"Transfer above plate."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.03,"force_threshold":10.0,"timeout_ms":800},"description":"Lower gently until plate contact sensed."},
    {"id":"OpenGripper(release)","type":"Action","ports":{"width":0.08,"timeout_ms":500},"description":"Release bread onto plate."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Move away to safe height/position."}
  ],
  "tree_stats": {"nodes_total": 13, "actions": 11, "conditions": 1, "depth": 2},
  "failure_modes": ["Object not detected", "Misalignment during grasp", "Grasp slip mid-transfer", "Premature release or failure to detect contact", "Collision with plate rim"],
  "recovery_strategy": ["Re-run detection and re-localize targets", "Recompute grasp with different strategy and retry", "Reopen gripper and attempt a second pick", "If contact not detected, raise slightly and lower again"],
  "assumptions": ["Although the instruction says 'picking a bread', frames show a subsequent placement on the plate; the BT follows the visual evidence.", "Pinch grasp assumed appropriate for the bread shape.", "Plate is the intended receptacle."],
  "evaluation_notes": {
    "expected_success_criteria": ["Bread ends on plate and remains there after release", "No collisions and stable retreat"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"bread","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"plate","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"bread","offset_z":0.05,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"bread","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"bread_grasp","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"plate","offset_z":0.06,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.03,"force_threshold":10.0,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.08,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
