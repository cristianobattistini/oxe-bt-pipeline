{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_114",
  "task_summary": "Detect the bread, grasp it with a pinch, transfer it to the dish, release, and retreat.",
  "task_long_description": {
    "overview": "A PR2-style parallel gripper must pick a bread-shaped food item from a green mat and place it onto a small white dish. The tree emphasizes reliable perception, precise alignment for a pinch grasp, and controlled placement with a brief press to ensure the item seats on the dish. Movements use approach-from-above waypoints to avoid collisions with the plate rim. Timeouts are moderate and a retry decorator wraps the detection step to handle momentary occlusions or lighting changes.",
    "preconditions": [
      "Robot reachable workspace includes bread and dish",
      "Plate is stable on the mat",
      "Gripper operational and empty",
      "Camera provides view of the workspace"
    ],
    "stepwise_plan": [
      "Open gripper and detect the bread",
      "Approach above the bread and align precisely",
      "Compute grasp and execute pinch pick",
      "Verify grasp stability and lift",
      "Move above the plate",
      "Lower until contact and place item at plate center",
      "Open gripper to release and retreat"
    ],
    "success_criteria": [
      "Bread ends resting on the plate",
      "No collision with the plate rim or table",
      "Gripper empty at end and safely away from objects"
    ],
    "failure_and_recovery": [
      "Perception miss: detection retried up to 3 times",
      "Unstable grasp: reopen gripper, recompute grasp, and re-pick",
      "Placement contact too early: retreat slightly and re-approach"
    ],
    "termination": "Terminate after successful release on the plate and retreat."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "Gripper encloses the bread indicating the grasp event.",
        "predicts_next": "Lift/transfer toward plate should follow.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "picking a bread",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["bread","plate","table_mat","robot_gripper"],
  "objects_from_instruction": ["bread"],
  "blackboard_keys": ["bread_grasp","plate_center"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":800},"description":"Prepare gripper for approach."},
    {"id":"DetectObject","type":"Action","ports":{"target":"bread","timeout_ms":800},"description":"Perceive bread location; wrapped in retry."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"bread","offset_z":0.05,"timeout_ms":1500},"description":"Pregrasp waypoint above bread."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"bread","tolerance":0.005,"timeout_ms":1200},"description":"Tight lateral alignment for pinch."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"bread","strategy":"pinch","result_key":"bread_grasp"},"description":"Plan grasp and store key."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"bread_grasp","timeout_ms":1500},"description":"Execute grasp using stored pose."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Confirm object secured."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"plate","offset_z":0.05,"timeout_ms":1500},"description":"Transfer waypoint over plate."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.03,"force_threshold":10,"timeout_ms":1200},"description":"Safe descent to plate contact."},
    {"id":"PlaceAt","type":"Action","ports":{"pose_key":"plate_center","yaw_deg":0,"press_force":10,"timeout_ms":1200},"description":"Place item at plate center with light press."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.08,"timeout_ms":800},"description":"Release bread onto plate."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Back off to a safe height/position."}
  ],
  "tree_stats": {"nodes_total": 14, "actions": 11, "conditions": 1, "depth": 3},
  "failure_modes": [
    "Object not detected due to glare/occlusion",
    "Misalignment causing missed grasp",
    "Bread slips during transfer",
    "Early contact with plate rim during placement"
  ],
  "recovery_strategy": [
    "Retry detection (decorator)",
    "Re-open gripper, recompute grasp, and reattempt pick",
    "Lift and re-center above plate before a second placement try"
  ],
  "assumptions": [
    "Although instruction says 'picking a bread', frames show a full pick-and-place to the plate; tree includes placement to match visual evidence."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Bread visible on plate after release",
      "No object in gripper at end",
      "Robot safely retreated"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"bread","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"bread","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"bread","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"bread_grasp","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"plate","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "place",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.03,"force_threshold":10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"PlaceAt","attrs":{"pose_key":"plate_center","yaw_deg":0,"press_force":10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
