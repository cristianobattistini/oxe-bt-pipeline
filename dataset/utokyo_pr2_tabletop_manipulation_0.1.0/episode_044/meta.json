{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_044",
  "task_summary": "Detect bread and plate, grasp the bread with a pinch grasp, move to the plate center, release it onto the plate, and retreat.",
  "task_long_description": {
    "overview": "A PR2-style arm interacts with a small bread roll near a white plate on a green mat. The goal is to pick the bread and place it on the plate. The behavior starts with visual detection of both bread and plate, prepares the gripper, computes a pinch grasp, aligns to the bread, executes the grasp, transports the bread to the plate center, releases it, and retreats to a safe pose. Motions should avoid collisions with the plate rim and keep the bread stable.",
    "preconditions": [
      "Bread and plate are within workspace and visible",
      "Gripper calibrated and free of obstructions",
      "Collision model loaded for plate and table",
      "Camera-to-base transform available"
    ],
    "stepwise_plan": [
      "Detect bread and plate",
      "Open gripper and compute pinch grasp for bread",
      "Approach and align to grasp pose with tight tolerance",
      "Pick using computed grasp",
      "Verify bread is held",
      "Move to plate center waypoint",
      "Open gripper to release bread onto plate",
      "Retreat to clear the plate"
    ],
    "success_criteria": [
      "Bread ends resting on plate",
      "No collisions with plate or table",
      "Stable grasp during transfer",
      "Arm ends in safe, non-contact pose"
    ],
    "failure_and_recovery": [
      "Perception fails: re-run DetectObject for bread/plate",
      "Alignment poor: re-run ApproachAndAlign with same tolerance",
      "Grasp slips: open gripper, recompute grasp, retry pick",
      "Placement misaligned: slightly re-approach plate center and re-release"
    ],
    "termination": "Tree returns SUCCESS after retreat once bread has been released over the plate."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "Gripper aligned close to bread with plate nearbyâ€”pre-grasp contact imminent.",
        "predicts_next": "Grasp actuation is expected next, followed by transport to plate.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "picking a bread",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["bread","plate","table_mat","robot_gripper"],
  "objects_from_instruction": ["bread"],
  "blackboard_keys": ["bread_grasp"],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"string","timeout_ms":"int"},"description":"Run perception to detect a target object."},
    {"id":"OpenGripper","type":"Action","ports":{"width":"float","timeout_ms":"int"},"description":"Open gripper to a commanded width."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"string","strategy":"string","result_key":"string"},"description":"Compute grasp pose for the specified target; store to blackboard."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"string","tolerance":"float","timeout_ms":"int"},"description":"Approach target and align within tolerance."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"string","timeout_ms":"int"},"description":"Execute grasp using a precomputed grasp key."},
    {"id":"ObjectInGripper","type":"Condition","ports":{"target":"string"},"description":"Checks that the named object is currently grasped."},
    {"id":"MoveTo","type":"Action","ports":{"target":"string","timeout_ms":"int"},"description":"Move to a symbolic waypoint or pose."},
    {"id":"Retreat","type":"Action","ports":{"distance":"float","timeout_ms":"int"},"description":"Back off to clear the workspace."}
  ],
  "tree_stats": {"nodes_total": 12, "actions": 10, "conditions": 1, "depth": 2},
  "failure_modes": [
    "Bread not detected due to lighting or occlusion",
    "Misalignment causing failed grasp",
    "Grasp slip during transfer",
    "Release too high causing bread to bounce off plate"
  ],
  "recovery_strategy": [
    "Re-run detection; adjust viewpoint if needed",
    "Recompute grasp and re-approach",
    "Open gripper and reattempt pick with same width",
    "Lower closer to plate before release and retry"
  ],
  "assumptions": [
    "The elongated object is a small bread roll; frames indicate placement onto the plate after picking.",
    "Placement uses simple release rather than force-press due to available port constraints."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Bread ends on plate and robot retreats",
      "No collisions and stable transport"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"bread","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"plate","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"bread","tolerance":0.01,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"bread_grasp","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"MoveTo","attrs":{"target":"plate_center","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.06,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.06,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
