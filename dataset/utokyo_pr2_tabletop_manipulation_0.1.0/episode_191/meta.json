{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_191",
  "task_summary": "Detect the bread roll, grasp it with a top grasp, move above the plate, gently lower to contact, release the bread onto the plate, and retreat.",
  "task_long_description": {
    "overview": "A PR2 end-effector approaches a bread-like item placed to the right of a small white plate on a tabletop mat. The goal is to pick the bread and place it onto the plate, as evidenced by the sequence where the gripper lifts the item and positions it over the plate before releasing. The behavior emphasizes reliable perception, alignment for a top grasp, careful transport, low-force contact with the plate, and a clean retreat to end the episode without disturbing the placed item.",
    "preconditions": ["Workspace is clear with bread and plate within reachable area", "Camera provides view for visibility checks", "Gripper operational and capable of gentle grasp", "Robot has access to plate location"],
    "stepwise_plan": ["Verify bread visibility or actively scan and detect", "Open gripper and move to a pregrasp pose above bread", "Compute a top grasp and align precisely", "Pick using computed grasp and verify stable hold", "Move above the plate and descend until gentle contact", "Open gripper to release bread and retreat"],
    "success_criteria": ["Bread is lifted from the mat", "Bread is released centered on the plate", "Gripper is empty after release", "Robot retreats without displacing the bread"],
    "failure_and_recovery": ["If bread not visible, scan and redetect", "If grasp fails or slips, recompute grasp and retry pick", "If contact not detected on descent, re-approach above plate and retry descent", "If placement misaligned, regrasp and attempt replacement"],
    "termination": "Task terminates after successful release on the plate followed by a retreat motion."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "picking a bread",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["bread", "plate", "table_mat", "gripper", "robot_arm"],
  "objects_from_instruction": ["bread"],
  "blackboard_keys": ["bread_grasp"],
  "node_specs": [
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"bread"},"description":"Checks if the bread is currently visible to the camera."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"bread","pattern":"spiral","max_attempts":"3","timeout_ms":"1500"},"description":"Active search pattern to locate the bread if not visible."},
    {"id":"DetectObject","type":"Action","ports":{"target":"bread","timeout_ms":"1200"},"description":"Perception call to localize the bread."},
    {"id":"OpenGripper","type":"Action","ports":{"width":"0.09","timeout_ms":"500"},"description":"Opens gripper to maximum width for grasp and for release."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"bread","offset_z":"0.05","timeout_ms":"1200"},"description":"Moves to a pregrasp pose above the bread."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"bread","strategy":"top","result_key":"bread_grasp"},"description":"Computes a top-down grasp pose and stores it."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"bread","tolerance":"0.01","timeout_ms":"1500"},"description":"Refines alignment to meet grasp tolerance."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":"90"},"description":"Orients wrist yaw to align with the bread's long axis."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"bread_grasp","timeout_ms":"1500"},"description":"Executes grasp using the computed pose and lifts."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Checks stability after lift."},
    {"id":"ObjectInGripper","type":"Condition","ports":{"target":"bread"},"description":"Verifies the bread is held."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"plate","offset_z":"0.08","timeout_ms":"1500"},"description":"Transfers to a pose above the plate for placement."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":"0.02","force_threshold":"10","timeout_ms":"1200"},"description":"Descends slowly until contact with the plate is detected."},
    {"id":"Retreat","type":"Action","ports":{"distance":"0.1","timeout_ms":"1200"},"description":"Backs away after release to clear the workspace."}
  ],
  "tree_stats": {"nodes_total": 17, "actions": 12, "conditions": 3, "depth": 3},
  "failure_modes": ["Object not detected due to occlusion or lighting", "Insufficient grip leading to slip", "Collision with plate during approach", "Placement off-center causing roll"],
  "recovery_strategy": ["Fallback to scan then detect", "Recompute grasp and retry pick", "Re-approach above plate then descend slowly", "Regrasp and place again if misplacement occurs"],
  "assumptions": ["Frames indicate a pick-and-place into a plate, whereas the instruction mentions only picking; design follows frames and logs this mismatch."],
  "evaluation_notes": {
    "expected_success_criteria": ["Bread ends on plate center; robot retreats; gripper empty; no disturbance after retreat"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"bread"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"bread","offset_z":0.05,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"bread","tolerance":0.01,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"bread_grasp","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"plate","offset_z":0.08,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"plate","offset_z":0.08,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.02,"force_threshold":10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    }
  ]
}
