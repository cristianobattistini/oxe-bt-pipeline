{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_085",
  "task_summary": "Perceive a pink cloth, grasp one edge with a pinch, lift slightly, place it over itself to create a fold, release, and retreat.",
  "task_long_description": {
    "overview": "A PR2-like arm manipulates a pink cloth on a wooden tabletop. The robot first detects the cloth, approaches from above, aligns precisely, and computes a pinch grasp along an edge. It lifts the grasped portion slightly, sets a target fold pose over the clothâ€™s center, and places the lifted edge to create a fold. After placing and lightly pressing, it opens the gripper to release the cloth and retreats to clear the workspace. The sequence emphasizes careful alignment and gentle placing to avoid cloth slippage.",
    "preconditions": [
      "Workspace is clear except for the pink cloth",
      "Cloth is within reachable area",
      "Gripper operational and camera view available"
    ],
    "stepwise_plan": [
      "Detect the cloth on the table.",
      "Open gripper and move above the cloth with safe clearance.",
      "Approach and align with small tolerance.",
      "Compute a pinch grasp on an accessible edge.",
      "Pick the cloth and lift slightly.",
      "Write target fold pose to blackboard.",
      "Place the lifted edge over the fold pose to create the fold.",
      "Open gripper to release and retreat."
    ],
    "success_criteria": [
      "A visible crease indicating the cloth has been folded over itself",
      "Cloth remains on table without slipping away",
      "Robot ends safely clear of the cloth"
    ],
    "failure_and_recovery": [
      "If detection fails, repeat perception.",
      "If alignment is off, re-approach with tighter tolerance.",
      "If grasp slips, reopen, recompute grasp, and retry.",
      "If placement misaligns, re-place at fold pose."
    ],
    "termination": "Terminate after successful release and retreat, or after unrecoverable failure."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "folding a cloth",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["cloth", "table_surface", "robot_arm", "gripper"],
  "objects_from_instruction": ["cloth"],
  "blackboard_keys": ["cloth_grasp", "fold_pose"],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"cloth","timeout_ms":1200},"description":"Detect the pink cloth on the table."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.08,"timeout_ms":800},"description":"Preset gripper opening before grasp."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"cloth","offset_z":0.03,"timeout_ms":1500},"description":"Move to a safe height above the cloth."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"cloth","tolerance":0.005,"timeout_ms":1500},"description":"Align end-effector precisely over grasp point."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"cloth","strategy":"pinch","result_key":"cloth_grasp"},"description":"Compute a pinch grasp at cloth edge."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"cloth_grasp","timeout_ms":1500},"description":"Execute grasp and lift slightly."},
    {"id":"MoveDelta","type":"Action","ports":{"axis":"z","dist":0.1,"timeout_ms":800},"description":"Raise the cloth to create clearance for folding."},
    {"id":"SetBlackboard","type":"Action","ports":{"key":"fold_pose","value":"fold_over_center"},"description":"Set symbolic target pose for the fold."},
    {"id":"PlaceAt","type":"Action","ports":{"pose_key":"fold_pose","yaw_deg":0,"press_force":10.0,"timeout_ms":1500},"description":"Place the lifted edge over the fold pose."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":800},"description":"Release the cloth after placing."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Back off to a safe distance."}
  ],
  "tree_stats": {"nodes_total": 12, "actions": 11, "conditions": 0, "depth": 2},
  "failure_modes": [
    "Cloth not detected due to lighting or texture",
    "Misalignment causes partial grasp or slip",
    "Cloth drags during placement and unfolds",
    "Insufficient clearance while lifting"
  ],
  "recovery_strategy": [
    "Repeat DetectObject; if still failing, adjust viewpoint (not modeled).",
    "Re-run ApproachAndAlign with tolerance 0.005 and recompute grasp.",
    "Re-open gripper and re-place at fold_pose.",
    "Increase lift delta before placing."
  ],
  "assumptions": [
    "Frames show approach from the right; true lifting is not clearly visible. We assume a pinch-lift-and-place fold rather than pure pushing.",
    "The exact fold pose is symbolic and stored as 'fold_pose' on the blackboard."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Folded cloth with visible overlap",
      "No object dropped during the sequence",
      "End effector safely retreats"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"ComputeGraspPose","attrs":{"strategy":"pinch"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"MoveDelta","attrs":{"axis":"z","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"PlaceAt","attrs":{"yaw_deg":0,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
