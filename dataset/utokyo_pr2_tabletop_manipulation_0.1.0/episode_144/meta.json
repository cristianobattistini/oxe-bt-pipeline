{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_144",
  "task_summary": "Pick the bread and place it onto the white plate, then retreat.",
  "task_long_description": {
    "overview": "A tabletop scene shows a PR2-style gripper, a small white plate, and a bread piece on a green mat. The robot must locate the bread, approach from above, compute a pinch grasp, align and pick it. After verifying the grasp, it moves above the plate, lowers gently until contact, places the bread at the plate center, opens the gripper, and retreats to a safe position. Timing values are moderate; approach alignment uses tight tolerance for reliability near the plate rim.",
    "preconditions": [
      "Workspace is clear except for plate and bread",
      "Robot is homed with reachable workspace",
      "Perception can detect 'bread' and 'plate'",
      "Gripper operational and initially open"
    ],
    "stepwise_plan": [
      "Open gripper and detect bread and plate.",
      "Move above bread and compute a pinch grasp.",
      "Align precisely and execute the pick.",
      "Verify object in gripper; move above the plate.",
      "Lower until contact and place at plate center.",
      "Open gripper to release and retreat; wait briefly."
    ],
    "success_criteria": [
      "Bread is no longer on the mat",
      "Bread rests on the plate near its center",
      "Gripper is empty and in a safe pose"
    ],
    "failure_and_recovery": [
      "If detection fails, re-scan target area with a raster pattern and retry up to 3 times.",
      "If grasp is unstable, reopen, re-approach with tighter tolerance, and re-pick.",
      "If contact occurs prematurely with the plate rim, retreat slightly and re-lower."
    ],
    "termination": "Terminate after releasing bread on the plate and retreating to a safe distance."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "picking a bread",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["bread","plate","table","robot_gripper"],
  "objects_from_instruction": ["bread"],
  "blackboard_keys": ["bread_grasp","plate_center"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":500},"description":"Ensure gripper is open before approach."},
    {"id":"DetectObject","type":"Action","ports":{"target":"bread","timeout_ms":800},"description":"Detect bread in the workspace."},
    {"id":"DetectObject","type":"Action","ports":{"target":"plate","timeout_ms":800},"description":"Detect plate to prepare for placement."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"bread","offset_z":0.05,"timeout_ms":1200},"description":"Move to a pregrasp pose above bread."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"bread","strategy":"pinch","result_key":"bread_grasp"},"description":"Compute grasp and store it."},
    {"id":"PoseAvailable","type":"Condition","ports":{"key":"bread_grasp"},"description":"Verify grasp pose was computed."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"bread","tolerance":0.005,"timeout_ms":1200},"description":"Align precisely to the grasp pose."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"bread_grasp","timeout_ms":800},"description":"Execute pick using computed grasp."},
    {"id":"ObjectInGripper","type":"Condition","ports":{"target":"bread"},"description":"Confirm bread is grasped."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"plate","offset_z":0.08,"timeout_ms":1500},"description":"Move above the plate for placement."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.03,"force_threshold":10.0,"timeout_ms":800},"description":"Descend gently until contact with plate."},
    {"id":"PlaceAt","type":"Action","ports":{"pose_key":"plate_center","yaw_deg":0,"press_force":10.0,"timeout_ms":800},"description":"Place bread at plate center."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.08,"timeout_ms":500},"description":"Release the bread."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Back away from the plate."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":400},"description":"Brief wait to stabilize after placement."}
  ],
  "tree_stats": {"nodes_total": 16, "actions": 13, "conditions": 2, "depth": 2},
  "failure_modes": [
    "Bread not detected due to lighting or occlusion",
    "Grasp slip when lifting",
    "Collision with plate rim during placement",
    "Over-travel while lowering causing squeeze"
  ],
  "recovery_strategy": [
    "Re-run detection with raster scan pattern up to 3 attempts",
    "If slip detected, reopen and recompute grasp with smaller tolerance",
    "If collision sensed, retreat slightly and re-approach"
  ],
  "assumptions": [
    "Instruction says 'picking a bread', but frames clearly show pick-and-place onto a plate; plan follows frames.",
    "Symbolic targets: 'bread', 'plate', 'plate_center', and blackboard key 'bread_grasp'.",
    "Offsets (0.05 m above bread, 0.08 m above plate) inferred from scene geometry."
  ],
  "evaluation_notes": {
    "expected_success_criteria": ["Bread ends on plate; gripper empty; no collisions"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"bread","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"bread","offset_z":0.05,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"bread","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"bread_grasp","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"plate","offset_z":0.08,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "place",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.03,"force_threshold":10.0,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.08,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Wait","attrs":{"timeout_ms":400}},
      "active_path_ids": []
    }
  ]
}
