{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_019",
  "task_summary": "Perceive a pink cloth, grasp it with a pinch grasp, lift it off the table, and retreat.",
  "task_long_description": {
    "overview": "A PR2 end-effector interacts with a pink cloth on a wooden tabletop. The robot must visually detect the cloth, compute a feasible pinch grasp, approach from slightly above, align, close the gripper, and lift the cloth. Movements are moderate in speed with precise alignment to avoid dragging or wrinkling. After securing the grasp, the arm elevates the cloth and backs away to a safe height and distance. The behavior emphasizes reliable perception, stable grasping, and a short post-grasp retreat to clear the workspace.",
    "preconditions": [
      "Workspace clear around the pink cloth",
      "Gripper operational and initially open",
      "Camera viewpoint provides visibility of the cloth",
      "Robot within reachable workspace of the cloth"
    ],
    "stepwise_plan": [
      "Open the gripper.",
      "Detect the pink cloth and compute a pinch grasp pose.",
      "Verify the computed grasp pose is available.",
      "Move above the cloth with a small vertical offset.",
      "Approach and align with tight tolerance.",
      "Close the gripper to grasp the cloth and check grasp stability.",
      "Lift vertically by a short distance.",
      "Retreat slightly to clear the table."
    ],
    "success_criteria": [
      "Cloth is securely held in the gripper (no slippage)",
      "Cloth lifted clearly off the tabletop",
      "Arm reaches a safe, collision-free pose after retreat"
    ],
    "failure_and_recovery": [
      "Object not detected: reattempt detection or adjust view",
      "Pose unavailable: recompute grasp pose",
      "Grasp unstable: reopen, realign, and regrasp",
      "Lift causes drag: increase vertical lift before retreat"
    ],
    "termination": "Terminate after a stable grasp is verified, the cloth is lifted by ~0.1 m, and the robot retreats by ~0.1 m."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["pink_cloth", "table", "pr2_gripper"],
  "objects_from_instruction": [],
  "blackboard_keys": ["cloth_grasp"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":500},"description":"Open gripper to maximum allowed width before approach."},
    {"id":"DetectObject","type":"Action","ports":{"target":"pink_cloth","timeout_ms":1200},"description":"Detect the pink cloth to localize it."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"pink_cloth","strategy":"pinch","result_key":"cloth_grasp"},"description":"Compute pinch grasp for cloth and store pose."},
    {"id":"PoseAvailable","type":"Condition","ports":{"key":"cloth_grasp"},"description":"Verify computed grasp pose exists."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"pink_cloth","offset_z":0.05,"timeout_ms":1200},"description":"Move to a pregrasp above the cloth."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"pink_cloth","tolerance":0.01,"timeout_ms":1200},"description":"Precisely approach and align to grasp pose."},
    {"id":"CloseGripper","type":"Action","ports":{"force":20,"timeout_ms":800},"description":"Close the gripper to grasp the cloth."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Confirm the grasp is stable."},
    {"id":"MoveDelta","type":"Action","ports":{"axis":"z","dist":0.1,"timeout_ms":800},"description":"Lift the grasped cloth vertically."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Back off slightly to clear the workspace."}
  ],
  "tree_stats": {"nodes_total": 11, "actions": 8, "conditions": 2, "depth": 11},
  "failure_modes": [
    "Cloth not detected due to lighting or occlusion",
    "Pose computation fails or is inaccurate",
    "Grasp slips during lift",
    "Retreat causes collision with table edge or arm"
  ],
  "recovery_strategy": [
    "Re-run detection with a brief wait",
    "Recompute grasp pose and realign",
    "Reopen, reapproach with tighter tolerance, then regrasp",
    "Increase lift before retreating; reduce retreat distance"
  ],
  "assumptions": [
    "No textual instruction was provided; plan inferred from frames showing a grasp-and-lift of a pink cloth.",
    "Object is deformable; pinch grasp is a reasonable default for small cloth sections."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Stable grasp confirmed by condition node",
      "Object clearly off the surface after MoveDelta",
      "Safe clearance achieved after Retreat"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"pink_cloth","timeout_ms":1200}},
      "active_path_ids": ["Sequence","DetectObject"]
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"pink_cloth","offset_z":0.05,"timeout_ms":1200}},
      "active_path_ids": ["Sequence","MoveAbove"]
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"pink_cloth","tolerance":0.01,"timeout_ms":1200}},
      "active_path_ids": ["Sequence","ApproachAndAlign"]
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"PoseAvailable","attrs":{"key":"cloth_grasp"}},
      "active_path_ids": ["Sequence","PoseAvailable"]
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":20,"timeout_ms":800}},
      "active_path_ids": ["Sequence","CloseGripper"]
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"IsGraspStable","attrs":{}},
      "active_path_ids": ["Sequence","IsGraspStable"]
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"MoveDelta","attrs":{"axis":"z","dist":0.1,"timeout_ms":800}},
      "active_path_ids": ["Sequence","MoveDelta"]
    },
    {
      "frame": "frame_7",
      "phase": "transfer",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": ["Sequence","Retreat"]
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": ["Sequence","Retreat"]
    }
  ]
}
