{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_062",
  "task_summary": "Detect, grasp the bread, lift it, and place it onto the plate, then retreat.",
  "task_long_description": {
    "overview": "A PR2 end-effector interacts with a small bread roll and a white plate on a green mat. The goal is to pick the bread from the tabletop area and place it centered on the plate. The behavior emphasizes reliable perception, careful vertical approach to contact, gentle grasping to avoid deformation, and a clean release over the plate before retreating. The plate remains static; the bread is initially adjacent to the plate and ends up on it by the final frames.",
    "preconditions": ["Workspace clear around bread and plate", "Gripper calibrated and homed", "Camera provides view of the bread", "Plate is reachable"],
    "stepwise_plan": [
      "Open gripper and confirm bread visibility or scan.",
      "Move above bread, align, and descend until contact.",
      "Close gripper gently and verify object in gripper.",
      "Lift slightly and move above the plate.",
      "Descend until plate contact, open gripper to release.",
      "Retreat to a safe height."
    ],
    "success_criteria": ["Bread rests on the plate surface", "Gripper is empty at end", "No collisions or pushes that displace the plate significantly"],
    "failure_and_recovery": [
      "Perception failure: scan pattern until target found.",
      "Misalignment: re-approach and align before grasp.",
      "Weak grasp/slip: reopen, re-approach, and regrasp.",
      "Premature contact with plate: retreat and reattempt placement."
    ],
    "termination": "Terminate when bread is released on the plate and the arm has retreated."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "Tool is close to bread with vertical descent cue, indicating contact/verification prior to grasp.",
        "predicts_next": "Closing action likely follows, transitioning to lift and transfer.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "picking a bread",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["bread", "plate", "gripper", "table_mat"],
  "objects_from_instruction": ["bread"],
  "blackboard_keys": [],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":500},"description":"Open gripper to safe width."},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"bread"},"description":"Check if bread is visible."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"bread","pattern":"raster","max_attempts":3,"timeout_ms":1500},"description":"Active scan to localize bread if not visible."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"bread","offset_z":0.05,"timeout_ms":1200},"description":"Move to a pregrasp height above bread."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"bread","tolerance":0.005,"timeout_ms":1200},"description":"Fine approach and alignment to the bread."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.05,"force_threshold":10,"timeout_ms":1200},"description":"Descend until contact with bread before grasp."},
    {"id":"CloseGripper","type":"Action","ports":{"force":10,"timeout_ms":800},"description":"Close gripper gently to grasp."},
    {"id":"ObjectInGripper","type":"Condition","ports":{"target":"bread"},"description":"Verify the bread is grasped."},
    {"id":"MoveDelta","type":"Action","ports":{"axis":"z","dist":0.1,"timeout_ms":800},"description":"Lift the bread."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"plate","offset_z":0.10,"timeout_ms":1200},"description":"Move above the plate."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.08,"force_threshold":10,"timeout_ms":1500},"description":"Lower until contact near plate surface."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":500},"description":"Release bread onto plate."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.2,"timeout_ms":1200},"description":"Retreat to a safe pose after placing."}
  ],
  "tree_stats": {"nodes_total": 15, "actions": 11, "conditions": 2, "depth": 3},
  "failure_modes": ["Target not detected", "Misalignment causing slip", "Insufficient grip force", "Collision with plate during placement"],
  "recovery_strategy": ["Scan again using raster pattern", "Re-approach and realign", "Reopen and regrasp with corrected pose", "Retreat and retry placement"],
  "assumptions": ["Although the instruction only says 'picking a bread', frames [6-8] show placement on a plate; the BT includes a place stage to match the visuals."],
  "evaluation_notes": {
    "expected_success_criteria": ["Bread ends centered on plate", "No object drops during transfer", "Gripper empty at end, robot retreated"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"bread","pattern":"raster","max_attempts":3,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"bread","offset_z":0.05,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"bread","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.05,"force_threshold":10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":10,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"MoveDelta","attrs":{"axis":"z","dist":0.1,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.08,"force_threshold":10,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.2,"timeout_ms":1200}},
      "active_path_ids": []
    }
  ]
}
