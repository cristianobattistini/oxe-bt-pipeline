{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_051",
  "task_summary": "Detect a grape, grasp it with a pinch, lift, move above the plate, and release it onto the plate; then retreat.",
  "task_long_description": {
    "overview": "A PR2-style manipulator must pick a grape from a cluster on a tabletop and place it onto a nearby white plate. The scene shows a plate to the left and grapes to the right. The arm approaches from the right, aligns, grasps, lifts the grape, transfers above the plate, places it, and retreats. Constraints include reliable perception of the grape and plate, a stable grasp without crushing, and gentle placement on the plate surface.",
    "preconditions": ["Robot initialized and homed", "Workspace clear except plate and grapes", "Gripper functional and empty", "Camera provides view of plate and grapes"],
    "stepwise_plan": ["Detect grape and plate", "Open gripper and move above grape", "Compute pinch grasp and align", "Lower until contact and execute pick", "Verify grasp stability and lift", "Move above plate", "Place at plate center and open gripper", "Retreat from the plate"],
    "success_criteria": ["One grape is released on the plate", "No objects knocked over", "Grasp remains stable during transfer", "Gripper ends clear of the scene"],
    "failure_and_recovery": ["Perception miss: rescan area", "Failed grasp: reopen, re-approach, retry pinch", "Slippage during transfer: regrasp or abort", "Placement collision: retry with higher offset"],
    "termination": "End after successful release on plate and retreat, or after a safety abort."
  },
  "frame_ranking": {
    "order": ["frame_6","frame_3","frame_2","frame_8","frame_5","frame_1","frame_4","frame_7","frame_0"],
    "scores": {
      "frame_0": 0.10, "frame_1": 0.42, "frame_2": 0.58, "frame_3": 0.85,
      "frame_4": 0.40, "frame_5": 0.55, "frame_6": 0.92, "frame_7": 0.33, "frame_8": 0.70
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "Tool is at the grape with end-effector aligned, indicating imminent grasp.",
        "predicts_next": "Lift motion is expected following grasp confirmation.",
        "uncertainty_reduction": "high"
      },
      "frame_6": {
        "now_evidence": "End-effector over plate with grape visible, consistent with placement.",
        "predicts_next": "Opening gripper to release onto plate.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "picking a grape",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["grape", "plate", "table", "robot_arm"],
  "objects_from_instruction": ["grape"],
  "blackboard_keys": ["grasp_grape", "plate_center"],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"string","timeout_ms":"int"},"description":"Perceive a target object within a timeout."},
    {"id":"OpenGripper","type":"Action","ports":{"width":"float","timeout_ms":"int"},"description":"Open gripper to a specified width."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"string","offset_z":"float","timeout_ms":"int"},"description":"Position end-effector above a symbolic target with vertical offset."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"string","strategy":"string","result_key":"string"},"description":"Compute grasp pose; store key on blackboard."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"string","tolerance":"float","timeout_ms":"int"},"description":"Approach the object and refine alignment."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"string","max_depth":"float","force_threshold":"float","timeout_ms":"int"},"description":"Descend until contact is sensed."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"string","timeout_ms":"int"},"description":"Execute pick using a precomputed grasp."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Check that the grasp is stable."},
    {"id":"MoveDelta","type":"Action","ports":{"axis":"string","dist":"float","timeout_ms":"int"},"description":"Lift or shift end-effector by a small delta."},
    {"id":"PlaceAt","type":"Action","ports":{"pose_key":"string","yaw_deg":"int","press_force":"float","timeout_ms":"int"},"description":"Place the object at a stored pose."},
    {"id":"Retreat","type":"Action","ports":{"distance":"float","timeout_ms":"int"},"description":"Back off from the workspace for safety."}
  ],
  "tree_stats": {"nodes_total": 15, "actions": 13, "conditions": 1, "depth": 2},
  "failure_modes": ["Object not detected", "Misalignment leads to failed grasp", "Object slips during transfer", "Collision when placing on plate"],
  "recovery_strategy": ["Repeat detection and approach", "Recompute grasp with same strategy", "Reopen and retry pick", "Increase vertical offset before place"],
  "assumptions": ["Frames suggest pick-and-place onto the plate. Instruction says 'picking a grape' without specifying placement; we interpret it as picking and placing on the plate as seen."],
  "evaluation_notes": {
    "expected_success_criteria": ["A grape is observed on the plate after release", "No unintended object motion", "End-effector retreats clear"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"grape","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"grape","offset_z":0.06,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"grape","tolerance":0.01,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"grasp_grape","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"IsGraspStable","attrs":{}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"plate","offset_z":0.08,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"PlaceAt","attrs":{"pose_key":"plate_center","yaw_deg":0,"press_force":5,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.08,"timeout_ms":400}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
