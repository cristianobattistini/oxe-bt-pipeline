{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_102",
  "task_summary": "Detect bread, approach and grasp it, then transfer and place it onto the plate; finally retreat.",
  "task_long_description": {
    "overview": "A PR2 gripper interacts with a small bread piece on a green mat with a white plate nearby. The robot must perceive the bread, approach with a precise alignment, compute a pinch grasp, pick the bread, and move above the plate. It then lowers gently until contact, opens the gripper to release the bread onto the plate, and retreats to a safe height. The sequence prioritizes reliable perception, precise approach, stable grasp, controlled placement, and safe exit.",
    "preconditions": ["Workspace is clear except bread and plate", "Gripper starts open and operational", "Camera view contains both bread and plate", "Plate is stable on the mat"],
    "stepwise_plan": ["Detect and confirm visibility of bread", "Move above bread and align precisely", "Compute grasp pose and pick bread", "Confirm grasp stability", "Detect plate and move above it", "Lower until contact and release", "Retreat to a safe distance"],
    "success_criteria": ["Bread is released centered on plate", "No object slip during transfer", "Gripper retreats without collisions"],
    "failure_and_recovery": ["Perception failure → rescan area", "Grasp slip → reopen, recompute grasp, retry", "Contact not detected over plate → adjust height and reattempt placement"],
    "termination": "End after successful release on plate and retreat."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "Gripper aligned at pre-grasp adjacent to bread; imminent closure is implied.",
        "predicts_next": "Grasp actuation and lift will follow toward transfer.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "picking a bread",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["bread", "plate", "robot_gripper", "table_mat"],
  "objects_from_instruction": ["bread"],
  "blackboard_keys": ["bread_grasp"],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"bread","timeout_ms":800},"description":"Detect the bread in the scene."},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"bread"},"description":"Verify bread is visible."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":400},"description":"Prepare gripper for grasping."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"bread","offset_z":0.03,"timeout_ms":1200},"description":"Move above bread to pre-grasp."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"bread","tolerance":0.01,"timeout_ms":1200},"description":"Refine alignment before grasp."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"bread","strategy":"pinch","result_key":"bread_grasp"},"description":"Compute grasp pose and store key."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"bread_grasp","timeout_ms":1500},"description":"Execute grasp using computed pose."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Confirm grasp stability before transfer."},
    {"id":"DetectObject","type":"Action","ports":{"target":"plate","timeout_ms":800},"description":"Detect the plate for placement."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"plate","offset_z":0.06,"timeout_ms":1200},"description":"Move above plate with the bread."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.03,"force_threshold":5.0,"timeout_ms":1200},"description":"Lower until gentle contact over plate."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":400},"description":"Release bread onto the plate."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Retreat to a safe pose after placing."}
  ],
  "tree_stats": {"nodes_total": 14, "actions": 11, "conditions": 2, "depth": 2},
  "failure_modes": ["Bread not detected or occluded", "Misalignment leading to failed grasp", "Object slip during transfer", "Plate not detected for placement", "No contact sensed over plate"],
  "recovery_strategy": ["Rescan or widen search pattern", "Recompute grasp with alternate strategy", "Open gripper and reattempt from pre-grasp", "Re-detect plate and adjust approach height"],
  "assumptions": ["Frames indicate pick-and-place: bread is grasped from mat and placed on plate; instruction matches visuals.", "Contact sensing is approximated using LowerUntilContact parameters; exact force thresholds are not provided by the library."],
  "evaluation_notes": {
    "expected_success_criteria": ["Bread ends on plate, upright and stable", "No collisions with plate edge", "Gripper fully opens before retreat"],
    "test_scenarios": ["happy path", "object_missing", "grasp_fail", "perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"bread","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"bread","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"tolerance":0.01,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"bread_grasp","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"plate","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"plate","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":400}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
