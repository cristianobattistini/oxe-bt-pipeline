{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_172",
  "task_summary": "Detect the bread, approach and grasp it with a pinch strategy, lift, move above the plate, lower gently, release, and retreat.",
  "task_long_description": {
    "overview": "A PR2-like arm interacts on a tabletop with a single bread-like pastry and a small white plate on a green mat. The goal is to pick the bread reliably and, as seen in the frames, place it onto the plate. The behavior emphasizes robust perception (detect or scan), safe approach from above, precise alignment, and a stable grasp. After lifting, the robot transfers to the plate, lowers until contact at low force, releases the bread, and retreats to a safe pose.",
    "preconditions": ["Workspace is clear except bread and plate", "Camera view of targets unobstructed", "Gripper operational and can open to 0.09 m", "Robot has collision-free access above bread and plate"],
    "stepwise_plan": ["Detect bread; scan if not immediately visible", "Open gripper and move above bread", "Compute grasp and align precisely", "Execute pick and verify grasp stability", "Retreat upwards to clear table", "Detect/confirm plate location", "Move above plate and lower until contact", "Open gripper to release", "Retreat to a safe pose"],
    "success_criteria": ["Bread securely grasped without slipping", "Bread released centered on plate", "No collisions with plate or table", "Final retreat leaves scene tidy"],
    "failure_and_recovery": ["If detection fails, perform raster scan then re-detect", "If grasp unstable, re-open, re-approach, and retry", "If lowering reaches max depth without contact, re-localize plate", "If release fails, open gripper again and gently shake via micro retreat"],
    "termination": "Task ends after releasing bread on the plate and completing the final retreat and short wait."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "picking a bread",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["bread", "plate", "robot_gripper", "table_mat"],
  "objects_from_instruction": ["bread"],
  "blackboard_keys": ["bread_grasp"],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"bread|plate","timeout_ms":"{400,500,800,1200,1500,2000}"},"description":"Visual detection of specified target; used for bread and plate."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"bread|plate","pattern":"raster","max_attempts":"{1,2,3,5}","timeout_ms":"{400,500,800,1200,1500,2000}"},"description":"Raster scan to aid detection when the object is not immediately visible."},
    {"id":"OpenGripper","type":"Action","ports":{"width":"{0.06,0.08,0.09}","timeout_ms":"{400,500,800,1200,1500,2000}"},"description":"Open the gripper to specified aperture."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"bread|plate","offset_z":"float","timeout_ms":"{400,500,800,1200,1500,2000}"},"description":"Move to a pose above the target with vertical clearance."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"bread","strategy":"pinch","result_key":"bread_grasp"},"description":"Generate grasp pose for bread and store it on blackboard."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"bread","tolerance":"{0.0,0.005,0.01,0.02}","timeout_ms":"{400,500,800,1200,1500,2000}"},"description":"Refine approach to meet alignment tolerance."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"bread_grasp","timeout_ms":"{400,500,800,1200,1500,2000}"},"description":"Close and lift using the computed grasp."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Check grasp stability before transfer."},
    {"id":"Retreat","type":"Action","ports":{"distance":"{0.05,0.1,0.2}","timeout_ms":"{400,500,800,1200,1500,2000}"},"description":"Back off to a safe height/distance."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":"float","force_threshold":"float","timeout_ms":"{400,500,800,1200,1500,2000}"},"description":"Controlled lowering until contact is detected, then stop."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":"{400,500,800,1200,1500,2000}"},"description":"Short pause for stabilization after retreat."}
  ],
  "tree_stats": {"nodes_total": 23, "actions": 17, "conditions": 1, "depth": 4},
  "failure_modes": ["Object not detected due to occlusion", "Grasp slips during lift", "Misalignment over plate causes collision", "Release fails leaving bread pinched"],
  "recovery_strategy": ["Fallback to scan then re-detect", "Re-open and retry grasp pipeline", "Re-localize plate and re-approach above", "Open again and perform small retreat/advance"],
  "assumptions": ["Instruction says 'picking a bread' but frames clearly show pick-and-place onto a plate; tree includes placement to match frames."],
  "evaluation_notes": {
    "expected_success_criteria": ["Bread ends centered on plate without visible damage", "No jerky motions or collisions", "Gripper fully opens during release"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"bread","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"bread","offset_z":0.05,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"bread","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"bread_grasp","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"plate","offset_z":0.06,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.04,"force_threshold":10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
