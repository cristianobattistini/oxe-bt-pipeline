{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_009",
  "task_summary": "Perceive a grape bunch, approach precisely, grasp gently, lift, move above the plate, lower to the surface, release, and retreat.",
  "task_long_description": {
    "overview": "A PR2-style gripper on a tabletop interacts with a small grape bunch near a plate. The robot must detect the grape, approach with a precise alignment, make gentle contact, close the gripper to grasp, lift slightly to confirm a stable grasp, and move above the plate. It then lowers to light contact with the plate surface, opens the gripper to release the grape bunch, and retreats to a safe height. The scene includes a wooden table, a white plate, and the PR2 forearm and gripper.",
    "preconditions": ["Robot is powered and homed", "Workspace is clear except for plate and grape", "Gripper operational and empty", "Camera view of tabletop available"],
    "stepwise_plan": ["Open gripper", "Perceive grape or actively detect it", "Move above grape with clearance", "Align precisely and descend to first contact", "Close gripper with low force", "Verify stable grasp and lift", "Move above the plate", "Lower until light contact with plate", "Open gripper to release", "Retreat upward to safe height"],
    "success_criteria": ["Grape is securely grasped before transfer", "Grape is released centered on plate", "No collisions with table or plate edges", "End-effector safely retreats"],
    "failure_and_recovery": ["If grape not visible, retry active detection", "If contact occurs without grasp, reopen and reattempt approach", "If grasp is unstable, regrasp after retreat", "If placement contact too high, descend again"],
    "termination": "Terminate when the grape is resting on the plate and the gripper is retracted."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "picking a grape",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["grape", "plate", "table", "PR2_gripper"],
  "objects_from_instruction": ["grape"],
  "blackboard_keys": [],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":500},"description":"Ensure gripper is open before approach and for final release."},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"grape"},"description":"Checks if the grape is already visible."},
    {"id":"DetectObject","type":"Action","ports":{"target":"grape","timeout_ms":800},"description":"Active detection of the grape if not visible."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"grape","offset_z":0.05,"timeout_ms":1200},"description":"Position above grape with clearance."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"grape","tolerance":0.005,"timeout_ms":1200},"description":"Precision lateral approach and alignment."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.03,"force_threshold":10,"timeout_ms":1200},"description":"Descend gently until contact is detected before grasping."},
    {"id":"CloseGripper","type":"Action","ports":{"force":10,"timeout_ms":800},"description":"Close with low force to grasp the grape."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Verify that the grasp is stable before transport."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Lift up after grasp / after release."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"plate","offset_z":0.10,"timeout_ms":1500},"description":"Move to a pose above the plate."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.05,"force_threshold":10,"timeout_ms":1200},"description":"Lower to gentle contact with plate for placement."}
  ],
  "tree_stats": {"nodes_total": 16, "actions": 11, "conditions": 2, "depth": 4},
  "failure_modes": ["Object not detected due to occlusion or lighting", "Slip during grasp leading to drop", "Collision with plate edge during placement", "Over-travel causing squashing"],
  "recovery_strategy": ["Fallback to active detection with retries", "Re-open and re-approach if contact without grasp", "Reattempt alignment with tighter tolerance", "Abort placement and retreat if contact forces spike"],
  "assumptions": ["Frames show both pick and place onto a plate although instruction says 'picking a grape'; tree follows frames per priority rule.", "Target names 'grape' and 'plate' are symbolic scene entities."],
  "evaluation_notes": {
    "expected_success_criteria": ["Grape is grasped securely and transported above plate", "Release occurs over plate center with no spill", "Robot ends in a safe, retracted state"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"grape","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"grape","offset_z":0.05,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"grape","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.03,"force_threshold":10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":10,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"plate","offset_z":0.10,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.05,"force_threshold":10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
