{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_053",
  "task_summary": "Detect the bread, approach and align, grasp it with a pinch, lift and move above the plate, then place it gently on the plate and retreat.",
  "task_long_description": {
    "overview": "A PR2-style gripper interacts with a bread piece and a white plate on a green mat. The goal is to pick the bread and, as seen in the frames, set it onto the plate. The behavior emphasizes reliable perception, precise alignment, and gentle placement. The system first opens the gripper, detects or scans for the bread, computes a pinch grasp, then grasps. After verifying stability, the arm moves above the plate, lowers until contact, releases, waits briefly, and retreats to a safe pose.",
    "preconditions": ["Robot is powered and homed", "Workspace is clear except bread and plate", "Camera provides valid view", "Gripper calibrated and operational"],
    "stepwise_plan": ["Open gripper", "Detect or scan for bread", "Move above bread and orient yaw", "Compute grasp pose (pinch)", "Approach and align precisely", "Execute pick using computed grasp", "Verify grasp stability", "Move above plate", "Lower until contact", "Open gripper to release", "Wait briefly", "Retreat to safe distance"],
    "success_criteria": ["Bread ends resting on plate surface", "No bread slip after release", "Robot ends in safe, collision-free pose"],
    "failure_and_recovery": ["Bread not detected → scan pattern", "Misalignment → re-approach and align", "Unstable grasp → repeat compute+pick", "Premature contact while lowering → retreat and reattempt placement"],
    "termination": "End after successful release on plate and retreat."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "gripper makes first secure contact around bread near the plate edge; alignment looks correct.",
        "predicts_next": "pick completion followed by lift and transfer above plate.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "picking a bread",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["bread", "plate", "green_mat", "robot_gripper"],
  "objects_from_instruction": ["bread"],
  "blackboard_keys": ["bread_grasp"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":"0.09","timeout_ms":"800"},"description":"Open gripper for approach and for final release."},
    {"id":"DetectObject","type":"Action","ports":{"target":"bread","timeout_ms":"1200"},"description":"Detect the bread; if it fails, fall back to scan."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"bread","pattern":"arc","max_attempts":"3","timeout_ms":"1500"},"description":"Active search pattern to localize bread."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"bread","offset_z":"0.05","timeout_ms":"1200"},"description":"Pregrasp pose above bread."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":"90"},"description":"Align gripper yaw with bread long axis."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"bread","strategy":"pinch","result_key":"bread_grasp"},"description":"Compute pinch grasp pose saved to blackboard."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"bread","tolerance":"0.005","timeout_ms":"1500"},"description":"Refine approach with tight tolerance."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"bread_grasp","timeout_ms":"1500"},"description":"Execute grasp using computed pose."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Ensure object is firmly held."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"plate","offset_z":"0.06","timeout_ms":"1200"},"description":"Move above the plate to prepare placement."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":"0.03","force_threshold":"10","timeout_ms":"1200"},"description":"Lower gently until contact with plate."},
    {"id":"OpenGripper","type":"Action","ports":{"width":"0.09","timeout_ms":"800"},"description":"Release bread onto plate."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":"400"},"description":"Allow settling after release."},
    {"id":"Retreat","type":"Action","ports":{"distance":"0.1","timeout_ms":"1200"},"description":"Back away to a safe distance."}
  ],
  "tree_stats": {"nodes_total": 16, "actions": 13, "conditions": 1, "depth": 3},
  "failure_modes": ["Bread not visible", "Grasp fails or slips", "Collision with plate edge", "Premature contact while lowering"],
  "recovery_strategy": ["Fallback to ScanForTarget", "Recompute grasp and re-pick", "Re-approach with tighter tolerance", "Retry placement after small retreat"],
  "assumptions": ["Frames show a place-on-plate after grasp; although the instruction says 'picking a bread', we prioritized visual evidence and included placement steps."],
  "evaluation_notes": {
    "expected_success_criteria": ["Bread ends resting on plate", "No slip after release", "Robot retreats safely"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"bread","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"bread","offset_z":0.05,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"bread","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"bread_grasp","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"plate","offset_z":0.06,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "place",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.03,"force_threshold":10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Wait","attrs":{"timeout_ms":400}},
      "active_path_ids": []
    }
  ]
}
