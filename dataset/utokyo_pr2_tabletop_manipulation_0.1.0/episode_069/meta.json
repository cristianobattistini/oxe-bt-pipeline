{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_069",
  "task_summary": "Fold the pink cloth on the tabletop by contacting an edge, pushing to create a fold, releasing, and retreating.",
  "task_long_description": {
    "overview": "A PR2-style gripper interacts with a pink cloth on a wooden tabletop. The goal is to fold the cloth once by pushing an edge over itself. The robot first perceives the cloth, approaches above the center, aligns to an edge, and gently makes contact. It then performs one or more push strokes along a straight line to create the fold. After the fold is formed and the cloth appears stacked, the robot releases and retreats to avoid disturbing the result. Movements are deliberate and time-bounded.",
    "preconditions": [
      "Cloth is on the table within reachable workspace",
      "Camera provides view for detection",
      "Gripper operational and initially free of objects"
    ],
    "stepwise_plan": [
      "Detect the cloth on the table",
      "Open gripper and move above the cloth center",
      "Align to a chosen cloth edge with tight tolerance",
      "Lower until gentle contact is detected",
      "Close gripper lightly and execute two push strokes to fold",
      "Release the cloth, retreat, and wait briefly"
    ],
    "success_criteria": [
      "Cloth shows a visible single fold (stacked appearance)",
      "No slipping or excessive displacement beyond target area",
      "Robot ends clear of the cloth"
    ],
    "failure_and_recovery": [
      "If detection fails: rescan the scene",
      "If contact not detected: lower again with small depth",
      "If push under-folds: repeat one additional push cycle",
      "If cloth snags: open gripper and retreat, then re-approach"
    ],
    "termination": "Terminate after releasing the cloth and retreating with the fold formed."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "folding a cloth",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["cloth", "tabletop", "robot_gripper"],
  "objects_from_instruction": ["cloth"],
  "blackboard_keys": [],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"cloth","timeout_ms":800},"description":"Perceive the cloth location."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":500},"description":"Open to safe width before contact."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"cloth_center","offset_z":0.05,"timeout_ms":1200},"description":"Go above the cloth center with clearance."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"cloth_edge","tolerance":0.005,"timeout_ms":1200},"description":"Align gripper with cloth edge precisely."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.03,"force_threshold":10,"timeout_ms":800},"description":"Lower gently until contact is detected."},
    {"id":"CloseGripper","type":"Action","ports":{"force":10,"timeout_ms":800},"description":"Lightly pinch to stabilize the edge."},
    {"id":"Push","type":"Action","ports":{"target":"cloth_edge","distance":0.1,"direction_deg":180,"timeout_ms":1200},"description":"Push along a line to fold the cloth."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.08,"timeout_ms":500},"description":"Release after folding."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Back away from the cloth."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":400},"description":"Brief pause to stabilize the scene."}
  ],
  "tree_stats": {"nodes_total": 12, "actions": 10, "conditions": 0, "depth": 4},
  "failure_modes": [
    "Cloth not detected due to lighting",
    "Contact missed causing ineffective push",
    "Over-push causing cloth to slide instead of fold"
  ],
  "recovery_strategy": [
    "Rescan and re-detect target",
    "Reattempt lowering with slightly deeper max_depth",
    "Add an extra push cycle or adjust direction"
  ],
  "assumptions": [
    "Frames indicate a push-fold rather than lift-and-place; tree prioritizes push-based folding to match evidence.",
    "Direction 180Â° chosen from camera frame; exact world frame is symbolic."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Final frame shows stacked/folded cloth",
      "Robot not in contact after release",
      "No excessive displacement of cloth beyond workspace"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"cloth","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"cloth_center","offset_z":0.05,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"cloth_edge","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.03,"force_threshold":10,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"Push","attrs":{"target":"cloth_edge","distance":0.1,"direction_deg":180,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"Push","attrs":{"target":"cloth_edge","distance":0.1,"direction_deg":180,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"Push","attrs":{"target":"cloth_edge","distance":0.1,"direction_deg":180,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.08,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
