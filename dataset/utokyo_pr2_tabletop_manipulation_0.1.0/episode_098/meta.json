{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_098",
  "task_summary": "Approach the bread, align, and push it leftward onto the plate; then pause and retreat.",
  "task_long_description": {
    "overview": "The scene shows a PR2-like end-effector, a small bread roll on a green mat, and a white plate to its left. The robot must manipulate the bread so it ends centered on the plate. Visual evidence indicates sliding/pushing rather than a lift-and-grasp. The behavior tree first ensures the bread is perceived, approaches above it, finely aligns the tool, orients yaw for a lateral interaction, performs a short push toward the plate, waits to settle, and retreats to clear the field of view.",
    "preconditions": ["Workspace clear around plate and bread", "Gripper operational with vision available", "Plate located left of bread", "Table surface provides low friction but allows sliding"],
    "stepwise_plan": ["Open gripper to avoid collision", "Perceive bread or scan if not visible", "Confirm detection", "Move above bread with small standoff", "Align precisely to target", "Set tool yaw for lateral push", "Push bread ~0.1 m toward plate (left)", "Wait briefly for settling", "Retreat to safe distance"],
    "success_criteria": ["Bread ends on plate surface", "No collision with plate rim beyond acceptable contact", "Robot retreats to safe pose", "Task completes without timeouts"],
    "failure_and_recovery": ["Perception fails → raster scan and re-detect", "Misalignment before push → re-approach and align", "Push insufficient → repeat push (not shown here but feasible)", "Unexpected contact → retreat and re-scan"],
    "termination": "Terminate after wait and retreat once the bread is visibly on the plate."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.18,
      "frame_1": 0.46,
      "frame_2": 0.70,
      "frame_3": 0.93,
      "frame_4": 0.40,
      "frame_5": 0.88,
      "frame_6": 0.62,
      "frame_7": 0.30,
      "frame_8": 0.12
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "Tool is aligned near bread with plate margin visible—moment of push onset.",
        "predicts_next": "Bread will translate left toward plate.",
        "uncertainty_reduction": "high"
      },
      "frame_5": {
        "now_evidence": "Bread largely on plate with tool nearby, confirming successful transfer.",
        "predicts_next": "Retreat likely after a brief settle.",
        "uncertainty_reduction": "high"
      },
      "frame_2": {
        "now_evidence": "Pre-contact approach with alignment about to finish.",
        "predicts_next": "Push action initiation.",
        "uncertainty_reduction": "medium"
      }
    }
  },
  "task_instruction": "picking a bread",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["bread", "plate", "table", "robot_gripper"],
  "objects_from_instruction": ["bread"],
  "blackboard_keys": [],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":800},"description":"Open gripper to avoid unintended clamping during lateral push."},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"bread"},"description":"Quick check for bread visibility."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"bread","pattern":"raster","max_attempts":3,"timeout_ms":1500},"description":"Raster scan if bread not immediately visible."},
    {"id":"DetectObject","type":"Action","ports":{"target":"bread","timeout_ms":800},"description":"Confirm target pose after visibility/scan."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"bread","offset_z":0.02,"timeout_ms":1200},"description":"Move to a small standoff above bread."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"bread","tolerance":0.005,"timeout_ms":1200},"description":"Refine lateral pose before pushing."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":90},"description":"Orient tool for a sideways push."},
    {"id":"Push","type":"Action","ports":{"target":"bread","distance":0.1,"direction_deg":180,"timeout_ms":1200},"description":"Slide bread left toward plate."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":400},"description":"Allow object to settle on plate."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Back off to a safe distance."}
  ],
  "tree_stats": {"nodes_total": 12, "actions": 9, "conditions": 1, "depth": 3},
  "failure_modes": ["Bread not detected", "Tool misaligned causing miss-push", "Push overshoots plate", "Collision with plate rim"],
  "recovery_strategy": ["Perform ScanForTarget then DetectObject again", "Repeat approach-and-align", "Execute a second shorter push", "Abort and Retreat if abnormal contact sensed"],
  "assumptions": ["Although the instruction says 'picking a bread', the frames clearly show a push/slide maneuver to move bread onto a plate; the BT follows the visual evidence."],
  "evaluation_notes": {
    "expected_success_criteria": ["Bread ends centered or stably resting on plate", "No grasping required", "Robot retreats cleanly"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"bread","pattern":"raster","max_attempts":3,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"bread","offset_z":0.02,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"bread","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "transfer",
      "active_leaf": {"id":"Push","attrs":{"target":"bread","distance":0.1,"direction_deg":180,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"Push","attrs":{"target":"bread","distance":0.1,"direction_deg":180,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "place",
      "active_leaf": {"id":"Wait","attrs":{"timeout_ms":400}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"Wait","attrs":{"timeout_ms":400}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
