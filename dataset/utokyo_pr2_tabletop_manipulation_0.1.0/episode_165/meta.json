{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_165",
  "task_summary": "Detect the bread, grasp it with a pinch grasp, move above the plate, and release it, then retreat.",
  "task_long_description": {
    "overview": "The robot operates on a tabletop with a small plate and a single bread piece. The gripper approaches from the right, aligns its yaw for a pinch, grasps the bread, transports it over the plate, and releases it. The sequence prioritizes reliable perception, careful alignment, and controlled placement, matching the visual progression from approach to release. Timeouts and discrete parameter bins ensure consistent behavior. Although the instruction says “picking a bread,” the frames clearly show a subsequent placement onto the plate, so the tree includes a place-and-release step.",
    "preconditions": ["Workspace is clear around bread and plate", "Camera detects bread location", "Gripper is empty and operational", "Plate pose (center) is known or estimable"],
    "stepwise_plan": ["Detect bread", "Open gripper to pinch width", "Move above bread and align yaw", "Approach precisely and compute grasp pose", "Pick using computed grasp", "Verify object in gripper", "Move above plate", "Place at plate center", "Open gripper to release", "Retreat to a safe height"],
    "success_criteria": ["Bread securely grasped", "Bread placed resting on plate center", "No collisions with plate/table", "Gripper retreats safely"],
    "failure_and_recovery": ["Perception failure → re-detect bread", "Misalignment → re-approach and realign", "Failed grasp → recompute grasp pose and retry pick", "Placement contact issue → lower gently and retry release"],
    "termination": "Terminate when bread is released on the plate and the arm has retreated."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "picking a bread",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["bread", "plate", "tablemat", "robot_gripper"],
  "objects_from_instruction": ["bread"],
  "blackboard_keys": ["bread_grasp", "plate_center"],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"bread","timeout_ms":800},"description":"Perceive bread location before motion."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":800},"description":"Prepare gripper for pinch grasp and for release."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"bread","offset_z":0.05,"timeout_ms":1200},"description":"Move to a safe pregrasp above bread."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":90},"description":"Align gripper yaw with bread orientation."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"bread","tolerance":0.005,"timeout_ms":1200},"description":"Precisely approach and align for grasp."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"bread","strategy":"pinch","result_key":"bread_grasp"},"description":"Compute grasp pose and save to blackboard."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"bread_grasp","timeout_ms":1500},"description":"Execute grasp using computed pose."},
    {"id":"ObjectInGripper","type":"Condition","ports":{"target":"bread"},"description":"Verify the bread is held."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"plate","offset_z":0.05,"timeout_ms":1200},"description":"Transport the grasped bread above the plate."},
    {"id":"PlaceAt","type":"Action","ports":{"pose_key":"plate_center","yaw_deg":0,"press_force":10,"timeout_ms":1500},"description":"Place bread onto plate center."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":800},"description":"Release bread."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Back away to a safe pose."}
  ],
  "tree_stats": {"nodes_total": 13, "actions": 11, "conditions": 1, "depth": 2},
  "failure_modes": ["Bread not detected", "Misalignment causing missed grasp", "Bread slips during lift", "Collision with plate during placement"],
  "recovery_strategy": ["Re-run DetectObject and re-approach", "Recompute grasp pose with same strategy", "Open then re-close gripper with adjusted approach", "Retry placement after slight re-position"],
  "assumptions": ["Although the instruction says 'picking a bread', frames [4]-[8] show a place on the plate; the BT therefore includes placement and release.", "Plate center pose is known as 'plate_center'.", "Yaw 90° approximates bread long-axis alignment."],
  "evaluation_notes": {
    "expected_success_criteria": ["Bread ends on plate and is no longer in gripper", "No collisions with environment", "Retreat completes"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"bread","timeout_ms":800}},
      "active_path_ids": ["MainTree","Sequence","DetectObject"]
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"bread","offset_z":0.05,"timeout_ms":1200}},
      "active_path_ids": ["MainTree","Sequence","MoveAbove(bread)"]
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"bread","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": ["MainTree","Sequence","ApproachAndAlign"]
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"ComputeGraspPose","attrs":{"target":"bread","strategy":"pinch","result_key":"bread_grasp"}},
      "active_path_ids": ["MainTree","Sequence","ComputeGraspPose"]
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"bread_grasp","timeout_ms":1500}},
      "active_path_ids": ["MainTree","Sequence","Pick"]
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"plate","offset_z":0.05,"timeout_ms":1200}},
      "active_path_ids": ["MainTree","Sequence","MoveAbove(plate)"]
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"PlaceAt","attrs":{"pose_key":"plate_center","yaw_deg":0,"press_force":10,"timeout_ms":1500}},
      "active_path_ids": ["MainTree","Sequence","PlaceAt"]
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":800}},
      "active_path_ids": ["MainTree","Sequence","OpenGripper(release)"]
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": ["MainTree","Sequence","Retreat"]
    }
  ]
}
