{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_030",
  "task_summary": "Perceive and grasp the bread, then place it on the nearby white plate and retreat.",
  "task_long_description": {
    "overview": "A PR2-style gripper operates over a green table mat with a white plate on the left and a bread-like orange item to its right. The robot must detect the bread, approach from above, verify visibility and alignment, gently make contact, and close the gripper to pick it up. Visual evidence shows a subsequent transfer to the plate and a release followed by a retreat. The motion should be careful with low gripping force to avoid deforming the bread, while staying within a short action timeout for each step.",
    "preconditions": ["Workspace clear except for plate and bread", "Camera view of target is unobstructed", "Gripper operational and initially open", "Plate position observable"],
    "stepwise_plan": ["Detect bread and plate", "Store a plate-centered place pose", "Open gripper", "Move above bread and align precisely", "Touch down until contact and close gripper softly", "Verify grasp and lift", "Move above plate", "Place bread at plate center and open gripper", "Retreat to a safe height"],
    "success_criteria": ["Bread is lifted without slipping", "Bread is placed fully on the plate surface", "No collision with plate rim or table", "Gripper ends in a safe pose"],
    "failure_and_recovery": ["Target not visible → re-detect or scan", "Misalignment or no contact → re-approach", "Weak grasp/slip → reopen, realign, regrasp", "Placement collision → raise, re-approach and place"],
    "termination": "End after successful release on the plate and final retreat."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "picking a bread",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["bread", "white_plate", "table_mat", "robot_gripper"],
  "objects_from_instruction": ["bread"],
  "blackboard_keys": ["place_pose"],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"bread","timeout_ms":1200},"description":"Locate the bread."},
    {"id":"DetectObject","type":"Action","ports":{"target":"white_plate","timeout_ms":1200},"description":"Locate the plate."},
    {"id":"SetBlackboard","type":"Action","ports":{"key":"place_pose","value":"plate_center"},"description":"Store plate-centered placement pose."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":500},"description":"Ensure gripper is open before approach and release after placing."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"bread","offset_z":0.05,"timeout_ms":1200},"description":"Move to pre-grasp above bread."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"bread","tolerance":0.005,"timeout_ms":1200},"description":"Fine alignment before touch-down."},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"bread"},"description":"Verify bread remains visible prior to contact."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.02,"force_threshold":10.0,"timeout_ms":1200},"description":"Descend gently until contact is detected."},
    {"id":"CloseGripper","type":"Action","ports":{"force":10,"timeout_ms":800},"description":"Softly close gripper to grasp bread."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Check that the grasp is stable."},
    {"id":"ObjectInGripper","type":"Condition","ports":{"target":"bread"},"description":"Confirm bread is held."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":1200},"description":"Lift to a safe height."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"place_pose","offset_z":0.05,"timeout_ms":1200},"description":"Move over the plate center."},
    {"id":"PlaceAt","type":"Action","ports":{"pose_key":"place_pose","yaw_deg":0,"press_force":10,"timeout_ms":1200},"description":"Place bread onto plate center."}
  ],
  "tree_stats": {"nodes_total": 17, "actions": 13, "conditions": 3, "depth": 2},
  "failure_modes": ["Target not detected", "Contact missed leading to failed grasp", "Object slips during lift", "Collision with plate rim during placement"],
  "recovery_strategy": ["Re-run detection/scan", "Re-approach with tighter tolerance", "Reopen and retry grasp with adjusted contact", "Raise, re-center, and place again"],
  "assumptions": ["Instruction says 'picking a bread', while frames show pick-and-place onto the plate; tree follows the visual evidence and includes a placement step.", "Bread is deformable; low gripping force chosen.", "Plate center is used as place pose via blackboard key."],
  "evaluation_notes": {
    "expected_success_criteria": ["Bread ends on plate without damage", "No collisions", "Final retreat clear of objects"],
    "test_scenarios": ["happy path", "object_missing", "grasp_fail", "perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"bread","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"bread","offset_z":0.05,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"bread","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"bread"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.02,"force_threshold":10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":10,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"place_pose","offset_z":0.05,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"PlaceAt","attrs":{"pose_key":"place_pose","yaw_deg":0,"press_force":10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    }
  ]
}
