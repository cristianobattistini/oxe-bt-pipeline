{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_000",
  "task_summary": "Perceive a pink cloth, approach and align, make gentle contact, then push to fold the cloth diagonally before retreating.",
  "task_long_description": {
    "overview": "A PR2 arm manipulates a pink cloth on a wooden tabletop. The goal is to create a fold by pressing on one edge and pushing the fabric diagonally. The robot first detects and localizes the cloth, moves above it with a safe offset, orients the tool yaw for a lateral push, lowers until contact at low force, and executes a single long push to create a fold. It then retreats and pauses, leaving the folded cloth on the table. No grasping is required; folding is achieved via contact and sliding.",
    "preconditions": ["Cloth is visible on table", "Workspace is clear", "End-effector operational", "Camera calibrated and aligned"],
    "stepwise_plan": ["Detect the cloth", "Move above with small vertical offset", "Set yaw to align push direction", "Refine alignment to target edge", "Lower until contact at low force", "Push diagonally to form fold", "Retreat to a safe height", "Brief pause to settle"],
    "success_criteria": ["A visible crease/fold on the cloth", "No collisions or table damage", "Robot retreats to safe pose"],
    "failure_and_recovery": ["If cloth not detected, rescan area", "If contact not detected, lower slightly and retry", "If slip occurs, repeat a shorter push", "If occlusion occurs, adjust yaw and re-align"],
    "termination": "Terminate after the push, retreat, and brief wait complete."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "folding a cloth",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["cloth", "table", "robot_arm", "gripper"],
  "objects_from_instruction": ["cloth"],
  "blackboard_keys": [],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"cloth","timeout_ms":800},"description":"Detect cloth in the workspace."},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"cloth"},"description":"Verify the cloth remains visible."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"cloth","offset_z":0.02,"timeout_ms":1200},"description":"Move to a pre-push pose above the cloth."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":90},"description":"Orient tool for lateral push."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"cloth","tolerance":0.01,"timeout_ms":1200},"description":"Fine alignment to the cloth edge."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":400},"description":"Open gripper to use flat surface for pressing."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.02,"force_threshold":10,"timeout_ms":1200},"description":"Descend until contact with the cloth/table."},
    {"id":"Push","type":"Action","ports":{"target":"cloth_edge","distance":0.2,"direction_deg":225,"timeout_ms":1500},"description":"Execute diagonal push to create the fold."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Back off to a safe distance."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":500},"description":"Pause to let the cloth settle."}
  ],
  "tree_stats": {"nodes_total": 11, "actions": 9, "conditions": 1, "depth": 2},
  "failure_modes": ["Cloth not detected", "No contact sensed when lowering", "Cloth bunches or slips instead of folding", "Push too short/long causing misfold"],
  "recovery_strategy": ["Rescan and re-detect cloth", "Re-attempt lower with slightly increased depth", "Repeat push with adjusted direction and shorter distance", "Re-align and re-orient yaw"],
  "assumptions": ["Folding is achieved via pushing (not pinching) as suggested by frames", "Fold direction approximated as diagonal (225Â°) based on arm motion", "Cloth is free to slide; surface friction moderate"],
  "evaluation_notes": {
    "expected_success_criteria": ["Visible crease and reduced cloth footprint", "No collisions", "Robot ends in safe pose"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"cloth","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"cloth","offset_z":0.02,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"cloth","tolerance":0.01,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.02,"force_threshold":10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"Push","attrs":{"target":"cloth_edge","distance":0.2,"direction_deg":225,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"Push","attrs":{"target":"cloth_edge","distance":0.2,"direction_deg":225,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"Push","attrs":{"target":"cloth_edge","distance":0.2,"direction_deg":225,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Wait","attrs":{"timeout_ms":500}},
      "active_path_ids": []
    }
  ]
}
