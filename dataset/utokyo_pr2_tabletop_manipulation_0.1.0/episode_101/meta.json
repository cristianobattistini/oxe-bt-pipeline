{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_101",
  "task_summary": "PR2 presses and pushes a pink cloth to fold it on the tabletop using contact and planar pushes.",
  "task_long_description": {
    "overview": "A PR2 manipulator folds a pink cloth lying on a wooden table. The robot first localizes the cloth, approaches above it, aligns its end-effector, opens the gripper, and lowers until contact to pin the fabric. It then performs two planar push strokes along the cloth edge to create a fold, retreats, and waits briefly to settle the fabric. The scene involves non-prehensile manipulation (press-and-push) rather than lifting. Timing uses bounded timeouts; precision alignment uses a tight tolerance.",
    "preconditions": ["Cloth is visible on the table", "Workspace is clear of obstacles", "Gripper operational and able to open", "Table surface allows sliding of cloth"],
    "stepwise_plan": ["Detect cloth", "Move above target area", "Align tool to cloth edge", "Open gripper to avoid grasping", "Lower until contact to pin cloth", "Push along the edge twice to fold", "Retreat from workspace", "Wait for settling"],
    "success_criteria": ["A clear fold crease appears", "Cloth footprint is reduced and edges overlap", "Robot ends clear of the cloth without dragging it further"],
    "failure_and_recovery": ["Detection fails → re-scan area", "Misalignment → realign and re-pin", "Insufficient contact → repeat lower-until-contact", "Push stalls due to friction → shorten stroke or retry"],
    "termination": "Terminate after retreat and a short wait once push cycles complete."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "folding a cloth",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["cloth", "table", "pr2_gripper"],
  "objects_from_instruction": ["cloth"],
  "blackboard_keys": [],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"cloth","timeout_ms":1200},"description":"Detect the cloth on the table."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"cloth","offset_z":0.03,"timeout_ms":1500},"description":"Move to a pre-grasp height above the cloth."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"cloth","tolerance":0.01,"timeout_ms":1200},"description":"Precisely align end-effector with the cloth edge."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":400},"description":"Open to avoid grasp; use as a flat pusher."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.03,"force_threshold":2.0,"timeout_ms":1200},"description":"Pin the cloth against the table before pushing."},
    {"id":"Push","type":"Action","ports":{"target":"cloth_edge","distance":0.1,"direction_deg":180,"timeout_ms":1500},"description":"Planar push along cloth edge to fold; repeated twice."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Back away from the work surface."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":400},"description":"Short settle time after manipulation."}
  ],
  "tree_stats": {"nodes_total": 10, "actions": 8, "conditions": 0, "depth": 4},
  "failure_modes": ["Cloth not detected", "Tool misalignment causes skewed fold", "Insufficient contact so fabric slips", "Over-pushing past desired fold line"],
  "recovery_strategy": ["Re-detect and re-align", "Repeat lower-until-contact with slightly deeper limit", "Retry push with shorter distance", "Abort and retreat if collisions sensed"],
  "assumptions": ["Frames suggest press-and-push folding rather than grasp-lift; direction of push assumed to be 180° relative to camera frame.", "Single arm used; no bimanual folding."],
  "evaluation_notes": {
    "expected_success_criteria": ["Visible crease and reduced cloth area", "End-effector retreats safely", "No cloth snagging"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"cloth","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"cloth","offset_z":0.03,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"cloth","tolerance":0.01,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "place",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.03,"force_threshold":2.0,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"Push","attrs":{"target":"cloth_edge","distance":0.1,"direction_deg":180,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"Push","attrs":{"target":"cloth_edge","distance":0.1,"direction_deg":180,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"Push","attrs":{"target":"cloth_edge","distance":0.1,"direction_deg":180,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Wait","attrs":{"timeout_ms":400}},
      "active_path_ids": []
    }
  ]
}
