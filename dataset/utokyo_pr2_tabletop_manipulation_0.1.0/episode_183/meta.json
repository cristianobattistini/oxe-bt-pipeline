{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_183",
  "task_summary": "Detect the pink cloth, grasp a corner with a pinch, move it to a fold position, press to crease, optionally push the edge to finish the fold, and retreat.",
  "task_long_description": {
    "overview": "A PR2 arm folds a pink cloth on a wooden tabletop by grasping a corner and placing it over the opposite side to form a crease. The robot first scans and detects the cloth, approaches with an open gripper, aligns precisely, and computes a corner pinch grasp. After picking, it moves to a predefined fold pose, presses to set the crease, performs a short push along the cloth edge to complete the fold, and then retreats to a safe height. Timing bins are moderate to avoid excessive speed, and tolerances prioritize precise alignment on a deformable object.",
    "preconditions": [
      "Cloth is visible on the table within the workspace",
      "Gripper is empty and operational",
      "Fold target pose is defined on the blackboard",
      "No obstacles above the table plane"
    ],
    "stepwise_plan": [
      "Scan and detect the cloth and its corner",
      "Approach above the cloth with open gripper and align",
      "Compute corner pinch grasp and pick the cloth",
      "Move to the fold position and place the corner",
      "Press to crease and push edge slightly to finish fold",
      "Retreat to a safe distance"
    ],
    "success_criteria": [
      "Cloth corner is placed over itself at the fold pose",
      "A visible crease is created and the cloth remains stationary",
      "Arm ends in a safe, non-contact pose"
    ],
    "failure_and_recovery": [
      "If cloth not detected, rescan the table area",
      "If grasp fails, recompute grasp and retry with adjusted approach",
      "If cloth slips during transfer, stop and regrasp at a new corner",
      "If push causes drift, re-align and re-press at fold pose"
    ],
    "termination": "Terminate after successful press/push at fold pose followed by a safe retreat."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "folding a cloth",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["cloth", "table", "pr2_arm", "gripper"],
  "objects_from_instruction": ["cloth"],
  "blackboard_keys": ["grasp_cloth_corner", "fold_position"],
  "node_specs": [
    {"id":"ScanForTarget","type":"Action","ports":{"target":"cloth","pattern":"grid","max_attempts":3,"timeout_ms":1200},"description":"Scan the workspace using a grid pattern to localize the cloth."},
    {"id":"DetectObject","type":"Action","ports":{"target":"cloth","timeout_ms":800},"description":"Confirm the cloth pose is detectable."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"cloth","offset_z":0.08,"timeout_ms":1200},"description":"Move to a pregrasp height above the cloth."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":800},"description":"Open the gripper in preparation for a pinch grasp."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"cloth","tolerance":0.005,"timeout_ms":1200},"description":"Approach and align to the cloth corner with tight tolerance."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"cloth_corner","strategy":"pinch","result_key":"grasp_cloth_corner"},"description":"Compute a pinch grasp on a cloth corner and store the result key."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"grasp_cloth_corner","timeout_ms":1500},"description":"Execute the pinch grasp to lift the cloth corner."},
    {"id":"MoveTo","type":"Action","ports":{"target":"fold_position","timeout_ms":1200},"description":"Transfer the grasped corner to the fold target."},
    {"id":"PlaceAt","type":"Action","ports":{"pose_key":"fold_position","yaw_deg":0,"press_force":10,"timeout_ms":1200},"description":"Place the corner at the fold pose and press to crease."},
    {"id":"Push","type":"Action","ports":{"target":"cloth_edge","distance":0.1,"direction_deg":180,"timeout_ms":1200},"description":"Short push along the edge to complete the fold and set the crease."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Retreat to a safe distance after folding."}
  ],
  "tree_stats": {"nodes_total": 12, "actions": 11, "conditions": 0, "depth": 2},
  "failure_modes": [
    "Cloth not detected due to lighting or pose",
    "Grasp fails or grasps multiple layers",
    "Cloth slips during transfer to fold pose",
    "Press/push causes cloth to drift instead of creasing"
  ],
  "recovery_strategy": [
    "Rescan with grid pattern and adjust viewpoint",
    "Recompute grasp pose and retry pinch on a different corner",
    "Pause, re-align, and regrasp before resuming transfer",
    "Re-press at fold pose and reduce push distance"
  ],
  "assumptions": [
    "Frames suggest pressing and pushing may be used rather than a full pick, but a pinch grasp is included to represent corner handling needed for folding.",
    "Fold target pose is predefined on the blackboard and consistent with table coordinates."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Corner lies over the opposite side and crease is visible",
      "Robot arm ends without contacting the cloth"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"cloth","pattern":"grid","max_attempts":3,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"cloth","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"cloth","offset_z":0.08,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"cloth","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"grasp_cloth_corner","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"MoveTo","attrs":{"target":"fold_position","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"PlaceAt","attrs":{"pose_key":"fold_position","yaw_deg":0,"press_force":10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"Push","attrs":{"target":"cloth_edge","distance":0.1,"direction_deg":180,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
