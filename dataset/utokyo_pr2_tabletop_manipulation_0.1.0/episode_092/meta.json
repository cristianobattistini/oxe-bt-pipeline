{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_092",
  "task_summary": "Perceive grapes, grasp a small grape (or cluster tip), transfer to the plate, release, and retreat.",
  "task_long_description": {
    "overview": "A PR2 end-effector approaches a grape cluster placed near the tableâ€™s right edge and a white plate at the left. The robot must detect the target, plan a precise pinch grasp, secure the grape, move toward the plate, and place it gently before retreating. Frames show the arm entering from the right, contacting the grapes, moving across the table, and leaving the grape(s) on the plate. The behavior emphasizes reliable perception, precise alignment, gentle contact near the plate, and safe disengagement.",
    "preconditions": ["Workspace clear except for plate and grapes", "Gripper operational and homed", "Camera provides target visibility", "Plate pose roughly known"],
    "stepwise_plan": ["Check/obtain visibility of grape_bunch", "Move above grapes and compute a pinch grasp", "Open gripper, align, and execute Pick", "Verify grasp stability", "Move to a plate prepose and above the plate", "Lower until contact and release", "Retreat and pause"],
    "success_criteria": ["A grape or small portion of the cluster rests on the plate", "No collisions or spills", "Gripper empty at the end", "Arm safely retracted"],
    "failure_and_recovery": ["If not visible, re-detect target", "If grasp unstable, replan and regrasp", "If contact too early, retreat slightly and retry lowering", "If placement misses plate, re-approach and place again"],
    "termination": "Terminate after releasing onto the plate and performing a short wait with the arm retracted."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "Arm with grasped grapes beginning the cross-table transfer, clearly showing post-grasp motion toward the plate.",
        "predicts_next": "Approach above plate and placement sequence will follow.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "picking a grape",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["grape_bunch","grape","plate","table","robot_gripper"],
  "objects_from_instruction": ["grape"],
  "blackboard_keys": ["grasp_grape"],
  "node_specs": [
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"grape_bunch"},"description":"Checks if the grape cluster is visible."},
    {"id":"DetectObject","type":"Action","ports":{"target":"grape_bunch","timeout_ms":800},"description":"Runs perception to locate grapes if not already visible."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"grape_bunch","offset_z":0.05,"timeout_ms":1200},"description":"Moves to a pregrasp height above the grapes."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"grape","strategy":"pinch","result_key":"grasp_grape"},"description":"Computes a pinch grasp for a small grape or cluster tip."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.06,"timeout_ms":800},"description":"Opens gripper to narrow width for precise grasp."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"grape_bunch","tolerance":0.005,"timeout_ms":1200},"description":"Aligns to the computed grasp with tight tolerance."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"grasp_grape","timeout_ms":1200},"description":"Executes the grasp and lifts slightly."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Confirms the grasp is secure."},
    {"id":"MoveTo","type":"Action","ports":{"target":"plate_prepose","timeout_ms":1500},"description":"Transits toward a plate pre-placement pose."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"plate","offset_z":0.05,"timeout_ms":1200},"description":"Positions above the plate for safe lowering."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.05,"force_threshold":10,"timeout_ms":1200},"description":"Gently descends until light contact with plate or grapes."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.08,"timeout_ms":800},"description":"Releases the grape(s) onto the plate."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":1200},"description":"Backs away from the plate."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":400},"description":"Short guard wait after placement."}
  ],
  "tree_stats": {"nodes_total": 16, "actions": 12, "conditions": 2, "depth": 3},
  "failure_modes": ["Target not detected or occluded", "Pinch grasp slips on smooth skin", "Collision with plate rim during lowering", "Object released outside plate center"],
  "recovery_strategy": ["Retry detection; adjust viewpoint slightly", "Recompute grasp with modified approach and regrasp", "Raise, re-center above plate, lower again slowly", "Re-collect by regrasping and repeating placement"],
  "assumptions": ["Frames suggest moving a small bunch onto the plate; instruction says 'picking a grape'. We prioritize frames and treat the grasp as a small grape or cluster tip."],
  "evaluation_notes": {
    "expected_success_criteria": ["Grape(s) present on plate", "No excessive contact forces", "End-effector clear of the plate area"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"grape_bunch","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"grape_bunch","offset_z":0.05,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"grasp_grape","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "transfer",
      "active_leaf": {"id":"MoveTo","attrs":{"target":"plate_prepose","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "place",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.05,"force_threshold":10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.08,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Wait","attrs":{"timeout_ms":400}},
      "active_path_ids": []
    }
  ]
}
