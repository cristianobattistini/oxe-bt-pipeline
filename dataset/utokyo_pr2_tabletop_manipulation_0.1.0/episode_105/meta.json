{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_105",
  "task_summary": "Fold the pink cloth on the tabletop using a push-based manipulation: perceive the cloth, approach and align, make light contact, push twice to flip/overlap the fabric, then retreat.",
  "task_long_description": {
    "overview": "A PR2-style arm manipulates a pink cloth lying on a wooden tabletop. The goal is to create a fold by pushing the cloth so one part overlaps another, without grasping. The robot first perceives and localizes the cloth, then approaches above it and aligns its end-effector. After gently making contact with the surface, it executes two directional pushes to form the fold, waits briefly for the fabric to settle, and retreats to a safe pose. The method prioritizes gentle contact and planar pushing rather than lifting.",
    "preconditions": [
      "Workspace is clear around the cloth",
      "Camera view of cloth is unobstructed",
      "Robot reachable workspace includes the cloth area",
      "Surface friction sufficient for push-based folding"
    ],
    "stepwise_plan": [
      "Detect the cloth on the table.",
      "Move above the cloth and align to the intended push direction.",
      "Lower until light contact with the table/cloth is detected.",
      "Push the cloth along the chosen direction to initiate the fold.",
      "Repeat the push to complete/crease the fold.",
      "Retreat to a safe distance and wait briefly."
    ],
    "success_criteria": [
      "Cloth shows a visible overlap indicating a fold",
      "No object slippage outside workspace",
      "End-effector clears the cloth at the end"
    ],
    "failure_and_recovery": [
      "Perception fails: retry detection up to three times",
      "Misalignment: re-approach and align again",
      "Insufficient fold from first push: perform an additional push cycle",
      "Obstacle/contact too strong: retreat and re-plan direction"
    ],
    "termination": "Tree completes after pushes, retreat, and wait; or terminates early on unrecoverable detection failure."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "folding a cloth",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["pink_cloth","table","robot_arm","gripper"],
  "objects_from_instruction": ["cloth"],
  "blackboard_keys": [],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"cloth","timeout_ms":1500},"description":"Detect cloth in the scene."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"cloth","offset_z":0.05,"timeout_ms":1500},"description":"Move above the cloth with safe clearance."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"cloth","tolerance":0.005,"timeout_ms":1500},"description":"Align end-effector to push direction."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.01,"force_threshold":10.0,"timeout_ms":1200},"description":"Lower to make gentle contact with the cloth/table."},
    {"id":"Push","type":"Action","ports":{"target":"cloth","distance":0.1,"direction_deg":180,"timeout_ms":1500},"description":"Execute planar push to fold the cloth."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":1200},"description":"Back off to a safe distance."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":400},"description":"Allow fabric to settle."}
  ],
  "tree_stats": {"nodes_total": 10, "actions": 7, "conditions": 0, "depth": 3},
  "failure_modes": [
    "Cloth not detected due to lighting/pose",
    "End-effector misaligned causing skewed push",
    "Cloth bunches or sticks preventing fold",
    "Arm collides with table edge or camera occlusion"
  ],
  "recovery_strategy": [
    "Retry detection up to three attempts",
    "Re-approach and realign before pushing again",
    "Execute an additional push cycle if fold depth is insufficient",
    "Retreat and re-plan push direction if excessive resistance"
  ],
  "assumptions": [
    "Frames show approach and near-contact without clear lifting; thus a push-based fold is chosen.",
    "Cloth is lightweight and fold can be achieved via planar pushes rather than grasping."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Final cloth configuration displays a creased overlap after the second push",
      "Robot ends in a safe, retracted pose"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"cloth","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"cloth","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"cloth","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "transfer",
      "active_leaf": {"id":"Push","attrs":{"target":"cloth","distance":0.1,"direction_deg":180,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"Push","attrs":{"target":"cloth","distance":0.1,"direction_deg":180,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "place",
      "active_leaf": {"id":"Wait","attrs":{"timeout_ms":400}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    }
  ]
}
