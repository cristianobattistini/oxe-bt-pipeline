{
  "dataset_id": "utokyo_pr2_tabletop_manipulation_0.1.0",
  "episode_id": "episode_181",
  "task_summary": "Detect the bread, grasp it securely, lift, move over the saucer, place it down, release, and retreat.",
  "task_long_description": {
    "overview": "A PR2 end-effector approaches a bread-like item on a tabletop with a small saucer nearby. The behavior first ensures the bread is detected, then performs a side grasp with careful approach and low contact force. After confirming a stable grasp, it lifts the bread, navigates toward the saucer, and places the item at the saucer center before releasing and retreating. Visual evidence across the nine frames shows approach, grasp, transfer, placement, and withdrawal, so the sequence is tuned for reliable pick-and-place on a flat surface.",
    "preconditions": [
      "Work area is clear and reachable by the manipulator",
      "Perception can detect targets: 'bread' and 'plate'",
      "Gripper calibrated and functioning with width 0.09",
      "Plate pose approximately known or discoverable"
    ],
    "stepwise_plan": [
      "Open gripper and detect bread",
      "Move above bread, compute grasp, and align",
      "Lower gently and close gripper to grasp",
      "Lift and verify object held",
      "Detect plate and move above it",
      "Place at plate center, open gripper, and retreat"
    ],
    "success_criteria": [
      "Bread is deposited on the saucer with visible release",
      "No slips during transfer; grasp remains stable",
      "End-effector retreats to a safe height"
    ],
    "failure_and_recovery": [
      "If bread not visible, run detection routine again",
      "If grasp unstable, re-open, re-approach, and regrasp",
      "If plate not detected, rescan and re-center above plate"
    ],
    "termination": "Terminate after successful place and retreat or upon unrecoverable detection/grasp failures."
  },
  "frame_ranking": {
    "order": ["frame_5","frame_6","frame_4","frame_3","frame_7","frame_2","frame_1","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.20, "frame_1": 0.35, "frame_2": 0.48, "frame_3": 0.62,
      "frame_4": 0.78, "frame_5": 0.92, "frame_6": 0.88, "frame_7": 0.55, "frame_8": 0.25
    },
    "rationale_per_frame": {
      "frame_5": {
        "now_evidence": "Object appears in gripper and is being transported toward the saucer, confirming successful grasp and transfer.",
        "predicts_next": "Placement onto the saucer is imminent with downward motion expected.",
        "uncertainty_reduction": "high"
      },
      "frame_6": {
        "now_evidence": "Bread is above saucer with clear alignment for placement.",
        "predicts_next": "Release after gentle placement.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "picking a bread",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["bread","plate","table","gripper"],
  "objects_from_instruction": ["bread"],
  "blackboard_keys": ["bread_grasp","plate_center"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":"0.09","timeout_ms":"800"},"description":"Prepare gripper for approach."},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"bread"},"description":"Quick visibility check for bread."},
    {"id":"DetectObject","type":"Action","ports":{"target":"bread","timeout_ms":"1200"},"description":"Run perception to localize bread."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"bread","offset_z":"0.05","timeout_ms":"1200"},"description":"Pregrasp hover above bread."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"bread","strategy":"side","result_key":"bread_grasp"},"description":"Compute grasp for bread."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"bread","tolerance":"0.01","timeout_ms":"1500"},"description":"Precise alignment before contact."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":"0.05","force_threshold":"10","timeout_ms":"1200"},"description":"Controlled descent to touch bread."},
    {"id":"CloseGripper","type":"Action","ports":{"force":"20","timeout_ms":"800"},"description":"Grip the bread."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Confirm stable grasp."},
    {"id":"MoveDelta","type":"Action","ports":{"axis":"z","dist":"0.1","timeout_ms":"1200"},"description":"Lift bread from table."},
    {"id":"ObjectInGripper","type":"Condition","ports":{"target":"bread"},"description":"Verify bread is held."},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"plate"},"description":"Check if plate is visible."},
    {"id":"DetectObject","type":"Action","ports":{"target":"plate","timeout_ms":"1200"},"description":"Localize plate if needed."},
    {"id":"MoveTo","type":"Action","ports":{"target":"plate","timeout_ms":"1500"},"description":"Move toward plate."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"plate","offset_z":"0.05","timeout_ms":"1200"},"description":"Hover over plate."},
    {"id":"SetBlackboard","type":"Action","ports":{"key":"plate_center","value":"plate_center"},"description":"Provide place pose key."},
    {"id":"PlaceAt","type":"Action","ports":{"pose_key":"plate_center","yaw_deg":"0","press_force":"10","timeout_ms":"1200"},"description":"Place bread on saucer."},
    {"id":"OpenGripper","type":"Action","ports":{"width":"0.09","timeout_ms":"800"},"description":"Release bread."},
    {"id":"Retreat","type":"Action","ports":{"distance":"0.1","timeout_ms":"1200"},"description":"Back away safely."}
  ],
  "tree_stats": {"nodes_total": 22, "actions": 15, "conditions": 4, "depth": 4},
  "failure_modes": ["Bread not detected", "Misalignment causing missed grasp", "Object slip after grasp", "Plate not detected for placement"],
  "recovery_strategy": ["Fallback to DetectObject when not visible", "Re-approach with tighter alignment", "Re-open and regrasp with adjusted pose", "Rescan scene for plate and replan"],
  "assumptions": ["Frames depict a full pick-and-place into a saucer; instruction only says 'picking a bread', so the BT adds a placement phase to match visual evidence."],
  "evaluation_notes": {
    "expected_success_criteria": ["Bread ends on saucer; gripper open; robot retreated"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"bread","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"bread","offset_z":0.05,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"bread","tolerance":0.01,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.05,"force_threshold":10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":20,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"MoveTo","attrs":{"target":"plate","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"PlaceAt","attrs":{"pose_key":"plate_center","yaw_deg":0,"press_force":10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    }
  ]
}
