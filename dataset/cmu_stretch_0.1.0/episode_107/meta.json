{
  "dataset_id": "cmu_stretch_0.1.0",
  "episode_id": "episode_107",
  "task_summary": "Detect the dishwasher handle, approach and align, grasp the handle, pull to open the hinged dishwasher door, and retreat while releasing.",
  "task_long_description": {
    "overview": "A mobile manipulator opens a front-hinged dishwasher. The scene shows a stainless dishwasher with a horizontal bar handle near adjacent cabinetry. The robot must perceive the handle, approach the front, orient the tool, align precisely, grasp, and pull to open the door. After opening, it should verify the door state, back off to a safe distance, and release the handle. Timeouts and tolerances are conservative to avoid collisions in a tight kitchen environment.",
    "preconditions": ["Dishwasher is reachable from the robot's current base pose", "Handle is unobstructed and visible or scannable", "Gripper operational and empty", "Adequate workspace clearance in front of the dishwasher"],
    "stepwise_plan": ["Perceive or scan for the dishwasher handle", "Move to the dishwasher front", "Open gripper and set yaw to align with bar handle", "Approach and align to the handle with tight tolerance", "Close the gripper to secure the handle", "Execute opening via container action on the hinged door", "Confirm door is open", "Retreat and release the handle"],
    "success_criteria": ["Door angle increases from closed to open state", "No collisions with fridge or cabinets", "Gripper maintains stable grasp during pull", "Robot retreats to a safe distance after opening"],
    "failure_and_recovery": ["Handle not detected → scan pattern search", "Misalignment → re-approach and align", "Grasp slip → reopen gripper, realign, and regrasp", "Door resists opening → retry open with slight pose correction"],
    "termination": "Terminate when door is confirmed open and the robot has retreated and released the handle."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "pull open a dishwasher",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["dishwasher_door", "dishwasher_handle", "kitchen_cabinet", "fridge", "robot_gripper"],
  "objects_from_instruction": ["dishwasher"],
  "blackboard_keys": [],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"dishwasher_handle","timeout_ms":1200},"description":"Detect the dishwasher handle."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"dishwasher_handle","pattern":"raster","max_attempts":3,"timeout_ms":1500},"description":"Search pattern if handle not immediately detected."},
    {"id":"MoveTo","type":"Action","ports":{"target":"dishwasher_front","timeout_ms":1500},"description":"Navigate/position end effector to dishwasher front."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":800},"description":"Prepare gripper for bar handle."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":90},"description":"Align tool with horizontal bar handle."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"dishwasher_handle","tolerance":0.005,"timeout_ms":1500},"description":"Close in and align to grasp pose."},
    {"id":"CloseGripper","type":"Action","ports":{"force":20,"timeout_ms":1200},"description":"Grasp the handle with moderate force."},
    {"id":"OpenContainer","type":"Action","ports":{"target":"dishwasher_door","container_type":"hinged_door","timeout_ms":1500},"description":"Pull to open the hinged dishwasher door."},
    {"id":"ContainerOpen","type":"Condition","ports":{"target":"dishwasher_door"},"description":"Verify that the door is open."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":1200},"description":"Back away from the door."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":800},"description":"Release the handle after retreat."}
  ],
  "tree_stats": {"nodes_total": 13, "actions": 10, "conditions": 1, "depth": 3},
  "failure_modes": ["Handle not detected due to glare/pose", "Alignment error causing missed grasp", "Gripper slip on smooth bar", "Door jam or excessive resistance", "Collision with adjacent cabinetry or fridge"],
  "recovery_strategy": ["Fallback scan to reacquire handle", "Re-align with tighter tolerance and reset yaw", "Reopen gripper and regrasp", "Retry open after small pose adjustment", "Abort and retreat on high contact forces"],
  "assumptions": ["Dishwasher door behaves as a hinged door that pulls down/outward", "Horizontal bar handle visible in multiple frames; OpenContainer models the pull motion", "Contact sheet indicates robot on right side of dishwasher; yaw 90° aligns gripper with bar."],
  "evaluation_notes": {
    "expected_success_criteria": ["ContainerOpen returns success", "Door angle increased and maintained", "No collisions during approach or pull"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"dishwasher_handle","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveTo","attrs":{"target":"dishwasher_front","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"dishwasher_handle","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":20,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"dishwasher_door","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"dishwasher_door","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"dishwasher_door","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
