{
  "dataset_id": "cmu_stretch_0.1.0",
  "episode_id": "episode_048",
  "task_summary": "Detect the pot lid, align for a top pinch grasp, pick it up, lift vertically, and retreat with the lid clear of the pot.",
  "task_long_description": {
    "overview": "A mobile manipulator approaches a small pot with a metal lid on a black cube pedestal. The goal is to lift the lid off the pot. The robot must perceive the lid, approach from above, align its gripper, grasp the handle with a precise pinch, and lift straight up to avoid collisions with the pot rim. The scene shows progressive approach, contact, and lifting. Care is taken to orient the tool yaw and use a tight alignment tolerance before grasping.",
    "preconditions": [
      "Robot has free workspace around the pot",
      "Gripper operational and can open to 0.09 m",
      "Camera view of the lid available",
      "Pot is stationary on the table"
    ],
    "stepwise_plan": [
      "Perceive and localize the pot lid.",
      "Open the gripper and move to a pose above the lid.",
      "Set tool yaw and approach while aligning precisely.",
      "Compute a pinch grasp on the lid handle.",
      "Execute the pick.",
      "Lift upward along the z-axis to clear the rim.",
      "Retreat to a safe distance holding the lid."
    ],
    "success_criteria": [
      "Lid securely held in the gripper",
      "Lid lifted clear of the pot without collision",
      "Robot retreats to a safe pose with lid"
    ],
    "failure_and_recovery": [
      "Perception failure: retry detection up to 3 times.",
      "Misalignment or slip: reopen gripper, realign, recompute grasp, and retry pick.",
      "Collision risk: stop approach and lift slightly before reattempt."
    ],
    "termination": "Tree succeeds when the lid is grasped and the robot has lifted and retreated to a safe distance."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "lift up a lid from the pot",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["robot_arm","gripper","pot","pot_lid","lid_handle","table","pedestal_block"],
  "objects_from_instruction": ["lid","pot"],
  "blackboard_keys": ["lid_grasp"],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"pot_lid","timeout_ms":800},"description":"Find the lid in the scene."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":500},"description":"Prepare for grasp."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"pot_lid","offset_z":0.05,"timeout_ms":1500},"description":"Position above the lid."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":90},"description":"Orient gripper for pinch."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"pot_lid","tolerance":0.005,"timeout_ms":1500},"description":"Refine alignment before grasp."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"pot_lid","strategy":"pinch","result_key":"lid_grasp"},"description":"Compute pinch grasp on handle."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"lid_grasp","timeout_ms":1500},"description":"Close and pick the lid."},
    {"id":"MoveDelta","type":"Action","ports":{"axis":"z","dist":0.1,"timeout_ms":1200},"description":"Lift lid vertically."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.2,"timeout_ms":1500},"description":"Back off to a safe pose."}
  ],
  "tree_stats": {"nodes_total": 11, "actions": 9, "conditions": 0, "depth": 4},
  "failure_modes": [
    "Lid not detected due to glare or occlusion",
    "Insufficient alignment causing collision with pot rim",
    "Grasp slip on smooth handle",
    "Lift not vertical causing scraping"
  ],
  "recovery_strategy": [
    "Retry detection (decorator)",
    "Re-open gripper, re-approach and re-align",
    "Adjust yaw and recompute grasp, then retry pick",
    "Abort motion and raise slightly before reattempting"
  ],
  "assumptions": [
    "Frames show top grasp of a small metal lid; no twisting required.",
    "Lid has a protruding handle suitable for pinch strategy.",
    "Instruction and frames agree on lifting action; final separation is partial but indicates upward motion."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "ObjectInGripper('pot_lid') true after Pick",
      "No contact spikes beyond threshold during lift",
      "Final pose has lid clear of pot by >0.05 m"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"pot_lid","timeout_ms":800}},
      "active_path_ids": ["MainTree","Sequence","RetryUntilSuccessful","DetectObject"]
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"pot_lid","timeout_ms":800}},
      "active_path_ids": ["MainTree","Sequence","RetryUntilSuccessful","DetectObject"]
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"pot_lid","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": ["MainTree","Sequence","MoveAbove"]
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"pot_lid","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": ["MainTree","Sequence","ApproachAndAlign"]
    },
    {
      "frame": "frame_4",
      "phase": "verify",
      "active_leaf": {"id":"ComputeGraspPose","attrs":{"target":"pot_lid","strategy":"pinch","result_key":"lid_grasp"}},
      "active_path_ids": ["MainTree","Sequence","ComputeGraspPose"]
    },
    {
      "frame": "frame_5",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"pot_lid","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": ["MainTree","Sequence","ApproachAndAlign"]
    },
    {
      "frame": "frame_6",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"lid_grasp","timeout_ms":1500}},
      "active_path_ids": ["MainTree","Sequence","Pick"]
    },
    {
      "frame": "frame_7",
      "phase": "transfer",
      "active_leaf": {"id":"MoveDelta","attrs":{"axis":"z","dist":0.1,"timeout_ms":1200}},
      "active_path_ids": ["MainTree","Sequence","MoveDelta"]
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.2,"timeout_ms":1500}},
      "active_path_ids": ["MainTree","Sequence","Retreat"]
    }
  ]
}
