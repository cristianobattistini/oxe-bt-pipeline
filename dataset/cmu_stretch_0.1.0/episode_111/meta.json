{
  "dataset_id": "cmu_stretch_0.1.0",
  "episode_id": "episode_111",
  "task_summary": "Detect the drawer handle, approach and align, grasp the handle, pull to open the drawer, then retreat and release.",
  "task_long_description": {
    "overview": "A mobile manipulator with a parallel gripper operates in a kitchenette scene with wooden cabinets under a countertop. The goal is to open a drawer by grasping its horizontal handle and pulling. The contact sheet shows the gripper approaching the handle, securing it, and drawing the drawer out. The behavior tree sequences perception, approach, alignment, grasping, opening, and retreat. Constraints include limited workspace near the fridge, avoiding collisions with the cabinet face and counter, and maintaining a stable grasp during the pull.",
    "preconditions": [
      "Robot positioned in front of the cabinet within reachable workspace",
      "Drawer handle visible or detectable",
      "No obstacles blocking drawer motion",
      "Gripper and wrist operational"
    ],
    "stepwise_plan": [
      "Detect the drawer handle.",
      "Move to a pre-grasp pose near the handle and open the gripper.",
      "Approach and align precisely to the handle.",
      "Close the gripper to secure the handle; set wrist yaw to align with pull.",
      "Execute an open action to pull the drawer outward.",
      "Retreat and release the handle."
    ],
    "success_criteria": [
      "Drawer translates outward creating a visible opening gap",
      "No collisions with cabinet or countertop",
      "Handle remains secured during pull and is released at the end"
    ],
    "failure_and_recovery": [
      "Handle not detected: re-run detection or adjust viewpoint",
      "Misalignment: reopen gripper and redo approach-and-align",
      "Grip slip: increase approach precision and retry grasp",
      "Drawer jam: stop pull and retry with smaller motion after re-alignment"
    ],
    "termination": "When the drawer has been opened (gap visible) and the robot has retreated and released the handle."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "open drawer",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["kitchen_drawer","drawer_handle","cabinet","countertop","tissue_box","cup","fridge","robot_arm","gripper"],
  "objects_from_instruction": ["drawer"],
  "blackboard_keys": [],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"drawer_handle","timeout_ms":800},"description":"Detect the drawer handle in the scene."},
    {"id":"MoveTo","type":"Action","ports":{"target":"drawer_pregrasp","timeout_ms":1200},"description":"Move arm to pre-grasp pose near the handle."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":500},"description":"Open gripper to maximum width for handle capture."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"drawer_handle","tolerance":0.01,"timeout_ms":1200},"description":"Approach the handle and align the TCP precisely."},
    {"id":"CloseGripper","type":"Action","ports":{"force":20,"timeout_ms":800},"description":"Close gripper to secure the handle with moderate force."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":90},"description":"Rotate wrist yaw to align with pulling direction."},
    {"id":"OpenContainer","type":"Action","ports":{"target":"kitchen_drawer","container_type":"drawer","timeout_ms":1500},"description":"Open the drawer by pulling along its motion axis."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Back off from the drawer to a safe distance."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.08,"timeout_ms":500},"description":"Release the handle after opening."}
  ],
  "tree_stats": {"nodes_total": 10, "actions": 9, "conditions": 0, "depth": 2},
  "failure_modes": [
    "Handle not detected due to lighting or occlusion",
    "TCP misalignment causing missed grasp",
    "Slip during pull leading to incomplete opening",
    "Drawer mechanical resistance or collision with surroundings"
  ],
  "recovery_strategy": [
    "Reattempt detection from slightly different pose",
    "Re-open gripper and re-run approach-and-align",
    "Increase precision (tighter tolerance) and retry close",
    "Abort pull, retreat, and try a shorter pull sequence"
  ],
  "assumptions": [
    "Frames show a wooden cabinet drawer with a horizontal bar handle; this matches the instruction.",
    "Pull direction is outward; wrist yaw set to 90° aligns with handle orientation.",
    "‘kitchen_drawer’ and ‘drawer_pregrasp’ are symbolic targets resolved by the robot controller."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Drawer extends outward visibly by several centimeters",
      "No significant collision forces detected",
      "Robot ends in a safe, released state"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"drawer_handle","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveTo","attrs":{"target":"drawer_pregrasp","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"drawer_handle","tolerance":0.01,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":20,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"SetTCPYaw","attrs":{"yaw_deg":90}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"kitchen_drawer","container_type":"drawer","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.08,"timeout_ms":500}},
      "active_path_ids": []
    }
  ]
}
