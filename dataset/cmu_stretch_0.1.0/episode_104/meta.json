{
  "dataset_id": "cmu_stretch_0.1.0",
  "episode_id": "episode_104",
  "task_summary": "Approach the green bin, grasp the lid edge, lift it to open, and retreat.",
  "task_long_description": {
    "overview": "A mobile manipulator interacts with a green garbage bin under a table edge. The goal is to lift open the hinged lid. The arm must first localize the lid, approach from above without colliding with the table or bin rim, compute a pinch grasp on the front edge, close the gripper, and raise the lid. After lifting, the robot should retreat to avoid the lid falling back or colliding with the end effector. Tight alignment and gentle motion are required to avoid pushing the bin.",
    "preconditions": ["Bin is within reachable workspace", "Lid has a graspable edge", "No obstacles block approach from above", "Gripper operational and empty"],
    "stepwise_plan": [
      "Verify/scan for the green bin lid and detect it",
      "Move above the lid and align to the edge",
      "Open gripper and compute a pinch grasp on the lid edge",
      "Execute the grasp and lift the lid upward",
      "Retreat to a safe distance while keeping the lid open momentarily"
    ],
    "success_criteria": ["Lid rotates upward and remains open when released", "No collisions with table or bin body", "Grasp is secure during lift", "Robot ends in a safe pose"],
    "failure_and_recovery": [
      "Perception failure: rescan using an arc pattern and re-detect",
      "Misalignment: re-approach with tighter tolerance",
      "Grasp slip: reopen, recompute grasp, retry pick",
      "Obstacle contact: retreat, raise approach height, retry"
    ],
    "termination": "Terminate after successful lift and retreat or after maximum retries/failures are reached."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "lift open green garbage can lid",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["green_bin", "green_bin_lid", "table", "robot_gripper"],
  "objects_from_instruction": ["green garbage can lid"],
  "blackboard_keys": ["lid_grasp"],
  "node_specs": [
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"green_bin_lid"},"description":"Check if lid is already visible."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"green_bin_lid","pattern":"arc","max_attempts":3,"timeout_ms":1200},"description":"Scan in an arc to locate the lid if not visible."},
    {"id":"DetectObject","type":"Action","ports":{"target":"green_bin_lid","timeout_ms":1200},"description":"Detect and localize the green bin lid."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"green_bin_lid","offset_z":0.10,"timeout_ms":1200},"description":"Move above the lid at a safe vertical offset."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"green_bin_lid_edge","tolerance":0.005,"timeout_ms":1200},"description":"Fine approach and align to the lid edge."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":800},"description":"Prepare gripper for a pinch grasp."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"green_bin_lid_edge","strategy":"pinch","result_key":"lid_grasp"},"description":"Compute grasp pose for the lid edge."},
    {"id":"PoseAvailable","type":"Condition","ports":{"key":"lid_grasp"},"description":"Verify that the grasp pose is available."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"lid_grasp","timeout_ms":1200},"description":"Close gripper to grasp the lid edge."},
    {"id":"MoveDelta","type":"Action","ports":{"axis":"z","dist":0.10,"timeout_ms":1200},"description":"Lift upward to open the lid."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":1200},"description":"Back away to a safe distance."}
  ],
  "tree_stats": {"nodes_total": 13, "actions": 9, "conditions": 2, "depth": 3},
  "failure_modes": ["Lid not detected", "Collision with table/bin rim", "Grasp fails or slips", "Insufficient lift to disengage hinge"],
  "recovery_strategy": ["Rescan and re-detect", "Raise approach height and realign", "Recompute grasp and retry pick", "Increase lift distance then retreat"],
  "assumptions": ["Lid has a graspable edge suitable for pinch grasp", "The hinge allows upward rotation with modest lift", "Frames show approach, contact, lift, and retreat consistent with the plan"],
  "evaluation_notes": {
    "expected_success_criteria": ["Visible rotation/open state of lid", "No collision events", "Robot ends in retreat pose"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"green_bin_lid","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"green_bin_lid","offset_z":0.10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"green_bin_lid_edge","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"PoseAvailable","attrs":{"key":"lid_grasp"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"lid_grasp","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"MoveDelta","attrs":{"axis":"z","dist":0.10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"MoveDelta","attrs":{"axis":"z","dist":0.10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    }
  ]
}
