{
  "dataset_id": "cmu_stretch_0.1.0",
  "episode_id": "episode_010",
  "task_summary": "Detect the dishwasher handle, approach and grasp it, then pull to open the hinged door and safely retreat.",
  "task_long_description": {
    "overview": "A mobile manipulator (Stretch) interacts with a stainless-steel dishwasher in a kitchen scene. The robot must first perceive and localize the dishwasher handle, align the gripper, grasp using a pull-oriented strategy, and actuate the opening as a hinged door. After verifying the door is open, the robot releases the handle and retreats to avoid collision. Timing bins and tolerances are discretized per the node library, and actions are sequenced for robust execution.",
    "preconditions": [
      "Dishwasher is reachable by the manipulator",
      "Handle is visible or can be found via scan",
      "No obstacles blocking the pulling arc",
      "Robot arm and gripper are operational"
    ],
    "stepwise_plan": [
      "Scan and confirm visibility of the dishwasher handle",
      "Pre-shape gripper and approach with tight alignment",
      "Compute a pull-oriented grasp and execute Pick",
      "Verify grasp stability and set end-effector yaw to match bar",
      "Execute container opening as a hinged door",
      "Verify door open, release handle, and retreat"
    ],
    "success_criteria": [
      "ContainerOpen(dishwasher) condition becomes true",
      "No collisions with surrounding appliances or cabinets",
      "Handle grasp maintained until opening is achieved"
    ],
    "failure_and_recovery": [
      "If handle not detected: rescan with the same pattern",
      "If alignment fails: re-approach with tighter tolerance",
      "If grasp slips: reopen gripper, recompute grasp, retry pick",
      "If door sticks: re-check yaw and pull again within allowed timeout"
    ],
    "termination": "Terminate after ContainerOpen(dishwasher) is true and the robot has released the handle and retreated."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "First clear alignment and impending contact between gripper and handle is visible.",
        "predicts_next": "Grasp execution is likely next, followed by pull to open.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "pull open a dishwasher",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["dishwasher", "dishwasher_handle", "robot_gripper", "adjacent_fridge", "cabinetry"],
  "objects_from_instruction": ["dishwasher"],
  "blackboard_keys": ["grasp_dishwasher_handle"],
  "node_specs": [
    {"id":"ScanForTarget","type":"Action","ports":{"target":"dishwasher_handle","pattern":"line","max_attempts":3,"timeout_ms":1500},"description":"Searches the image/scene for the dishwasher handle using a linear sweep."},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"dishwasher_handle"},"description":"Confirms the handle is currently visible."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":800},"description":"Pre-shapes the gripper to grasp the bar handle and later to release it."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"dishwasher_handle","tolerance":0.005,"timeout_ms":1500},"description":"Moves and aligns the TCP to the handle with tight tolerance."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"dishwasher_handle","strategy":"pull","result_key":"grasp_dishwasher_handle"},"description":"Computes a grasp pose suitable for pulling on a bar handle."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"grasp_dishwasher_handle","timeout_ms":1200},"description":"Executes the grasp on the handle using the computed pose."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Checks if the grasp is stable before pulling."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":90},"description":"Rotates the wrist yaw to align with the horizontal bar."},
    {"id":"OpenContainer","type":"Action","ports":{"target":"dishwasher","container_type":"hinged_door","timeout_ms":1500},"description":"Performs the pulling motion to open the dishwasher door."},
    {"id":"ContainerOpen","type":"Condition","ports":{"target":"dishwasher"},"description":"Verifies that the dishwasher door is open."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":800},"description":"Releases the handle after opening."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Backs away to a safe distance from the opened door."}
  ],
  "tree_stats": {"nodes_total": 13, "actions": 9, "conditions": 3, "depth": 2},
  "failure_modes": [
    "Handle not detected due to glare or motion blur",
    "Misalignment leading to failed grasp",
    "Insufficient yaw alignment causing slip",
    "Door requires more pull than expected",
    "Arm collision with adjacent fridge or cabinet during pull"
  ],
  "recovery_strategy": [
    "Repeat ScanForTarget and re-approach",
    "Recompute grasp with same strategy and retry Pick",
    "Adjust yaw and retry OpenContainer",
    "Release, reposition with larger approach margin, and try again"
  ],
  "assumptions": [
    "The dishwasher opens as a hinged door; frames suggest a bar-style handle.",
    "Lighting and reflections on stainless steel may obscure edges; scanning compensates.",
    "No explicit retries requested by instruction; single-pass plan with implicit re-execution on failure at the system level."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "ContainerOpen(dishwasher) evaluates true",
      "No collisions or joint limit violations",
      "Grasp maintained until door is sufficiently open"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"dishwasher_handle","pattern":"line","max_attempts":3,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"dishwasher_handle"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"dishwasher_handle","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"ComputeGraspPose","attrs":{"target":"dishwasher_handle","strategy":"pull","result_key":"grasp_dishwasher_handle"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"grasp_dishwasher_handle","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "verify",
      "active_leaf": {"id":"IsGraspStable","attrs":{}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"dishwasher","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
