{
  "dataset_id": "cmu_stretch_0.1.0",
  "episode_id": "episode_030",
  "task_summary": "Detect the drawer handle, approach and align, grasp the handle, execute a drawer-opening action, then retreat and release.",
  "task_long_description": {
    "overview": "The scene shows a mobile manipulator (Stretch) at a kitchen cabinet with a bar-handled lower drawer. The robot must open the drawer by finding the handle, aligning its gripper, latching on, and pulling the drawer outward. The countertop, a red cup, and a white tray are visible and should be avoided. The behavior tree coordinates perception, approach, verification, grasp, actuation via an abstract container-opening primitive, and a safe retreat with release once motion completes.",
    "preconditions": [
      "Robot positioned within reachable workspace of the drawer",
      "Camera provides view of drawer handle",
      "No obstacles blocking drawer motion"
    ],
    "stepwise_plan": [
      "Open gripper and search for the drawer handle.",
      "Move to a pre-grasp pose and fine-align to the handle.",
      "Verify visibility and close gripper on the handle.",
      "Call the drawer opening primitive to pull it out.",
      "Retreat slightly and release the handle."
    ],
    "success_criteria": [
      "Drawer translates outward from the cabinet face",
      "Handle grasp remains stable during motion",
      "No collision with countertop or nearby items"
    ],
    "failure_and_recovery": [
      "If handle not detected, re-run detection or adjust view.",
      "If alignment error, re-align and retry grasp.",
      "If slip occurs, reopen gripper, re-grasp, and try again."
    ],
    "termination": "Terminate when the drawer is sensed open and the gripper has safely released after a short retreat."
  },
  "frame_ranking": {
    "order": ["frame_4","frame_5","frame_3","frame_6","frame_2","frame_7","frame_1","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.20,
      "frame_1": 0.32,
      "frame_2": 0.54,
      "frame_3": 0.72,
      "frame_4": 0.93,
      "frame_5": 0.88,
      "frame_6": 0.62,
      "frame_7": 0.40,
      "frame_8": 0.18
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "Gripper is centered at the bar handle with minimal lateral offset, consistent with alignment before grasp.",
        "predicts_next": "Closing on the handle is expected in the following frame.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "open drawer",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["drawer","drawer_handle","cabinet","countertop","fridge_door","white_tray","red_cup","robot_arm","gripper"],
  "objects_from_instruction": ["drawer"],
  "blackboard_keys": [],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":"float","timeout_ms":"int"},"description":"Set gripper aperture before/after interaction."},
    {"id":"DetectObject","type":"Action","ports":{"target":"string","timeout_ms":"int"},"description":"Perceive the drawer handle."},
    {"id":"MoveTo","type":"Action","ports":{"target":"string","timeout_ms":"int"},"description":"Move to pre-grasp near the handle."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"string","tolerance":"float","timeout_ms":"int"},"description":"Refine pose to align with the handle."},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"string"},"description":"Confirm handle still visible before grasp."},
    {"id":"CloseGripper","type":"Action","ports":{"force":"float","timeout_ms":"int"},"description":"Latch onto the handle."},
    {"id":"OpenContainer","type":"Action","ports":{"target":"string","container_type":"string","timeout_ms":"int"},"description":"Execute opening motion for drawer."},
    {"id":"Retreat","type":"Action","ports":{"distance":"float","timeout_ms":"int"},"description":"Back off after drawer opens."}
  ],
  "tree_stats": {"nodes_total": 10, "actions": 8, "conditions": 1, "depth": 2},
  "failure_modes": [
    "Handle not detected due to glare or angle",
    "Misalignment causing missed grasp",
    "Slip during pull",
    "Drawer stuck or obstructed"
  ],
  "recovery_strategy": [
    "Re-detect and adjust approach pose",
    "Repeat fine alignment and re-grasp",
    "Increase contact repeat with small retreat and re-pull",
    "Abort if force threshold or timeout reached"
  ],
  "assumptions": [
    "The visible bar corresponds to the drawer handle and supports pulling via the OpenContainer primitive.",
    "No explicit force sensing node is available; grasp stability is assumed adequate once closed."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "ContainerOpen condition (implicit) achievable and drawer visibly extended",
      "No collisions with countertop items"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"drawer_handle","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveTo","attrs":{"target":"drawer_handle_pregrasp","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"drawer_handle","tolerance":0.01,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"drawer_handle"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":20,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"drawer","container_type":"drawer","timeout_ms":2000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"drawer","container_type":"drawer","timeout_ms":2000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.06,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
