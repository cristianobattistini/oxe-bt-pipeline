{
  "dataset_id": "cmu_stretch_0.1.0",
  "episode_id": "episode_080",
  "task_summary": "Detect the dishwasher handle, approach and grasp it, then pull to open the dishwasher door and retreat.",
  "task_long_description": {
    "overview": "A mobile manipulator (Stretch) must open a stainless-steel dishwasher seen frontally beside a fridge and wooden cabinets. The robot first ensures the dishwasher handle is visible, then approaches and aligns its gripper. After computing a pull-oriented grasp, it closes the gripper on the bar handle and executes a straight outward pull to open the hinged dishwasher door. The robot briefly waits to damp oscillations, verifies the door state, and retreats to clear the workspace. Timing and tolerances are conservative to favor reliable contact on a smooth metal handle.",
    "preconditions": [
      "Dishwasher and its horizontal bar handle are within reachable workspace",
      "No obstacles blocking the pull trajectory",
      "Gripper functional and calibrated",
      "Perception camera provides a clear view of the handle"
    ],
    "stepwise_plan": [
      "Check visibility or actively scan to localize the dishwasher handle.",
      "Move to pregrasp near the handle and open the gripper.",
      "Compute a pull-oriented grasp and align the end-effector; set yaw.",
      "Close the gripper and confirm grasp stability.",
      "Pull outward along +Y to open the hinged door.",
      "Brief wait, verify door state, then retreat."
    ],
    "success_criteria": [
      "Dishwasher door visibly opens",
      "ContainerOpen(dishwasher) condition succeeds",
      "Robot maintains grasp during initial pull",
      "End-effector and base remain collision-free"
    ],
    "failure_and_recovery": [
      "Handle not detected → scan pattern and re-detect",
      "Grasp slip → reopen, realign, and regrasp",
      "Insufficient pull distance → repeat MoveDelta",
      "Collision risk → retreat and re-approach with adjusted pose"
    ],
    "termination": "Terminate when ContainerOpen(dishwasher) succeeds and the robot has retreated to a safe distance."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "Gripper encloses the horizontal handle; alignment and contact are clear.",
        "predicts_next": "Pull actuation is imminent; door opening should follow.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "pull open a dishwasher",
  "instruction_to_ports": {
    "force": 20,
    "timeout_ms": 1500,
    "tolerance": 0.01,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["dishwasher","dishwasher_handle","fridge","cabinetry"],
  "objects_from_instruction": ["dishwasher"],
  "blackboard_keys": ["grasp_handle"],
  "node_specs": [
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"dishwasher_handle"},"description":"Quick visibility check to avoid unnecessary scanning."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"dishwasher_handle","pattern":"raster","max_attempts":3,"timeout_ms":1500},"description":"Active search if handle not initially visible."},
    {"id":"DetectObject","type":"Action","ports":{"target":"dishwasher_handle","timeout_ms":800},"description":"Refined detection/localization of the handle."},
    {"id":"MoveTo","type":"Action","ports":{"target":"dishwasher_handle","timeout_ms":1500},"description":"Approach to pregrasp near the handle."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":800},"description":"Open gripper to clear for grasp."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"dishwasher_handle","strategy":"pull","result_key":"grasp_handle"},"description":"Compute a grasp suitable for pulling a bar handle."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"dishwasher_handle","tolerance":0.01,"timeout_ms":1500},"description":"Align end-effector to the handle within tight tolerance."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":90},"description":"Rotate tool about yaw for perpendicular engagement with bar."},
    {"id":"CloseGripper","type":"Action","ports":{"force":20,"timeout_ms":800},"description":"Close to secure the grasp with gentle force."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Confirm no immediate slip after closing."},
    {"id":"MoveDelta","type":"Action","ports":{"axis":"y","dist":0.2,"timeout_ms":1500},"description":"Execute the outward pull to open the door."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":400},"description":"Brief pause to allow door motion to settle."},
    {"id":"ContainerOpen","type":"Condition","ports":{"target":"dishwasher"},"description":"Verify that the dishwasher is open."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":1200},"description":"Back off to a safe clearance after opening."}
  ],
  "tree_stats": {"nodes_total": 17, "actions": 11, "conditions": 3, "depth": 4},
  "failure_modes": [
    "Handle not localized or occluded",
    "Insufficient friction leading to grasp slip",
    "Pull distance too short to unlatch door",
    "Unexpected collision with adjacent furniture"
  ],
  "recovery_strategy": [
    "Fallback to scanning and re-detection",
    "Re-open, re-align, increase force to 30 if allowed by policy",
    "Repeat MoveDelta with additional distance",
    "Abort and retreat if ContactDetected exceeds threshold"
  ],
  "assumptions": [
    "The dishwasher door behaves like a hinged door that opens by pulling outward and down.",
    "Using a straight-line MoveDelta along +Y better matches the observed pulling motion in the frames.",
    "Scene lighting and reflections on stainless steel may challenge detection; scanning mitigates this."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "ContainerOpen(dishwasher) condition succeeds",
      "Door visually more ajar in later frames",
      "No collision or loss of grasp during pull"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"dishwasher_handle"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveTo","attrs":{"target":"dishwasher_handle","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"dishwasher_handle","tolerance":0.01,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":20,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"IsGraspStable","attrs":{}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"MoveDelta","attrs":{"axis":"y","dist":0.2,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"Wait","attrs":{"timeout_ms":400}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    }
  ]
}
