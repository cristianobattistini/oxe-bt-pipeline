{
  "dataset_id": "cmu_stretch_0.1.0",
  "episode_id": "episode_022",
  "task_summary": "Detect the cabinet drawer handle, grasp it, and pull to open the drawer, verifying success and retreating safely.",
  "task_long_description": {
    "overview": "A Stretch-like mobile manipulator operates at a kitchen cabinet. The goal is to open a lower drawer beneath a countertop. The robot must perceive the drawer handle, plan a grasp suitable for pulling, approach and align precisely, then close the gripper to secure the handle. After grasping, it executes an open action to pull the drawer outward, verifies that the drawer is open, and retreats while releasing the handle. Constraints include limited workspace near a refrigerator, need for precise alignment, and safe forces while pulling.",
    "preconditions": [
      "Drawer and handle are within reachable workspace",
      "Sufficient clearance to pull the drawer outward",
      "Robot gripper operational and able to grasp a bar/knob",
      "Perception stack able to detect 'drawer_handle'"
    ],
    "stepwise_plan": [
      "Open gripper and search for the drawer handle.",
      "Detect the handle and compute a pull-oriented grasp pose.",
      "Verify pose availability and approach/align with tight tolerance.",
      "Close gripper to secure the handle.",
      "Execute container opening for a drawer (pull).",
      "Confirm drawer is open, retreat, and release the handle."
    ],
    "success_criteria": [
      "Drawer moved from closed to clearly open state",
      "Handle grasped stably during pull",
      "No collision with cabinet, counter, or fridge",
      "Robot retreats and releases handle safely"
    ],
    "failure_and_recovery": [
      "Handle not visible: perform scan and re-detect",
      "Grasp slip: reopen, realign, and regrasp with same force",
      "Drawer jammed: re-attempt open with fresh alignment",
      "Timeouts during approach/pull: abort and retreat slightly, then retry"
    ],
    "termination": "Terminate after container-open condition is met and the robot has retreated and released the handle."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "Gripper aligned near the handle with stable contact cues, indicating readiness to secure and pull.",
        "predicts_next": "Initiation of pulling/open action is expected next.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "open drawer",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["drawer","drawer_handle","cabinet","countertop","fridge","robot_arm","gripper"],
  "objects_from_instruction": ["drawer"],
  "blackboard_keys": ["grasp_handle"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":"float","timeout_ms":"int"},"description":"Open the gripper to the specified width before and after manipulation."},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"string"},"description":"Quick visibility check for the target handle."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"string","pattern":"string","max_attempts":"int","timeout_ms":"int"},"description":"Active scan to localize the handle if not immediately visible."},
    {"id":"DetectObject","type":"Action","ports":{"target":"string","timeout_ms":"int"},"description":"Run detection to localize the handle precisely."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"string","strategy":"string","result_key":"string"},"description":"Compute a pull-oriented grasp pose and store it on the blackboard."},
    {"id":"PoseAvailable","type":"Condition","ports":{"key":"string"},"description":"Verify the planned grasp pose exists."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"string","tolerance":"float","timeout_ms":"int"},"description":"Approach the handle with tight alignment tolerance."},
    {"id":"CloseGripper","type":"Action","ports":{"force":"float","timeout_ms":"int"},"description":"Close the gripper to secure the handle."},
    {"id":"OpenContainer","type":"Action","ports":{"target":"string","container_type":"string","timeout_ms":"int"},"description":"Execute the drawer opening motion (pull) once grasped."},
    {"id":"ContainerOpen","type":"Condition","ports":{"target":"string"},"description":"Verify that the drawer is open."},
    {"id":"Retreat","type":"Action","ports":{"distance":"float","timeout_ms":"int"},"description":"Back off to a safe distance after opening."}
  ],
  "tree_stats": {"nodes_total": 14, "actions": 9, "conditions": 3, "depth": 3},
  "failure_modes": [
    "Handle not detected due to lighting or occlusion",
    "Misalignment causing missed grasp or slip",
    "Drawer jammed or higher-than-expected resistance",
    "Workspace collision with counter/fridge during pull"
  ],
  "recovery_strategy": [
    "Fallback to scanning and re-detection",
    "Recompute grasp pose and realign with tighter tolerance",
    "Retry open after minor retreat and re-approach",
    "Abort and retreat if repeated timeouts occur"
  ],
  "assumptions": [
    "The visible target is a standard cabinet drawer with a graspable handle.",
    "OpenContainer('drawer') encapsulates a pull motion once the handle is grasped.",
    "Frames show consistent progression from approach to opening; no conflicting actions observed."
  ],
  "evaluation_notes": {
    "expected_success_criteria": ["Drawer visually and physically open; handle grasp stable; no collisions; safe retreat and release."],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"drawer_handle","pattern":"raster","max_attempts":"3","timeout_ms":"1500"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"drawer_handle","timeout_ms":"1200"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"drawer_handle","tolerance":"0.005","timeout_ms":"1500"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"PoseAvailable","attrs":{"key":"grasp_handle"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":"20","timeout_ms":"800"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"drawer","container_type":"drawer","timeout_ms":"1500"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"drawer","container_type":"drawer","timeout_ms":"1500"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"drawer","container_type":"drawer","timeout_ms":"1500"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":"0.1","timeout_ms":"1200"}},
      "active_path_ids": []
    }
  ]
}
