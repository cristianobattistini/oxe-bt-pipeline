{
  "dataset_id": "cmu_stretch_0.1.0",
  "episode_id": "episode_064",
  "task_summary": "Perceive the pot and its lid, grasp the lid handle precisely, and lift the lid upward, then retreat slightly while stabilizing.",
  "task_long_description": {
    "overview": "The robot arm must lift the lid from a small pot placed on a tabletop. Frames show a side approach to a metal pot with a central knob/handle on the lid. The behavior requires reliable perception, precise alignment, gentle contact before grasp, and an upward lift without colliding with the pot rim. We prioritize precision and low force to avoid sliding the lid or tipping the pot. After clearing the rim, the arm retreats to provide visual confirmation and stability.",
    "preconditions": ["Pot and lid are present on the table", "Workspace is free of obstacles near the lifting path", "Gripper can open to 0.09 m", "Camera provides view of the lid handle"],
    "stepwise_plan": ["Detect pot and lid", "Open gripper and move above the lid", "Compute grasp for the knob/handle and align", "Lower slowly until contact is detected", "Execute grasp using computed pose", "Verify object in gripper", "Lift along +Z to clear rim", "Retreat slightly and pause"],
    "success_criteria": ["Lid visibly leaves pot opening", "ObjectInGripper returns success for pot_lid", "No collision with pot body or table", "Retreat completed with lid held"],
    "failure_and_recovery": ["If perception fails, rescan the scene", "If contact not detected, retry approach and lower again", "If grasp unstable, reopen and recompute grasp", "If collision detected, retreat and re-approach at higher offset"],
    "termination": "End when lid is in gripper and vertical lift plus retreat are complete."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "Arm is aligned near the lid handle with minimal lateral error, suggesting imminent contact.",
        "predicts_next": "Contact and grasp initiation should follow, leading to an upward lift.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "lift up a lid from the pot",
  "instruction_to_ports": {
    "force": 10,
    "timeout_ms": 1200,
    "tolerance": 0.005,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["robot_arm","table","pot","pot_lid","lid_handle","background_board"],
  "objects_from_instruction": ["lid","pot"],
  "blackboard_keys": ["lid_grasp"],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"pot","timeout_ms":1200},"description":"Find the pot in the scene."},
    {"id":"DetectObject","type":"Action","ports":{"target":"pot_lid","timeout_ms":1200},"description":"Find the lid."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":400},"description":"Prepare to grasp by opening the gripper."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"pot_lid","offset_z":0.05,"timeout_ms":1200},"description":"Move to a safe pre-grasp height above the lid."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"lid_handle","strategy":"pinch","result_key":"lid_grasp"},"description":"Plan a pinch grasp on the knob/handle."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"lid_handle","tolerance":0.005,"timeout_ms":1200},"description":"Align precisely with the planned grasp pose."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.02,"force_threshold":10.0,"timeout_ms":800},"description":"Lower to gently touch the handle."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"lid_grasp","timeout_ms":1200},"description":"Execute the grasp using the computed pose."},
    {"id":"ObjectInGripper","type":"Condition","ports":{"target":"pot_lid"},"description":"Verify the lid is held."},
    {"id":"MoveDelta","type":"Action","ports":{"axis":"z","dist":0.1,"timeout_ms":800},"description":"Lift the lid upward to clear the pot rim."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Back off slightly for safety and visibility."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":400},"description":"Short stabilization pause."}
  ],
  "tree_stats": {"nodes_total": 13, "actions": 11, "conditions": 1, "depth": 2},
  "failure_modes": ["Lid not detected due to glare", "Misalignment causing contact with pot rim", "No contact detected during lowering", "Grasp slips from smooth knob"],
  "recovery_strategy": ["Repeat detection from a slightly different view", "Increase offset_z and re-approach", "Recompute grasp pose and retry Pick", "Open gripper and realign before next attempt"],
  "assumptions": ["Frames show a small pot with a lid and central handle; lifting is feasible with a pinch grasp. Exact handle geometry is inferred from imagery; no explicit handle type available."],
  "evaluation_notes": {
    "expected_success_criteria": ["ObjectInGripper success for pot_lid", "Positive vertical clearance after MoveDelta", "No collisions logged"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"pot","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"pot_lid","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"pot_lid","offset_z":0.05,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"lid_handle","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "verify",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.02,"force_threshold":10.0,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"lid_grasp","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"MoveDelta","attrs":{"axis":"z","dist":0.1,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Wait","attrs":{"timeout_ms":400}},
      "active_path_ids": []
    }
  ]
}
