{
  "dataset_id": "cmu_stretch_0.1.0",
  "episode_id": "episode_033",
  "task_summary": "Approach the cabinet, grasp the drawer handle, pull to open the drawer, retreat, release, and verify the drawer is open.",
  "task_long_description": {
    "overview": "The scene shows a mobile manipulator at a kitchen cabinet. A horizontal bar handle is visible on a top drawer beneath a countertop. The end-effector approaches the handle, aligns its yaw with the bar, grasps, and pulls the drawer outward. After motion, the robot retreats slightly and releases the handle. The plan relies on visual detection of the handle and precise approach before applying a straight pull. A final condition checks that the drawer is open.",
    "preconditions": [
      "Drawer and bar handle are visible from camera viewpoint",
      "Workspace in front of drawer is free of obstacles",
      "Gripper operational and able to close around bar handle",
      "Robot base pose provides reach to the drawer handle"
    ],
    "stepwise_plan": [
      "Open gripper and detect the drawer handle.",
      "Move to a pregrasp near the handle and set yaw alignment.",
      "Approach and align precisely to the handle.",
      "Close gripper to secure the handle.",
      "Pull straight outward to open the drawer.",
      "Retreat slightly, release the handle, and wait briefly.",
      "Verify the drawer state is open."
    ],
    "success_criteria": [
      "Drawer translates outward from the cabinet face",
      "Handle grasp achieved without slip",
      "Final state check confirms drawer is open"
    ],
    "failure_and_recovery": [
      "If handle not detected: re-perceive and adjust view or base.",
      "If approach misaligned: repeat alignment and re-approach.",
      "If grasp unstable: reopen gripper, re-approach, and regrasp.",
      "If pull meets resistance: reduce speed and retry shorter pulls."
    ],
    "termination": "Terminate when the ContainerOpen check for target 'drawer' succeeds or when any leaf returns FAILURE irrecoverably."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "Gripper aligned and near bar handle; contact imminent.",
        "predicts_next": "A pulling actuation should follow once the grasp is secured.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "open drawer",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["drawer", "drawer_handle", "cabinet", "countertop", "robot_gripper"],
  "objects_from_instruction": ["drawer"],
  "blackboard_keys": [],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":"0.09","timeout_ms":"800"},"description":"Prepare wide aperture before approaching the handle."},
    {"id":"DetectObject","type":"Action","ports":{"target":"drawer_handle","timeout_ms":"1500"},"description":"Detect the drawer handle to localize target."},
    {"id":"MoveTo","type":"Action","ports":{"target":"drawer_handle_pregrasp","timeout_ms":"1500"},"description":"Move to a pregrasp near the handle."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":"90"},"description":"Align gripper yaw with the horizontal bar."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"drawer_handle","tolerance":"0.005","timeout_ms":"1500"},"description":"Close in and finely align to grasp pose."},
    {"id":"CloseGripper","type":"Action","ports":{"force":"20","timeout_ms":"1200"},"description":"Secure the bar handle."},
    {"id":"MoveDelta","type":"Action","ports":{"axis":"x","dist":"0.2","timeout_ms":"1500"},"description":"Pull outward along drawer travel axis."},
    {"id":"Retreat","type":"Action","ports":{"distance":"0.1","timeout_ms":"800"},"description":"Back off after opening."},
    {"id":"OpenGripper","type":"Action","ports":{"width":"0.06","timeout_ms":"800"},"description":"Release the handle."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":"400"},"description":"Short settle pause."},
    {"id":"ContainerOpen","type":"Condition","ports":{"target":"drawer"},"description":"Verify the drawer is open."}
  ],
  "tree_stats": {"nodes_total": 12, "actions": 10, "conditions": 1, "depth": 2},
  "failure_modes": [
    "Handle not detected due to glare or occlusion",
    "Yaw misalignment causes slip during pull",
    "Insufficient grasp force on smooth bar",
    "Collision with countertop edge while pulling"
  ],
  "recovery_strategy": [
    "Re-run detection with slight viewpoint change",
    "Repeat approach-and-align with tighter tolerance",
    "Re-open and re-close gripper; vary contact point",
    "Use shorter repeated pulls rather than one long pull"
  ],
  "assumptions": [
    "Pull direction chosen along +x in robot tool frame; exact sign not observable from stills.",
    "Bar handle affords power grasp with parallel fingers.",
    "Frames show a drawer (not a cabinet door); slight ambiguity resolved in favor of the instruction."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Drawer pose translated outward beyond initial plane",
      "No persistent contact after retreat",
      "Condition 'ContainerOpen' returns SUCCESS"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"drawer_handle","timeout_ms":1500}},
      "active_path_ids": ["Sequence","DetectObject"]
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveTo","attrs":{"target":"drawer_handle_pregrasp","timeout_ms":1500}},
      "active_path_ids": ["Sequence","MoveTo"]
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"SetTCPYaw","attrs":{"yaw_deg":90}},
      "active_path_ids": ["Sequence","SetTCPYaw"]
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"drawer_handle","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": ["Sequence","ApproachAndAlign"]
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":20,"timeout_ms":1200}},
      "active_path_ids": ["Sequence","CloseGripper"]
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"MoveDelta","attrs":{"axis":"x","dist":0.2,"timeout_ms":1500}},
      "active_path_ids": ["Sequence","MoveDelta"]
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"MoveDelta","attrs":{"axis":"x","dist":0.2,"timeout_ms":1500}},
      "active_path_ids": ["Sequence","MoveDelta"]
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": ["Sequence","Retreat"]
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.06,"timeout_ms":800}},
      "active_path_ids": ["Sequence","OpenGripper"]
    }
  ]
}
