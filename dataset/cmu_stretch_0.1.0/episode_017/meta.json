{
  "dataset_id": "cmu_stretch_0.1.0",
  "episode_id": "episode_017",
  "task_summary": "Detect the cabinet drawer handle, grasp it, and pull to open the drawer, then retreat and release.",
  "task_long_description": {
    "overview": "A mobile manipulator with a parallel gripper opens a wooden cabinet drawer beneath a countertop. The scene shows a bar-style handle on a top drawer, with a fridge to the right and items on the counter. The robot must perceive the handle, compute a pulling grasp, align, close the gripper, and execute an opening motion. It then verifies that the drawer is open, retreats for clearance, and releases the handle. Timeouts and moderate forces are used to remain safe in a cluttered kitchen environment.",
    "preconditions": [
      "Robot is positioned in front of the cabinet",
      "Manipulator and gripper are operational and homed",
      "Drawer handle within reachable workspace",
      "Scene lighting sufficient for handle detection"
    ],
    "stepwise_plan": [
      "Open gripper and perceive the drawer handle; retry detection if needed.",
      "Compute a pulling grasp pose for the handle and verify pose availability.",
      "Approach and align to the grasp pose with tight tolerance.",
      "Close gripper to secure the handle.",
      "Execute drawer opening using a container-opening primitive.",
      "Verify the drawer is open, retreat to create clearance.",
      "Release the handle."
    ],
    "success_criteria": [
      "Drawer translates outward visibly from the cabinet",
      "Container open condition reports true",
      "Robot ends at a safe, retracted pose with handle released"
    ],
    "failure_and_recovery": [
      "Handle not detected: retry detection routine",
      "Grasp unstable: reopen, realign, and regrasp",
      "Drawer jams: stop motion and retreat",
      "Pose not available: recompute grasp pose"
    ],
    "termination": "Terminate when the drawer is confirmed open and the robot has retreated and released the handle."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "First clear contact of the gripper with the drawer handle and alignment visible.",
        "predicts_next": "Pull motion expected as drawer begins to open.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "open drawer",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["drawer_A","drawer_handle","cabinet","countertop","robot_gripper","red_cup","white_box","fridge_door"],
  "objects_from_instruction": ["drawer"],
  "blackboard_keys": ["grasp_handle"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":"0.09","timeout_ms":"500"},"description":"Ensure clearance before approach and release after opening."},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"drawer_handle"},"description":"Quick visibility check for the handle."},
    {"id":"DetectObject","type":"Action","ports":{"target":"drawer_handle","timeout_ms":"1500"},"description":"Run detector to localize the handle."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"drawer_handle","strategy":"pull","result_key":"grasp_handle"},"description":"Compute a pulling grasp pose on the handle."},
    {"id":"PoseAvailable","type":"Condition","ports":{"key":"grasp_handle"},"description":"Verify grasp pose is on the blackboard."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"grasp_handle","tolerance":"0.01","timeout_ms":"1500"},"description":"Approach and align to the computed grasp."},
    {"id":"CloseGripper","type":"Action","ports":{"force":"20","timeout_ms":"800"},"description":"Secure the handle with moderate force."},
    {"id":"OpenContainer","type":"Action","ports":{"target":"drawer_A","container_type":"drawer","timeout_ms":"1500"},"description":"Pull to open the drawer."},
    {"id":"ContainerOpen","type":"Condition","ports":{"target":"drawer_A"},"description":"Verify the drawer is open."},
    {"id":"Retreat","type":"Action","ports":{"distance":"0.1","timeout_ms":"800"},"description":"Back off to create clearance after opening."}
  ],
  "tree_stats": {"nodes_total": 14, "actions": 8, "conditions": 3, "depth": 4},
  "failure_modes": [
    "Handle not detected due to glare or occlusion",
    "Misalignment causing failed grasp",
    "Drawer stiction or collision during pull",
    "Pose estimation error leading to missed handle"
  ],
  "recovery_strategy": [
    "Retry detection with raster scan",
    "Recompute grasp and re-approach",
    "Abort pull, retreat, and reattempt with adjusted alignment",
    "Timeout safe-stop and notify operator if repeated failures"
  ],
  "assumptions": [
    "The target is the top drawer with a bar handle shown in the frames.",
    "OpenContainer implements a pulling motion for drawers along the correct axis.",
    "Moderate gripper force (20) is sufficient to hold the handle without damage.",
    "Frames are slightly blurred; pose confidence relies on multiple retries if needed."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Drawer displacement outward by a noticeable margin",
      "Positive ContainerOpen condition",
      "Robot ends retracted with gripper open"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"drawer_handle","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"grasp_handle","tolerance":0.01,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "verify",
      "active_leaf": {"id":"PoseAvailable","attrs":{"key":"grasp_handle"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":20,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"drawer_A","container_type":"drawer","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"drawer_A","container_type":"drawer","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"drawer_A","container_type":"drawer","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":500}},
      "active_path_ids": []
    }
  ]
}
