{
  "dataset_id": "cmu_stretch_0.1.0",
  "episode_id": "episode_102",
  "task_summary": "Detect the pot lid, align and grasp the lid handle, then lift the lid vertically and retreat away from the pot.",
  "task_long_description": {
    "overview": "A mobile manipulator interacts with a pot placed on a box over a table. The goal is to lift the metal lid by grasping its small handle/knob. The robot first perceives the lid, opens the gripper, approaches from above, computes a pinch grasp on the knob, picks it, then lifts along +Z before retreating. Timing is moderate, precision alignment is required around the handle, and no placement location is specified by the scene.",
    "preconditions": ["Pot with a removable lid is present on the workspace", "Lid handle/knob is visible from the camera", "Robot has clearance above the pot", "Gripper operational"],
    "stepwise_plan": ["Detect pot lid", "Open gripper for approach", "Move above lid to pregrasp height", "Approach and align with lid handle", "Compute grasp pose (pinch) and store key", "Pick using computed grasp", "Verify grasp stability", "Lift lid vertically", "Retreat from pot"],
    "success_criteria": ["Lid is detached from pot", "Lid is held securely in gripper after lift", "Robot retreats without collisions"],
    "failure_and_recovery": ["Lid not detected → rescan scene", "Misalignment with handle → re-approach and realign", "Grasp slip → reopen, recompute grasp, retry pick", "Collision risk with pot rim → increase approach height then reattempt"],
    "termination": "Tree ends after retreat once the lid is lifted and grasp remains stable."
  },
  "frame_ranking": {
    "order": ["frame_5","frame_7","frame_3","frame_4","frame_6","frame_2","frame_1","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.20, "frame_1": 0.32, "frame_2": 0.45, "frame_3": 0.78,
      "frame_4": 0.70, "frame_5": 0.95, "frame_6": 0.60, "frame_7": 0.88, "frame_8": 0.15
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "Gripper is closely aligned near the lid knob, indicating imminent grasp.",
        "predicts_next": "A grasp action followed by a vertical lift is expected.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "lift up a lid from the pot",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["robot_arm","table","box","pot","lid","lid_handle"],
  "objects_from_instruction": ["lid","pot"],
  "blackboard_keys": ["grasp_lid"],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"pot_lid","timeout_ms":1200},"description":"Detect the lid on the pot."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":800},"description":"Open gripper to maximum width for approach."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"pot_lid","offset_z":0.06,"timeout_ms":1200},"description":"Move to a pregrasp pose above the lid."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"pot_lid_handle","tolerance":0.005,"timeout_ms":1200},"description":"Align end-effector with the lid handle."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"pot_lid_handle","strategy":"pinch","result_key":"grasp_lid"},"description":"Plan a pinch grasp on the lid knob and store it."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"grasp_lid","timeout_ms":1500},"description":"Execute grasp to pick the lid."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Check if the grasp is stable before lifting."},
    {"id":"MoveDelta","type":"Action","ports":{"axis":"z","dist":0.1,"timeout_ms":1200},"description":"Lift the lid vertically."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":1200},"description":"Retreat away from the pot after lifting."}
  ],
  "tree_stats": {"nodes_total": 10, "actions": 8, "conditions": 1, "depth": 2},
  "failure_modes": ["Lid not detected due to glare", "Misalignment causes collision with pot rim", "Gripper slips from smooth knob", "Insufficient lift height to clear pot"],
  "recovery_strategy": ["Re-run DetectObject or ScanForTarget", "Re-execute ApproachAndAlign with tighter tolerance", "OpenGripper then recompute grasp and Pick again", "Increase MoveDelta dist and retry"],
  "assumptions": ["The frames show a reachable lid knob; no explicit placement target is required after lifting", "Vertical +Z is clear of obstacles", "Instruction and frames are consistent—episode depicts approach, grasp, and lift of a pot lid"],
  "evaluation_notes": {
    "expected_success_criteria": ["Lid visibly separated from pot and held in gripper", "No collision events during lift/retreat"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"pot_lid","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"pot_lid","offset_z":0.06,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"pot_lid_handle","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "verify",
      "active_leaf": {"id":"ComputeGraspPose","attrs":{"target":"pot_lid_handle","strategy":"pinch","result_key":"grasp_lid"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"grasp_lid","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "grasp",
      "active_leaf": {"id":"IsGraspStable","attrs":{}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "transfer",
      "active_leaf": {"id":"MoveDelta","attrs":{"axis":"z","dist":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    }
  ]
}
