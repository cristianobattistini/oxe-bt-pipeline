{
  "dataset_id": "cmu_stretch_0.1.0",
  "episode_id": "episode_056",
  "task_summary": "Perceive, approach, grasp the green bin lid handle, and lift to open the hinged bin lid; retreat slightly and verify the bin is open.",
  "task_long_description": {
    "overview": "In a lab scene with a green garbage bin beneath a table, a mobile manipulator must lift open the binâ€™s hinged green lid. The robot first localizes the bin, approaches above the lid, aligns to the lid edge/handle, and prepares the gripper. It computes a pulling grasp on the lid handle, grasps, and lifts to open using an OpenContainer primitive tailored for bin lids. After opening, it retreats a short distance to avoid collisions and checks that the container is open. Motion and timeouts are conservative due to tight space near the table.",
    "preconditions": [
      "Green garbage bin and lid are present and visible",
      "Hinged lid has graspable edge or handle",
      "Robot arm and gripper are operational",
      "Workspace free of unexpected obstructions"
    ],
    "stepwise_plan": [
      "Scan and detect the green garbage bin.",
      "Move above the lid and set tool yaw to align with hinge/edge.",
      "Approach and align precisely to the lid edge/handle.",
      "Pre-open the gripper and compute a pulling grasp on the lid handle.",
      "Pick using the computed grasp.",
      "Execute OpenContainer for bin lid to lift the lid.",
      "Retreat slightly and verify the bin is open."
    ],
    "success_criteria": [
      "Lid rotates upward to an open state",
      "No collisions with table or environment",
      "Robot maintains a stable grasp during lift",
      "Final ContainerOpen condition succeeds"
    ],
    "failure_and_recovery": [
      "If perception fails, rescan up to three times.",
      "If alignment is off, re-approach with tighter tolerance.",
      "If grasp slips, reopen gripper, recompute grasp, and retry pick.",
      "If lid jams, retreat and attempt a new approach angle."
    ],
    "termination": "Tree terminates after ContainerOpen succeeds or after action timeouts/failures propagate to the root."
  },
  "frame_ranking": {
    "order": ["frame_4","frame_7","frame_3","frame_5","frame_6","frame_2","frame_1","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.20, "frame_1": 0.32, "frame_2": 0.48, "frame_3": 0.65,
      "frame_4": 0.90, "frame_5": 0.62, "frame_6": 0.55, "frame_7": 0.78, "frame_8": 0.12
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "Arm is close and aligned near the lid edge, indicating imminent grasp/align phase.",
        "predicts_next": "Expect compute-grasp followed by pick to lift the lid.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "lift open green garbage can lid",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["green_garbage_bin","green_bin_lid","green_bin_lid_handle","table","wall","robot_arm"],
  "objects_from_instruction": ["green garbage can lid"],
  "blackboard_keys": ["lid_grasp"],
  "node_specs": [
    {"id":"ScanForTarget","type":"Action","ports":{"target":"green_garbage_bin","pattern":"raster","max_attempts":3,"timeout_ms":1200},"description":"Active scan to localize the bin with a raster pattern."},
    {"id":"DetectObject","type":"Action","ports":{"target":"green_garbage_bin","timeout_ms":1200},"description":"Confirm detection of the green garbage bin."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"green_bin_lid","offset_z":0.05,"timeout_ms":1500},"description":"Position the end-effector above the lid with a safe vertical offset."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":90},"description":"Orient gripper yaw to align with lid edge/hinge."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"green_bin_lid_edge","tolerance":0.005,"timeout_ms":1200},"description":"Refine approach to the lid edge with tight alignment."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":400},"description":"Pre-shape gripper to maximum opening before grasp."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"green_bin_lid_handle","strategy":"pull","result_key":"lid_grasp"},"description":"Plan a pulling grasp on the lid handle."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"lid_grasp","timeout_ms":1200},"description":"Execute grasp using the planned pose."},
    {"id":"OpenContainer","type":"Action","ports":{"target":"green_garbage_bin","container_type":"bin_lid","timeout_ms":1500},"description":"Lift the lid to open the bin."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Retreat to avoid collision while lid is open."},
    {"id":"ContainerOpen","type":"Condition","ports":{"target":"green_garbage_bin"},"description":"Verify the bin is open."}
  ],
  "tree_stats": {"nodes_total": 13, "actions": 10, "conditions": 1, "depth": 4},
  "failure_modes": [
    "Bin not detected due to lighting or angle",
    "Misalignment causes gripper to miss handle",
    "Grasp slips during lift",
    "Lid collides with table edge or hinge binds"
  ],
  "recovery_strategy": [
    "Rescan with RetryUntilSuccessful",
    "Re-approach with 0.005 tolerance and adjust yaw",
    "Open gripper, recompute grasp, and retry pick",
    "Retreat, re-plan approach path, then reopen"
  ],
  "assumptions": [
    "Frames show a green bin with a hinged lid and accessible edge/handle.",
    "Hinge is on the far side; lifting motion is feasible within table clearance.",
    "Instruction matches frames; opening is achieved by upward rotation using a pull grasp."
  ],
  "evaluation_notes": {
    "expected_success_criteria": ["ContainerOpen returns success", "No collisions while lifting", "Stable grasp throughout opening"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"green_garbage_bin","pattern":"raster","max_attempts":3,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"green_garbage_bin","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"green_bin_lid","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"SetTCPYaw","attrs":{"yaw_deg":90}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"green_bin_lid_edge","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "verify",
      "active_leaf": {"id":"ComputeGraspPose","attrs":{"target":"green_bin_lid_handle","strategy":"pull","result_key":"lid_grasp"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"lid_grasp","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"green_garbage_bin","container_type":"bin_lid","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
