{
  "dataset_id": "cmu_stretch_0.1.0",
  "episode_id": "episode_027",
  "task_summary": "Perceive the dishwasher handle, approach and align, grasp, and pull to open the hinged dishwasher door; release and retreat.",
  "task_long_description": {
    "overview": "A mobile manipulator opens a stainless dishwasher door visible beside a refrigerator. The robot first localizes the dishwasher handle, approaches a pregrasp, refines alignment, and sets wrist yaw to grasp the horizontal bar. After closing the gripper, it executes an opening action appropriate for a hinged, downward-swinging dishwasher door. Upon confirming the door is open, the gripper releases and the robot retreats to a safe standoff. Timing and forces are moderate, prioritizing reliable contact and motion consistent with the frames.",
    "preconditions": ["Dishwasher and handle are in camera view", "Path to handle is unobstructed", "Gripper operational", "Door is initially closed"],
    "stepwise_plan": ["Detect dishwasher handle", "Open gripper and move to pregrasp", "Approach and align precisely", "Set wrist yaw to align with bar", "Close gripper to secure grasp", "Execute container open on hinged door", "Verify door open", "Release handle", "Retreat to safe distance"],
    "success_criteria": ["Door angle visibly increased indicating open state", "Condition check for container open succeeds", "No collisions with adjacent appliances", "Robot ends in safe standoff"],
    "failure_and_recovery": ["Handle not detected -> retry detection", "Misalignment -> re-approach and align", "Grasp slip -> re-close or re-approach", "Door resists -> repeat open action within limits"],
    "termination": "Terminate when the dishwasher door is open and the robot has released the handle and retreated."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "pull open a dishwasher",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["dishwasher_door", "dishwasher_handle", "robot_gripper", "refrigerator", "countertop"],
  "objects_from_instruction": ["dishwasher"],
  "blackboard_keys": [],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"dishwasher_handle","timeout_ms":1200},"description":"Detect the dishwasher handle."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":800},"description":"Open gripper before approach."},
    {"id":"MoveTo","type":"Action","ports":{"target":"pregrasp_dishwasher_handle","timeout_ms":1500},"description":"Move to pregrasp pose."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"dishwasher_handle","tolerance":0.01,"timeout_ms":1200},"description":"Refine pose to align with handle."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":90},"description":"Orient wrist to match horizontal bar handle."},
    {"id":"CloseGripper","type":"Action","ports":{"force":20,"timeout_ms":800},"description":"Close to grasp the handle."},
    {"id":"OpenContainer","type":"Action","ports":{"target":"dishwasher_door","container_type":"hinged_door","timeout_ms":1500},"description":"Open the hinged dishwasher door."},
    {"id":"ContainerOpen","type":"Condition","ports":{"target":"dishwasher_door"},"description":"Verify door is open."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.08,"timeout_ms":800},"description":"Release the handle."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Back off to a safe standoff."}
  ],
  "tree_stats": {"nodes_total": 12, "actions": 9, "conditions": 1, "depth": 3},
  "failure_modes": ["Handle not detected", "Alignment fails due to reflections", "Grasp slips on smooth bar", "Door sticks or heavy", "Collision with adjacent fridge or counter"],
  "recovery_strategy": ["Retry detection up to 3 times", "Re-run approach-and-align with smaller tolerance", "Re-close gripper or re-approach", "Repeat open action; if still stuck, abort", "Use retreat to avoid collisions"],
  "assumptions": ["Instruction says 'pull open a dishwasher'; frames show a hinged, downward-opening dishwasher door with a horizontal bar handle, which matches 'hinged_door'. No explicit force or speed specified."],
  "evaluation_notes": {
    "expected_success_criteria": ["ContainerOpen(dishwasher_door) true", "Door visibly open in final frames", "Robot ends with handle released and safe clearance"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"dishwasher_handle","timeout_ms":1200}},
      "active_path_ids": ["MainTree","Sequence","RetryUntilSuccessful","DetectObject"]
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveTo","attrs":{"target":"pregrasp_dishwasher_handle","timeout_ms":1500}},
      "active_path_ids": ["MainTree","Sequence","MoveTo"]
    },
    {
      "frame": "frame_2",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"dishwasher_handle","tolerance":0.01,"timeout_ms":1200}},
      "active_path_ids": ["MainTree","Sequence","ApproachAndAlign"]
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"SetTCPYaw","attrs":{"yaw_deg":90}},
      "active_path_ids": ["MainTree","Sequence","SetTCPYaw"]
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":20,"timeout_ms":800}},
      "active_path_ids": ["MainTree","Sequence","CloseGripper"]
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"dishwasher_door","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": ["MainTree","Sequence","OpenContainer"]
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"dishwasher_door","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": ["MainTree","Sequence","OpenContainer"]
    },
    {
      "frame": "frame_7",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"dishwasher_door","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": ["MainTree","Sequence","OpenContainer"]
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": ["MainTree","Sequence","Retreat"]
    }
  ]
}

