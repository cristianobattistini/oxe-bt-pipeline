{
  "dataset_id": "cmu_stretch_0.1.0",
  "episode_id": "episode_081",
  "task_summary": "Detect the dishwasher handle, align and grasp it, then pull to open the hinged dishwasher door and retreat.",
  "task_long_description": {
    "overview": "A mobile manipulator approaches a stainless-steel dishwasher located beside a fridge and wooden cabinets. The goal is to pull open the dishwasher door using the horizontal bar handle. The robot must first perceive the handle reliably, align its wrist yaw to the bar, establish a stable grasp, and then execute the opening pull motion on the hinged door. The sequence favors robust perception (scan then detect), precise alignment, and verification of the computed grasp before applying force. After opening, the robot retreats to clear the door swing.",
    "preconditions": ["Dishwasher present and closed", "Handle visually accessible", "Gripper operational and empty", "Workspace free of obstacles in door swing path"],
    "stepwise_plan": ["Open gripper", "Check if handle is visible; otherwise scan and detect", "Approach and align to the handle", "Set wrist yaw to match bar orientation", "Compute grasp pose and verify it is available", "Close gripper and confirm stable grasp", "Command container open for a hinged door", "Retreat to clear the opened door"],
    "success_criteria": ["Dishwasher door angle increases from closed state", "Gripper remains attached to handle during pull", "No collisions with fridge or cabinets", "Robot ends at a safe standoff"],
    "failure_and_recovery": ["Handle not detected → raster scan then re-detect", "Misalignment → re-run ApproachAndAlign and adjust yaw", "Grasp slip → reopen gripper, recompute pose, regrasp", "Door stuck → retry open with slightly longer timeout (not modeled here)"],
    "termination": "Terminate when the door is reported open and the robot has retreated to a safe distance."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "pull open a dishwasher",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["dishwasher","dishwasher_handle","fridge","wooden_cabinet","robot_arm","gripper"],
  "objects_from_instruction": ["dishwasher"],
  "blackboard_keys": ["handle_grasp"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":"0.09","timeout_ms":"800"},"description":"Prepare the gripper to envelop the bar handle."},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"dishwasher_handle"},"description":"Quick check to skip scanning if the handle is already in view."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"dishwasher_handle","pattern":"raster","max_attempts":"3","timeout_ms":"1500"},"description":"Active visual scan for the handle."},
    {"id":"DetectObject","type":"Action","ports":{"target":"dishwasher_handle","timeout_ms":"1200"},"description":"Detector confirms the handle pose."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"dishwasher_handle","tolerance":"0.01","timeout_ms":"1500"},"description":"Move in and align the end-effector to the handle."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":"90"},"description":"Rotate wrist so gripper is parallel to the horizontal bar."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"dishwasher_handle","strategy":"pull","result_key":"handle_grasp"},"description":"Plan a pulling grasp."},
    {"id":"PoseAvailable","type":"Condition","ports":{"key":"handle_grasp"},"description":"Verify grasp pose is available on the blackboard."},
    {"id":"CloseGripper","type":"Action","ports":{"force":"30","timeout_ms":"800"},"description":"Latch onto the handle."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Check for stable grasp before actuation."},
    {"id":"OpenContainer","type":"Action","ports":{"target":"dishwasher","container_type":"hinged_door","timeout_ms":"1500"},"description":"Command to open the dishwasher door (hinged)."},
    {"id":"Retreat","type":"Action","ports":{"distance":"0.1","timeout_ms":"1200"},"description":"Back off to clear the opened door."}
  ],
  "tree_stats": {"nodes_total": 15, "actions": 9, "conditions": 3, "depth": 4},
  "failure_modes": ["Handle not detected", "Misalignment with handle axis", "Insufficient grip leading to slip", "Door jam or unexpected resistance", "Collision with adjacent fridge/cabinet"],
  "recovery_strategy": ["Raster rescan and re-detect", "Re-run alignment and yaw set", "Reopen, recompute grasp, and regrasp", "Increase timeout and reissue open command", "Abort and retreat if collision risk detected"],
  "assumptions": ["Dishwasher opens as a hinged door; target handle is a horizontal bar", "Yaw 90° aligns gripper fingers with the bar", "Frames suggest approach, grasp, and door motion; if discrepancy with instruction arises, frames take precedence"],
  "evaluation_notes": {
    "expected_success_criteria": ["Door visibly more open than initial state", "Stable grasp maintained during pull", "Robot ends at safe standoff without collision"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"dishwasher_handle","pattern":"raster","max_attempts":3,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"dishwasher_handle","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"dishwasher_handle","tolerance":0.01,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"SetTCPYaw","attrs":{"yaw_deg":90}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "verify",
      "active_leaf": {"id":"PoseAvailable","attrs":{"key":"handle_grasp"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":30,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "grasp",
      "active_leaf": {"id":"IsGraspStable","attrs":{}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"dishwasher","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    }
  ]
}
