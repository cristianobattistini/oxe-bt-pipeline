{
  "dataset_id": "cmu_stretch_0.1.0",
  "episode_id": "episode_101",
  "task_summary": "Detect the cabinet door handle, approach and grasp it, then open the hinged door and retreat.",
  "task_long_description": {
    "overview": "The scene shows a white toy kitchen unit on a table with several cabinet-style doors; a Stretch-like robot stands to the right. The goal is to open one of the hinged cabinet doors. The robot must first perceive the door handle, approach and align precisely, compute a grasp, verify pose availability, grasp the handle, actuate opening via an open-container action, and retreat safely. Timing is moderate and precision is important due to tight clearances near the countertop and robot base.",
    "preconditions": [
      "Robot base has line-of-sight to the cabinet door handle",
      "Workspace is clear of obstacles near the handle sweep path",
      "Gripper operational and initially open",
      "Door is closed at start"
    ],
    "stepwise_plan": [
      "Open gripper and detect the cabinet door handle.",
      "Approach and align to the handle with small tolerance.",
      "Compute grasp pose for the handle and verify it is available.",
      "Execute grasp using the computed pose.",
      "Command door opening as a hinged door.",
      "Retreat slightly to avoid collisions and stabilize."
    ],
    "success_criteria": [
      "Door angle increases from closed to visibly ajar",
      "No collisions with the table or door frame",
      "Grasp remains stable until opening begins"
    ],
    "failure_and_recovery": [
      "If detection fails, re-run detection or adjust viewpoint.",
      "If grasp pose unavailable, recompute with different strategy.",
      "If door resists opening, retreat and retry with better alignment."
    ],
    "termination": "Terminate after door opens and the robot retreats to a safe distance."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "open door",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["cabinet_door","cabinet_door_handle","toy_kitchen","table","robot_arm"],
  "objects_from_instruction": ["door"],
  "blackboard_keys": ["door_handle_grasp"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":800},"description":"Prepare gripper for handle grasp."},
    {"id":"DetectObject","type":"Action","ports":{"target":"cabinet_door_handle","timeout_ms":1200},"description":"Perceive the door handle."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"cabinet_door_handle","tolerance":0.01,"timeout_ms":1500},"description":"Move to pregrasp and align to handle."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"cabinet_door_handle","strategy":"side","result_key":"door_handle_grasp"},"description":"Compute grasp pose for the handle."},
    {"id":"PoseAvailable","type":"Condition","ports":{"key":"door_handle_grasp"},"description":"Verify computed grasp pose exists."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"door_handle_grasp","timeout_ms":1500},"description":"Execute grasp using the computed pose."},
    {"id":"OpenContainer","type":"Action","ports":{"target":"cabinet_door","container_type":"hinged_door","timeout_ms":1500},"description":"Open the hinged cabinet door."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Back away to a safe distance."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":500},"description":"Brief pause after opening."}
  ],
  "tree_stats": {"nodes_total": 10, "actions": 8, "conditions": 1, "depth": 2},
  "failure_modes": [
    "Handle not detected due to glare or pose",
    "Misalignment causes failed grasp",
    "Door jam or unexpected resistance",
    "Collision with table edge during opening"
  ],
  "recovery_strategy": [
    "Repeat detection with small base/arm adjustment",
    "Recompute grasp with alternate strategy",
    "Abort opening, retreat, and retry alignment",
    "Timeout and safe-stop if force spikes are sensed"
  ],
  "assumptions": [
    "Frames show a toy kitchen with multiple hinged cabinet doors; specific target door is ambiguous. We assume the rightmost hinged cabinet door near the robot.",
    "Minimal motion is visible across frames; action staging is inferred from typical door-opening sequences."
  ],
  "evaluation_notes": {
    "expected_success_criteria": ["Door visibly ajar and gripper released or relaxed while clear of obstacle"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"cabinet_door_handle","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"cabinet_door_handle","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"cabinet_door_handle","tolerance":0.01,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"cabinet_door_handle","tolerance":0.01,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "verify",
      "active_leaf": {"id":"PoseAvailable","attrs":{"key":"door_handle_grasp"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"door_handle_grasp","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"cabinet_door","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"cabinet_door","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
