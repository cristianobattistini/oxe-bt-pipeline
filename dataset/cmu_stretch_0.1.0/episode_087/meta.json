{
  "dataset_id": "cmu_stretch_0.1.0",
  "episode_id": "episode_087",
  "task_summary": "Approach the cabinet, grasp the left door handle, and open the hinged door.",
  "task_long_description": {
    "overview": "The robot stands beside a white toy cabinet placed on a countertop. The goal is to open one of the hinged cabinet doors. The behavior first ensures the target door is perceived, then the arm approaches and aligns with the handle. The gripper orients to 90° yaw, gently closes on the handle, and executes an opening action suitable for a hinged door. The system verifies openness and then retreats to clear the workspace. Safety and timeouts are binned to library values.",
    "preconditions": ["Robot at safe starting pose near cabinet", "Cabinet door closed and visible", "Workspace free of obstacles", "Gripper operational"],
    "stepwise_plan": ["Perceive the cabinet left door", "Move and align to the handle", "Orient tool to 90° yaw", "Close gripper on handle", "Open the hinged door", "Verify door is open", "Retreat to a safe distance"],
    "success_criteria": ["ContainerOpen(cabinet_left_door) returns success", "No collisions detected", "Robot retreats to a safe standoff"],
    "failure_and_recovery": ["If detection fails, scan in a raster pattern", "If alignment fails, re-approach", "If door does not open, release and retry perception and approach"],
    "termination": "Tree terminates when the door is confirmed open and the robot has retreated."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "open door",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["toy_cabinet", "cabinet_left_door", "handle_bar", "countertop", "robot_gripper"],
  "objects_from_instruction": ["door"],
  "blackboard_keys": [],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":"0.09","timeout_ms":"500"},"description":"Pre-open gripper to clear approach."},
    {"id":"DetectObject","type":"Action","ports":{"target":"cabinet_left_door","timeout_ms":"1200"},"description":"Primary perception of the door."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"cabinet_left_door","pattern":"raster","max_attempts":"3","timeout_ms":"1500"},"description":"Recovery scan if initial detection fails."},
    {"id":"MoveTo","type":"Action","ports":{"target":"cabinet_left_door","timeout_ms":"1500"},"description":"Navigate end-effector near the door handle."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"cabinet_left_door","tolerance":"0.01","timeout_ms":"1500"},"description":"Refine pose to align with handle."},
    {"id":"IsAt","type":"Condition","ports":{"target":"cabinet_left_door"},"description":"Verify approach reached target."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":"90"},"description":"Orient gripper for a lateral pull on a hinged door."},
    {"id":"CloseGripper","type":"Action","ports":{"force":"20","timeout_ms":"800"},"description":"Secure the handle with low force."},
    {"id":"OpenContainer","type":"Action","ports":{"target":"cabinet_left_door","container_type":"hinged_door","timeout_ms":"1500"},"description":"Execute the door opening motion."},
    {"id":"ContainerOpen","type":"Condition","ports":{"target":"cabinet_left_door"},"description":"Confirm door is open."},
    {"id":"Retreat","type":"Action","ports":{"distance":"0.1","timeout_ms":"800"},"description":"Back away to a safe standoff."}
  ],
  "tree_stats": {"nodes_total": 13, "actions": 9, "conditions": 2, "depth": 3},
  "failure_modes": ["Target not detected", "Alignment error due to pose noise", "Handle slip during pull", "Door obstructed"],
  "recovery_strategy": ["Fallback to raster scan", "Re-approach with same tolerance", "Re-open gripper and regrasp", "Abort if repeated failures"],
  "assumptions": ["Frames show a closed cabinet; minimal visible motion across frames. We assume the left door with a bar handle and a hinged mechanism. If the door is actually sliding, OpenContainer with 'hinged_door' may be suboptimal; the tree would need parameter adjustment."],
  "evaluation_notes": {
    "expected_success_criteria": ["ContainerOpen returns success and retreat completes"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"cabinet_left_door","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"cabinet_left_door","pattern":"raster","max_attempts":3,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"MoveTo","attrs":{"target":"cabinet_left_door","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"cabinet_left_door","tolerance":0.01,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "verify",
      "active_leaf": {"id":"IsAt","attrs":{"target":"cabinet_left_door"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":20,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"cabinet_left_door","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
