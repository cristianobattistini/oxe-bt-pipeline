{
  "dataset_id": "cmu_stretch_0.1.0",
  "episode_id": "episode_026",
  "task_summary": "Perceive the pot lid, grasp it from the top knob, and lift it up from the pot.",
  "task_long_description": {
    "overview": "A Stretch-like mobile manipulator operates on a tabletop. A small metal pot with a top knobbed lid sits on a box. The arm approaches from the robot’s right side. The objective is to locate the pot lid, align over the knob, establish gentle contact, grasp securely, and lift the lid away from the pot without tipping the vessel or colliding with surrounding objects. Movements prioritize reliable perception, careful approach, and a short vertical retreat sufficient to clear the rim. Visual evidence shows approach, contact, and upward motion during the final frames.",
    "preconditions": [
      "Workspace is clear around the pot lid and knob is accessible from above",
      "Robot base is positioned to reach the pot safely",
      "Gripper operational and able to open to at least 0.09 m",
      "Camera provides sufficient view to detect the pot lid"
    ],
    "stepwise_plan": [
      "Scan and detect the pot lid.",
      "Move above the lid with a small vertical offset and open the gripper.",
      "Compute a top grasp over the knob and refine alignment.",
      "Lower slowly until contact with the knob is detected.",
      "Execute the grasp and verify stability.",
      "Lift by retreating upward to clear the pot rim."
    ],
    "success_criteria": [
      "Lid is securely held in the gripper",
      "Lid is lifted vertically and clears the pot rim",
      "No collisions with pot, table, or environment",
      "Robot ends in a safe, steady state"
    ],
    "failure_and_recovery": [
      "If the lid is not detected, rescan using the raster pattern.",
      "If alignment fails, re-approach and realign over the knob.",
      "If grasp is unstable, reopen, re-lower to contact, and re-grasp.",
      "If retreat is blocked, adjust pose and retry a smaller lift."
    ],
    "termination": "Terminate when the lid is stably grasped and the arm has retreated 0.1 m upward, or upon timeout/failure at any step."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "lift up a lid from the pot",
  "instruction_to_ports": {
    "force": 10,
    "timeout_ms": 1200,
    "tolerance": 0.01,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["robot_arm","gripper","pot","pot_lid","lid_knob","table","box_base"],
  "objects_from_instruction": ["lid","pot"],
  "blackboard_keys": ["lid_grasp"],
  "node_specs": [
    {"id":"ScanForTarget","type":"Action","ports":{"target":"pot_lid","pattern":"raster","max_attempts":3,"timeout_ms":1500},"description":"Raster scan the scene to broadly search for the pot lid."},
    {"id":"DetectObject","type":"Action","ports":{"target":"pot_lid","timeout_ms":800},"description":"Confirm and localize the lid precisely."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"pot_lid","offset_z":0.05,"timeout_ms":1200},"description":"Move to a pregrasp pose above the lid."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":500},"description":"Prepare gripper for top grasp over knob."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"pot_lid","strategy":"top","result_key":"lid_grasp"},"description":"Compute top grasp on the lid knob and store key."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"pot_lid","tolerance":0.01,"timeout_ms":1200},"description":"Refine pose to align over the knob within tight tolerance."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.02,"force_threshold":5.0,"timeout_ms":1200},"description":"Lower slowly until contact with knob is sensed."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"lid_grasp","timeout_ms":1500},"description":"Execute grasp using the computed pose."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Verify grasp stability before lifting."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Lift the lid vertically to clear the rim."}
  ],
  "tree_stats": {"nodes_total": 11, "actions": 9, "conditions": 1, "depth": 2},
  "failure_modes": [
    "Lid not detected due to glare or occlusion",
    "Misalignment with knob causing slip during closing",
    "Insufficient force leading to unstable grasp",
    "Collision with pot rim during lift"
  ],
  "recovery_strategy": [
    "Repeat scan-detect cycle",
    "Re-approach with tighter tolerance",
    "Open and regrasp with renewed contact",
    "Adjust retreat path and retry"
  ],
  "assumptions": [
    "Frames show a top-knobbed lid suitable for a top grasp; the sequence reflects approach→contact→lift.",
    "Lighting is slightly noisy/blurred but object identity is consistent.",
    "No explicit placement is required; goal is lifting clear of the pot."
  ],
  "evaluation_notes": {
    "expected_success_criteria": ["Stable grasp detected", "Vertical retreat distance achieved", "No collisions observed"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"pot_lid","pattern":"raster","max_attempts":3,"timeout_ms":1500}},
      "active_path_ids": ["MainTree","Sequence","ScanForTarget"]
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"pot_lid","timeout_ms":800}},
      "active_path_ids": ["MainTree","Sequence","DetectObject"]
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"pot_lid","offset_z":0.05,"timeout_ms":1200}},
      "active_path_ids": ["MainTree","Sequence","MoveAbove"]
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":500}},
      "active_path_ids": ["MainTree","Sequence","OpenGripper"]
    },
    {
      "frame": "frame_4",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"pot_lid","tolerance":0.01,"timeout_ms":1200}},
      "active_path_ids": ["MainTree","Sequence","ApproachAndAlign"]
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.02,"force_threshold":5.0,"timeout_ms":1200}},
      "active_path_ids": ["MainTree","Sequence","LowerUntilContact"]
    },
    {
      "frame": "frame_6",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"lid_grasp","timeout_ms":1500}},
      "active_path_ids": ["MainTree","Sequence","Pick"]
    },
    {
      "frame": "frame_7",
      "phase": "transfer",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": ["MainTree","Sequence","Retreat"]
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": ["MainTree","Sequence","Retreat"]
    }
  ]
}
