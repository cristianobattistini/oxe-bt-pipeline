{
  "dataset_id": "cmu_stretch_0.1.0",
  "episode_id": "episode_059",
  "task_summary": "Perceive the dishwasher handle, grasp it, and pull to open the hinged door, then retreat and release.",
  "task_long_description": {
    "overview": "A mobile manipulator opens a stainless dishwasher door. The scene shows a bar-style handle centered on the dishwasher front, with nearby fridge and cabinets. The robot must visually confirm the handle, approach and align its gripper, compute a pull grasp, and execute a controlled pull to swing the hinged door open. The behavior emphasizes reliable perception and alignment before grasp, then coordinated pulling and safe retreat once the door starts to open. Timing and tolerances are moderate, and the plan uses a blackboard key for the computed grasp pose.",
    "preconditions": [
      "Dishwasher is reachable with unobstructed path to the handle",
      "Robot has calibrated camera and arm",
      "Door is initially closed and not locked",
      "Gripper operational and empty"
    ],
    "stepwise_plan": [
      "Check visibility of the dishwasher handle; if not visible, scan using a raster pattern.",
      "Move near the dishwasher front.",
      "Approach and align precisely to the handle.",
      "Set gripper yaw to align with the horizontal bar.",
      "Open gripper and compute a pull grasp on the handle; verify pose availability.",
      "Execute grasp (Pick) using the computed key.",
      "Invoke container opening for a hinged door to pull it open.",
      "Retreat a short distance to clear the door swing.",
      "Release the handle by opening the gripper."
    ],
    "success_criteria": [
      "Dishwasher door rotates open visibly",
      "Handle grasp occurs without slip",
      "No collisions with adjacent appliances",
      "Robot retreats to a safe standoff"
    ],
    "failure_and_recovery": [
      "Handle not detected: perform ScanForTarget again (up to 3 attempts).",
      "Grasp pose invalid: recompute grasp and retry Pick.",
      "Door resists opening: re-align and re-issue OpenContainer.",
      "Minor contact sensed: retreat slightly and re-approach with fresh alignment."
    ],
    "termination": "Terminate when the container reports open (visually evident in frames) and the robot has retreated and released the handle."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "Gripper aligned close to the handle with clear contact geometry.",
        "predicts_next": "Pull actuation to begin opening the hinged door.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "pull open a dishwasher",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["dishwasher","dishwasher_handle","refrigerator","cabinet","countertop","robot_gripper"],
  "objects_from_instruction": ["dishwasher"],
  "blackboard_keys": ["handle_grasp"],
  "node_specs": [
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"dishwasher_handle"},"description":"Check if the dishwasher handle is visible."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"dishwasher_handle","pattern":"raster","max_attempts":3,"timeout_ms":1500},"description":"Scan the scene to locate the handle if not immediately visible."},
    {"id":"MoveTo","type":"Action","ports":{"target":"dishwasher","timeout_ms":1500},"description":"Move the base/arm to a vicinity pose in front of the dishwasher."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"dishwasher_handle","tolerance":0.005,"timeout_ms":1200},"description":"Close-in and align to the handle with tight tolerance."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":90},"description":"Rotate the tool frame to match the horizontal handle orientation."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":800},"description":"Prepare the gripper to envelope the handle."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"dishwasher_handle","strategy":"pull","result_key":"handle_grasp"},"description":"Plan a pull-style grasp on the handle and store it."},
    {"id":"PoseAvailable","type":"Condition","ports":{"key":"handle_grasp"},"description":"Verify the grasp pose was computed and stored."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"handle_grasp","timeout_ms":1200},"description":"Execute the grasp to secure the handle."},
    {"id":"OpenContainer","type":"Action","ports":{"target":"dishwasher","container_type":"hinged_door","timeout_ms":1500},"description":"Pull to open the dishwasher's hinged door."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Back away to clear the opened door."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.08,"timeout_ms":800},"description":"Release the handle after opening."}
  ],
  "tree_stats": {"nodes_total": 14, "actions": 10, "conditions": 2, "depth": 3},
  "failure_modes": [
    "Handle not detected due to reflections on stainless surface",
    "Misalignment leading to missed grasp",
    "Door partially opens then re-closes due to insufficient pull",
    "Collision with adjacent fridge/cabinet"
  ],
  "recovery_strategy": [
    "Repeat ScanForTarget with raster pattern; adjust viewpoint if needed",
    "Re-run ComputeGraspPose and ApproachAndAlign before retrying Pick",
    "Re-issue OpenContainer after small re-alignment",
    "Short Retreat, then re-approach along a slightly offset path"
  ],
  "assumptions": [
    "Appliance is a dishwasher with a hinged door; frames show the door opening downward.",
    "Handle is a horizontal bar suitable for a pull grasp.",
    "No child lock or latch beyond normal pull force."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Door angle increases visibly and stabilizes open",
      "Robot maintains grasp until door opening is sufficient",
      "No contact with neighboring appliances"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"dishwasher_handle"}},
      "active_path_ids": ["Sequence","Fallback","IsObjectVisible"]
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveTo","attrs":{"target":"dishwasher","timeout_ms":1500}},
      "active_path_ids": ["Sequence","MoveTo"]
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"dishwasher_handle","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": ["Sequence","ApproachAndAlign"]
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"SetTCPYaw","attrs":{"yaw_deg":90}},
      "active_path_ids": ["Sequence","SetTCPYaw"]
    },
    {
      "frame": "frame_4",
      "phase": "verify",
      "active_leaf": {"id":"ComputeGraspPose","attrs":{"target":"dishwasher_handle","strategy":"pull","result_key":"handle_grasp"}},
      "active_path_ids": ["Sequence","ComputeGraspPose"]
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"handle_grasp","timeout_ms":1200}},
      "active_path_ids": ["Sequence","Pick"]
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"dishwasher","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": ["Sequence","OpenContainer"]
    },
    {
      "frame": "frame_7",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"dishwasher","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": ["Sequence","OpenContainer"]
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": ["Sequence","Retreat"]
    }
  ]
}
