{
  "dataset_id": "cmu_stretch_0.1.0",
  "episode_id": "episode_088",
  "task_summary": "Lift the lid off the pot and clear the workspace.",
  "task_long_description": {
    "overview": "A Stretch-like mobile manipulator is positioned at a workbench with a small metal pot that has a round lid. The robot should detect the lid, approach from above, align, make gentle contact, close the gripper, and lift the lid vertically to free it from the pot. The scene shows the robot’s wrist near the pot and progressive motion toward and above it. Movements should be precise with a top grasp to avoid pushing the pot. After lifting, the robot retreats slightly to ensure clearance from the rim.",
    "preconditions": [
      "Pot with lid present on the table within reachable workspace",
      "Robot gripper operational and initially open",
      "Sufficient overhead clearance to lift vertically",
      "Camera view contains the pot/lid"
    ],
    "stepwise_plan": [
      "Open gripper and detect the lid.",
      "Move above the pot to a safe pregrasp height.",
      "Compute a top grasp pose for the lid and align over it.",
      "Lower slowly until contact with the lid.",
      "Close the gripper with low force and verify grasp stability.",
      "Lift the lid vertically and retreat to clear the rim."
    ],
    "success_criteria": [
      "Lid is grasped firmly (no slip).",
      "Lid is lifted above the pot rim.",
      "No collision or tipping of the pot.",
      "End state shows spatial clearance between lid and pot."
    ],
    "failure_and_recovery": [
      "If detection fails, reattempt perception or slightly adjust pose.",
      "If contact not detected, lower again within safe depth.",
      "If grasp slips, reopen, realign, and regrasp with higher force if safe.",
      "If lid sticks, perform small vertical retries before increasing force."
    ],
    "termination": "Terminate after a stable grasp is confirmed and the lid is lifted and retreated to a clear position."
  },
  "frame_ranking": {
    "order": ["frame_6","frame_5","frame_4","frame_3","frame_2","frame_7","frame_1","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.20,
      "frame_1": 0.42,
      "frame_2": 0.55,
      "frame_3": 0.78,
      "frame_4": 0.82,
      "frame_5": 0.88,
      "frame_6": 0.93,
      "frame_7": 0.47,
      "frame_8": 0.15
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "Tool is centered above lid indicating alignment prior to descent.",
        "predicts_next": "Lowering and grasp execution expected immediately after.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "lift up a lid from the pot",
  "instruction_to_ports": {
    "force": 10,
    "timeout_ms": 1200,
    "tolerance": 0.01,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["robot_arm","gripper","pot","lid","table","workbench"],
  "objects_from_instruction": ["lid","pot"],
  "blackboard_keys": ["lid_grasp"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":800},"description":"Ensure gripper is open before approach."},
    {"id":"DetectObject","type":"Action","ports":{"target":"lid","timeout_ms":1200},"description":"Perceive the lid to localize it."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"pot","offset_z":0.08,"timeout_ms":1500},"description":"Move to a safe pregrasp height over the pot."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"lid","strategy":"top","result_key":"lid_grasp"},"description":"Compute a top grasp for the lid and store it."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"lid","tolerance":0.01,"timeout_ms":1500},"description":"Center the end-effector over the planned grasp."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.03,"force_threshold":5.0,"timeout_ms":1200},"description":"Descend gently until contact with the lid is sensed."},
    {"id":"CloseGripper","type":"Action","ports":{"force":10,"timeout_ms":1200},"description":"Close to grasp the lid with low force."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Check that the grasp is stable."},
    {"id":"MoveDelta","type":"Action","ports":{"axis":"z","dist":0.10,"timeout_ms":1200},"description":"Lift the lid vertically up from the pot."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.10,"timeout_ms":1200},"description":"Back off slightly to clear the rim."}
  ],
  "tree_stats": {"nodes_total": 11, "actions": 9, "conditions": 1, "depth": 2},
  "failure_modes": [
    "Lid not detected or partially occluded",
    "Contact not reached within safe depth",
    "Insufficient grip causing slip",
    "Collision with pot rim during lift"
  ],
  "recovery_strategy": [
    "Re-detect target and slightly adjust approach",
    "Repeat controlled descent with updated alignment",
    "Reopen and regrasp with increased force (20) if safe",
    "Lift slower and retreat more to avoid collisions"
  ],
  "assumptions": [
    "Frames depict a metal pot with a detachable lid; no visible handle, so a top grasp is assumed.",
    "The lid appears lightweight; low closing force (10) is selected.",
    "No placement target is specified; the goal is lift-and-clear rather than place."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Stable grasp detected then vertical clearance over pot",
      "No disturbance to the pot base",
      "Final pose shows visible separation lid↔pot"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"lid","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"pot","offset_z":0.08,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"lid","tolerance":0.01,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"ComputeGraspPose","attrs":{"target":"lid","strategy":"top","result_key":"lid_grasp"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.03,"force_threshold":5.0,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"MoveDelta","attrs":{"axis":"z","dist":0.10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.10,"timeout_ms":1200}},
      "active_path_ids": []
    }
  ]
}
