{
  "dataset_id": "cmu_stretch_0.1.0",
  "episode_id": "episode_077",
  "task_summary": "Perceive the pot and its lid, align for a top grasp, pick the lid, lift/retreat to clear the pot, and verify the pot is open.",
  "task_long_description": {
    "overview": "A mobile manipulator must lift the lid from a small metal pot positioned on a cube fixture on a table. The sequence emphasizes reliable perception, careful alignment, a stable top grasp, and a controlled retreat to clear the opening. The environment is cluttered with small parts, and the arm approaches from the right. Constraints include using a gentle, accurate approach and a short lift sufficient to remove the lid without colliding with the pot or nearby objects.",
    "preconditions": ["Robot powered and homed", "Workspace free of humans", "Pot with removable lid on table is within reach", "Camera provides view of lid"],
    "stepwise_plan": [
      "Open gripper and search for the lid.",
      "Detect the lid and compute a top grasp pose.",
      "Approach and align to the lid within tight tolerance.",
      "Pick the lid and check grasp stability.",
      "Retreat by a short distance to lift the lid clear of the pot.",
      "Verify the pot is now open."
    ],
    "success_criteria": ["Lid securely grasped", "Lid lifted clear of pot rim", "No collisions with pot or environment", "Pot reported open"],
    "failure_and_recovery": [
      "Perception failure: rescan and re-detect the lid.",
      "Misalignment: re-approach with tighter tolerance.",
      "Grasp slip: reopen gripper, recompute grasp, retry pick.",
      "Collision risk: stop motion and retreat slightly before retry."
    ],
    "termination": "Terminate when the container-open condition for the pot is satisfied after retreat."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "lift up a lid from the pot",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["pot","lid","table","robot_arm","cube_fixture"],
  "objects_from_instruction": ["lid","pot"],
  "blackboard_keys": ["lid_grasp"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":800},"description":"Prepare fingers for grasping the lid."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"lid","pattern":"arc","max_attempts":3,"timeout_ms":1500},"description":"Wide search to localize the lid."},
    {"id":"DetectObject","type":"Action","ports":{"target":"lid","timeout_ms":1200},"description":"Confirm and refine pose estimate of the lid."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"lid","strategy":"top","result_key":"lid_grasp"},"description":"Select a top grasp for the lid knob/handle."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"lid","tolerance":0.005,"timeout_ms":1500},"description":"Align end-effector over the lid within tight tolerance."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"lid_grasp","timeout_ms":1200},"description":"Close gripper to grasp the lid."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Verify lid is firmly held."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":1200},"description":"Lift/retreat to clear the pot opening."},
    {"id":"ContainerOpen","type":"Condition","ports":{"target":"pot"},"description":"Confirm the pot is open after lifting the lid."}
  ],
  "tree_stats": {"nodes_total": 10, "actions": 7, "conditions": 2, "depth": 2},
  "failure_modes": [
    "Lid not detected due to glare or occlusion",
    "Incorrect grasp pose on smooth lid top",
    "Collision with pot rim during approach",
    "Insufficient lift causing lid to catch on rim",
    "Grasp slip during retreat"
  ],
  "recovery_strategy": [
    "Rescan area and redetect target",
    "Recompute grasp with same key and re-approach",
    "Open gripper and slightly retreat before retry",
    "Increase retreat distance within safe bounds",
    "Abort if repeated collisions are detected"
  ],
  "assumptions": [
    "Frames show a metal pot with a removable lid and a right-side approaching gripper.",
    "Top grasp is feasible (visible knob/handle).",
    "Using 'Retreat' to realize the vertical lift is acceptable for clearing the pot."
  ],
  "evaluation_notes": {
    "expected_success_criteria": ["ContainerOpen(pot) evaluates to true", "No collisions recorded", "ObjectInGripper(lid) implicitly satisfied via stable grasp"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"lid","pattern":"arc","max_attempts":3,"timeout_ms":1500}},
      "active_path_ids": ["Sequence","ScanForTarget"]
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"lid","timeout_ms":1200}},
      "active_path_ids": ["Sequence","DetectObject"]
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"lid","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": ["Sequence","ApproachAndAlign"]
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"lid","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": ["Sequence","ApproachAndAlign"]
    },
    {
      "frame": "frame_4",
      "phase": "verify",
      "active_leaf": {"id":"ComputeGraspPose","attrs":{"target":"lid","strategy":"top","result_key":"lid_grasp"}},
      "active_path_ids": ["Sequence","ComputeGraspPose"]
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"lid_grasp","timeout_ms":1200}},
      "active_path_ids": ["Sequence","Pick"]
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": ["Sequence","Retreat"]
    },
    {
      "frame": "frame_7",
      "phase": "transfer",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": ["Sequence","Retreat"]
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": ["Sequence","Retreat"]
    }
  ]
}
