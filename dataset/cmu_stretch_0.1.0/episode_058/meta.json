{
  "dataset_id": "cmu_stretch_0.1.0",
  "episode_id": "episode_058",
  "task_summary": "Approach the drawer handle, grasp it, and pull to open the drawer; confirm it is open and retreat.",
  "task_long_description": {
    "overview": "A mobile manipulator with a parallel gripper opens a wooden cabinet drawer beneath a countertop. The robot must visually locate the drawer handle, approach to a pre-grasp pose, pre-shape the gripper, compute a pulling grasp, close on the handle, and execute a straight pull to slide the drawer open. The scene includes a counter, cabinet faces, and a metallic appliance nearby. The action should open the drawer without colliding with the countertop or surrounding surfaces.",
    "preconditions": ["Drawer is reachable from the robot base", "Camera provides a clear view of the drawer front", "Handle geometry is graspable by the gripper", "No obstacles block the drawer’s travel path"],
    "stepwise_plan": ["Detect the drawer handle", "Move to a safe pre-grasp near the drawer front", "Align end-effector with the handle", "Open gripper and compute pulling grasp", "Close gripper on handle", "Pull along the opening axis to slide drawer", "Verify drawer is open", "Retreat a small distance"],
    "success_criteria": ["Drawer front translates outward visibly", "ContainerOpen(drawer) condition satisfied", "Gripper remains attached during pull", "No collisions with countertop or cabinet"],
    "failure_and_recovery": ["Handle not detected → re-detect and re-approach", "Slippage during pull → re-align and re-grasp with increased force", "Drawer jams → retry pull with shorter stroke", "Pose error → recompute grasp pose"],
    "termination": "End after verifying the drawer is open and retreat is completed."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "open drawer",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["drawer","drawer_handle","cabinet","countertop","robot_gripper"],
  "objects_from_instruction": ["drawer"],
  "blackboard_keys": ["grasp_handle"],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"drawer_handle","timeout_ms":1200},"description":"Detect the drawer handle in the scene."},
    {"id":"MoveTo","type":"Action","ports":{"target":"pregrasp_drawer","timeout_ms":1500},"description":"Move the end-effector to a safe pre-grasp pose in front of the drawer."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"drawer_handle","tolerance":0.01,"timeout_ms":1200},"description":"Refine pose and align gripper with the handle."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":500},"description":"Pre-shape gripper to fit the handle."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"drawer_handle","strategy":"pull","result_key":"grasp_handle"},"description":"Compute a pulling grasp pose and store it."},
    {"id":"CloseGripper","type":"Action","ports":{"force":20,"timeout_ms":800},"description":"Close the gripper on the handle with moderate force."},
    {"id":"MoveDelta","type":"Action","ports":{"axis":"x","dist":0.2,"timeout_ms":1500},"description":"Pull outward along x to open the drawer."},
    {"id":"ContainerOpen","type":"Condition","ports":{"target":"drawer"},"description":"Verify that the drawer is open."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Back off from the open drawer slightly."}
  ],
  "tree_stats": {"nodes_total": 10, "actions": 8, "conditions": 1, "depth": 2},
  "failure_modes": ["Handle not detected", "Misalignment causes slip", "Insufficient pull distance", "Collision with countertop or cabinet"],
  "recovery_strategy": ["Re-run detection and approach", "Recompute grasp and increase force to 30 if needed", "Execute multiple shorter MoveDelta pulls", "Abort and retreat if contact forces spike"],
  "assumptions": ["Drawer opens by pulling roughly along robot x-axis; exact axis chosen as 'x'.", "Handle geometry is graspable with width 0.09.", "Frames clearly show a drawer being pulled open; this matches the instruction."],
  "evaluation_notes": {
    "expected_success_criteria": ["ContainerOpen(drawer) evaluates true", "Drawer visibly extended across frames", "Robot retreats safely after opening"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"drawer_handle","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveTo","attrs":{"target":"pregrasp_drawer","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"drawer_handle","tolerance":0.01,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":20,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"MoveDelta","attrs":{"axis":"x","dist":0.2,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"MoveDelta","attrs":{"axis":"x","dist":0.2,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
