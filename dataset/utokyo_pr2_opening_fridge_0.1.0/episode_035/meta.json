{
  "dataset_id": "utokyo_pr2_opening_fridge_0.1.0",
  "episode_id": "episode_035",
  "task_summary": "PR2 detects the fridge and its handle, approaches, grasps the handle, pulls to open the hinged door, verifies the door is open, releases, and retreats.",
  "task_long_description": {
    "overview": "A PR2 manipulator opens a small refrigerator door in a cluttered lab corner. The sequence begins with visual detection of the fridge and handle, followed by precise approach and alignment. The gripper opens, aligns to the handle, closes to secure a grasp, and the wrist yaw is set to enable a pulling motion. The robot executes an opening action for a hinged door, checks that the door is open, releases the handle, and retreats to a safe distance. Constraints include limited workspace near drawers and the robot base and the need for gentle, precise manipulation.",
    "preconditions": ["Robot base positioned in front of the fridge", "Camera provides view of fridge and handle", "Gripper operational and unobstructed", "No human in immediate workspace"],
    "stepwise_plan": ["Detect fridge", "Move to fridge front", "Detect handle", "Open gripper", "Approach and align to handle precisely", "Close gripper to grasp handle", "Set wrist yaw for pull direction", "Execute open action for hinged door", "Verify door state is open", "Release handle", "Retreat safely"],
    "success_criteria": ["Fridge door angle visibly increased (clearly open)", "Handle grasped and released without slip", "No collisions with drawers or surroundings", "End-effector retreats to a safe standoff"],
    "failure_and_recovery": ["Handle not detected → re-detect with wider scan", "Misalignment → re-approach and align with tighter tolerance", "Grasp slip → increase gripper force one step and retry", "Door stuck → extend open duration then retreat and report"],
    "termination": "Tree succeeds once the door is confirmed open and the arm has retreated; fails if detection/grasp/open actions repeatedly fail."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "opening the fridge",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["fridge", "fridge_door", "fridge_handle", "drawer_stack", "robot_arm"],
  "objects_from_instruction": ["fridge"],
  "blackboard_keys": [],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"fridge","timeout_ms":800},"description":"Vision detection of the fridge body."},
    {"id":"MoveTo","type":"Action","ports":{"target":"fridge_front","timeout_ms":1200},"description":"Move the end-effector to a frontal pregrasp pose."},
    {"id":"DetectObject","type":"Action","ports":{"target":"fridge_handle","timeout_ms":800},"description":"Detect the door handle."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":400},"description":"Prepare gripper for grasp."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"fridge_handle","tolerance":0.005,"timeout_ms":1200},"description":"Precise approach and alignment to the handle."},
    {"id":"CloseGripper","type":"Action","ports":{"force":20,"timeout_ms":800},"description":"Close gripper to grasp handle."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":90},"description":"Orient wrist to pull along opening direction."},
    {"id":"OpenContainer","type":"Action","ports":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":1500},"description":"Execute opening motion for hinged door."},
    {"id":"ContainerOpen","type":"Condition","ports":{"target":"fridge_door"},"description":"Verify the door state is open."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":400},"description":"Release the handle."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Back off to a safe standoff."}
  ],
  "tree_stats": {"nodes_total": 12, "actions": 10, "conditions": 1, "depth": 2},
  "failure_modes": ["Handle not detected", "Alignment error causes missed grasp", "Insufficient force leading to slip", "Door obstructed or hinge friction too high", "Collision with nearby drawers"],
  "recovery_strategy": ["Repeat detection with broader view", "Re-run approach with tighter tolerance", "Increase gripper force to 30 and retry", "Extend open timeout to 2000 then abort if still stuck", "Immediate retreat on contact spike"],
  "assumptions": ["Handle treated as standard bar; actual type not explicit in frames", "Door modeled as hinged_door opening toward robot", "Right arm used; workspace tight near drawers; yaw 90° chosen to match pull direction inferred from frames"],
  "evaluation_notes": {
    "expected_success_criteria": ["Door visibly open with clear interior view", "No persistent contact alarms", "Robot ends at safe standoff with gripper open"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"fridge","timeout_ms":800}},
      "active_path_ids": ["Sequence","DetectObject(fridge)"]
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveTo","attrs":{"target":"fridge_front","timeout_ms":1200}},
      "active_path_ids": ["Sequence","MoveTo(fridge_front)"]
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"fridge_handle","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": ["Sequence","ApproachAndAlign(fridge_handle)"]
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":20,"timeout_ms":800}},
      "active_path_ids": ["Sequence","CloseGripper"]
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": ["Sequence","OpenContainer(door)"]
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": ["Sequence","OpenContainer(door)"]
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": ["Sequence","OpenContainer(door)"]
    },
    {
      "frame": "frame_7",
      "phase": "transfer",
      "active_leaf": {"id":"ContainerOpen","attrs":{"target":"fridge_door"}},
      "active_path_ids": ["Sequence","ContainerOpen(check)"]
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": ["Sequence","Retreat"]
    }
  ]
}
