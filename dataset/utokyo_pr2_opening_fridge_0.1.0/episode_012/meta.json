{
  "dataset_id": "utokyo_pr2_opening_fridge_0.1.0",
  "episode_id": "episode_012",
  "task_summary": "PR2 perceives the fridge, approaches and aligns to the handle, grasps it, pulls to open the hinged door, then retreats.",
  "task_long_description": {
    "overview": "In a cluttered lab, a PR2 robot opens a compact refrigerator. The robot first perceives and locates the fridge handle, then navigates to a good stance and finely aligns its gripper. After computing a pull-oriented grasp, it orients the wrist, closes the gripper on the handle, and executes an opening action suitable for a hinged door. Once the door swings open, the robot verifies opening and retreats to clear the doorway, leaving the interior accessible.",
    "preconditions": ["Fridge and handle are within workspace", "No obstacles blocking approach path", "Gripper operational and empty", "Hinges allow outward swing"],
    "stepwise_plan": ["Open gripper and perceive handle", "If not visible, scan for the handle", "Move to fridge front and align to handle", "Compute pull grasp and set wrist yaw", "Lower above handle and close gripper; confirm stable grasp", "Execute door opening for hinged door", "Verify opened state and retreat", "Brief wait for stabilization"],
    "success_criteria": ["Fridge door visibly open", "Robot not in collision with door", "Gripper safely disengaged/clear after opening"],
    "failure_and_recovery": ["Handle not detected → scan again", "Misalignment → re-approach and re-align", "Unstable grasp → reopen gripper and retry grasp", "Door resists opening → extend open duration or adjust stance"],
    "termination": "Terminate once ContainerOpen is true and retreat+wait complete."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "opening the fridge",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["fridge", "fridge_door", "fridge_handle", "wooden_drawers", "floor", "PR2_base", "PR2_gripper"],
  "objects_from_instruction": ["fridge"],
  "blackboard_keys": ["fridge_handle_grasp"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":"0.09","timeout_ms":"500"},"description":"Prepare gripper for grasp."},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"fridge_handle"},"description":"Check if handle is visible."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"fridge_handle","pattern":"arc","max_attempts":"3","timeout_ms":"1200"},"description":"Search for handle if not immediately visible."},
    {"id":"MoveTo","type":"Action","ports":{"target":"fridge_front","timeout_ms":"1500"},"description":"Navigate to stance in front of fridge."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"fridge_handle","tolerance":"0.01","timeout_ms":"1500"},"description":"Close-in and align to the handle with tight tolerance."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"fridge_handle","strategy":"pull","result_key":"fridge_handle_grasp"},"description":"Compute a pull-oriented grasp pose."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":"90"},"description":"Orient wrist to pull direction."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"fridge_handle","offset_z":"0.02","timeout_ms":"1200"},"description":"Position tool just above handle prior to closing."},
    {"id":"CloseGripper","type":"Action","ports":{"force":"20","timeout_ms":"800"},"description":"Close on the handle with low force."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Confirm the handle is securely held."},
    {"id":"OpenContainer","type":"Action","ports":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":"1500"},"description":"Execute opening for a hinged door."},
    {"id":"ContainerOpen","type":"Condition","ports":{"target":"fridge_door"},"description":"Verify that the door is open."},
    {"id":"Retreat","type":"Action","ports":{"distance":"0.1","timeout_ms":"800"},"description":"Back away to clear the open door."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":"400"},"description":"Short settle time."}
  ],
  "tree_stats": {"nodes_total": 16, "actions": 11, "conditions": 3, "depth": 3},
  "failure_modes": ["Handle not detected", "Poor alignment causing slip", "Insufficient pull resulting in partial opening", "Collision with adjacent drawers or door edge"],
  "recovery_strategy": ["Fallback scan when not visible", "Re-approach with tighter tolerance", "Retry opening with longer timeout_ms bin", "Abort and retreat if contact spikes"],
  "assumptions": ["Handle is graspable by PR2 gripper; fridge uses a standard hinged door; pulling direction consistent with wrist yaw 90°; frames indicate outward swing to the left; naming of targets (fridge_front, fridge_handle, fridge_door) is symbolic."],
  "evaluation_notes": {
    "expected_success_criteria": ["ContainerOpen true", "Door angle visibly increased", "Robot clear of door after retreat"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"fridge_handle","pattern":"arc","max_attempts":3,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveTo","attrs":{"target":"fridge_front","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"fridge_handle","tolerance":0.01,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"fridge_handle"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":20,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Wait","attrs":{"timeout_ms":400}},
      "active_path_ids": []
    }
  ]
}
