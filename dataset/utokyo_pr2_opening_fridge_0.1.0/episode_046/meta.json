{
  "dataset_id": "utokyo_pr2_opening_fridge_0.1.0",
  "episode_id": "episode_046",
  "task_summary": "The PR2 localizes the fridge door, aligns to the handle, grasps and pulls to open, then releases and retreats.",
  "task_long_description": {
    "overview": "A mobile manipulator (PR2) must open a small refrigerator door. The sequence begins with perception of the door and handle, then a precise approach with the gripper yawed to align to the bar-style handle. The robot opens the gripper, aligns, closes to grasp, and actuates the door open. Once a sufficient opening is achieved, it releases the handle and backs away to a safe standoff. The workspace is tight near drawers and shelves, so careful alignment and modest forces are assumed.",
    "preconditions": ["Fridge door initially closed", "Handle reachable from the robot's current base pose", "No human nearby and scene static", "Robot has control of arm and gripper"],
    "stepwise_plan": ["Detect fridge door", "Move to handle pregrasp", "Set tool yaw for side grasp", "Open gripper", "Approach and align to handle", "Close gripper to grasp", "Execute door opening", "Release handle", "Retreat and pause"],
    "success_criteria": ["Door visibly open with interior shelves exposed", "Gripper released from handle", "Robot at safe standoff after retreat"],
    "failure_and_recovery": ["If detection fails: re-scan area", "If alignment fails: repeat approach with tighter tolerance", "If grasp slips: reopen gripper and reattempt", "If door sticks: retry open motion with slight re-approach"],
    "termination": "Terminate after retreat and brief wait once the door is open and the arm is clear."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "First firm contact and alignment of gripper at the door handle becomes clear.",
        "predicts_next": "Pull/open actuation is expected next as alignment finalizes.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "opening the fridge",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["fridge", "fridge_door", "handle", "interior_shelves", "robot_arm", "drawers"],
  "objects_from_instruction": ["fridge"],
  "blackboard_keys": [],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"fridge_door","timeout_ms":1200},"description":"Perceive and localize the fridge door."},
    {"id":"MoveTo","type":"Action","ports":{"target":"fridge_handle_pregrasp","timeout_ms":1500},"description":"Navigate the end-effector to a pregrasp near the handle."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":90},"description":"Rotate wrist to align with handle orientation."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":500},"description":"Prepare to envelop the handle."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"fridge_handle","tolerance":0.005,"timeout_ms":1200},"description":"Close in and align precisely to the handle."},
    {"id":"CloseGripper","type":"Action","ports":{"force":20,"timeout_ms":800},"description":"Grasp the handle with moderate force."},
    {"id":"OpenContainer","type":"Action","ports":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":1500},"description":"Actuate opening of the hinged fridge door."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":500},"description":"Release the handle after opening."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.2,"timeout_ms":1200},"description":"Back away to a safe standoff."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":500},"description":"Brief stabilization pause."}
  ],
  "tree_stats": {"nodes_total": 11, "actions": 10, "conditions": 0, "depth": 2},
  "failure_modes": ["Door not detected due to glare/occlusion", "Misalignment causing missed grasp", "Insufficient force causing partial opening", "Robot collides with drawers while pulling"],
  "recovery_strategy": ["Re-run detection/approach steps", "Adjust yaw and re-align", "Reopen and reattempt open motion", "Abort and retreat if forces exceed safe limits"],
  "assumptions": ["Handle is graspable with a side approach (yaw 90Â°)", "Door is a right-hinged door opening toward the robot; this matches frames with increasing opening angle", "No explicit retries specified by instruction; single-pass execution used"],
  "evaluation_notes": {
    "expected_success_criteria": ["Interior visible and door angle clearly open", "Gripper released and arm retreated"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"fridge_door","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveTo","attrs":{"target":"fridge_handle_pregrasp","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"SetTCPYaw","attrs":{"yaw_deg":90}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"fridge_handle","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":20,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.2,"timeout_ms":1200}},
      "active_path_ids": []
    }
  ]
}
