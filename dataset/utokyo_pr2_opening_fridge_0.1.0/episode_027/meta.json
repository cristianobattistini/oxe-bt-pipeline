{
  "dataset_id": "utokyo_pr2_opening_fridge_0.1.0",
  "episode_id": "episode_027",
  "task_summary": "Detect the fridge and its handle, approach and align, grasp the handle, pull to open the hinged door, confirm it is open, release the handle, and retreat.",
  "task_long_description": {
    "overview": "A PR2 manipulator opens a small refrigerator door. The robot first perceives the fridge and the handle, then moves to a suitable approach pose. It computes a pull-style grasp, orients the tool, opens the gripper, aligns to the handle, and closes the gripper to secure it. The robot actuates opening of the hinged door, verifies that the container is open, releases the handle, and retreats to a safe distance. The workspace includes a cabinet stack near the fridge; clearance is limited so smooth pulling and retreat are required.",
    "preconditions": ["Fridge is closed and reachable", "Handle is present and graspable", "Sufficient clearance for door swing", "Robot has localization of the fridge area"],
    "stepwise_plan": ["Detect fridge and verify visibility", "Navigate/approach to fridge region", "Detect and verify handle visibility", "Compute pull grasp and confirm pose availability", "Orient tool, open gripper, align, then close gripper on handle", "Execute door opening for a hinged door", "Confirm door state is open", "Release handle and retreat"],
    "success_criteria": ["ContainerOpen(fridge) evaluates true", "Door visibly open with interior shelves exposed", "Robot safely clear of the swinging door", "No collisions with surrounding furniture"],
    "failure_and_recovery": ["Handle not detected → re-detect or widen view", "Misalignment → repeat ApproachAndAlign with tighter tolerance", "Grip slips → increase force within limits then retry", "OpenContainer times out → re-attempt after minor re-alignment"],
    "termination": "Terminate after confirming the fridge is open, releasing the handle, and retreating to a safe standoff."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "opening the fridge",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["fridge", "fridge_door", "fridge_handle", "interior_shelves", "adjacent_cabinet"],
  "objects_from_instruction": ["fridge"],
  "blackboard_keys": ["handle_grasp"],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"string","timeout_ms":"int"},"description":"Perceive specified target within time budget."},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"string"},"description":"Checks if a target is currently visible."},
    {"id":"MoveTo","type":"Action","ports":{"target":"string","timeout_ms":"int"},"description":"Navigate/manipulator move toward symbolic target."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"string","strategy":"string","result_key":"string"},"description":"Compute grasp pose; stores key on blackboard."},
    {"id":"PoseAvailable","type":"Condition","ports":{"key":"string"},"description":"Verify that a pose was produced and is available."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":"int"},"description":"Rotate end-effector yaw."},
    {"id":"OpenGripper","type":"Action","ports":{"width":"float","timeout_ms":"int"},"description":"Open gripper to a target width."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"string","tolerance":"float","timeout_ms":"int"},"description":"Refine approach to the target with given tolerance."},
    {"id":"CloseGripper","type":"Action","ports":{"force":"float","timeout_ms":"int"},"description":"Close gripper with specified force."},
    {"id":"OpenContainer","type":"Action","ports":{"target":"string","container_type":"string","timeout_ms":"int"},"description":"Open a specified container such as a hinged door."},
    {"id":"ContainerOpen","type":"Condition","ports":{"target":"string"},"description":"Check if the named container is open."},
    {"id":"Retreat","type":"Action","ports":{"distance":"float","timeout_ms":"int"},"description":"Back off by a safe distance."}
  ],
  "tree_stats": {"nodes_total": 16, "actions": 11, "conditions": 4, "depth": 2},
  "failure_modes": ["Handle not detected", "Alignment failure due to occlusion", "Insufficient grip leading to slip", "Door obstructed by nearby furniture", "Timeouts during opening"],
  "recovery_strategy": ["Re-detect and adjust viewpoint", "Re-run alignment with smaller tolerance", "Increase gripping force within safe range", "Partial retreat then re-approach", "Retry OpenContainer after micro-adjustment"],
  "assumptions": ["The fridge door is a hinged door with a pull handle", "The handle is graspable by the PR2 gripper", "Opening direction is pull toward robot then swing open; frames confirm increasing door angle"],
  "evaluation_notes": {
    "expected_success_criteria": ["ContainerOpen(fridge)=true", "Interior shelves visible in frames", "Robot has retreated to a safe standoff"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"fridge","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"fridge"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"MoveTo","attrs":{"target":"fridge","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"fridge_handle"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":20,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"fridge","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"fridge","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.06,"timeout_ms":400}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    }
  ]
}
