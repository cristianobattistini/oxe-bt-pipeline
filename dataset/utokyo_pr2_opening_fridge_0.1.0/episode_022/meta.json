{
  "dataset_id": "utokyo_pr2_opening_fridge_0.1.0",
  "episode_id": "episode_022",
  "task_summary": "PR2 detects the fridge and handle, aligns, grasps the handle, pulls to open the hinged door, verifies it is open, releases, and retreats.",
  "task_long_description": {
    "overview": "A PR2 robot opens a small refrigerator in a cluttered lab corner. The door has a hinged opening with a horizontal bar handle. The robot must perceive the fridge and handle, approach with precise alignment, grasp the handle, and execute a pull to swing the door open. Once opened, the interior becomes visible. The robot then releases the handle and backs away to a safe standoff. Timing and forces are modest; accuracy during alignment is important due to limited clearance near cabinets.",
    "preconditions": ["Fridge door initially closed", "Handle accessible and not obstructed", "Robot base positioned within manipulator reach", "Perception active and calibrated", "Gripper functional and empty"],
    "stepwise_plan": ["Detect fridge door and handle", "Open gripper and align to handle", "Compute grasp pose and confirm availability", "Close gripper on handle", "Execute open on hinged door", "Confirm door is open", "Release handle", "Retreat to safe distance and pause"],
    "success_criteria": ["Door clearly ajar with interior visible", "No collisions with nearby furniture", "Handle grasped and released safely", "Arm ends at a safe standoff"],
    "failure_and_recovery": ["If detection fails, rescan the area and reattempt alignment", "If grasp is unstable, reopen gripper, realign, and retry", "If door resists, re-pull after improving alignment", "If collision risk detected, abort and retreat"],
    "termination": "Terminate after door open is confirmed, handle is released, and the robot has retreated to a safe pose."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "Door visibly swung open; clear pulling motion underway.",
        "predicts_next": "Subsequent release and retreat are expected.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "opening the fridge",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["fridge_body","fridge_door","fridge_handle","fridge_interior_shelves","adjacent_cabinets","PR2_arm"],
  "objects_from_instruction": ["fridge"],
  "blackboard_keys": ["handle_grasp"],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"fridge_door","timeout_ms":800},"description":"Detect fridge door in the scene."},
    {"id":"DetectObject","type":"Action","ports":{"target":"fridge_handle","timeout_ms":800},"description":"Detect the door handle as grasp target."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":800},"description":"Prepare gripper for handle grasp."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"fridge_handle","tolerance":0.005,"timeout_ms":1200},"description":"Approach and align precisely to handle."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"fridge_handle","strategy":"pull","result_key":"handle_grasp"},"description":"Compute pulling grasp pose for handle."},
    {"id":"PoseAvailable","type":"Condition","ports":{"key":"handle_grasp"},"description":"Verify grasp pose in blackboard."},
    {"id":"CloseGripper","type":"Action","ports":{"force":20,"timeout_ms":800},"description":"Close gripper to grasp handle."},
    {"id":"OpenContainer","type":"Action","ports":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":1500},"description":"Execute door opening motion (pull)."},
    {"id":"ContainerOpen","type":"Condition","ports":{"target":"fridge_door"},"description":"Check that the door is open."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.08,"timeout_ms":500},"description":"Release the handle after opening."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Back off to a safe distance."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":400},"description":"Short settle time."}
  ],
  "tree_stats": {"nodes_total": 13, "actions": 10, "conditions": 2, "depth": 2},
  "failure_modes": ["Handle not detected or occluded", "Misalignment causing slip during pull", "Door rebound closing slightly", "Nearby cabinet collision risk"],
  "recovery_strategy": ["Re-run detection and re-approach", "Recompute grasp pose and increase normal alignment precision", "Repeat open motion briefly", "Abort and retreat if contact risk detected"],
  "assumptions": ["The door is a right/left-hinged door operated by pulling a bar handle; frames show a successful open with interior visible. Container type mapped to 'hinged_door' per library."],
  "evaluation_notes": {
    "expected_success_criteria": ["ContainerOpen condition satisfied", "Robot ends in retreat pose", "No collisions during the sequence"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"fridge_door","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"fridge_handle","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":20,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"ContainerOpen","attrs":{"target":"fridge_door"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "retreat",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.08,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Wait","attrs":{"timeout_ms":400}},
      "active_path_ids": []
    }
  ]
}
