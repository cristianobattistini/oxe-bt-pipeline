{
  "dataset_id": "utokyo_pr2_opening_fridge_0.1.0",
  "episode_id": "episode_017",
  "task_summary": "PR2 locates the fridge handle, grasps it, pulls to open the hinged door, verifies it is open, retreats, and releases.",
  "task_long_description": {
    "overview": "A PR2 robot is tasked with opening a small white fridge placed beside a wooden cabinet. The robot must first perceive and localize the fridge handle, approach and align its gripper, grasp the handle, and pull so the hinged door swings open. The contact sheet shows progressive opening from closed to fully open, with interior shelves visible. The behavior emphasizes reliable perception, safe pulling, and verification that the container is open before retreating and releasing the handle.",
    "preconditions": [
      "Fridge is reachable by the PR2",
      "Handle is unobstructed and visible from at least one viewpoint",
      "No humans or obstacles within immediate swing path of the door",
      "Robot base and arm are powered and homed"
    ],
    "stepwise_plan": [
      "Open gripper and search/confirm the fridge handle.",
      "Approach and align to the handle with tight tolerance.",
      "Close gripper to grasp the handle; set wrist yaw for pulling.",
      "Execute container opening on the hinged door (pull action).",
      "Check that the fridge is open.",
      "Retreat to clear the swing path and release the handle.",
      "Brief wait to stabilize."
    ],
    "success_criteria": [
      "Fridge door angle clearly open with interior visible",
      "ContainerOpen condition evaluates true",
      "Robot safely clear of door, gripper open"
    ],
    "failure_and_recovery": [
      "If handle not found: rescan and re-detect (decorator retry).",
      "If grasp slips: reopen gripper, realign, and regrasp.",
      "If door sticks: reattempt open with adjusted wrist yaw or approach.",
      "If collision risk detected: retreat and re-approach."
    ],
    "termination": "Terminate when ContainerOpen is true and the robot has retreated and opened the gripper."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "opening the fridge",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["fridge", "fridge_door", "fridge_handle", "interior_shelves", "cabinet", "PR2_robot"],
  "objects_from_instruction": ["fridge"],
  "blackboard_keys": [],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":"0.09","timeout_ms":"400"},"description":"Opens gripper to the specified width."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"fridge_handle","pattern":"line","max_attempts":"3","timeout_ms":"1500"},"description":"Active scan to locate the handle."},
    {"id":"DetectObject","type":"Action","ports":{"target":"fridge_handle","timeout_ms":"1200"},"description":"Confirm visual detection of the handle."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"fridge_handle","tolerance":"0.01","timeout_ms":"1500"},"description":"Approach handle with tight alignment tolerance."},
    {"id":"CloseGripper","type":"Action","ports":{"force":"20","timeout_ms":"800"},"description":"Grasp the handle with moderate force."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":"90"},"description":"Orient wrist yaw to pull the door."},
    {"id":"OpenContainer","type":"Action","ports":{"target":"fridge","container_type":"hinged_door","timeout_ms":"1500"},"description":"Commanded opening of a hinged door container (pull)."},
    {"id":"ContainerOpen","type":"Condition","ports":{"target":"fridge"},"description":"Checks if the fridge door is open."},
    {"id":"Retreat","type":"Action","ports":{"distance":"0.2","timeout_ms":"1200"},"description":"Back off to clear the opened door."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":"400"},"description":"Short stabilization wait."}
  ],
  "tree_stats": {"nodes_total": 14, "actions": 10, "conditions": 1, "depth": 4},
  "failure_modes": ["Handle not detected", "Misalignment causing failed grasp", "Insufficient pull leading to partial opening", "Collision with cabinet or door during pull"],
  "recovery_strategy": ["Retry scan/detect via decorator", "Re-approach with tighter tolerance", "Regrasp with adjusted yaw", "Abort and retreat if collision predicted"],
  "assumptions": ["Door is a hinged door with pull handle; exact handle type not specified in instruction.", "Wrist yaw of 90Â° aligns with pull direction based on frames.", "No need to compute an explicit grasp_key; direct grasp suffices."],
  "evaluation_notes": {
    "expected_success_criteria": ["ContainerOpen returns true", "Door visually open with interior visible", "Robot safely clear and gripper open"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"fridge_handle","pattern":"line","max_attempts":3,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"fridge_handle","tolerance":0.01,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "verify",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"fridge_handle","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":20,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"fridge","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"fridge","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"fridge","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.2,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":400}},
      "active_path_ids": []
    }
  ]
}

