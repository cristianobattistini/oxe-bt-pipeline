{
  "dataset_id": "utokyo_pr2_opening_fridge_0.1.0",
  "episode_id": "episode_009",
  "task_summary": "PR2 detects the fridge handle, approaches and grasps it, pulls to open the hinged door, verifies openness, releases the handle, and retreats.",
  "task_long_description": {
    "overview": "The PR2 robot is positioned near a small refrigerator. The goal is to open the fridge door. The sequence involves perceiving the handle, approaching and aligning precisely, grasping with moderate force, orienting the wrist, executing an opening action consistent with a hinged door, checking that the door is open, then releasing the handle and retreating to a safe pose. Visual evidence across frames shows progressive door opening and interior shelves becoming visible.",
    "preconditions": ["Robot has free workspace around the door swing.", "Fridge door has a reachable handle.", "Perception can localize the handle.", "No obstructions within retreat path."],
    "stepwise_plan": ["Open gripper to a wide width.", "Detect or scan for the fridge handle.", "Move to the handle and align with low tolerance.", "Close gripper to secure grasp.", "Set wrist yaw suitable for pulling.", "Attempt to open the hinged door; retry if needed.", "Verify the door is open.", "Release handle.", "Retreat and briefly wait."],
    "success_criteria": ["Fridge door angle sufficiently open to reveal interior shelves.", "Handle released safely.", "Robot ends in a safe, non-colliding configuration."],
    "failure_and_recovery": ["Handle not detected -> run scan pattern.", "Misalignment or slip -> re-approach and retry open.", "Door initially stuck -> retry open up to 3 attempts.", "Unexpected contact -> retreat and reattempt perception."],
    "termination": "Terminate when ContainerOpen(fridge_door) is true and the robot has released the handle and retreated."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "opening the fridge",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["pr2", "fridge_door", "fridge_handle", "drawer_cabinet", "fridge_interior"],
  "objects_from_instruction": ["fridge"],
  "blackboard_keys": [],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":"0.09","timeout_ms":"500"},"description":"Prepare wide grip before approaching handle."},
    {"id":"DetectObject","type":"Action","ports":{"target":"fridge_handle","timeout_ms":"800"},"description":"Primary detection of handle."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"fridge_handle","pattern":"raster","max_attempts":"3","timeout_ms":"1500"},"description":"Fallback scan if initial detection fails."},
    {"id":"MoveTo","type":"Action","ports":{"target":"fridge_handle","timeout_ms":"1500"},"description":"Move end-effector to handle."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"fridge_handle","tolerance":"0.01","timeout_ms":"1200"},"description":"Tight alignment before grasp."},
    {"id":"CloseGripper","type":"Action","ports":{"force":"20","timeout_ms":"800"},"description":"Grasp handle with moderate force."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":"90"},"description":"Orient wrist to pull the hinged door."},
    {"id":"OpenContainer","type":"Action","ports":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":"2000"},"description":"Execute door-opening motion."},
    {"id":"ContainerOpen","type":"Condition","ports":{"target":"fridge_door"},"description":"Check if the fridge door is open."},
    {"id":"OpenGripper","type":"Action","ports":{"width":"0.08","timeout_ms":"500"},"description":"Release handle after opening."},
    {"id":"Retreat","type":"Action","ports":{"distance":"0.1","timeout_ms":"800"},"description":"Back away from the opened door."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":"400"},"description":"Brief stabilization wait."}
  ],
  "tree_stats": {"nodes_total": 16, "actions": 11, "conditions": 1, "depth": 4},
  "failure_modes": ["Handle not detected due to glare or occlusion", "Gripper slips on handle", "Door hinge resistance higher than expected", "Collision with nearby cabinet during pull", "Incorrect wrist orientation causing ineffective pull"],
  "recovery_strategy": ["Fallback scanning pattern for perception", "Re-open gripper and re-align, then re-grasp", "Retry open up to three times", "Retreat slightly and re-approach with new alignment", "Adjust yaw and reattempt opening"],
  "assumptions": ["Frames show a hinged fridge door with a graspable handle; we assume left-hinged door opening toward the robot as visible.", "No explicit forces/velocities are given by the instruction; defaults chosen from allowed bins.", "SetTCPYaw=90Â° assumed adequate from observed approach geometry."],
  "evaluation_notes": {
    "expected_success_criteria": ["ContainerOpen(fridge_door) returns true", "Handle released and end-effector clear of door", "No collisions during retreat"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"fridge_handle","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"fridge_handle","pattern":"raster","max_attempts":3,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"MoveTo","attrs":{"target":"fridge_handle","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"fridge_handle","tolerance":0.01,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":20,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":2000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"ContainerOpen","attrs":{"target":"fridge_door"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.08,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
