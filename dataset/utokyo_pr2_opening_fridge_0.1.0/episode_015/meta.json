{
  "dataset_id": "utokyo_pr2_opening_fridge_0.1.0",
  "episode_id": "episode_015",
  "task_summary": "PR2 detects the fridge handle, approaches and grasps it, pulls the hinged door open, verifies it is open, releases the handle, and retreats.",
  "task_long_description": {
    "overview": "A PR2 robot opens a refrigerator door in a cluttered lab. The robot first perceives the handle, approaches with a precise alignment, and pre-shapes the gripper. It computes a pull-oriented grasp on the handle, grasps, and executes an opening motion on the hinged door. Once the door swings wide, it checks that the container is open, releases the handle, and backs away to a safe standoff. The workflow must be robust to partial occlusions and limited depth cues while respecting timeouts and safe motions.",
    "preconditions": ["Fridge is reachable and unlatched", "Handle is visible or discoverable by scanning", "Workspace free of occlusions near the door swing", "Robot has control of its arm and gripper"],
    "stepwise_plan": [
      "Detect fridge handle and confirm visibility.",
      "Move to pregrasp and align tightly to the handle.",
      "Open gripper and compute a pull grasp pose.",
      "Grasp the handle and command door opening.",
      "Verify door state, release handle, and retreat."
    ],
    "success_criteria": ["Door angle increased visibly from closed to open", "ContainerOpen condition returns success", "Robot ends in safe standoff with no collisions"],
    "failure_and_recovery": [
      "Handle not detected: retry detection or adjust viewpoint.",
      "Misalignment: re-run ApproachAndAlign with tighter tolerance.",
      "Grasp slip: re-open gripper, recompute grasp, try again.",
      "Door jammed: stop motion and report failure."
    ],
    "termination": "Terminate when ContainerOpen succeeds and the robot has released the handle and retreated."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "opening the fridge",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["fridge_door","fridge_handle","drawer_unit","robot_arm","interior_shelves"],
  "objects_from_instruction": ["fridge"],
  "blackboard_keys": ["handle_grasp"],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"fridge_handle","timeout_ms":800},"description":"Detect the fridge handle in the scene."},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"fridge_handle"},"description":"Confirm handle visibility before approaching."},
    {"id":"MoveTo","type":"Action","ports":{"target":"fridge_handle_pregrasp","timeout_ms":2000},"description":"Move the end-effector to a safe pregrasp waypoint."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"fridge_handle","tolerance":0.005,"timeout_ms":1500},"description":"Precisely align to the handle."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":500},"description":"Pre-shape gripper to grasp the handle."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"fridge_handle","strategy":"pull","result_key":"handle_grasp"},"description":"Compute a pull-oriented grasp for the handle."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"handle_grasp","timeout_ms":1200},"description":"Execute the grasp on the handle."},
    {"id":"OpenContainer","type":"Action","ports":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":2000},"description":"Command door opening motion while holding the handle."},
    {"id":"ContainerOpen","type":"Condition","ports":{"target":"fridge_door"},"description":"Verify the door is open."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.08,"timeout_ms":400},"description":"Release the handle."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Back away to a safe standoff."}
  ],
  "tree_stats": {"nodes_total": 12, "actions": 9, "conditions": 2, "depth": 3},
  "failure_modes": [
    "Handle not found due to glare or occlusion",
    "Alignment drift during pull causing slip",
    "Insufficient pull leading to partial opening",
    "Collision with adjacent drawer unit during swing"
  ],
  "recovery_strategy": [
    "Re-run detection with small view change",
    "Re-align and re-grasp with new pose",
    "Increase opening duration within timeout bins",
    "Abort if unexpected contact forces detected"
  ],
  "assumptions": [
    "Fridge uses a hinged door; opening direction matches observed frames.",
    "Handle is graspable by the PR2 gripper and not magnetically latched.",
    "No external human interference during door swing."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "ContainerOpen returns success",
      "Door visually open beyond initial angle",
      "Robot ends with open gripper and standoff position"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"fridge_handle","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveTo","attrs":{"target":"fridge_handle_pregrasp","timeout_ms":2000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"fridge_handle","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"handle_grasp","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":2000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":2000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":2000}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.08,"timeout_ms":400}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
