{
  "dataset_id": "utokyo_pr2_opening_fridge_0.1.0",
  "episode_id": "episode_038",
  "task_summary": "Detect the fridge handle, approach, grasp, and open the hinged fridge door, then retreat.",
  "task_long_description": {
    "overview": "A PR2-like mobile manipulator opens a small hinged fridge door positioned beside a drawer cabinet. The contact sheet shows the arm approaching the handle, making contact, pulling the door open, and the door reaching a wide-open state. The behavior emphasizes reliable perception of the handle, precise alignment, a secure grasp, appropriate yaw for a pulling motion, and a single open action for a hinged door. Safety requires avoiding collisions with nearby drawers and retreating once the door is open to provide clearance.",
    "preconditions": [
      "Robot base positioned with reachable access to the fridge handle",
      "Fridge is closed and hinged door operable",
      "No obstacles blocking the handle or door swing",
      "Gripper operational and able to grasp a bar/knob-like handle"
    ],
    "stepwise_plan": [
      "Perceive or scan to localize the fridge handle.",
      "Move to a pregrasp and align precisely to the handle.",
      "Open gripper and compute grasp pose for pulling.",
      "Grasp the handle and set yaw appropriate for a pull.",
      "Execute door opening on the hinged fridge door.",
      "Verify the door state is open.",
      "Retreat to provide clearance."
    ],
    "success_criteria": [
      "Door reaches an open state visible in the scene",
      "No collisions with the cabinet or environment",
      "Robot ends in a safe, retracted pose"
    ],
    "failure_and_recovery": [
      "Handle not detected: fall back to scanning pattern.",
      "Misalignment: repeat approach and refine alignment.",
      "Grasp slip: recompute grasp pose and regrasp.",
      "Door jam: reattempt opening with adjusted yaw or contact."
    ],
    "termination": "Task terminates when the door is confirmed open and the robot has retreated to a safe distance."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "opening the fridge",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["fridge", "fridge_door", "fridge_handle", "drawer_cabinet", "interior_shelves", "floor", "robot_arm"],
  "objects_from_instruction": ["fridge"],
  "blackboard_keys": ["grasp_handle"],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"fridge_handle","timeout_ms":800},"description":"Detect the fridge handle quickly."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"fridge_handle","pattern":"arc","max_attempts":3,"timeout_ms":1500},"description":"Fallback scanning of the handle if initial detection fails."},
    {"id":"MoveTo","type":"Action","ports":{"target":"fridge_handle_pregrasp","timeout_ms":1200},"description":"Move to pregrasp near the handle."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"fridge_handle","tolerance":0.005,"timeout_ms":1200},"description":"Refine pose for a precise handle grasp."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":500},"description":"Open gripper wide before grasping the handle."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"fridge_handle","strategy":"pull","result_key":"grasp_handle"},"description":"Compute a pulling grasp on the handle and store on blackboard."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"grasp_handle","timeout_ms":1200},"description":"Execute grasp using computed pose."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":90},"description":"Orient tool yaw to pull the door open."},
    {"id":"OpenContainer","type":"Action","ports":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":1500},"description":"Open the hinged fridge door using the grasped handle."},
    {"id":"ContainerOpen","type":"Condition","ports":{"target":"fridge_door"},"description":"Verify the fridge door is open."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.2,"timeout_ms":800},"description":"Back off to a safe distance after opening."}
  ],
  "tree_stats": {"nodes_total": 13, "actions": 10, "conditions": 1, "depth": 3},
  "failure_modes": [
    "Handle not detected due to occlusion or glare",
    "Approach misalignment causing missed grasp",
    "Grasp not secure; handle slips",
    "Door jam or collision with nearby cabinet",
    "Incorrect yaw leading to ineffective pulling"
  ],
  "recovery_strategy": [
    "Fallback to scanning pattern if detection fails",
    "Repeat approach with tighter tolerance",
    "Recompute grasp pose and reattempt pick",
    "Adjust yaw and retry opening; retreat and re-approach if collision risk"
  ],
  "assumptions": [
    "Door is a standard hinged door; handle style compatible with parallel-jaw grasp",
    "OpenContainer abstracts the pull motion once the handle is grasped",
    "Frames depict successful opening; any base repositioning is handled outside this tree"
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "ContainerOpen condition returns success",
      "Final robot pose is safely retracted",
      "No collisions during door swing"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"fridge_handle","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveTo","attrs":{"target":"fridge_handle_pregrasp","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"fridge_handle","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"grasp_handle","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"ContainerOpen","attrs":{"target":"fridge_door"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.2,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.2,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.2,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
