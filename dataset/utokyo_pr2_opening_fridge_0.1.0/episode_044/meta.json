{
  "dataset_id": "utokyo_pr2_opening_fridge_0.1.0",
  "episode_id": "episode_044",
  "task_summary": "PR2 detects the fridge handle, approaches and grasps it, pulls to open the hinged fridge door, verifies it is open, retreats, and releases.",
  "task_long_description": {
    "overview": "A PR2 robot interacts with a small hinged-door refrigerator located beside drawers. The sequence involves perceiving the handle, approaching to a pre-grasp, aligning the wrist, grasping the handle, and pulling to open the door. Frames show the door moving from closed to wide open with the arm inside the swing volume. Safety constraints include tight alignment before grasp and modest pulling force to avoid slamming. After opening, the robot retreats from the door and releases the handle.",
    "preconditions": ["Robot near the fridge front", "Workspace free of obstacles along the door swing", "Gripper empty and operational", "Fridge has a hinged door with graspable handle"],
    "stepwise_plan": ["Open gripper and detect handle", "Move to pre-grasp and align", "Yaw wrist for pull direction", "Close gripper on handle", "Execute door opening motion", "Confirm door is open", "Retreat and release handle"],
    "success_criteria": ["ContainerOpen(fridge_door) returns success", "Door interior visible and unobstructed", "Robot safely retreated from door swing"],
    "failure_and_recovery": ["If detection/alignment fails, the sequence aborts and can be retried from the top.", "If pull fails, re-align and attempt another open motion.", "If obstruction detected, retreat and stop."],
    "termination": "After verifying the door is open, the robot retreats and releases the handle."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "opening the fridge",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["fridge", "fridge_door", "fridge_handle", "door_bins", "interior_shelves", "cabinet_drawers", "robot_arm", "robot_gripper", "robot_base", "floor"],
  "objects_from_instruction": ["fridge"],
  "blackboard_keys": [],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":500},"description":"Prepare gripper for grasp."},
    {"id":"DetectObject","type":"Action","ports":{"target":"fridge_handle","timeout_ms":1200},"description":"Perceive the fridge handle."},
    {"id":"MoveTo","type":"Action","ports":{"target":"fridge_handle_pregrasp","timeout_ms":1500},"description":"Transit to pre-grasp pose."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"fridge_handle","tolerance":0.005,"timeout_ms":1200},"description":"Refine approach with tight tolerance."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":90},"description":"Orient wrist for a lateral pull."},
    {"id":"CloseGripper","type":"Action","ports":{"force":20,"timeout_ms":800},"description":"Grasp the handle with moderate force."},
    {"id":"OpenContainer","type":"Action","ports":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":1500},"description":"Pull to open the fridge door."},
    {"id":"ContainerOpen","type":"Condition","ports":{"target":"fridge_door"},"description":"Verify door is open."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Back out of the door swing."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":500},"description":"Release the handle."}
  ],
  "tree_stats": {"nodes_total": 11, "actions": 9, "conditions": 1, "depth": 2},
  "failure_modes": ["Handle not detected", "Misalignment leading to slip", "Insufficient pull producing partial opening", "Collision with door or drawers"],
  "recovery_strategy": ["Restart sequence to re-detect and re-align", "Repeat pull after micro-adjustment", "Abort and retreat if contact forces are unsafe"],
  "assumptions": ["Door is a right-hinged household fridge; handle is graspable by PR2; frames show the door already partly open in mid-sequence which matches the OpenContainer stage."],
  "evaluation_notes": {
    "expected_success_criteria": ["ContainerOpen returns true", "Robot ends clear of door swing", "No collisions or slips"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"fridge_handle","timeout_ms":1200}},
      "active_path_ids": ["Sequence","DetectObject"]
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveTo","attrs":{"target":"fridge_handle_pregrasp","timeout_ms":1500}},
      "active_path_ids": ["Sequence","MoveTo"]
    },
    {
      "frame": "frame_2",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"fridge_handle","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": ["Sequence","ApproachAndAlign"]
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":20,"timeout_ms":800}},
      "active_path_ids": ["Sequence","CloseGripper"]
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": ["Sequence","OpenContainer"]
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": ["Sequence","OpenContainer"]
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"ContainerOpen","attrs":{"target":"fridge_door"}},
      "active_path_ids": ["Sequence","ContainerOpen"]
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": ["Sequence","Retreat"]
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":500}},
      "active_path_ids": ["Sequence","OpenGripper"]
    }
  ]
}
