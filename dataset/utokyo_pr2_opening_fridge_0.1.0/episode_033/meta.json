{
  "dataset_id": "utokyo_pr2_opening_fridge_0.1.0",
  "episode_id": "episode_033",
  "task_summary": "PR2 perceives a closed fridge, approaches and grasps the handle, opens the hinged door, then retreats.",
  "task_long_description": {
    "overview": "A PR2 robot is positioned near a small refrigerator beside a drawer cabinet. The goal is to open the fridge door. The robot must first detect the fridge, move to a front pre-grasp pose, align to the handle, grasp it, and pull to open the hinged door. After the door swings open, the robot should retreat to avoid collisions while keeping the door open. Perception must be robust in a cluttered environment with limited clearance between cabinet and robot.",
    "preconditions": [
      "Fridge present and reachable",
      "Hinged door with accessible handle",
      "Arm and gripper operational and empty",
      "Workspace free of blocking obstacles along pull arc"
    ],
    "stepwise_plan": [
      "Detect the fridge in the scene.",
      "Move to a front approach pose and open the gripper.",
      "Align the end-effector with the handle and set yaw.",
      "Close gripper on the handle to secure contact.",
      "If the door is already open, skip opening; otherwise pull to open the hinged door.",
      "Retreat to a safe standoff and pause briefly."
    ],
    "success_criteria": [
      "Fridge door visibly open beyond initial closed state",
      "No collisions with cabinet or door",
      "Robot ends in a safe, non-contact pose"
    ],
    "failure_and_recovery": [
      "Detection failure: re-attempt detection or perform a scan.",
      "Misalignment: re-approach and re-align handle.",
      "Grip slip: reopen, re-align, and re-grasp with higher force within limits.",
      "Door stuck: re-pull with slightly longer timeout."
    ],
    "termination": "Terminate once the door is open and the robot has retreated to a safe distance."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "opening the fridge",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["fridge", "fridge_handle", "fridge_door", "cabinet", "robot_arm"],
  "objects_from_instruction": ["fridge"],
  "blackboard_keys": ["fridge", "fridge_front", "fridge_handle"],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"string","timeout_ms":"int"},"description":"Detect the specified target in the scene."},
    {"id":"MoveTo","type":"Action","ports":{"target":"string","timeout_ms":"int"},"description":"Move the end-effector/base to a symbolic target pose."},
    {"id":"OpenGripper","type":"Action","ports":{"width":"float","timeout_ms":"int"},"description":"Open gripper to the commanded width."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":"int"},"description":"Rotate tool yaw to align with handle orientation."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"string","tolerance":"float","timeout_ms":"int"},"description":"Approach target and align within tolerance."},
    {"id":"CloseGripper","type":"Action","ports":{"force":"float","timeout_ms":"int"},"description":"Close gripper with specified force to secure handle."},
    {"id":"ContainerOpen","type":"Condition","ports":{"target":"string"},"description":"Checks if the given container (fridge) is already open."},
    {"id":"OpenContainer","type":"Action","ports":{"target":"string","container_type":"string","timeout_ms":"int"},"description":"Open a specified container type (hinged door)."},
    {"id":"Retreat","type":"Action","ports":{"distance":"float","timeout_ms":"int"},"description":"Back off from the workspace by a set distance."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":"int"},"description":"Pause for stabilization or observation."}
  ],
  "tree_stats": {"nodes_total": 13, "actions": 9, "conditions": 1, "depth": 4},
  "failure_modes": [
    "Fridge not detected due to occlusion",
    "Approach misalignment causing missed handle",
    "Insufficient grip leading to slip",
    "Door resistance higher than expected"
  ],
  "recovery_strategy": [
    "Re-detect or scan the scene and re-localize the handle",
    "Re-approach with tighter tolerance",
    "Retry grasp with adjusted alignment",
    "Increase open timeout and repeat opening motion"
  ],
  "assumptions": [
    "The door is a hinged fridge door with a graspable handle; frames confirm door swing.",
    "Opening motion is achieved by pulling via handle grasp; no latches requiring special actions are present.",
    "Targets 'fridge_front' and 'fridge_handle' are valid symbolic waypoints in the system."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "ContainerOpen(fridge) becomes true after OpenContainer",
      "Door visibly open in frames 4â€“7 and robot safely retreats"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"fridge","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveTo","attrs":{"target":"fridge_front","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"fridge_handle","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":20,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"fridge","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"fridge","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"fridge","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.2,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Wait","attrs":{"timeout_ms":400}},
      "active_path_ids": []
    }
  ]
}
