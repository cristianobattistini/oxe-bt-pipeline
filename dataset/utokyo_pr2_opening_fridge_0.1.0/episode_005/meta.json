{
  "dataset_id": "utokyo_pr2_opening_fridge_0.1.0",
  "episode_id": "episode_005",
  "task_summary": "PR2 perceives the fridge handle, aligns, grasps, pulls the hinged door open, then retreats.",
  "task_long_description": {
    "overview": "The scene shows a PR2 robot in front of a compact refrigerator. The goal is to open the hinged fridge door using the handle. The robot must perceive the handle, approach with proper wrist yaw, establish a stable grasp, and execute the opening motion using the door’s hinge. After the door swings open to a sufficient angle, the robot retreats to clear the doorway. Constraints include precise alignment to the handle and moderate gripping force to avoid slippage or damage.",
    "preconditions": ["Fridge present with a left-side handle and right-hinged door", "Reachable workspace for PR2 arm", "No obstructions blocking door swing", "Gripper functional and empty"],
    "stepwise_plan": ["Open gripper", "Detect fridge handle", "Move above handle and set wrist yaw", "Approach and align to the handle", "Close gripper and verify stable grasp", "Open the fridge door (hinged)", "Retreat to clear the open door"],
    "success_criteria": ["Door angle visibly increases and remains open", "No collisions with nearby furniture", "Grasp remains stable during opening", "Robot ends clear of the door"],
    "failure_and_recovery": ["Handle not detected → rescan and adjust view", "Misalignment → re-approach with tighter tolerance", "Grasp slip → reopen gripper and retry", "Door jam → reduce force and reattempt"],
    "termination": "Terminate once the door is open and the robot has retreated to a safe, stable pose."
  },
  "frame_ranking": {
    "order": ["frame_4","frame_5","frame_3","frame_6","frame_2","frame_1","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.20, "frame_1": 0.45, "frame_2": 0.58, "frame_3": 0.82,
      "frame_4": 0.95, "frame_5": 0.90, "frame_6": 0.70, "frame_7": 0.35, "frame_8": 0.15
    },
    "rationale_per_frame": {
      "frame_4": {
        "now_evidence": "Door is clearly swinging open while the gripper holds the handle.",
        "predicts_next": "Continued opening followed by retreat is expected.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "opening the fridge",
  "instruction_to_ports": {
    "force": 20,
    "timeout_ms": 1500,
    "tolerance": 0.005,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["fridge", "fridge_door", "fridge_handle", "cabinet", "robot_arm", "gripper", "shelves"],
  "objects_from_instruction": ["fridge"],
  "blackboard_keys": [],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":400},"description":"Ensure gripper starts open for approaching the handle."},
    {"id":"DetectObject","type":"Action","ports":{"target":"fridge_handle","timeout_ms":800},"description":"Detect the fridge handle."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"fridge_handle","offset_z":0.02,"timeout_ms":1200},"description":"Move to a pregrasp pose above the handle."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":90},"description":"Orient wrist so the gripper aligns with the vertical handle."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"fridge_handle","tolerance":0.005,"timeout_ms":1500},"description":"Approach the handle with tight alignment."},
    {"id":"CloseGripper","type":"Action","ports":{"force":20,"timeout_ms":800},"description":"Close gripper to grasp the handle with moderate force."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Verify grasp stability before pulling."},
    {"id":"OpenContainer","type":"Action","ports":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":1500},"description":"Pull to open the hinged fridge door."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":1200},"description":"Back away to clear the opened door."}
  ],
  "tree_stats": {"nodes_total": 10, "actions": 8, "conditions": 1, "depth": 2},
  "failure_modes": ["Handle not detected or occluded", "Misalignment causing missed grasp", "Grasp slippage during pull", "Door collides with nearby cabinet", "Timeout during opening"],
  "recovery_strategy": ["Re-run DetectObject with another view", "Re-approach with tolerance 0.005", "Reopen gripper and retry grasp", "Slow down and adjust pose, then retry OpenContainer", "If persistent, abort safely"],
  "assumptions": ["Door is a right-hinged hinged_door with a vertical handle; frames confirm a handle grasp and outward swing.", "No explicit retries specified in instruction; using single-pass sequence."],
  "evaluation_notes": {
    "expected_success_criteria": ["Door angle increases to visibly open state", "No collision alarms", "Stable grasp maintained until retreat"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"fridge_handle","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"fridge_handle","offset_z":0.02,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"SetTCPYaw","attrs":{"yaw_deg":90}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":20,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    }
  ]
}
