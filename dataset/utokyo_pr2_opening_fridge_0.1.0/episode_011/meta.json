{
  "dataset_id": "utokyo_pr2_opening_fridge_0.1.0",
  "episode_id": "episode_011",
  "task_summary": "PR2 locates the fridge handle, grasps it, opens the hinged fridge door, then retreats.",
  "task_long_description": {
    "overview": "A PR2 robot opens a small hinged refrigerator. The sequence begins by opening the gripper, perceiving the handle, approaching and aligning to it, verifying visibility, and grasping. The robot then executes an opening action on the hinged door, pulling it to reveal the fridge interior. Finally, it retreats slightly to avoid collisions and confirm the door is open. The scene shows a white fridge near cabinets; the PR2â€™s right arm interacts with the handle throughout.",
    "preconditions": [
      "Fridge present with reachable hinged door and handle",
      "Workspace free of blocking obstacles",
      "PR2 arm operational; gripper calibrated",
      "Camera provides view of handle"
    ],
    "stepwise_plan": [
      "Open gripper to prepare for grasp.",
      "Detect the fridge handle and localize it.",
      "Approach and align the end-effector to the handle.",
      "Confirm handle visibility.",
      "Close gripper to grasp the handle securely.",
      "Open the container (hinged fridge door).",
      "Retreat slightly to clear the door swing and confirm opening."
    ],
    "success_criteria": [
      "Door angle sufficiently open to reveal interior shelves",
      "No collision with surrounding furniture",
      "Grasp remained stable during opening"
    ],
    "failure_and_recovery": [
      "Handle not detected: retry detection up to three times; adjust viewpoint via small approach realignment.",
      "Grasp slip: reopen gripper, re-align, re-grasp.",
      "Door jams: pause and attempt a second open action.",
      "Perception noise: verify visibility before grasping."
    ],
    "termination": "Task ends when the door state is open and the robot has retreated to a safe pose."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "Gripper encloses handle, indicating successful grasp preparation.",
        "predicts_next": "Opening motion should follow immediately after grasp.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "opening the fridge",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["fridge_door", "fridge_handle", "fridge_interior", "cabinet", "PR2", "gripper"],
  "objects_from_instruction": ["fridge", "fridge_door"],
  "blackboard_keys": [],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":500},"description":"Prepare hand to grasp the handle."},
    {"id":"DetectObject","type":"Action","ports":{"target":"fridge_handle","timeout_ms":800},"description":"Perceive and localize the handle."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"fridge_handle","tolerance":0.01,"timeout_ms":1200},"description":"Move and align end-effector with the handle."},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"fridge_handle"},"description":"Verify handle still visible before grasp."},
    {"id":"CloseGripper","type":"Action","ports":{"force":20,"timeout_ms":800},"description":"Close gripper to grasp the handle."},
    {"id":"OpenContainer","type":"Action","ports":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":1500},"description":"Open the hinged fridge door."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Back off slightly after opening."},
    {"id":"ContainerOpen","type":"Condition","ports":{"target":"fridge_door"},"description":"Confirm the door is open."}
  ],
  "tree_stats": {"nodes_total": 10, "actions": 6, "conditions": 2, "depth": 3},
  "failure_modes": [
    "Handle not detected or occluded",
    "Misalignment leading to failed grasp",
    "Gripper slip during pull",
    "Door obstruction or unexpected resistance"
  ],
  "recovery_strategy": [
    "Retry detection (decorator) and small re-approach",
    "Reopen gripper and realign if slip detected",
    "Attempt second open action; reduce speed if resistance sensed",
    "Abort and retreat if repeated failures occur"
  ],
  "assumptions": [
    "The door is a single hinged door opening left-to-right as seen in frames.",
    "The handle is graspable by PR2 gripper and within reach.",
    "Instruction matches the contact sheet; no conflicts noted."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "ContainerOpen condition returns success",
      "OpenContainer action completes without timeout",
      "No collisions or joint limit violations"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"fridge_handle","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"fridge_handle","tolerance":0.01,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"fridge_handle","tolerance":0.01,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":20,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "transfer",
      "active_leaf": {"id":"OpenContainer","attrs":{"target":"fridge_door","container_type":"hinged_door","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
