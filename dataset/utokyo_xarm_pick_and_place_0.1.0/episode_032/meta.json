{
  "dataset_id": "utokyo_xarm_pick_and_place_0.1.0",
  "episode_id": "episode_032",
  "task_summary": "Pick the white plate and place it onto the red plate.",
  "task_long_description": {
    "overview": "A 6-DOF XArm manipulator must grasp a white plate from the tabletop and relocate it onto a nearby red plate. The scene shows both plates on a green work surface with ample clearance. The robot first ensures both targets are perceived, computes a top-down grasp for the white plate, aligns and picks it, then moves over the red plate, gently lowers until contact, places the item, opens the gripper, and retreats. Timeouts and tolerances are conservative to favor reliability over speed.",
    "preconditions": ["Workspace is clear around both plates", "Robot reachable workspace includes both objects", "Gripper operational and empty at start", "Perception can localize white_plate and red_plate"],
    "stepwise_plan": [
      "Perceive white_plate and red_plate; rescan if not visible",
      "Compute top grasp for white_plate and open gripper",
      "Move above, align, and pick the white_plate",
      "Verify object is in gripper",
      "Move above red_plate",
      "Lower until contact and place at red_plate pose",
      "Open gripper and retreat"
    ],
    "success_criteria": [
      "White plate ends centered on red plate",
      "No drop during transfer",
      "Final gripper open and robot clear of objects"
    ],
    "failure_and_recovery": [
      "If target not visible: spiral scan and re-detect",
      "If grasp fails: reopen, realign, recompute grasp, and retry pick",
      "If contact not detected: limit-depth lower and abort to safe retreat"
    ],
    "termination": "Terminate after successful placement and retreat, or on unrecoverable detection/grasp failures."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "Pick up a white plate, and then place it on the red plate.",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["white_plate", "red_plate", "xarm", "table"],
  "objects_from_instruction": ["white_plate", "red_plate"],
  "blackboard_keys": ["white_plate_grasp", "red_plate_pose"],
  "node_specs": [
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"white_plate"},"description":"Checks if the white plate is currently visible to perception."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"white_plate","pattern":"spiral","max_attempts":"3","timeout_ms":"1500"},"description":"Active scan to localize the white plate if not immediately visible."},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"red_plate"},"description":"Checks if the red plate is visible."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"red_plate","pattern":"spiral","max_attempts":"3","timeout_ms":"1500"},"description":"Active scan to localize the red plate."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"white_plate","strategy":"top","result_key":"white_plate_grasp"},"description":"Compute a top-down grasp pose for the white plate and store it."},
    {"id":"OpenGripper","type":"Action","ports":{"width":"0.09","timeout_ms":"800"},"description":"Prepare the gripper for grasping."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"white_plate","offset_z":"0.05","timeout_ms":"1200"},"description":"Move to a safe pre-grasp height over the white plate."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"white_plate","tolerance":"0.005","timeout_ms":"1200"},"description":"Refine approach and align with the computed grasp."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"white_plate_grasp","timeout_ms":"1500"},"description":"Execute the grasp motion and lift slightly."},
    {"id":"ObjectInGripper","type":"Condition","ports":{"target":"white_plate"},"description":"Verify the white plate is held."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"red_plate","offset_z":"0.05","timeout_ms":"1500"},"description":"Carry the object above the red plate target."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":"0.03","force_threshold":"10","timeout_ms":"1200"},"description":"Controlled descent until gentle contact is detected."},
    {"id":"PlaceAt","type":"Action","ports":{"pose_key":"red_plate_pose","yaw_deg":"0","press_force":"10","timeout_ms":"1500"},"description":"Place the white plate centered on the red plate and lightly press."},
    {"id":"OpenGripper","type":"Action","ports":{"width":"0.08","timeout_ms":"800"},"description":"Release the white plate."},
    {"id":"Retreat","type":"Action","ports":{"distance":"0.1","timeout_ms":"800"},"description":"Back off to a safe distance."}
  ],
  "tree_stats": {"nodes_total": 18, "actions": 12, "conditions": 3, "depth": 3},
  "failure_modes": [
    "White plate not detected due to glare or occlusion",
    "Slippage during grasp causing ObjectInGripper to fail",
    "Collision with table edge during approach",
    "Placement misalignment leading to off-center placement"
  ],
  "recovery_strategy": [
    "Fallback scan when visibility check fails",
    "Reopen gripper, recompute grasp, and realign if grasp unstable",
    "Use retreat then re-approach if contact occurs prematurely",
    "Repeat perception before placement to re-validate pose"
  ],
  "assumptions": [
    "Frames show grasp of the white plate and motion toward the red plate; final placement is partially occluded but presumed successful.",
    "Top grasp is feasible; plate is not adhered to the table.",
    "Pose key 'red_plate_pose' is produced by perception after detection.",
    "Yaw is not critical; set to 0 degrees."
  ],
  "evaluation_notes": {
    "expected_success_criteria": ["White plate is centered on the red plate", "No object dropped during transfer", "Robot ends clear with gripper open"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"white_plate"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"IsObjectVisible","attrs":{"target":"red_plate"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"white_plate","offset_z":0.05,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"white_plate","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"white_plate_grasp","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"red_plate","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.03,"force_threshold":10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"PlaceAt","attrs":{"pose_key":"red_plate_pose","yaw_deg":0,"press_force":10,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
