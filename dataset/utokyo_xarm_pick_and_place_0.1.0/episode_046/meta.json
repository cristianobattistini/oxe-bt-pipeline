{
  "dataset_id": "utokyo_xarm_pick_and_place_0.1.0",
  "episode_id": "episode_046",
  "task_summary": "Detect the white plate, grasp it, move to the red plate, lower until contact, release, and retreat.",
  "task_long_description": {
    "overview": "A fixed-base manipulator with a parallel gripper must pick up a white plate and place it onto a red plate on a green mat workspace. The robot first opens the gripper, detects both the source (white plate) and destination (red plate), computes a top grasp, approaches the white plate, aligns for a robust grasp, and executes a pick. It then transfers above the red plate, descends until contact to ensure gentle placement, opens the gripper to release, and finally retreats to clear the workspace.",
    "preconditions": ["White plate visible on the workspace", "Red plate present and reachable", "Gripper operational and homed"],
    "stepwise_plan": ["Open gripper", "Detect white plate and red plate", "Compute top grasp for white plate", "Move above and align to white plate", "Pick the white plate", "Move above red plate", "Lower until contact", "Open gripper to place", "Retreat"],
    "success_criteria": ["White plate ends resting on top of red plate", "No plate slippage after release", "Robot returns to a safe, collision-free posture"],
    "failure_and_recovery": ["If detection fails, re-run perception; if grasp slips, reattempt grasp with tighter alignment; if contact not detected, extend lowering within safe depth; if collision risk, abort and retreat"],
    "termination": "Tree completes after successful release and retreat or aborts on unrecoverable failure."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_6","frame_2","frame_4","frame_1","frame_5","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.18, "frame_1": 0.40, "frame_2": 0.62, "frame_3": 0.92,
      "frame_4": 0.55, "frame_5": 0.35, "frame_6": 0.85, "frame_7": 0.22, "frame_8": 0.07
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "Clear contact with the white plate and lift onset visible, confirming grasp execution.",
        "predicts_next": "Transition to transfer phase toward the red plate is expected.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "Pick up a white plate, and then place it on the red plate.",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["white_plate","red_plate","robot_arm","parallel_gripper","green_mat"],
  "objects_from_instruction": ["white_plate","red_plate"],
  "blackboard_keys": ["white_plate_grasp"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":800},"description":"Open gripper to accept the plate."},
    {"id":"DetectObject","type":"Action","ports":{"target":"white_plate","timeout_ms":1200},"description":"Detect the white plate location."},
    {"id":"DetectObject","type":"Action","ports":{"target":"red_plate","timeout_ms":1200},"description":"Detect the red plate (place target)."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"white_plate","strategy":"top","result_key":"white_plate_grasp"},"description":"Compute a top grasp for the white plate."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"white_plate","offset_z":0.05,"timeout_ms":1500},"description":"Move to a safe pregrasp height above the white plate."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"white_plate","tolerance":0.005,"timeout_ms":1500},"description":"Refine pose for a stable grasp."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"white_plate_grasp","timeout_ms":1200},"description":"Execute grasp using the computed pose."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"red_plate","offset_z":0.05,"timeout_ms":1500},"description":"Transfer to a placement height over the red plate."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.05,"force_threshold":10.0,"timeout_ms":1200},"description":"Descend gently until contact with the red plate."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":800},"description":"Release the white plate onto the red plate."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":1200},"description":"Back away to a safe pose."}
  ],
  "tree_stats": {"nodes_total": 12, "actions": 11, "conditions": 0, "depth": 2},
  "failure_modes": ["White plate not detected", "Red plate not detected", "Grasp unstable leading to slip", "Contact not reached within max depth", "Collision with environment"],
  "recovery_strategy": ["Re-run DetectObject and slightly adjust viewpoint", "Recompute grasp and repeat Pick", "Increase lowering depth within limits", "Abort and Retreat on collision risk"],
  "assumptions": ["Frames suggest a successful grasp and move; final placement is partially occluded so we infer release near the red plate.", "Top grasp is feasible on the plate rim."],
  "evaluation_notes": {
    "expected_success_criteria": ["Plate centered on red plate with no motion after release", "No collision marks in the trajectory", "Robot ends in retreat pose"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"white_plate","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"red_plate","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"white_plate","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"white_plate_grasp","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"red_plate","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"red_plate","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.05,"force_threshold":10.0,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    }
  ]
}
