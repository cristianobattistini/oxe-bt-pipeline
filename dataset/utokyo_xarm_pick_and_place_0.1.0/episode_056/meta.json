{
  "dataset_id": "utokyo_xarm_pick_and_place_0.1.0",
  "episode_id": "episode_056",
  "task_summary": "Detect, grasp, and lift the white plate, then move and place it onto the red plate, finally retreating.",
  "task_long_description": {
    "overview": "A fixed-base manipulator with a parallel gripper operates on a tabletop where a white plate and a red plate are visible. The goal is to pick up the white plate and place it onto the red plate. The behavior tree opens the gripper, perceives and localizes the white plate, computes a top grasp, aligns, and executes the pick. After verifying grasp stability, the arm retreats, localizes the red plate, moves above it, lowers until contact, releases the plate onto the target, and retreats to a safe height. Visual search with retries is included to handle momentary occlusions.",
    "preconditions": [
      "Robot enabled and homed; workspace clear",
      "White plate and red plate within reachable workspace",
      "Gripper initially empty and operational",
      "Camera providing view of workspace"
    ],
    "stepwise_plan": [
      "Open gripper and search for the white plate (retry up to 3).",
      "Detect and move above the white plate; compute top grasp.",
      "Approach precisely and pick; verify grasp stability.",
      "Retreat to a safe height; store placement key.",
      "Search and detect the red plate (retry up to 3).",
      "Move above the red plate; lower until contact.",
      "Open gripper to place the white plate on the red plate.",
      "Retreat to a safe height."
    ],
    "success_criteria": [
      "White plate ends centered on red plate with visible contact",
      "Gripper open and empty at end of task",
      "No collisions or dropped objects during transfer"
    ],
    "failure_and_recovery": [
      "Object not visible: scanning pattern with retry.",
      "Unstable grasp: re-approach and re-pick after retreat.",
      "Premature release or slip: re-detect plate and reattempt place.",
      "Contact not detected: repeat lower-with-contact within timeout."
    ],
    "termination": "Terminate after successful release of the white plate on the red plate and a final retreat."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "First firm contact with the white plate and clear grasp alignment are visible.",
        "predicts_next": "Robot will lift and start transferring toward the red plate.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "Pick up a white plate, and then place it on the red plate.",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["white_plate","red_plate","robot_arm","gripper","table"],
  "objects_from_instruction": ["white_plate","red_plate"],
  "blackboard_keys": ["white_plate_grasp","place_pose"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":500},"description":"Ensure gripper is fully open before approach and for release."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"white_plate","pattern":"spiral","max_attempts":3,"timeout_ms":1500},"description":"Visual scan to locate white plate if not immediately visible."},
    {"id":"DetectObject","type":"Action","ports":{"target":"white_plate","timeout_ms":1200},"description":"Run detector to obtain pose of the white plate."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"white_plate","offset_z":0.05,"timeout_ms":1500},"description":"Move to pregrasp pose above white plate."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"white_plate","strategy":"top","result_key":"white_plate_grasp"},"description":"Compute grasp pose and store under key."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"white_plate","tolerance":0.005,"timeout_ms":1500},"description":"Refine approach with tight tolerance."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"white_plate_grasp","timeout_ms":1500},"description":"Execute grasp using stored pose."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Verify stable grasp before transport."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Lift to a safe height."},
    {"id":"SetBlackboard","type":"Action","ports":{"key":"place_pose","value":"red_plate_center"},"description":"Symbolic key for placement pose."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"red_plate","pattern":"grid","max_attempts":3,"timeout_ms":1500},"description":"Search for red plate with grid scan."},
    {"id":"DetectObject","type":"Action","ports":{"target":"red_plate","timeout_ms":1200},"description":"Detect red plate for placement."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"red_plate","offset_z":0.05,"timeout_ms":1500},"description":"Move above the red plate before lowering."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.05,"force_threshold":10.0,"timeout_ms":1500},"description":"Lower until gentle contact with the red plate."}
  ],
  "tree_stats": {"nodes_total": 23, "actions": 15, "conditions": 3, "depth": 4},
  "failure_modes": [
    "White plate not detected due to glare/occlusion",
    "Misalignment causing partial grasp",
    "Plate slip during transfer",
    "Premature release or no contact over red plate"
  ],
  "recovery_strategy": [
    "Retry visual scan via decorator",
    "Re-approach with precise tolerance",
    "Retreat and recompute grasp pose; re-pick",
    "Repeat lower-until-contact before releasing"
  ],
  "assumptions": [
    "Top grasp on the white plate is feasible (no stacked items).",
    "Red plate is planar and stable; lowering until contact suffices for placement.",
    "Frame sequence shows pick (frames 1–4) followed by move and place (frames 5–8); minor blur tolerated."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "White plate resting flat on red plate after release",
      "No object dropped; gripper empty",
      "Robot retreats to safe pose without collisions"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"white_plate","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"white_plate","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"white_plate","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"white_plate_grasp","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"red_plate","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.05,"force_threshold":10.0,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
