{
  "dataset_id": "utokyo_xarm_pick_and_place_0.1.0",
  "episode_id": "episode_042",
  "task_summary": "Perceive the white plate, grasp it, transport it, and place it onto the red plate, then retreat.",
  "task_long_description": {
    "overview": "A stationary xArm manipulator must pick a white plate and place it on a nearby red plate. The scene shows both plates on a green mat. The robot first detects both targets, opens the gripper, approaches and aligns over the white plate, executes a top grasp, verifies object retention, then moves toward the red plate. It descends until contact with the red plate surface, releases the plate, and retreats to a safe pose. Timing bins and tolerances are chosen from the allowed library values.",
    "preconditions": ["Robot and camera calibrated", "Workspace clear around plates", "Gripper functional and homed", "White plate and red plate visible in workspace"],
    "stepwise_plan": [
      "Detect white plate and red plate",
      "Open gripper and move above white plate",
      "Compute top grasp, align precisely, and pick",
      "Verify object in gripper",
      "Move above red plate",
      "Lower until contact and place",
      "Open gripper to release and retreat"
    ],
    "success_criteria": ["White plate is released centered on red plate", "No collisions with table or robot", "Robot ends in a safe, non-contact pose"],
    "failure_and_recovery": [
      "Perception miss: re-run detection",
      "Unstable grasp: retry alignment and pick",
      "Premature contact while placing: retreat slightly and re-approach"
    ],
    "termination": "Terminate after successful release and retreat or after unrecoverable failure."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "First firm contact with the white plate and grasp closure appear evident.",
        "predicts_next": "Transport phase should follow with a lift toward the red plate.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "Pick up a white plate, and then place it on the red plate.",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["robot_arm", "white_plate", "red_plate", "table"],
  "objects_from_instruction": ["white_plate", "red_plate"],
  "blackboard_keys": ["grasp_white"],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"white_plate","timeout_ms":1500},"description":"Detect white plate in the scene."},
    {"id":"DetectObject","type":"Action","ports":{"target":"red_plate","timeout_ms":1500},"description":"Detect red plate (placement site)."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":500},"description":"Pre-open gripper for grasp."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"white_plate","offset_z":0.03,"timeout_ms":1500},"description":"Move above white plate at a safe height."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"white_plate","strategy":"top","result_key":"grasp_white"},"description":"Compute top grasp pose; store on blackboard."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"white_plate","tolerance":0.01,"timeout_ms":1200},"description":"Refine pose and alignment before grasp."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"grasp_white","timeout_ms":1500},"description":"Execute grasp using computed pose."},
    {"id":"ObjectInGripper","type":"Condition","ports":{"target":"white_plate"},"description":"Verify the plate is held."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"red_plate","offset_z":0.04,"timeout_ms":1500},"description":"Transit above the red plate."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.05,"force_threshold":10,"timeout_ms":1200},"description":"Descend gently until surface contact."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.08,"timeout_ms":500},"description":"Release the plate onto the red plate."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Back off to a safe pose."}
  ],
  "tree_stats": {"nodes_total": 13, "actions": 11, "conditions": 1, "depth": 2},
  "failure_modes": [
    "Plate not detected due to glare or angle",
    "Misalignment causing edge contact",
    "Weak grasp leading to slip during transfer",
    "Contact overshoot during placement"
  ],
  "recovery_strategy": [
    "Re-detect targets and re-center",
    "Tighten alignment tolerance and retry pick",
    "Increase open width, recompute grasp, and reattempt",
    "Retreat slightly, re-approach with slow speed"
  ],
  "assumptions": [
    "Frames suggest the white plate is grasped around frame_3 and later positioned over the red plate; final overlap in frame_8 is partially occluded, so exact centering is inferred.",
    "Placing is achieved via contact-based descent rather than a precomputed place pose."
  ],
  "evaluation_notes": {
    "expected_success_criteria": ["White plate rests on red plate without wobble", "Robot ends clear of both plates"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"white_plate","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"white_plate","offset_z":0.03,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"white_plate","tolerance":0.01,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"grasp_white","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"red_plate","offset_z":0.04,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"red_plate","offset_z":0.04,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.05,"force_threshold":10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.08,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
