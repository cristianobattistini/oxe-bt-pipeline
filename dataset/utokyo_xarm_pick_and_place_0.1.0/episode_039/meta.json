{
  "dataset_id": "utokyo_xarm_pick_and_place_0.1.0",
  "episode_id": "episode_039",
  "task_summary": "Detect and grasp the white plate, transport it, and place it gently onto the red plate, then retreat.",
  "task_long_description": {
    "overview": "A tabletop scene shows a robot arm with a parallel gripper interacting with two dishes: a white plate near the workspace center and a red plate to the left. The goal is to pick up the white plate and place it atop the red plate. The plan opens the gripper, perceives and aligns to the white plate, executes a top grasp, checks stability, then navigates over the red plate. The arm lowers until contact, releases the plate, and retreats to a safe height, avoiding collisions and ensuring stable placement.",
    "preconditions": ["Robot powered and homed", "Camera calibrated; workspace visible", "White plate and red plate within reachable workspace", "Gripper operational and empty"],
    "stepwise_plan": [
      "Open gripper and detect the white plate.",
      "Move above and compute a top grasp; align precisely.",
      "Pick the white plate and verify grasp stability.",
      "Detect the red plate and cache a placement key.",
      "Move above red plate; lower until contact.",
      "Open gripper to release; retreat safely."
    ],
    "success_criteria": ["White plate rests on red plate without rolling or slipping", "No collisions with table or environment", "Gripper open at end and robot retreated"],
    "failure_and_recovery": [
      "If detection fails: rescan area or adjust viewpoint.",
      "If alignment fails: re-approach with tighter tolerance.",
      "If grasp slips: reopen, recompute grasp, and retry.",
      "If contact not detected when placing: allow deeper descent then retry release."
    ],
    "termination": "Terminate after successful release and retreat, or after unrecoverable failure."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "Pick up a white plate, and then place it on the red plate.",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["white_plate","red_plate","table","robot_arm","gripper"],
  "objects_from_instruction": ["white_plate","red_plate"],
  "blackboard_keys": ["grasp_white_plate","place_pose"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":500},"description":"Prepare gripper for approach."},
    {"id":"DetectObject","type":"Action","ports":{"target":"white_plate","timeout_ms":800},"description":"Locate the white plate."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"white_plate","offset_z":0.05,"timeout_ms":1200},"description":"Move to pregrasp above white plate."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"white_plate","strategy":"top","result_key":"grasp_white_plate"},"description":"Compute grasp pose and store key."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"white_plate","tolerance":0.005,"timeout_ms":1200},"description":"Refine pose prior to grasp."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"grasp_white_plate","timeout_ms":1200},"description":"Close gripper to pick plate."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Verify grasp stability before transfer."},
    {"id":"DetectObject","type":"Action","ports":{"target":"red_plate","timeout_ms":800},"description":"Locate the red plate for placement."},
    {"id":"SetBlackboard","type":"Action","ports":{"key":"place_pose","value":"red_plate_center"},"description":"Cache symbolic place pose key."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"red_plate","offset_z":0.05,"timeout_ms":1200},"description":"Move above the red plate."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.03,"force_threshold":10,"timeout_ms":1200},"description":"Descend until contact with red plate."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.08,"timeout_ms":500},"description":"Release the white plate."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Back away to a safe position."}
  ],
  "tree_stats": {"nodes_total": 14, "actions": 12, "conditions": 1, "depth": 2},
  "failure_modes": ["Object not detected due to glare or occlusion", "Misalignment causing edge pinch failure", "Grasp slip during transfer", "Premature release or no contact when placing"],
  "recovery_strategy": ["Rescan or widen detection window", "Re-run ApproachAndAlign with tighter tolerance", "Reopen and recompute grasp pose", "Increase descent depth slightly then retry release"],
  "assumptions": ["White plate is graspable with a top strategy", "Red plate is fixed and serves as target surface", "Offsets and depths are safe relative to the table height", "Frames show successful transfer and placement with slight tilt during motion"],
  "evaluation_notes": {
    "expected_success_criteria": ["White plate centered on red plate with visible contact", "No collisions or plate drops", "Robot ends in retreat state"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"white_plate","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"white_plate","offset_z":0.05,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"white_plate","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"grasp_white_plate","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"red_plate","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"red_plate","offset_z":0.05,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.03,"force_threshold":10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.08,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
