{
  "dataset_id": "utokyo_xarm_pick_and_place_0.1.0",
  "episode_id": "episode_016",
  "task_summary": "Detect and grasp the white plate, then transport and place it centered on the red plate, finally retreating safely.",
  "task_long_description": {
    "overview": "A robotic arm must pick a white plate and place it on a nearby red plate. The scene shows a table workspace with a white plate near a larger red plate. The robot should begin with perception, approach the white plate, align for a rim grasp, close the gripper, verify the grasp, lift and transfer toward the red plate, descend until contact, place, release, and retreat. Movements should be controlled and precise to avoid sliding the plates.",
    "preconditions": [
      "Workspace is clear around the plates",
      "Robot gripper is operational and initially open",
      "Camera view includes both white and red plates",
      "Kinematic reachability of both locations"
    ],
    "stepwise_plan": [
      "Open gripper and detect white and red plates.",
      "Compute side grasp on the white plate; move above and align.",
      "Close gripper and verify stable grasp.",
      "Retreat and move above the red plate.",
      "Lower until contact and place at the target pose.",
      "Open gripper to release and retreat."
    ],
    "success_criteria": [
      "White plate is securely grasped without slipping",
      "White plate ends up resting on the red plate surface",
      "No collisions with the environment",
      "Robot safely retreats to a neutral height"
    ],
    "failure_and_recovery": [
      "If detection fails: re-detect or scan the area.",
      "If grasp is unstable: reopen, re-align, and attempt a new grasp.",
      "If contact not detected on placement: adjust height and retry descent."
    ],
    "termination": "Terminate after releasing the plate on the red plate and retreating for at least 0.1 m."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "Pick up a white plate, and then place it on the red plate.",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["white_plate","red_plate","table","robot_arm"],
  "objects_from_instruction": ["white_plate","red_plate"],
  "blackboard_keys": ["white_plate_grasp","red_plate_top"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":"0.09","timeout_ms":"800"},"description":"Ensure gripper is open before approaching object."},
    {"id":"DetectObject","type":"Action","ports":{"target":"white_plate","timeout_ms":"1200"},"description":"Perceive white plate for localization."},
    {"id":"DetectObject","type":"Action","ports":{"target":"red_plate","timeout_ms":"1200"},"description":"Perceive red plate to plan placement."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"white_plate","strategy":"side","result_key":"white_plate_grasp"},"description":"Compute rim grasp for plate."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"white_plate","offset_z":"0.05","timeout_ms":"1500"},"description":"Move to a safe pre-grasp height above the white plate."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"white_plate","tolerance":"0.005","timeout_ms":"1500"},"description":"Refine pose for accurate grasping."},
    {"id":"CloseGripper","type":"Action","ports":{"force":"20","timeout_ms":"800"},"description":"Close to grasp the plate rim."},
    {"id":"ObjectInGripper","type":"Condition","ports":{"target":"white_plate"},"description":"Confirm object presence after grasp."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Check grasp stability."},
    {"id":"Retreat","type":"Action","ports":{"distance":"0.1","timeout_ms":"800"},"description":"Lift / back off from table after grasp."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"red_plate","offset_z":"0.06","timeout_ms":"1500"},"description":"Move to pre-place height above red plate."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":"0.05","force_threshold":"10","timeout_ms":"1200"},"description":"Descend to detect surface contact."},
    {"id":"PlaceAt","type":"Action","ports":{"pose_key":"red_plate_top","yaw_deg":"0","press_force":"10","timeout_ms":"1200"},"description":"Place the white plate onto the red plate."},
    {"id":"OpenGripper","type":"Action","ports":{"width":"0.09","timeout_ms":"800"},"description":"Release the plate."},
    {"id":"Retreat","type":"Action","ports":{"distance":"0.1","timeout_ms":"800"},"description":"Back off to a safe distance."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":"400"},"description":"Brief pause to ensure stability after placement."}
  ],
  "tree_stats": {"nodes_total": 17, "actions": 14, "conditions": 2, "depth": 2},
  "failure_modes": [
    "White plate not detected due to glare or occlusion",
    "Side rim grasp slips during lift",
    "Collision with table during approach",
    "Misalignment during placement causing plate to slide"
  ],
  "recovery_strategy": [
    "Re-detect objects and slightly adjust camera viewpoint or lighting",
    "Reopen gripper, re-align with tighter tolerance, retry grasp",
    "Increase pre-grasp offset and re-approach",
    "Perform a gentle re-place with lower descent speed"
  ],
  "assumptions": [
    "Frames show the robot grasping the white plate near the red plate and moving toward it; we assume the goal is to stack/place on the red plate as instructed.",
    "Side grasp on the plate rim is feasible with the parallel gripper.",
    "Exact placement pose key 'red_plate_top' can be resolved from perception."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "ObjectInGripper and IsGraspStable succeed before transfer",
      "Contact detected during placement and object released",
      "Final retreat completed without collisions"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"white_plate","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"white_plate","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"white_plate","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"CloseGripper","attrs":{"force":20,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"red_plate","offset_z":0.06,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.05,"force_threshold":10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
