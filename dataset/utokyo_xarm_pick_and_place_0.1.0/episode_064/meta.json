{
  "dataset_id": "utokyo_xarm_pick_and_place_0.1.0",
  "episode_id": "episode_064",
  "task_summary": "Detect the white plate, grasp it from the top, move to the red plate, lower until contact, release, and retreat.",
  "task_long_description": {
    "overview": "A stationary manipulator with a parallel gripper must move a white plate onto a red plate placed on a table. The sequence opens the gripper, detects and localizes the white plate, approaches from above with a small safety offset, computes a top grasp, aligns, and picks. The robot verifies grasp stability, then moves above the red plate. It lowers until contact is detected to ensure placement on the target surface, opens the gripper to release, and retreats to clear the workspace.",
    "preconditions": [
      "Robot is powered and homed.",
      "Workspace clear except for plates.",
      "White plate and red plate are within reachable workspace.",
      "Camera perception available."
    ],
    "stepwise_plan": [
      "Open gripper and detect the white plate.",
      "Move above the white plate; compute grasp and align.",
      "Pick the white plate and check grasp stability.",
      "Move above the red plate.",
      "Lower until contact, open gripper to place.",
      "Retreat to a safe height."
    ],
    "success_criteria": [
      "White plate is fully released and resting on the red plate.",
      "No drops or collisions during transfer.",
      "Robot ends in a safe, non-contact pose."
    ],
    "failure_and_recovery": [
      "If detection fails: rescan area or adjust viewpoint.",
      "If grasp slips: reopen, realign, and reattempt pick.",
      "If contact not detected at placement: increase depth within limits and retry.",
      "If obstacles detected: retreat and re-approach."
    ],
    "termination": "Tree terminates when the plate is released on the red plate and the arm has retreated."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "Pick up a white plate, and then place it on the red plate.",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["robot_arm","gripper","white_plate","red_plate","table"],
  "objects_from_instruction": ["white_plate","red_plate"],
  "blackboard_keys": ["white_plate_grasp"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":800},"description":"Open gripper before approaching the object."},
    {"id":"DetectObject","type":"Action","ports":{"target":"white_plate","timeout_ms":1200},"description":"Perception to localize the white plate."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"white_plate","offset_z":0.03,"timeout_ms":1200},"description":"Move above the white plate at a safe offset."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"white_plate","strategy":"top","result_key":"white_plate_grasp"},"description":"Compute top-down grasp pose for the plate."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"white_plate","tolerance":0.005,"timeout_ms":1200},"description":"Refine alignment before grasping."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"white_plate_grasp","timeout_ms":1200},"description":"Execute grasp using computed pose."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Verify the object is firmly held."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"red_plate","offset_z":0.03,"timeout_ms":1200},"description":"Move above the red plate to prepare placement."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.05,"force_threshold":10.0,"timeout_ms":1200},"description":"Lower until contact with the red plate surface."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":800},"description":"Release the plate onto the red plate."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Back away to a safe pose after placing."}
  ],
  "tree_stats": {"nodes_total": 12, "actions": 10, "conditions": 1, "depth": 2},
  "failure_modes": [
    "White plate not detected due to glare/occlusion.",
    "Grasp fails or slips during lift.",
    "Collision with table or red plate rim during placement.",
    "Contact not detected within allowed depth."
  ],
  "recovery_strategy": [
    "Rescan area; adjust view; broaden detection timeout.",
    "Reopen gripper, realign, recompute grasp, and retry pick.",
    "Increase approach offset_z and re-approach.",
    "Incrementally increase max_depth and repeat LowerUntilContact."
  ],
  "assumptions": [
    "Frames show red plate at lower-left and white plate initially on table; plan assumes top grasp is feasible.",
    "Placement is achieved by contact-based lowering rather than precise pose key.",
    "No obstacles other than plates are present within reach."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "White plate rests centered on red plate with no slip.",
      "Gripper fully opens before retreat.",
      "No unintended collisions."
    ],
    "test_scenarios": ["happy_path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"white_plate","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"white_plate","offset_z":0.03,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "verify",
      "active_leaf": {"id":"ComputeGraspPose","attrs":{"target":"white_plate","strategy":"top","result_key":"white_plate_grasp"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"white_plate_grasp","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"red_plate","offset_z":0.03,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"red_plate","offset_z":0.03,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.05,"force_threshold":10.0,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
