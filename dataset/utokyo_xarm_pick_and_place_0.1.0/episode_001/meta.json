{
  "dataset_id": "utokyo_xarm_pick_and_place_0.1.0",
  "episode_id": "episode_001",
  "task_summary": "Detect the white plate, grasp it with a top grasp, move above the red plate, lower until contact, release, and retreat.",
  "task_long_description": {
    "overview": "A tabletop xArm manipulator must relocate a white ceramic plate onto a red plate lying nearby. The scene shows both plates on a green work surface with the gripper approaching, lifting, and placing the item. The robot should first ensure perception of both targets, compute a top grasp for the white plate, then align and pick. After confirming the grasp, it should move above the red plate, descend until contact, release the plate gently, and retreat to a safe height. Timeouts and tolerances are conservative to ensure stability.",
    "preconditions": ["Robot powered and homed", "Workspace clear except the two plates", "Gripper functional and initially open", "Camera provides visibility of plates"],
    "stepwise_plan": [
      "Open gripper and perceive the white and red plates.",
      "Compute top grasp for the white plate, approach and align.",
      "Pick the white plate and verify it is held.",
      "Perceive the red plate and move above it.",
      "Lower until contact with the stack area.",
      "Open gripper to place and retreat."
    ],
    "success_criteria": [
      "White plate stably grasped before transfer",
      "White plate centered on red plate after release",
      "No collisions with table or surroundings",
      "Robot retreats to a safe pose"
    ],
    "failure_and_recovery": [
      "Perception failure: re-run detection via Fallback branch.",
      "Misalignment at grasp: re-approach using the same grasp pose.",
      "Slip during transfer: detect loss (ObjectInGripper false) and re-detect and re-pick.",
      "Early contact while lowering: stop at contact threshold and re-evaluate placement."
    ],
    "termination": "Terminate after successful release on red plate and retreat, or after exceeding action timeouts."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "Pick up a white plate, and then place it on the red plate.",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["white_plate","red_plate","robot_arm","gripper","table","work_mat"],
  "objects_from_instruction": ["white_plate","red_plate"],
  "blackboard_keys": ["white_plate_grasp"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":"0.09","timeout_ms":"800"},"description":"Open gripper to target width before pick and to release at place."},
    {"id":"DetectObject","type":"Action","ports":{"target":"white_plate|red_plate","timeout_ms":"1200"},"description":"Run perception for specified target if not already visible."},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"white_plate|red_plate"},"description":"Checks if the specified object is visible."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"white_plate","strategy":"top","result_key":"white_plate_grasp"},"description":"Compute top grasp for white plate and store key."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"white_plate","tolerance":"0.005","timeout_ms":"1200"},"description":"Approach to pre-grasp and align within tight tolerance."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"white_plate_grasp","timeout_ms":"1200"},"description":"Execute grasp using the computed pose."},
    {"id":"ObjectInGripper","type":"Condition","ports":{"target":"white_plate"},"description":"Verify the white plate is held."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"red_plate","offset_z":"0.05","timeout_ms":"1500"},"description":"Move to a pose above the red plate with vertical clearance."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":"0.05","force_threshold":"10","timeout_ms":"1200"},"description":"Descend until contact to seat the plate."},
    {"id":"Retreat","type":"Action","ports":{"distance":"0.1","timeout_ms":"1200"},"description":"Back off to a safe position after placement."}
  ],
  "tree_stats": {"nodes_total": 16, "actions": 10, "conditions": 3, "depth": 3},
  "failure_modes": [
    "White plate not detected due to glare",
    "Grasp fails because of plate curvature",
    "Object slips during transfer",
    "Contact threshold missed causing hard landing"
  ],
  "recovery_strategy": [
    "Fallback perception to re-detect targets",
    "Re-run approach and pick using same grasp key",
    "If ObjectInGripper fails, restart from perception",
    "Use LowerUntilContact with slow speed to mitigate impact"
  ],
  "assumptions": [
    "Top grasp on plate rim is feasible; orientation not specified by instruction.",
    "Offset_z=0.05 m provides safe clearance over red plate.",
    "Contact threshold of ~10 is sufficient to detect touch without damaging plates.",
    "Frames show successful transfer consistent with instruction; minor perspective ambiguity on exact release moment."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "White plate ends centered on red plate and remains after gripper opens",
      "No collisions except controlled contact during lowering",
      "Robot retreats clear of objects"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"white_plate","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"red_plate","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"white_plate","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"white_plate_grasp","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"red_plate","offset_z":0.05,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "place",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.05,"force_threshold":10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    }
  ]
}
