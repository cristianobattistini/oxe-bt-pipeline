{
  "dataset_id": "utokyo_xarm_pick_and_place_0.1.0",
  "episode_id": "episode_075",
  "task_summary": "Detect the white plate, pick it up securely, move above the red plate, lower until gentle contact, release to place, and retreat.",
  "task_long_description": {
    "overview": "A 6-DoF robotic arm with a parallel gripper must manipulate tableware in a tabletop scene. The goal is to grasp a white plate and place it concentrically on a nearby red plate without tipping or sliding. The behavior tree sequences perception, approach, grasp synthesis, verification, transport, controlled placement, release, and retreat. Timeouts, small approach tolerances, and gentle contact are used to ensure stable handling. The environment appears uncluttered but includes cables and surrounding mats, so collision-safe approach from above is preferred.",
    "preconditions": ["Workspace is clear and reachable", "Camera provides view of both plates", "Gripper calibrated and functional", "Robot reference frames initialized"],
    "stepwise_plan": ["Open the gripper and detect the white plate", "Move above and align precisely to compute a top grasp", "Execute the grasp and verify object is held", "Detect the red plate and move above it", "Lower until light contact with the red plate surface", "Open gripper to release and retreat"],
    "success_criteria": ["White plate ends resting on the red plate without visible slip", "Grasp remains stable during transfer", "No collisions with table or surrounding objects", "Robot retreats to a safe height after release"],
    "failure_and_recovery": ["If perception fails, re-detect targets and re-approach", "If grasp is unstable, retry grasp planning and alignment", "If contact not detected, limit descent and retry approach", "If placement is misaligned, lift slightly and reattempt center placement"],
    "termination": "Terminate after successful release and short wait following retreat"
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "Pick up a white plate, and then place it on the red plate.",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["white_plate", "red_plate", "work_surface", "xarm", "gripper"],
  "objects_from_instruction": ["white_plate", "red_plate"],
  "blackboard_keys": ["white_plate_grasp"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":400},"description":"Ensure gripper is open before approaching the white plate"},
    {"id":"DetectObject","type":"Action","ports":{"target":"white_plate","timeout_ms":1200},"description":"Locate the white plate"},
    {"id":"MoveAbove","type":"Action","ports":{"target":"white_plate","offset_z":0.05,"timeout_ms":1200},"description":"Move to a pregrasp height above the white plate"},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"white_plate","strategy":"top","result_key":"white_plate_grasp"},"description":"Plan a top-down grasp for the plate"},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"white_plate","tolerance":0.005,"timeout_ms":1500},"description":"Refine alignment before grasp"},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"white_plate_grasp","timeout_ms":1500},"description":"Close and lift to pick the white plate"},
    {"id":"ObjectInGripper","type":"Condition","ports":{"target":"white_plate"},"description":"Verify plate is held"},
    {"id":"DetectObject","type":"Action","ports":{"target":"red_plate","timeout_ms":1200},"description":"Locate the red plate as placement target"},
    {"id":"MoveAbove","type":"Action","ports":{"target":"red_plate","offset_z":0.05,"timeout_ms":1200},"description":"Move above the red plate"},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.03,"force_threshold":10.0,"timeout_ms":1500},"description":"Descend gently until contact with the red plate"},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":400},"description":"Release the white plate to place it"},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Back off to a safe distance"},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":400},"description":"Short stabilization wait after placement"}
  ],
  "tree_stats": {"nodes_total": 14, "actions": 12, "conditions": 1, "depth": 2},
  "failure_modes": ["Target plate not detected", "Grasp slips during lift", "Misalignment over red plate", "Contact not sensed within safe depth"],
  "recovery_strategy": ["Re-run detection and re-approach", "Recompute grasp pose and retry pick", "Recenter by moving above and repeating descent", "Abort descent and raise before retry"],
  "assumptions": ["Frames suggest close proximity of plates; plan uses top grasp and gentle placement", "Exact placement pose key not provided by dataset; contact-based release used instead of explicit PlaceAt"],
  "evaluation_notes": {
    "expected_success_criteria": ["White plate rests stably on red plate", "No collisions and stable retreat"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"white_plate","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"white_plate","offset_z":0.05,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"white_plate","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"white_plate_grasp","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"red_plate","offset_z":0.05,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "place",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.03,"force_threshold":10.0,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":400}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Wait","attrs":{"timeout_ms":400}},
      "active_path_ids": []
    }
  ]
}
