{
  "dataset_id": "utokyo_xarm_pick_and_place_0.1.0",
  "episode_id": "episode_048",
  "task_summary": "Detect and grasp the white plate, then move and place it onto the red plate, release, and retreat.",
  "task_long_description": {
    "overview": "A stationary xArm manipulator must relocate a white plate onto a nearby red plate. The sequence begins with perception of the white plate, followed by a top grasp. After ensuring a stable grasp, the robot detects the red plate, approaches above it, and gently lowers before placing the white plate at the red plateâ€™s center. The gripper opens to release and the arm retreats to a safe pose. Motions are conservative and precise to avoid sliding or tipping.",
    "preconditions": [
      "Robot and gripper are powered and homed",
      "Workspace contains one white plate and one red plate",
      "Plates are reachable and not occluded",
      "Calibration between camera and robot is valid"
    ],
    "stepwise_plan": [
      "Open gripper and detect the white plate",
      "Approach above the white plate and align precisely",
      "Compute grasp and pick the white plate; verify stability",
      "Detect the red plate and set its placement pose",
      "Move above the red plate, lower until gentle contact",
      "Place at the center, open gripper to release",
      "Retreat to a safe distance"
    ],
    "success_criteria": [
      "White plate ends resting on the red plate surface",
      "No plate slip or drop during transfer",
      "Gripper released fully and arm clears the stack"
    ],
    "failure_and_recovery": [
      "If object not visible: re-detect and re-approach",
      "If grasp unstable: recompute grasp and retry pick",
      "If contact not detected over red plate: adjust height and retry lowering",
      "If placement misaligned: repeat PlaceAt with updated pose"
    ],
    "termination": "Tree succeeds when the plate is placed and the arm retreats; fails if any critical action times out or conditions are not met."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "Pick up a white plate, and then place it on the red plate.",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["xarm_robot", "gripper", "white_plate", "red_plate", "table", "floor_mat"],
  "objects_from_instruction": ["white plate", "red plate"],
  "blackboard_keys": ["grasp_wp", "place_pose"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":"float","timeout_ms":"int"},"description":"Open gripper to specified width before and after manipulation."},
    {"id":"DetectObject","type":"Action","ports":{"target":"string","timeout_ms":"int"},"description":"RGB/Depth detection of target object; writes pose internally."},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"string"},"description":"Checks if the specified object is currently visible."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"string","offset_z":"float","timeout_ms":"int"},"description":"Navigate to a pose above the target with vertical offset."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"string","tolerance":"float","timeout_ms":"int"},"description":"Close-in approach with fine alignment."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"string","strategy":"string","result_key":"string"},"description":"Compute grasp pose using the chosen strategy and store it."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"string","timeout_ms":"int"},"description":"Execute grasp using stored pose and lift."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Verifies object is secured after grasp."},
    {"id":"SetBlackboard","type":"Action","ports":{"key":"string","value":"string"},"description":"Stores a symbolic placement pose."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"string","max_depth":"float","force_threshold":"float","timeout_ms":"int"},"description":"Lower tool until contact within thresholds."},
    {"id":"PlaceAt","type":"Action","ports":{"pose_key":"string","yaw_deg":"int","press_force":"float","timeout_ms":"int"},"description":"Place object at pose with optional press."},
    {"id":"Retreat","type":"Action","ports":{"distance":"float","timeout_ms":"int"},"description":"Back off to a safe distance."}
  ],
  "tree_stats": {"nodes_total": 16, "actions": 13, "conditions": 2, "depth": 2},
  "failure_modes": [
    "White plate not detected or occluded",
    "Grasp fails or slips during lift",
    "Red plate pose inaccurate leading to misplacement",
    "Premature contact or no contact during lowering",
    "Timeouts due to unreachable poses"
  ],
  "recovery_strategy": [
    "Re-run detection with slight view change",
    "Recompute grasp with alternate strategy and retry",
    "Re-detect red plate and update place pose",
    "Adjust offset_z and repeat LowerUntilContact",
    "Abort safely if repeated failures occur"
  ],
  "assumptions": [
    "Frames show the white plate being lifted and moved toward the red plate; a top grasp is appropriate.",
    "Placement pose is approximated as the red plate center ('red_plate_center') stored in 'place_pose'.",
    "No explicit force/timing constraints are stated in the instruction; defaults chosen from allowed bins."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "White plate rests on red plate without tilt",
      "No collisions with workspace",
      "Robot retreats clear after release"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"white_plate","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"white_plate","offset_z":0.03,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"white_plate","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"grasp_wp","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"red_plate","offset_z":0.03,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "place",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.02,"force_threshold":10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"PlaceAt","attrs":{"pose_key":"place_pose","yaw_deg":0,"press_force":10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
