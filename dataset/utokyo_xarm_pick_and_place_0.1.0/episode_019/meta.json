{
  "dataset_id": "utokyo_xarm_pick_and_place_0.1.0",
  "episode_id": "episode_019",
  "task_summary": "Detect and pick the white plate, carry it, and place it onto the nearby red plate, then retreat.",
  "task_long_description": {
    "overview": "A table-mounted arm with a parallel gripper interacts with two dishes on a green mat: a white plate in the center area and a red plate at the lower-left. The robot must perceive the white plate, approach precisely, grasp it stably, transfer toward the red plate, and place it down with gentle contact before releasing and retreating. Visual evidence shows approach, lift/tilt, transit toward the red plate, and an empty work area post-placement. The behavior emphasizes robust perception (with retries), tight alignment, controlled descent, and a short retreat to clear the workspace.",
    "preconditions": [
      "Robot is powered, calibrated, and workspace is clear.",
      "White plate and red plate are present on the mat as seen in frames.",
      "Gripper operational and initially open.",
      "Camera view provides sufficient visibility for detection."
    ],
    "stepwise_plan": [
      "Open gripper and detect the white plate (with retries).",
      "Move above and align precisely to the white plate.",
      "Compute grasp and pick the white plate; verify grasp stability.",
      "Detect the red plate and move above it while carrying the white plate.",
      "Descend until contact, release the plate, and retreat."
    ],
    "success_criteria": [
      "White plate grasped without slipping.",
      "White plate placed on top of the red plate with visible contact.",
      "Gripper released and robot retreated to a safe pose."
    ],
    "failure_and_recovery": [
      "If detection fails, retry up to three times.",
      "If grasp is unstable, re-open gripper, recompute grasp, and retry pick.",
      "If contact not detected during placing, re-approach and repeat the place routine."
    ],
    "termination": "Tree succeeds when the white plate is released onto the red plate and the robot retreats."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_2","frame_1","frame_4","frame_5","frame_6","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.30,
      "frame_1": 0.62,
      "frame_2": 0.78,
      "frame_3": 0.93,
      "frame_4": 0.66,
      "frame_5": 0.71,
      "frame_6": 0.55,
      "frame_7": 0.40,
      "frame_8": 0.18
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "Plate is lifted/tilted in gripper near the red plate region, indicating successful grasp and transfer.",
        "predicts_next": "Placement onto the red plate is imminent.",
        "uncertainty_reduction": "high"
      },
      "frame_2": {
        "now_evidence": "End-effector aligned above the white plate, suggesting precise approach before grasp.",
        "predicts_next": "Grasp initiation.",
        "uncertainty_reduction": "medium"
      },
      "frame_5": {
        "now_evidence": "Robot near target area with white plate no longer visible centrally, consistent with placing.",
        "predicts_next": "Release and retreat.",
        "uncertainty_reduction": "medium"
      }
    }
  },
  "task_instruction": "Pick up a white plate, and then place it on the red plate.",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["white_plate","red_plate","robot_arm","gripper","table"],
  "objects_from_instruction": ["white_plate","red_plate"],
  "blackboard_keys": ["white_plate_grasp"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":"float","timeout_ms":"int"},"description":"Open the gripper to the specified width before grasping or to release after placing."},
    {"id":"DetectObject","type":"Action","ports":{"target":"string","timeout_ms":"int"},"description":"Run perception to localize the specified object with timeout and retries via decorator."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"string","offset_z":"float","timeout_ms":"int"},"description":"Move to a pose above the target object with vertical offset."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"string","strategy":"string","result_key":"string"},"description":"Compute a grasp pose for the target and store it to the blackboard."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"string","tolerance":"float","timeout_ms":"int"},"description":"Approach the target and refine alignment within tolerance."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"string","timeout_ms":"int"},"description":"Execute the grasp using a precomputed key."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Verify that the grasp is stable before transporting."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"string","max_depth":"float","force_threshold":"float","timeout_ms":"int"},"description":"Descend toward the surface until contact within limits, preparing for placement."},
    {"id":"Retreat","type":"Action","ports":{"distance":"float","timeout_ms":"int"},"description":"Back off from the placement area to a safe distance."}
  ],
  "tree_stats": {"nodes_total": 15, "actions": 11, "conditions": 1, "depth": 3},
  "failure_modes": [
    "White plate not detected or occluded",
    "Grasp fails or slips during lift",
    "Red plate not detected or partially out of view",
    "No contact sensed during descent, leading to misplacement"
  ],
  "recovery_strategy": [
    "Retry perception up to three times",
    "Re-open, recompute grasp, and attempt pick again",
    "Re-scan for red plate and re-approach",
    "Repeat controlled descent with adjusted offset"
  ],
  "assumptions": [
    "Frames suggest the final placement occurs near the red plate at lower-left; some placement steps may be partially off-camera.",
    "Using controlled descent (LowerUntilContact) instead of an explicit PlaceAt pose to match available actions.",
    "Red plate location is static throughout the episode."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Stable grasp of white plate, verified by condition",
      "White plate rests on red plate after release",
      "Robot retreats without disturbing plates"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"white_plate","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"white_plate","offset_z":0.02,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"white_plate","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"white_plate_grasp","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"red_plate","offset_z":0.05,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "place",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.03,"force_threshold":5.0,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
