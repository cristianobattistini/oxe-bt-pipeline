{
  "dataset_id": "utokyo_xarm_pick_and_place_0.1.0",
  "episode_id": "episode_077",
  "task_summary": "Pick the white plate and place it centered onto the red plate.",
  "task_long_description": {
    "overview": "A fixed-base manipulator with a parallel gripper must locate a white plate on a table, grasp it from above, and then transport and place it onto a nearby red plate seen in the scene frames. The behavior tree handles perception, grasp planning, compliant touchdown, release, and retreat. Visual evidence shows the arm approaching the white plate, lifting it, moving toward the red plate, making contact, and releasing before retreating. The plan emphasizes reliable perception with a fallback scan, a top grasp, gentle seating via contact detection, and a short retreat to clear the workspace.",
    "preconditions": ["Robot and cameras are operational", "Workspace contains a white plate and a red plate within reach", "Gripper calibrated and empty at start", "Collision map permits motion between plates"],
    "stepwise_plan": ["Open gripper and ensure visibility of the white plate", "Detect and localize the white plate; compute a top grasp", "Approach above the plate, align, and execute the pick", "Verify grasp, then move above the red plate", "Lower until contact, place with light press, open gripper", "Retreat to a safe distance"],
    "success_criteria": ["White plate is released and resting on the red plate with no slip", "No collisions during approach, transfer, or retreat", "Perception and grasp are verified before transfer"],
    "failure_and_recovery": ["If the plate is not visible, perform a spiral scan", "If grasp fails, recompute and retry pick sequence", "If early contact occurs during approach, retreat slightly and realign", "If placement contact not detected, lower again with small depth"],
    "termination": "Tree succeeds after release and retreat complete without active faults"
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "Pick up a white plate, and then place it on the red plate.",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["white_plate","red_plate","table","xarm","gripper"],
  "objects_from_instruction": ["white_plate","red_plate"],
  "blackboard_keys": ["white_plate_grasp","red_plate_center"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":"0.09","timeout_ms":"800"},"description":"Ensure gripper is open before approach"},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"white_plate"},"description":"Check if white plate is currently visible"},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"white_plate","pattern":"spiral","max_attempts":"3","timeout_ms":"1500"},"description":"Active scan to re-acquire the plate if not visible"},
    {"id":"DetectObject","type":"Action","ports":{"target":"white_plate","timeout_ms":"1200"},"description":"Detect and localize the white plate"},
    {"id":"MoveAbove","type":"Action","ports":{"target":"white_plate","offset_z":"0.05","timeout_ms":"1200"},"description":"Move to pre-grasp above the plate"},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"white_plate","strategy":"top","result_key":"white_plate_grasp"},"description":"Compute a top grasp pose and store on blackboard"},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"white_plate","tolerance":"0.005","timeout_ms":"1500"},"description":"Refine alignment before grasp"},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"white_plate_grasp","timeout_ms":"1200"},"description":"Execute grasp and lift"},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Verify grasp stability"},
    {"id":"ObjectInGripper","type":"Condition","ports":{"target":"white_plate"},"description":"Confirm the object is held"},
    {"id":"MoveAbove","type":"Action","ports":{"target":"red_plate","offset_z":"0.08","timeout_ms":"1500"},"description":"Move above the red plate for placement"},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":"0.05","force_threshold":"10","timeout_ms":"1200"},"description":"Compliantly descend until contact"},
    {"id":"PlaceAt","type":"Action","ports":{"pose_key":"red_plate_center","yaw_deg":"0","press_force":"10","timeout_ms":"1200"},"description":"Place and lightly press onto the red plate"},
    {"id":"OpenGripper","type":"Action","ports":{"width":"0.09","timeout_ms":"800"},"description":"Release the plate"},
    {"id":"Retreat","type":"Action","ports":{"distance":"0.1","timeout_ms":"800"},"description":"Retreat to a safe pose"}
  ],
  "tree_stats": {"nodes_total": 17, "actions": 12, "conditions": 3, "depth": 3},
  "failure_modes": ["Target not detected", "Grasp slip during lift", "Premature contact during approach", "Incorrect placement pose leading to off-center placement"],
  "recovery_strategy": ["Fallback scan to regain visibility", "Recompute grasp and retry pick", "Retreat slightly and realign if contact triggers early", "Re-detect red plate pose and repeat placement"],
  "assumptions": ["Frames show successful pick, transfer, and placement of the white plate onto the red plate; object names mapped as white_plate and red_plate", "No explicit speed/force adjectives in instruction; default bins used", "Contact sheet perspective may slightly distort alignment but does not change task intent"],
  "evaluation_notes": {
    "expected_success_criteria": ["White plate resting on red plate after release", "No collisions and stable grasp until placement"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"white_plate","pattern":"spiral","max_attempts":3,"timeout_ms":1500}},
      "active_path_ids": ["Sequence","Fallback","ScanForTarget"]
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"white_plate","offset_z":0.05,"timeout_ms":1200}},
      "active_path_ids": ["Sequence","MoveAbove"]
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"white_plate","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": ["Sequence","ApproachAndAlign"]
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"white_plate_grasp","timeout_ms":1200}},
      "active_path_ids": ["Sequence","Pick"]
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"red_plate","offset_z":0.08,"timeout_ms":1500}},
      "active_path_ids": ["Sequence","MoveAbove"]
    },
    {
      "frame": "frame_5",
      "phase": "place",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.05,"force_threshold":10,"timeout_ms":1200}},
      "active_path_ids": ["Sequence","LowerUntilContact"]
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":800}},
      "active_path_ids": ["Sequence","OpenGripper"]
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": ["Sequence","Retreat"]
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": ["Sequence","Retreat"]
    }
  ]
}
