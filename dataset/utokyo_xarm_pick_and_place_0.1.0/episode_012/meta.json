{
  "dataset_id": "utokyo_xarm_pick_and_place_0.1.0",
  "episode_id": "episode_012",
  "task_summary": "Detect and grasp the white plate, then move and place it centered on the red plate, release, and retreat.",
  "task_long_description": {
    "overview": "A fixed-base manipulator with a parallel gripper must relocate a white plate onto a nearby red plate. The contact sheet shows approach to the white plate, a top grasp, transport across the workspace, and a release near the red plate. The BT organizes perception, motion, grasp execution, placement with a light press, and a safe retreat. Timeouts and tight alignment are used to ensure reliability without excessive waiting.",
    "preconditions": [
      "Robot is homed and gripper operational",
      "White plate and red plate are on the workspace and reachable",
      "Camera/pose estimation provides detections for 'white_plate' and 'red_plate'"
    ],
    "stepwise_plan": [
      "Open gripper and detect the white plate",
      "Move above the white plate, compute grasp, align and pick",
      "Verify grasp stability",
      "Detect and move above the red plate",
      "Set placement pose over the red plate and place",
      "Open gripper to release and retreat"
    ],
    "success_criteria": [
      "White plate lies on top of the red plate with no slip",
      "Gripper opens and robot retreats without collisions",
      "Perception and grasp complete within allotted timeouts"
    ],
    "failure_and_recovery": [
      "If detection fails, retry detection or rescan the area (future ScanForTarget).",
      "If grasp is unstable, reopen, re-approach, and repeat pick sequence.",
      "If placement contact not achieved, reattempt PlaceAt with a slight offset."
    ],
    "termination": "End after successful release on the red plate and a short retreat."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "Pick up a white plate, and then place it on the red plate.",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["white_plate","red_plate","table","robot_arm","gripper"],
  "objects_from_instruction": ["white plate","red plate"],
  "blackboard_keys": ["grasp_white_plate","place_pose"],
  "node_specs": [
    {"id":"OpenGripper","type":"Action","ports":{"width":"0.09","timeout_ms":800},"description":"Ensure gripper is open before approach / for release."},
    {"id":"DetectObject","type":"Action","ports":{"target":"white_plate","timeout_ms":1200},"description":"Detect the white plate."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"white_plate","offset_z":"0.05","timeout_ms":1200},"description":"Hover over the white plate."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"white_plate","strategy":"top","result_key":"grasp_white_plate"},"description":"Compute top grasp pose for the plate."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"white_plate","tolerance":0.01,"timeout_ms":1200},"description":"Refine alignment for grasp."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"grasp_white_plate","timeout_ms":1200},"description":"Execute grasp."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Check grasp stability."},
    {"id":"DetectObject","type":"Action","ports":{"target":"red_plate","timeout_ms":1200},"description":"Detect the red plate."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"red_plate","offset_z":"0.05","timeout_ms":1200},"description":"Hover over the red plate."},
    {"id":"SetBlackboard","type":"Action","ports":{"key":"place_pose","value":"red_plate_center"},"description":"Set placement pose key."},
    {"id":"PlaceAt","type":"Action","ports":{"pose_key":"place_pose","yaw_deg":0,"press_force":10.0,"timeout_ms":1200},"description":"Place above red plate with light press."},
    {"id":"OpenGripper","type":"Action","ports":{"width":"0.09","timeout_ms":800},"description":"Release the plate."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Back off safely."}
  ],
  "tree_stats": {"nodes_total": 14, "actions": 12, "conditions": 1, "depth": 2},
  "failure_modes": [
    "White plate not detected",
    "Grasp fails or slips",
    "Collision or misalignment during placement",
    "Red plate not detected"
  ],
  "recovery_strategy": [
    "Re-detect targets and re-approach",
    "Reopen gripper and recompute grasp pose",
    "Adjust placement pose and retry",
    "Retreat and replan if contact forces spike"
  ],
  "assumptions": [
    "Frames suggest a top grasp of a flat white plate and a placement near/on a red plate; exact placement pose is approximated with a symbolic key 'red_plate_center'.",
    "Press force is set to 10.0 as a light seating; actual controller may tune it."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "White plate is supported by the red plate after release",
      "No motion of the white plate after gripper opens",
      "Robot ends in a safe, non-contact pose"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"white_plate","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"white_plate","offset_z":0.05,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"white_plate","tolerance":0.01,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"grasp_white_plate","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"red_plate","offset_z":0.05,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "place",
      "active_leaf": {"id":"PlaceAt","attrs":{"pose_key":"place_pose","yaw_deg":0,"press_force":10.0,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"OpenGripper","attrs":{"width":0.09,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
