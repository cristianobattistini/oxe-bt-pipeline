{
  "dataset_id": "utokyo_xarm_pick_and_place_0.1.0",
  "episode_id": "episode_027",
  "task_summary": "Detect and grasp the white plate, then place it centered on the red plate and retreat.",
  "task_long_description": {
    "overview": "A stationary xArm with a parallel gripper operates on a tabletop containing a white plate and a red plate. The goal is to pick up the white plate and neatly place it on top of the red plate. The robot first perceives the white plate, approaches from above with the gripper opened, computes a grasp, and executes a pick. After verifying a stable grasp, it detects the red plate, moves above it, lowers until contact, and performs a precise place with light seating force. Finally, it opens the gripper and retreats, leaving the white plate resting on the red plate.",
    "preconditions": [
      "White plate and red plate are visible on the workspace",
      "Robot is homed and gripper functional",
      "Collision map allows vertical approach and retreat near plates"
    ],
    "stepwise_plan": [
      "Perceive and localize the white plate",
      "Move above the white plate, open gripper, compute grasp, align and pick",
      "Verify grasp stability",
      "Perceive and localize the red plate and cache a placement key",
      "Move above the red plate, lower until contact and place",
      "Open gripper and retreat to a safe height"
    ],
    "success_criteria": [
      "White plate is fully supported by and roughly centered on the red plate",
      "Gripper released and no object slip after release",
      "Robot ends in a safe, non-colliding pose"
    ],
    "failure_and_recovery": [
      "If white plate not detected: re-perceive or scan area",
      "If grasp fails: recompute grasp pose and retry pick",
      "If contact not detected while placing: increase max depth slightly and retry lowering",
      "If placement misaligned: retreat, re-approach, and place again"
    ],
    "termination": "End after successful release on the red plate and retreat to safe distance."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.15, "frame_1": 0.47, "frame_2": 0.62, "frame_3": 0.93,
      "frame_4": 0.40, "frame_5": 0.85, "frame_6": 0.58, "frame_7": 0.24, "frame_8": 0.06
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "Gripper makes first secure contact with the white plate near the red plate, indicating the grasp event.",
        "predicts_next": "Successful lift/transfer should follow; confirms pick success.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "Pick up a white plate, and then place it on the red plate.",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": 1200,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["white_plate","red_plate","xarm_gripper","table"],
  "objects_from_instruction": ["white plate","red plate"],
  "blackboard_keys": ["white_plate_grasp","red_plate_center"],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"white_plate","timeout_ms":1200},"description":"Detect and localize the white plate."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"white_plate","offset_z":0.03,"timeout_ms":1500},"description":"Move to a pregrasp pose above the white plate."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":500},"description":"Prepare gripper for grasp."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"white_plate","strategy":"pinch","result_key":"white_plate_grasp"},"description":"Plan grasp and store on blackboard."},
    {"id":"PoseAvailable","type":"Condition","ports":{"key":"white_plate_grasp"},"description":"Verify grasp pose is available."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"white_plate","tolerance":0.005,"timeout_ms":1500},"description":"Align tool to grasp the plate."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"white_plate_grasp","timeout_ms":1200},"description":"Execute grasp and lift."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Confirm object is stably grasped."},
    {"id":"DetectObject","type":"Action","ports":{"target":"red_plate","timeout_ms":1200},"description":"Detect and localize the red plate."},
    {"id":"SetBlackboard","type":"Action","ports":{"key":"red_plate_center","value":"detected_pose"},"description":"Cache placement pose key for the red plate."},
    {"id":"PoseAvailable","type":"Condition","ports":{"key":"red_plate_center"},"description":"Ensure placement pose is available."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"red_plate","offset_z":0.03,"timeout_ms":1500},"description":"Move above target placement area."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.04,"force_threshold":10,"timeout_ms":1500},"description":"Descend gently until surface contact."},
    {"id":"PlaceAt","type":"Action","ports":{"pose_key":"red_plate_center","yaw_deg":0,"press_force":10,"timeout_ms":1200},"description":"Place white plate centered on red plate."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.08,"timeout_ms":500},"description":"Release the plate."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":1200},"description":"Back off to a safe pose."}
  ],
  "tree_stats": {"nodes_total": 17, "actions": 13, "conditions": 3, "depth": 2},
  "failure_modes": [
    "White plate not detected or occluded",
    "Grasp slips due to low friction",
    "Collision or premature contact during placement",
    "Red plate pose inaccurate causing misalignment"
  ],
  "recovery_strategy": [
    "Re-run DetectObject with another view; optionally widen search",
    "Recompute grasp and retry Pick",
    "Increase max_depth slightly and repeat LowerUntilContact",
    "Retreat, re-center above red plate, and re-place"
  ],
  "assumptions": [
    "The red plate center can be approximated from detection and stored as 'red_plate_center'.",
    "Yaw is not critical for a circular plate; set to 0.",
    "Frames show the white plate near/over the red plate during pick and place; minor occlusions may hide exact contact."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "White plate rests on red plate with no gripper contact after release",
      "No object motion after retreat",
      "No collisions during approach/retreat"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"white_plate","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"white_plate","offset_z":0.03,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"white_plate","tolerance":0.005,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"white_plate_grasp","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "grasp",
      "active_leaf": {"id":"IsGraspStable","attrs":{}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"red_plate","offset_z":0.03,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.04,"force_threshold":10,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"PlaceAt","attrs":{"pose_key":"red_plate_center","yaw_deg":0,"press_force":10,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    }
  ]
}
