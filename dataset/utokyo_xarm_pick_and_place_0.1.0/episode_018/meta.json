{
  "dataset_id": "utokyo_xarm_pick_and_place_0.1.0",
  "episode_id": "episode_018",
  "task_summary": "Robot picks up the white plate and places it onto the red plate, then retreats.",
  "task_long_description": {
    "overview": "A fixed-base manipulator with a parallel gripper operates on a tabletop containing a white plate and a red plate. The goal is to grasp the white plate by its rim and relocate it so it rests on top of the red plate. The robot must perceive both plates, approach with a safe vertical offset, compute a rim grasp, secure the object, transport it above the red plate, and execute a careful placement with light contact before releasing and retreating.",
    "preconditions": ["Workspace clear of obstructions near plates", "Gripper functional and calibrated", "Camera provides view of both plates", "Robot within reach of both targets"],
    "stepwise_plan": ["Detect white plate", "Open gripper and move above white plate", "Compute grasp and align precisely", "Pick and verify grasp stability", "Lift/retreat from table", "Detect red plate and set place pose key", "Move and align above red plate", "Lower until contact, place, open gripper", "Retreat to a safe height"],
    "success_criteria": ["White plate ends centered or stably resting on red plate", "No slip after release", "No collisions with table or arm during motion", "Gripper fully opens after placement"],
    "failure_and_recovery": ["If detection fails, re-perceive and re-approach", "If alignment errors occur, re-run ApproachAndAlign", "If grasp unstable, open and retry ComputeGraspPoseâ†’Pick", "If contact too early, retreat slightly and reattempt placement"],
    "termination": "Terminate after releasing the plate and performing the final retreat."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "Pick up a white plate, and then place it on the red plate.",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["white_plate", "red_plate", "robot_gripper", "tabletop"],
  "objects_from_instruction": ["white_plate", "red_plate"],
  "blackboard_keys": ["grasp_white_plate", "place_pose_key"],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"white_plate","timeout_ms":800},"description":"Detect the white plate in the scene."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":400},"description":"Prepare gripper to approach the plate rim."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"white_plate","offset_z":0.05,"timeout_ms":1200},"description":"Move above the white plate with vertical clearance."},
    {"id":"ComputeGraspPose","type":"Action","ports":{"target":"white_plate","strategy":"pinch","result_key":"grasp_white_plate"},"description":"Compute rim grasp for the plate."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"white_plate","tolerance":0.005,"timeout_ms":1200},"description":"Refine pose to meet tight alignment before grasping."},
    {"id":"Pick","type":"Action","ports":{"grasp_key":"grasp_white_plate","timeout_ms":1500},"description":"Execute grasp using the computed key."},
    {"id":"IsGraspStable","type":"Condition","ports":{},"description":"Verify the grasp is stable before transport."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Lift the object to a safe height."},
    {"id":"DetectObject","type":"Action","ports":{"target":"red_plate","timeout_ms":800},"description":"Detect the destination (red plate)."},
    {"id":"SetBlackboard","type":"Action","ports":{"key":"place_pose_key","value":"red_plate_center"},"description":"Define symbolic place pose key for placement."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"red_plate","offset_z":0.08,"timeout_ms":1500},"description":"Move above the red plate."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"red_plate","tolerance":0.01,"timeout_ms":1200},"description":"Align above the red plate for placement."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"slow","max_depth":0.03,"force_threshold":10.0,"timeout_ms":1200},"description":"Lower gently until contact is detected."},
    {"id":"PlaceAt","type":"Action","ports":{"pose_key":"place_pose_key","yaw_deg":0,"press_force":10.0,"timeout_ms":1200},"description":"Place the plate onto the red plate."},
    {"id":"OpenGripper","type":"Action","ports":{"width":0.09,"timeout_ms":500},"description":"Release the plate."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Retreat to a safe position after placement."}
  ],
  "tree_stats": {"nodes_total": 17, "actions": 15, "conditions": 1, "depth": 2},
  "failure_modes": ["White plate not detected", "Grasp slips due to low friction", "Collision with plate edge during approach", "Premature contact while lowering over red plate"],
  "recovery_strategy": ["Re-run detection and re-approach", "Open gripper and recompute grasp", "Back off with Retreat then re-align", "Slightly increase offset_z and repeat LowerUntilContact"],
  "assumptions": ["Frames suggest the white plate is grasped by its rim and moved toward the red plate; exact final placement pose is inferred and stored under 'place_pose_key' as red_plate_center.", "Some intermediate motions (e.g., transport) are abstracted by MoveAbove/Retreat."],
  "evaluation_notes": {
    "expected_success_criteria": ["Plate rests stably on red plate; no slip after release", "No collisions; gripper fully opens at end"],
    "test_scenarios": ["happy path", "object_missing", "grasp_fail", "perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"white_plate","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"white_plate","offset_z":0.05,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"white_plate","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "grasp",
      "active_leaf": {"id":"Pick","attrs":{"grasp_key":"grasp_white_plate","timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"red_plate","offset_z":0.08,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"LowerUntilContact","attrs":{"speed":"slow","max_depth":0.03,"force_threshold":10.0,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"PlaceAt","attrs":{"pose_key":"place_pose_key","yaw_deg":0,"press_force":10.0,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
