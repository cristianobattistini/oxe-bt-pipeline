{
  "dataset_id": "columbia_cairlab_pusht_real_0.1.0",
  "episode_id": "episode_028",
  "task_summary": "Detect the T block, approach and align the circular end-effector, establish contact, push the block toward the target zone, verify arrival, then retreat.",
  "task_long_description": {
    "overview": "A tabletop scene shows a T-shaped block and a robot arm with a circular blue tool. The objective is to push the T block to a fixed target area. The behavior tree first ensures the block is perceived, then moves above and aligns yaw, approaches with tight tolerance, lowers to make contact, performs a directional push of fixed distance, verifies the block is at the target, and finally retreats to clear the workspace. Timeouts are discrete and retries are used for robust perception.",
    "preconditions": [
      "Workspace is clear around the T block",
      "Robot initialized with known kinematics and calibrated camera",
      "Target area (green marker) defined as symbolic pose 'target_zone'"
    ],
    "stepwise_plan": [
      "If the T block is not immediately visible, scan to find it",
      "Detect and localize the block",
      "Move above the block and orient the tool",
      "Approach and align with tight tolerance",
      "Lower until contact is detected",
      "Push the block in the planned direction toward the target",
      "Verify the block is at 'target_zone'",
      "Retreat to a safe distance"
    ],
    "success_criteria": [
      "T block center enters and remains within 'target_zone'",
      "No loss of contact or excessive slip during push",
      "End-effector retreats without collision"
    ],
    "failure_and_recovery": [
      "Perception failure: perform spiral scan and retry detection",
      "Misalignment: re-approach with tight tolerance",
      "Insufficient contact: lower again until contact",
      "Under/overshoot: perform an additional push if verification fails (not shown here)"
    ],
    "termination": "Tree ends when 'IsAt(target_zone)' succeeds after push and the arm has executed the retreat."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "Tool is close to the block; contact/alignment cues are strongest here.",
        "predicts_next": "A push actuation should follow after confirming contact.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "The task requires pushing a T-shaped block (gray) to a fixed target (green) with a circular end-effector (blue). Both observation and control frequencies are 10Hz.",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["t_block", "target_zone", "end_effector", "table"],
  "objects_from_instruction": ["t_block", "target_zone", "end_effector"],
  "blackboard_keys": ["t_block", "target_zone", "toward_goal"],
  "node_specs": [
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"t_block"},"description":"Quick visibility gate before scanning."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"t_block","pattern":"spiral","max_attempts":3,"timeout_ms":1200},"description":"Active search if the block is not visible."},
    {"id":"DetectObject","type":"Action","ports":{"target":"t_block","timeout_ms":800},"description":"Localize the T block."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"t_block","offset_z":0.03,"timeout_ms":1200},"description":"Pre-push height positioning."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":90},"description":"Orient tool to align with push direction."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"t_block","tolerance":0.01,"timeout_ms":1200},"description":"In-plane approach with tight tolerance."},
    {"id":"LowerUntilContact","type":"Action","ports":{"speed":"normal","max_depth":0.02,"force_threshold":2.0,"timeout_ms":800},"description":"Descend until contact is sensed."},
    {"id":"ContactDetected","type":"Condition","ports":{"force_threshold":2.0},"description":"Verify contact before pushing."},
    {"id":"Push","type":"Action","ports":{"target":"toward_goal","distance":0.1,"direction_deg":0,"timeout_ms":1500},"description":"Execute the push toward the goal."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.05,"timeout_ms":800},"description":"Back off to clear the object."},
    {"id":"IsAt","type":"Condition","ports":{"target":"target_zone"},"description":"Verify block reached the target."}
  ],
  "tree_stats": {"nodes_total": 14, "actions": 8, "conditions": 3, "depth": 4},
  "failure_modes": [
    "Block not detected due to glare or occlusion",
    "Yaw misalignment causing lateral slip",
    "Insufficient contact leading to ineffective push",
    "Overshoot or undershoot of target zone"
  ],
  "recovery_strategy": [
    "Retry spiral scan and detection",
    "Re-run approach-and-align with tight tolerance",
    "Lower again to re-establish contact",
    "Perform a corrective push if target verification fails"
  ],
  "assumptions": [
    "Frames show a red T block; instruction mentions gray. Treated as the same object.",
    "Green target zone not visible in frames; assumed off-camera as 'target_zone'.",
    "Push direction assumed at 0Â° relative to camera frame based on object pose cues.",
    "Observation/control at 10 Hz does not change discrete timeouts; standard bins used."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Successful detection followed by aligned contact and a single effective push placing the block in 'target_zone'."
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"t_block","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"t_block","offset_z":0.03,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"t_block","tolerance":0.01,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"ContactDetected","attrs":{"force_threshold":2.0}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "transfer",
      "active_leaf": {"id":"Push","attrs":{"target":"toward_goal","distance":0.1,"direction_deg":0,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"Push","attrs":{"target":"toward_goal","distance":0.1,"direction_deg":0,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "place",
      "active_leaf": {"id":"IsAt","attrs":{"target":"target_zone"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.05,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.05,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}
