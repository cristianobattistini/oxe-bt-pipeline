{
  "dataset_id": "columbia_cairlab_pusht_real_0.1.0",
  "episode_id": "episode_080",
  "task_summary": "Detect the T-shaped block and the goal, approach and align, then push the block toward the goal area and retreat.",
  "task_long_description": {
    "overview": "A fixed-base manipulator with a circular tool must push a T-shaped block across a tabletop to a marked goal region. The plan begins with perception of both the block and the goal, followed by an overhead approach and fine alignment. The tool yaw is set to a lateral orientation to execute a straight push. After pushing a set distance toward the goal outline, the system verifies goal attainment and safely retreats. Timeouts are modest to accommodate 10 Hz sensing/control and limit dwell.",
    "preconditions": [
      "Workspace is clear and calibrated",
      "Block and goal region are within reach and visible",
      "End-effector radius suitable for non-grasp pushing",
      "Controller running at ~10 Hz"
    ],
    "stepwise_plan": [
      "Detect the T-block; retry if necessary.",
      "Confirm or search for the goal region.",
      "Move above the block and align precisely.",
      "Set tool yaw to lateral orientation and verify.",
      "Push the block toward the goal for a fixed distance.",
      "Check goal condition and retreat."
    ],
    "success_criteria": [
      "Block lies within the goal outline/tolerance",
      "No loss of contact leading to unintended motion",
      "Robot ends in a safe, retracted pose"
    ],
    "failure_and_recovery": [
      "If detection fails: scan for the goal and retry perception",
      "If alignment drifts: re-approach and re-align",
      "If push undershoots: repeat push segment",
      "On timeout: abort and retreat"
    ],
    "termination": "Terminate when the goal condition is satisfied and the arm has executed the retreat."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0", "frame_8"],
    "scores": {
      "frame_0": 0.12, "frame_1": 0.34, "frame_2": 0.56, "frame_3": 0.92,
      "frame_4": 0.28, "frame_5": 0.80, "frame_6": 0.49, "frame_7": 0.18, "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "first stable contact and alignment cue visible",
        "predicts_next": "push actuation expected; confirms goal direction",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "The task requires pushing a T-shaped block (gray) to a fixed target (green) with a circular end-effector (blue). Both observation and control frequencies are 10Hz.",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": null,
    "tolerance": null,
    "retry_attempts": null
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7", "frame_8"],
  "objects": ["t_block","goal","table","robot_arm","end_effector"],
  "objects_from_instruction": ["t_block","target","end_effector"],
  "blackboard_keys": ["t_block_pose","goal_region","aligned_yaw"],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"t_block","timeout_ms":800},"description":"Perceive the T-block; retried for robustness."},
    {"id":"IsObjectVisible","type":"Condition","ports":{"target":"goal"},"description":"Quick check that the goal is already visible."},
    {"id":"ScanForTarget","type":"Action","ports":{"target":"goal","pattern":"line","max_attempts":3,"timeout_ms":800},"description":"Fallback scan if the goal is not visible."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"t_block","offset_z":0.02,"timeout_ms":1200},"description":"Move to a safe height above the block."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"t_block","tolerance":0.01,"timeout_ms":1200},"description":"Close in and align to the push face."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":90},"description":"Rotate tool to a lateral orientation for pushing."},
    {"id":"AtOrientation","type":"Condition","ports":{"yaw_deg":90},"description":"Verify commanded yaw achieved."},
    {"id":"Push","type":"Action","ports":{"target":"t_block","distance":0.2,"direction_deg":180,"timeout_ms":1500},"description":"Execute the pushing motion toward the goal."},
    {"id":"IsAt","type":"Condition","ports":{"target":"goal"},"description":"Check that block/end-effector reached the goal area."},
    {"id":"Retreat","type":"Action","ports":{"distance":0.1,"timeout_ms":800},"description":"Back off to a safe distance."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":400},"description":"Brief pause to stabilize after motion."}
  ],
  "tree_stats": {"nodes_total": 14, "actions": 8, "conditions": 3, "depth": 3},
  "failure_modes": [
    "Perception misses block or goal",
    "Misalignment causes tool to slip off the block",
    "Insufficient push distance",
    "Timeouts due to occlusions or collisions"
  ],
  "recovery_strategy": [
    "Retry block detection",
    "Scan for the goal via fallback",
    "Re-approach and repeat push with same parameters",
    "On persistent failure, retreat and stop"
  ],
  "assumptions": [
    "Frames show a red T-block and a blue outline rather than gray/green as stated; we followed the frames.",
    "Push direction assumed generally leftward toward the drawn outline; snapped to 180Â°.",
    "Goal check uses IsAt('goal') as a proxy for the block within the outline."
  ],
  "evaluation_notes": {
    "expected_success_criteria": ["T-block overlaps the goal outline after push", "No unintended rotation beyond tolerance", "Robot ends retracted"],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"t_block","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"ScanForTarget","attrs":{"target":"goal","pattern":"line","max_attempts":3,"timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"t_block","timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "approach",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"t_block","tolerance":0.01,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "verify",
      "active_leaf": {"id":"AtOrientation","attrs":{"yaw_deg":90}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"Push","attrs":{"target":"t_block","distance":0.2,"direction_deg":180,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"Push","attrs":{"target":"t_block","distance":0.2,"direction_deg":180,"timeout_ms":1500}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "place",
      "active_leaf": {"id":"IsAt","attrs":{"target":"goal"}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":800}},
      "active_path_ids": []
    }
  ]
}

