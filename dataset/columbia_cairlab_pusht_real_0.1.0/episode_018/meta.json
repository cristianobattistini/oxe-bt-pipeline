{
  "dataset_id": "columbia_cairlab_pusht_real_0.1.0",
  "episode_id": "episode_018",
  "task_summary": "Perceive the T block and target outline, align the circular tool, perform two push segments to bring the block onto the target, then retreat.",
  "task_long_description": {
    "overview": "A UR-type arm with a circular/rounded end-effector must push a T-shaped block across a planar workspace until it lies within a fixed T-shaped target outline. The sequence begins with visual detection of both the block and the target, followed by a short approach from above and fine alignment. The tool yaw is set to a convenient angle and the robot performs segmented pushes to steer and translate the block. After reaching the target region, the robot backs off and waits. Observations and control run effectively at 10 Hz.",
    "preconditions": [
      "Workspace is clear; block and target outline are present and visible",
      "Robot kinematics calibrated; tool is free of collisions",
      "Table is planar with low friction variation",
      "Perception can localize block and target within camera FOV"
    ],
    "stepwise_plan": [
      "Detect T block and target outline.",
      "Move above the block and approach to contact alignment (tight tolerance).",
      "Set tool yaw for pushing.",
      "Execute first push segment to begin translation and coarse rotation.",
      "Re-align near the block.",
      "Execute second push segment to settle onto the target outline.",
      "Retreat and pause."
    ],
    "success_criteria": [
      "Block centroid and orientation place the T within the drawn target outline",
      "No collisions with environment other than intended contact",
      "Robot returns to a safe, non-contact pose"
    ],
    "failure_and_recovery": [
      "Object lost due to occlusion → re-run DetectObject with retries",
      "Misalignment causing slip → re-run ApproachAndAlign and adjust yaw",
      "Under/overshoot after first push → perform the second push segment",
      "Unexpected contact forces → retreat and re-approach"
    ],
    "termination": "After the second push, the robot retreats and waits; task ends once retreat and wait complete."
  },
  "frame_ranking": {
    "order": ["frame_3","frame_5","frame_2","frame_6","frame_1","frame_4","frame_7","frame_0","frame_8"],
    "scores": {
      "frame_0": 0.12,
      "frame_1": 0.34,
      "frame_2": 0.56,
      "frame_3": 0.92,
      "frame_4": 0.28,
      "frame_5": 0.80,
      "frame_6": 0.49,
      "frame_7": 0.18,
      "frame_8": 0.05
    },
    "rationale_per_frame": {
      "frame_3": {
        "now_evidence": "Tool is in close contact and aligned with the block’s stem; start of controlled push.",
        "predicts_next": "Forward push initiation is expected, confirming direction toward target.",
        "uncertainty_reduction": "high"
      }
    }
  },
  "task_instruction": "The task requires pushing a T-shaped block (gray) to a fixed target (green) with a circular end-effector (blue). Both observation and control frequencies are 10Hz.",
  "instruction_to_ports": {
    "force": null,
    "timeout_ms": 1200,
    "tolerance": 0.005,
    "retry_attempts": 3
  },
  "frame_source": "contact_sheet",
  "frame_order": ["frame_0","frame_1","frame_2","frame_3","frame_4","frame_5","frame_6","frame_7","frame_8"],
  "objects": ["t_block", "target_T_outline", "table", "robot_arm", "circular_end_effector"],
  "objects_from_instruction": ["T_block_gray", "target_green", "circular_end_effector_blue"],
  "blackboard_keys": ["push_dir"],
  "node_specs": [
    {"id":"DetectObject","type":"Action","ports":{"target":"string","timeout_ms":"int"},"description":"Perceive a named object within the scene under a time budget."},
    {"id":"MoveAbove","type":"Action","ports":{"target":"string","offset_z":"float","timeout_ms":"int"},"description":"Move to a pose vertically above a target with clearance offset."},
    {"id":"ApproachAndAlign","type":"Action","ports":{"target":"string","tolerance":"float","timeout_ms":"int"},"description":"Close-in motion to establish contact/pose alignment within tolerance."},
    {"id":"SetTCPYaw","type":"Action","ports":{"yaw_deg":"int"},"description":"Set end-effector yaw to a discrete angle."},
    {"id":"Push","type":"Action","ports":{"target":"string","distance":"float","direction_deg":"int","timeout_ms":"int"},"description":"Planar push of target by distance along given direction."},
    {"id":"Retreat","type":"Action","ports":{"distance":"float","timeout_ms":"int"},"description":"Back off from contact to a safe distance."},
    {"id":"Wait","type":"Action","ports":{"timeout_ms":"int"},"description":"Brief pause for stabilization."},
    {"id":"SetBlackboard","type":"Action","ports":{"key":"string","value":"string"},"description":"Write a key-value hint for downstream actions."}
  ],
  "tree_stats": {"nodes_total": 14, "actions": 11, "conditions": 0, "depth": 3},
  "failure_modes": [
    "Perception miss-detects block or target",
    "Push causes undesired rotation of T head",
    "Excess friction or slip leading to trajectory drift",
    "Workspace boundary contact"
  ],
  "recovery_strategy": [
    "Retry perception using RetryUntilSuccessful",
    "Re-run ApproachAndAlign with tighter tolerance",
    "Adjust yaw and perform an additional short push",
    "Retreat and re-approach if unexpected contact"
  ],
  "assumptions": [
    "Frames show a red T block and a light-blue target outline; instruction mentions gray block and green target—treated as the same entities.",
    "Direction angles are in table/world frame; 0° points +x, 90° +y.",
    "10 Hz rates are contextual and not explicit ports in the library."
  ],
  "evaluation_notes": {
    "expected_success_criteria": [
      "Block placed within target outline with small pose error",
      "No persistent contact after retreat",
      "All actions finish within timeout budgets"
    ],
    "test_scenarios": ["happy path","object_missing","grasp_fail","perception_noise"]
  },
  "timing": {"model_reported_tokens": null, "client_elapsed_ms": null},
  "local_annotations": [
    {
      "frame": "frame_0",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"t_block","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_1",
      "phase": "perceive",
      "active_leaf": {"id":"DetectObject","attrs":{"target":"t_target","timeout_ms":800}},
      "active_path_ids": []
    },
    {
      "frame": "frame_2",
      "phase": "approach",
      "active_leaf": {"id":"MoveAbove","attrs":{"target":"t_block","offset_z":0.03,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_3",
      "phase": "verify",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"t_block","tolerance":0.005,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_4",
      "phase": "verify",
      "active_leaf": {"id":"SetTCPYaw","attrs":{"yaw_deg":90}},
      "active_path_ids": []
    },
    {
      "frame": "frame_5",
      "phase": "transfer",
      "active_leaf": {"id":"Push","attrs":{"target":"t_block","distance":0.1,"direction_deg":45,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_6",
      "phase": "transfer",
      "active_leaf": {"id":"ApproachAndAlign","attrs":{"target":"t_block","tolerance":0.01,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_7",
      "phase": "retreat",
      "active_leaf": {"id":"Retreat","attrs":{"distance":0.1,"timeout_ms":1200}},
      "active_path_ids": []
    },
    {
      "frame": "frame_8",
      "phase": "retreat",
      "active_leaf": {"id":"Wait","attrs":{"timeout_ms":400}},
      "active_path_ids": []
    }
  ]
}
